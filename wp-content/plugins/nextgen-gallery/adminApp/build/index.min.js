(()=>{var e,t,n,r,a={338:(e,t,n)=>{"use strict";var r=n(795);t.H=r.createRoot,r.hydrateRoot},93:function(e,t,n){var r;r=e=>(()=>{"use strict";var t={899:t=>{t.exports=e}},n={};function r(e){var a=n[e];if(void 0!==a)return a.exports;var l=n[e]={exports:{}};return t[e](l,l.exports,r),l.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};return(()=>{r.r(a),r.d(a,{Component:()=>f,areCropsEqual:()=>o,centerCrop:()=>c,clamp:()=>i,containCrop:()=>d,convertToPercentCrop:()=>u,convertToPixelCrop:()=>m,default:()=>f,defaultCrop:()=>l,makeAspectCrop:()=>s,nudgeCrop:()=>g});var e=r(899),t=r.n(e);function n(e){var t,r,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=n(e[t]))&&(a&&(a+=" "),a+=r);else for(t in e)e[t]&&(a&&(a+=" "),a+=t);return a}const l={x:0,y:0,width:0,height:0,unit:"px"};function i(e,t,n){return Math.min(Math.max(e,t),n)}function o(e,t){return e.width===t.width&&e.height===t.height&&e.x===t.x&&e.y===t.y&&e.unit===t.unit}function s(e,t,n,r){const a=m(e,n,r);return e.width&&(a.height=a.width/t),e.height&&(a.width=a.height*t),a.y+a.height>r&&(a.height=r-a.y,a.width=a.height*t),a.x+a.width>n&&(a.width=n-a.x,a.height=a.width/t),"%"===e.unit?u(a,n,r):a}function c(e,t,n){const r=m(e,t,n);return r.x=(t-r.width)/2,r.y=(n-r.height)/2,"%"===e.unit?u(r,t,n):r}function u(e,t,n){return"%"===e.unit?{...l,...e,unit:"%"}:{unit:"%",x:e.x?e.x/t*100:0,y:e.y?e.y/n*100:0,width:e.width?e.width/t*100:0,height:e.height?e.height/n*100:0}}function m(e,t,n){return e.unit?"px"===e.unit?{...l,...e,unit:"px"}:{unit:"px",x:e.x?e.x*t/100:0,y:e.y?e.y*n/100:0,width:e.width?e.width*t/100:0,height:e.height?e.height*n/100:0}:{...l,...e,unit:"px"}}function d(e,t,n,r,a,l=0,i=0,o=r,s=a){const c={...e};let u=Math.min(l,r),m=Math.min(i,a),d=Math.min(o,r),g=Math.min(s,a);t&&(t>1?(u=i?i*t:u,m=u/t,d=o*t):(m=l?l/t:m,u=m*t,g=s/t)),c.y<0&&(c.height=Math.max(c.height+c.y,m),c.y=0),c.x<0&&(c.width=Math.max(c.width+c.x,u),c.x=0);const p=r-(c.x+c.width);p<0&&(c.x=Math.min(c.x,r-u),c.width+=p);const f=a-(c.y+c.height);if(f<0&&(c.y=Math.min(c.y,a-m),c.height+=f),c.width<u&&("sw"!==n&&"nw"!=n||(c.x-=u-c.width),c.width=u),c.height<m&&("nw"!==n&&"ne"!=n||(c.y-=m-c.height),c.height=m),c.width>d&&("sw"!==n&&"nw"!=n||(c.x-=d-c.width),c.width=d),c.height>g&&("nw"!==n&&"ne"!=n||(c.y-=g-c.height),c.height=g),t){const e=c.width/c.height;if(e<t){const e=Math.max(c.width/t,m);"nw"!==n&&"ne"!=n||(c.y-=e-c.height),c.height=e}else if(e>t){const e=Math.max(c.height*t,u);"sw"!==n&&"nw"!=n||(c.x-=e-c.width),c.width=e}}return c}function g(e,t,n,r){const a={...e};return"ArrowLeft"===t?"nw"===r?(a.x-=n,a.y-=n,a.width+=n,a.height+=n):"w"===r?(a.x-=n,a.width+=n):"sw"===r?(a.x-=n,a.width+=n,a.height+=n):"ne"===r?(a.y+=n,a.width-=n,a.height-=n):"e"===r?a.width-=n:"se"===r&&(a.width-=n,a.height-=n):"ArrowRight"===t&&("nw"===r?(a.x+=n,a.y+=n,a.width-=n,a.height-=n):"w"===r?(a.x+=n,a.width-=n):"sw"===r?(a.x+=n,a.width-=n,a.height-=n):"ne"===r?(a.y-=n,a.width+=n,a.height+=n):"e"===r?a.width+=n:"se"===r&&(a.width+=n,a.height+=n)),"ArrowUp"===t?"nw"===r?(a.x-=n,a.y-=n,a.width+=n,a.height+=n):"n"===r?(a.y-=n,a.height+=n):"ne"===r?(a.y-=n,a.width+=n,a.height+=n):"sw"===r?(a.x+=n,a.width-=n,a.height-=n):"s"===r?a.height-=n:"se"===r&&(a.width-=n,a.height-=n):"ArrowDown"===t&&("nw"===r?(a.x+=n,a.y+=n,a.width-=n,a.height-=n):"n"===r?(a.y+=n,a.height-=n):"ne"===r?(a.y+=n,a.width-=n,a.height-=n):"sw"===r?(a.x-=n,a.width+=n,a.height+=n):"s"===r?a.height+=n:"se"===r&&(a.width+=n,a.height+=n)),a}const p={capture:!0,passive:!1};class f extends e.PureComponent{constructor(){super(...arguments),this.docMoveBound=!1,this.mouseDownOnCrop=!1,this.dragStarted=!1,this.evData={startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0},this.componentRef=(0,e.createRef)(),this.mediaRef=(0,e.createRef)(),this.initChangeCalled=!1,this.state={cropIsActive:!1,newCropIsBeingDrawn:!1},this.onCropPointerDown=e=>{const{crop:t,disabled:n}=this.props,r=this.getBox();if(!t)return;const a=m(t,r.width,r.height);if(n)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const l=e.target.dataset.ord,i=Boolean(l);let o=e.clientX,s=e.clientY,c=a.x,u=a.y;if(l){const t=e.clientX-r.x,n=e.clientY-r.y;let i=0,m=0;"ne"===l||"e"==l?(i=t-(a.x+a.width),m=n-a.y,c=a.x,u=a.y+a.height):"se"===l||"s"===l?(i=t-(a.x+a.width),m=n-(a.y+a.height),c=a.x,u=a.y):"sw"===l||"w"==l?(i=t-a.x,m=n-(a.y+a.height),c=a.x+a.width,u=a.y):"nw"!==l&&"n"!=l||(i=t-a.x,m=n-a.y,c=a.x+a.width,u=a.y+a.height),o=c+r.x+i,s=u+r.y+m}this.evData={startClientX:o,startClientY:s,startCropX:c,startCropY:u,clientX:e.clientX,clientY:e.clientY,isResize:i,ord:l},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})},this.onComponentPointerDown=e=>{const{crop:t,disabled:n,locked:r,keepSelection:a,onChange:l}=this.props,i=this.getBox();if(n||r||a&&t)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const o=e.clientX-i.x,s=e.clientY-i.y,c={unit:"px",x:o,y:s,width:0,height:0};this.evData={startClientX:e.clientX,startClientY:e.clientY,startCropX:o,startCropY:s,clientX:e.clientX,clientY:e.clientY,isResize:!0},this.mouseDownOnCrop=!0,l(m(c,i.width,i.height),u(c,i.width,i.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})},this.onDocPointerMove=e=>{const{crop:t,disabled:n,onChange:r,onDragStart:a}=this.props,l=this.getBox();if(n||!t||!this.mouseDownOnCrop)return;e.cancelable&&e.preventDefault(),this.dragStarted||(this.dragStarted=!0,a&&a(e));const{evData:i}=this;let s;i.clientX=e.clientX,i.clientY=e.clientY,s=i.isResize?this.resizeCrop():this.dragCrop(),o(t,s)||r(m(s,l.width,l.height),u(s,l.width,l.height))},this.onComponentKeyDown=e=>{const{crop:t,disabled:n,onChange:r,onComplete:a}=this.props,l=this.getBox();if(n)return;const o=e.key;let s=!1;if(!t)return;const c=this.makePixelCrop(),d=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?f.nudgeStepLarge:e.shiftKey?f.nudgeStepMedium:f.nudgeStep;if("ArrowLeft"===o?(c.x-=d,s=!0):"ArrowRight"===o?(c.x+=d,s=!0):"ArrowUp"===o?(c.y-=d,s=!0):"ArrowDown"===o&&(c.y+=d,s=!0),s){e.cancelable&&e.preventDefault(),c.x=i(c.x,0,l.width-c.width),c.y=i(c.y,0,l.height-c.height);const t=m(c,l.width,l.height),n=u(c,l.width,l.height);r(t,n),a&&a(t,n)}},this.onHandlerKeyDown=(e,t)=>{const{aspect:n=0,crop:r,disabled:a,minWidth:l=0,minHeight:i=0,maxWidth:s,maxHeight:c,onChange:p,onComplete:y}=this.props,h=this.getBox();if(a||!r)return;if("ArrowUp"!==e.key&&"ArrowDown"!==e.key&&"ArrowLeft"!==e.key&&"ArrowRight"!==e.key)return;e.stopPropagation(),e.preventDefault();const _=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?f.nudgeStepLarge:e.shiftKey?f.nudgeStepMedium:f.nudgeStep,b=d(g(m(r,h.width,h.height),e.key,_,t),n,t,h.width,h.height,l,i,s,c);if(!o(r,b)){const e=u(b,h.width,h.height);p(b,e),y&&y(b,e)}},this.onDocPointerDone=e=>{const{crop:t,disabled:n,onComplete:r,onDragEnd:a}=this.props,l=this.getBox();this.unbindDocMove(),!n&&t&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,a&&a(e),r&&r(m(t,l.width,l.height),u(t,l.width,l.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))},this.onDragFocus=e=>{var t;null===(t=this.componentRef.current)||void 0===t||t.scrollTo(0,0)}}get document(){return document}getBox(){const e=this.mediaRef.current;if(!e)return{x:0,y:0,width:0,height:0};const{x:t,y:n,width:r,height:a}=e.getBoundingClientRect();return{x:t,y:n,width:r,height:a}}componentDidUpdate(e){const{crop:t,onComplete:n}=this.props;if(n&&!e.crop&&t){const{width:e,height:r}=this.getBox();e&&r&&n(m(t,e,r),u(t,e,r))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,p),this.document.addEventListener("pointerup",this.onDocPointerDone,p),this.document.addEventListener("pointercancel",this.onDocPointerDone,p),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,p),this.document.removeEventListener("pointerup",this.onDocPointerDone,p),this.document.removeEventListener("pointercancel",this.onDocPointerDone,p),this.docMoveBound=!1)}getCropStyle(){const{crop:e}=this.props;if(e)return{top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`}}dragCrop(){const{evData:e}=this,t=this.getBox(),n=this.makePixelCrop(),r=e.clientX-e.startClientX,a=e.clientY-e.startClientY;return n.x=i(e.startCropX+r,0,t.width-n.width),n.y=i(e.startCropY+a,0,t.height-n.height),n}getPointRegion(e){const{evData:t}=this,n=t.clientX-e.x,r=t.clientY-e.y<t.startCropY;return n<t.startCropX?r?"nw":"sw":r?"ne":"se"}resizeCrop(){const{evData:e}=this,t=this.getBox(),{aspect:n=0,minWidth:r=0,minHeight:a=0,maxWidth:l,maxHeight:i}=this.props,o=this.getPointRegion(t),s=this.makePixelCrop(),c=e.ord?e.ord:o,u=e.clientX-e.startClientX,m=e.clientY-e.startClientY,g={unit:"px",x:0,y:0,width:0,height:0};"ne"===o?(g.x=e.startCropX,g.width=u,n?(g.height=g.width/n,g.y=e.startCropY-g.height):(g.height=Math.abs(m),g.y=e.startCropY-g.height)):"se"===o?(g.x=e.startCropX,g.y=e.startCropY,g.width=u,g.height=n?g.width/n:m):"sw"===o?(g.x=e.startCropX+u,g.y=e.startCropY,g.width=Math.abs(u),g.height=n?g.width/n:m):"nw"===o&&(g.x=e.startCropX+u,g.width=Math.abs(u),n?(g.height=g.width/n,g.y=e.startCropY-g.height):(g.height=Math.abs(m),g.y=e.startCropY+m));const p=d(g,n,o,t.width,t.height,r,a,l,i);return n||f.xyOrds.indexOf(c)>-1?(s.x=p.x,s.y=p.y,s.width=p.width,s.height=p.height):f.xOrds.indexOf(c)>-1?(s.x=p.x,s.width=p.width):f.yOrds.indexOf(c)>-1&&(s.y=p.y,s.height=p.height),s}createCropSelection(){const{ariaLabels:e=f.defaultProps.ariaLabels,disabled:n,locked:r,renderSelectionAddon:a,ruleOfThirds:l,crop:i}=this.props,o=this.getCropStyle();if(i)return t().createElement("div",{style:o,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":e.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!n&&!r&&t().createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},t().createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),t().createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),t().createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),t().createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":e.nwDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"nw"),role:"button"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":e.nDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"n"),role:"button"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":e.neDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"ne"),role:"button"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":e.eDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"e"),role:"button"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":e.seDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"se"),role:"button"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":e.sDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"s"),role:"button"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":e.swDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"sw"),role:"button"}),t().createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":e.wDragHandle,onKeyDown:e=>this.onHandlerKeyDown(e,"w"),role:"button"})),a&&t().createElement("div",{className:"ReactCrop__selection-addon",onMouseDown:e=>e.stopPropagation()},a(this.state)),l&&t().createElement(t().Fragment,null,t().createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),t().createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}makePixelCrop(){const e={...l,...this.props.crop||{}},t=this.getBox();return m(e,t.width,t.height)}render(){const{aspect:e,children:r,circularCrop:a,className:l,crop:i,disabled:o,locked:s,style:c,ruleOfThirds:u}=this.props,{cropIsActive:m,newCropIsBeingDrawn:d}=this.state,g=i?this.createCropSelection():null,p=function(){for(var e,t,r=0,a="";r<arguments.length;)(e=arguments[r++])&&(t=n(e))&&(a&&(a+=" "),a+=t);return a}("ReactCrop",l,{"ReactCrop--active":m,"ReactCrop--disabled":o,"ReactCrop--locked":s,"ReactCrop--new-crop":d,"ReactCrop--fixed-aspect":i&&e,"ReactCrop--circular-crop":i&&a,"ReactCrop--rule-of-thirds":i&&u,"ReactCrop--invisible-crop":!this.dragStarted&&i&&!i.width&&!i.height});return t().createElement("div",{ref:this.componentRef,className:p,style:c},t().createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},r),g)}}f.xOrds=["e","w"],f.yOrds=["n","s"],f.xyOrds=["nw","ne","se","sw"],f.nudgeStep=1,f.nudgeStepMedium=10,f.nudgeStepLarge=100,f.defaultProps={ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}}})(),a})(),e.exports=r(n(609))},609:e=>{"use strict";e.exports=window.React},795:e=>{"use strict";e.exports=window.ReactDOM}},l={};function i(e){var t=l[e];if(void 0!==t)return t.exports;var n=l[e]={exports:{}};return a[e].call(n.exports,n,n.exports,i),n.exports}i.m=a,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var a=Object.create(null);i.r(a);var l={};e=e||[null,t({}),t([]),t(t)];for(var o=2&r&&n;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>l[e]=()=>n[e]);return l.default=()=>n,i.d(a,l),a},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce((t,n)=>(i.f[n](e,t),t),[])),i.u=e=>e+".index.min.js",i.miniCssF=e=>{},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},r="@envira/imagely-admin-app:",i.l=(e,t,a,l)=>{if(n[e])n[e].push(t);else{var o,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var m=c[u];if(m.getAttribute("src")==e||m.getAttribute("data-webpack")==r+a){o=m;break}}o||(s=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,i.nc&&o.setAttribute("nonce",i.nc),o.setAttribute("data-webpack",r+a),o.src=e),n[e]=[t];var d=(t,r)=>{o.onerror=o.onload=null,clearTimeout(g);var a=n[e];if(delete n[e],o.parentNode&&o.parentNode.removeChild(o),a&&a.forEach(e=>e(r)),t)return t(r)},g=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),s&&document.head.appendChild(o)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=n[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e={792:0};i.f.j=(t,n)=>{var r=i.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var a=new Promise((n,a)=>r=e[t]=[n,a]);n.push(r[2]=a);var l=i.p+i.u(t),o=new Error;i.l(l,n=>{if(i.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var a=n&&("load"===n.type?"missing":n.type),l=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+l+")",o.name="ChunkLoadError",o.type=a,o.request=l,r[1](o)}},"chunk-"+t,t)}};var t=(t,n)=>{var r,a,[l,o,s]=n,c=0;if(l.some(t=>0!==e[t])){for(r in o)i.o(o,r)&&(i.m[r]=o[r]);s&&s(i)}for(t&&t(n);c<l.length;c++)a=l[c],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0},n=self.webpackChunk_envira_imagely_admin_app=self.webpackChunk_envira_imagely_admin_app||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{"use strict";var e=i(338);function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,n,r){return(n=function(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var r={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},a=new class{#e=r;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},l="undefined"==typeof window||"Deno"in globalThis;function o(){}function s(e){return"number"==typeof e&&e>=0&&e!==1/0}function c(e,t){return Math.max(e+(t||0)-Date.now(),0)}function u(e,t){return"function"==typeof e?e(t):e}function m(e,t){return"function"==typeof e?e(t):e}function d(e,t){const{type:n="all",exact:r,fetchStatus:a,predicate:l,queryKey:i,stale:o}=e;if(i)if(r){if(t.queryHash!==p(i,t.options))return!1}else if(!y(t.queryKey,i))return!1;if("all"!==n){const e=t.isActive();if("active"===n&&!e)return!1;if("inactive"===n&&e)return!1}return!("boolean"==typeof o&&t.isStale()!==o||a&&a!==t.state.fetchStatus||l&&!l(t))}function g(e,t){const{exact:n,status:r,predicate:a,mutationKey:l}=e;if(l){if(!t.options.mutationKey)return!1;if(n){if(f(t.options.mutationKey)!==f(l))return!1}else if(!y(t.options.mutationKey,l))return!1}return!(r&&t.state.status!==r||a&&!a(t))}function p(e,t){return(t?.queryKeyHashFn||f)(e)}function f(e){return JSON.stringify(e,(e,t)=>x(t)?Object.keys(t).sort().reduce((e,n)=>(e[n]=t[n],e),{}):t)}function y(e,t){return e===t||typeof e==typeof t&&!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&Object.keys(t).every(n=>y(e[n],t[n]))}var h=Object.prototype.hasOwnProperty;function _(e,t){if(e===t)return e;const n=v(e)&&v(t);if(!(n||x(e)&&x(t)))return t;const r=(n?e:Object.keys(e)).length,a=n?t:Object.keys(t),l=a.length,i=n?new Array(l):{};let o=0;for(let s=0;s<l;s++){const l=n?s:a[s],c=e[l],u=t[l];if(c===u){i[l]=c,(n?s<r:h.call(e,l))&&o++;continue}if(null===c||null===u||"object"!=typeof c||"object"!=typeof u){i[l]=u;continue}const m=_(c,u);i[l]=m,m===c&&o++}return r===l&&o===r?e:i}function b(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function v(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function x(e){if(!w(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!!w(n)&&!!n.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype}function w(e){return"[object Object]"===Object.prototype.toString.call(e)}function E(e,t,n){return"function"==typeof n.structuralSharing?n.structuralSharing(e,t):!1!==n.structuralSharing?_(e,t):t}function C(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function N(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var k=Symbol();function S(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:e.queryFn&&e.queryFn!==k?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}function O(e,t){return"function"==typeof e?e(...t):!!e}var P=function(e){setTimeout(e,0)},T=function(){let e=[],t=0,n=e=>{e()},r=e=>{e()},a=P;const l=r=>{t?e.push(r):a(()=>{n(r)})};return{batch:l=>{let i;t++;try{i=l()}finally{t--,t||(()=>{const t=e;e=[],t.length&&a(()=>{r(()=>{t.forEach(e=>{n(e)})})})})()}return i},batchCalls:e=>(...t)=>{l(()=>{e(...t)})},schedule:l,setNotifyFunction:e=>{n=e},setBatchNotifyFunction:e=>{r=e},setScheduler:e=>{a=e}}}(),D=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},I=new class extends D{#n;#r;#a;constructor(){super(),this.#a=e=>{if(!l&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#r||this.setEventListener(this.#a)}onUnsubscribe(){this.hasListeners()||(this.#r?.(),this.#r=void 0)}setEventListener(e){this.#a=e,this.#r?.(),this.#r=e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()})}setFocused(e){this.#n!==e&&(this.#n=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return"boolean"==typeof this.#n?this.#n:"hidden"!==globalThis.document?.visibilityState}},j=new class extends D{#l=!0;#r;#a;constructor(){super(),this.#a=e=>{if(!l&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#r||this.setEventListener(this.#a)}onUnsubscribe(){this.hasListeners()||(this.#r?.(),this.#r=void 0)}setEventListener(e){this.#a=e,this.#r?.(),this.#r=e(this.setOnline.bind(this))}setOnline(e){this.#l!==e&&(this.#l=e,this.listeners.forEach(t=>{t(e)}))}isOnline(){return this.#l}};function A(){let e,t;const n=new Promise((n,r)=>{e=n,t=r});function r(e){Object.assign(n,e),delete n.resolve,delete n.reject}return n.status="pending",n.catch(()=>{}),n.resolve=t=>{r({status:"fulfilled",value:t}),e(t)},n.reject=e=>{r({status:"rejected",reason:e}),t(e)},n}function L(e){return Math.min(1e3*2**e,3e4)}function M(e){return"online"!==(e??"online")||j.isOnline()}var R=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function F(e){let t,n=!1,r=0;const i=A(),o=()=>"pending"!==i.status,s=()=>I.isFocused()&&("always"===e.networkMode||j.isOnline())&&e.canRun(),c=()=>M(e.networkMode)&&e.canRun(),u=e=>{o()||(t?.(),i.resolve(e))},m=e=>{o()||(t?.(),i.reject(e))},d=()=>new Promise(n=>{t=e=>{(o()||s())&&n(e)},e.onPause?.()}).then(()=>{t=void 0,o()||e.onContinue?.()}),g=()=>{if(o())return;let t;const i=0===r?e.initialPromise:void 0;try{t=i??e.fn()}catch(e){t=Promise.reject(e)}Promise.resolve(t).then(u).catch(t=>{if(o())return;const i=e.retry??(l?0:3),c=e.retryDelay??L,u="function"==typeof c?c(r,t):c,p=!0===i||"number"==typeof i&&r<i||"function"==typeof i&&i(r,t);var f;!n&&p?(r++,e.onFail?.(r,t),(f=u,new Promise(e=>{a.setTimeout(e,f)})).then(()=>s()?void 0:d()).then(()=>{n?m(t):g()})):m(t)})};return{promise:i,status:()=>i.status,cancel:t=>{if(!o()){const n=new R(t);m(n),e.onCancel?.(n)}},continue:()=>(t?.(),i),cancelRetry:()=>{n=!0},continueRetry:()=>{n=!1},canStart:c,start:()=>(c()?g():d().then(g),i)}}var z=class{#i;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),s(this.gcTime)&&(this.#i=a.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(l?1/0:3e5))}clearGcTimeout(){this.#i&&(a.clearTimeout(this.#i),this.#i=void 0)}},B=class extends z{#o;#s;#c;#u;#m;#d;#g;constructor(e){super(),this.#g=!1,this.#d=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#u=e.client,this.#c=this.#u.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#o=G(this.options),this.state=e.state??this.#o,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#m?.promise}setOptions(e){if(this.options={...this.#d,...e},this.updateGcTime(this.options.gcTime),this.state&&void 0===this.state.data){const e=G(this.options);void 0!==e.data&&(this.setState(H(e.data,e.dataUpdatedAt)),this.#o=e)}}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#c.remove(this)}setData(e,t){const n=E(this.state.data,e,this.options);return this.#p({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(e,t){this.#p({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#m?.promise;return this.#m?.cancel(e),t?t.then(o).catch(o):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#o)}isActive(){return this.observers.some(e=>!1!==m(e.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===k||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(e=>"static"===u(e.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(e=0){return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!c(this.state.dataUpdatedAt,e))}onFocus(){const e=this.observers.find(e=>e.shouldFetchOnWindowFocus());e?.refetch({cancelRefetch:!1}),this.#m?.continue()}onOnline(){const e=this.observers.find(e=>e.shouldFetchOnReconnect());e?.refetch({cancelRefetch:!1}),this.#m?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#c.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#m&&(this.#g?this.#m.cancel({revert:!0}):this.#m.cancelRetry()),this.scheduleGc()),this.#c.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#p({type:"invalidate"})}async fetch(e,t){if("idle"!==this.state.fetchStatus&&"rejected"!==this.#m?.status())if(void 0!==this.state.data&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#m)return this.#m.continueRetry(),this.#m.promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}const n=new AbortController,r=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(this.#g=!0,n.signal)})},a=()=>{const e=S(this.options,t),n=(()=>{const e={client:this.#u,queryKey:this.queryKey,meta:this.meta};return r(e),e})();return this.#g=!1,this.options.persister?this.options.persister(e,n,this):e(n)},l=(()=>{const e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#u,state:this.state,fetchFn:a};return r(e),e})();this.options.behavior?.onFetch(l,this),this.#s=this.state,"idle"!==this.state.fetchStatus&&this.state.fetchMeta===l.fetchOptions?.meta||this.#p({type:"fetch",meta:l.fetchOptions?.meta}),this.#m=F({initialPromise:t?.initialPromise,fn:l.fetchFn,onCancel:e=>{e instanceof R&&e.revert&&this.setState({...this.#s,fetchStatus:"idle"}),n.abort()},onFail:(e,t)=>{this.#p({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#p({type:"pause"})},onContinue:()=>{this.#p({type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0});try{const e=await this.#m.start();if(void 0===e)throw new Error(`${this.queryHash} data is undefined`);return this.setData(e),this.#c.config.onSuccess?.(e,this),this.#c.config.onSettled?.(e,this.state.error,this),e}catch(e){if(e instanceof R){if(e.silent)return this.#m.promise;if(e.revert){if(void 0===this.state.data)throw e;return this.state.data}}throw this.#p({type:"error",error:e}),this.#c.config.onError?.(e,this),this.#c.config.onSettled?.(this.state.data,e,this),e}finally{this.scheduleGc()}}#p(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...q(t.data,this.options),fetchMeta:e.meta??null};case"success":const n={...t,...H(e.data,e.dataUpdatedAt),dataUpdateCount:t.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#s=e.manual?n:void 0,n;case"error":const r=e.error;return{...t,error:r,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),T.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),this.#c.notify({query:this,type:"updated",action:e})})}};function q(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:M(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}function H(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function G(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,n=void 0!==t,r=n?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var U=class extends D{constructor(e={}){super(),this.config=e,this.#f=new Map}#f;build(e,t,n){const r=t.queryKey,a=t.queryHash??p(r,t);let l=this.get(a);return l||(l=new B({client:e,queryKey:r,queryHash:a,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(l)),l}add(e){this.#f.has(e.queryHash)||(this.#f.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#f.get(e.queryHash);t&&(e.destroy(),t===e&&this.#f.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){T.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#f.get(e)}getAll(){return[...this.#f.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(e=>d(t,e))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(t=>d(e,t)):t}notify(e){T.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){T.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){T.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},W=class extends z{#u;#y;#h;#m;constructor(e){super(),this.#u=e.client,this.mutationId=e.mutationId,this.#h=e.mutationCache,this.#y=[],this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#y.includes(e)||(this.#y.push(e),this.clearGcTimeout(),this.#h.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#y=this.#y.filter(t=>t!==e),this.scheduleGc(),this.#h.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#y.length||("pending"===this.state.status?this.scheduleGc():this.#h.remove(this))}continue(){return this.#m?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#p({type:"continue"})},n={client:this.#u,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#m=F({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{this.#p({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#p({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#h.canRun(this)});const r="pending"===this.state.status,a=!this.#m.canStart();try{if(r)t();else{this.#p({type:"pending",variables:e,isPaused:a}),await(this.#h.config.onMutate?.(e,this,n));const t=await(this.options.onMutate?.(e,n));t!==this.state.context&&this.#p({type:"pending",context:t,variables:e,isPaused:a})}const l=await this.#m.start();return await(this.#h.config.onSuccess?.(l,e,this.state.context,this,n)),await(this.options.onSuccess?.(l,e,this.state.context,n)),await(this.#h.config.onSettled?.(l,null,this.state.variables,this.state.context,this,n)),await(this.options.onSettled?.(l,null,e,this.state.context,n)),this.#p({type:"success",data:l}),l}catch(t){try{throw await(this.#h.config.onError?.(t,e,this.state.context,this,n)),await(this.options.onError?.(t,e,this.state.context,n)),await(this.#h.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this,n)),await(this.options.onSettled?.(void 0,t,e,this.state.context,n)),t}finally{this.#p({type:"error",error:t})}}finally{this.#h.runNext(this)}}#p(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),T.batch(()=>{this.#y.forEach(t=>{t.onMutationUpdate(e)}),this.#h.notify({mutation:this,type:"updated",action:e})})}},V=class extends D{constructor(e={}){super(),this.config=e,this.#_=new Set,this.#b=new Map,this.#v=0}#_;#b;#v;build(e,t,n){const r=new W({client:e,mutationCache:this,mutationId:++this.#v,options:e.defaultMutationOptions(t),state:n});return this.add(r),r}add(e){this.#_.add(e);const t=K(e);if("string"==typeof t){const n=this.#b.get(t);n?n.push(e):this.#b.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#_.delete(e)){const t=K(e);if("string"==typeof t){const n=this.#b.get(t);if(n)if(n.length>1){const t=n.indexOf(e);-1!==t&&n.splice(t,1)}else n[0]===e&&this.#b.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=K(e);if("string"==typeof t){const n=this.#b.get(t),r=n?.find(e=>"pending"===e.state.status);return!r||r===e}return!0}runNext(e){const t=K(e);if("string"==typeof t){const n=this.#b.get(t)?.find(t=>t!==e&&t.state.isPaused);return n?.continue()??Promise.resolve()}return Promise.resolve()}clear(){T.batch(()=>{this.#_.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#_.clear(),this.#b.clear()})}getAll(){return Array.from(this.#_)}find(e){const t={exact:!0,...e};return this.getAll().find(e=>g(t,e))}findAll(e={}){return this.getAll().filter(t=>g(e,t))}notify(e){T.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(e=>e.state.isPaused);return T.batch(()=>Promise.all(e.map(e=>e.continue().catch(o))))}};function K(e){return e.options.scope?.id}function Q(e){return{onFetch:(t,n)=>{const r=t.options,a=t.fetchOptions?.meta?.fetchMore?.direction,l=t.state.data?.pages||[],i=t.state.data?.pageParams||[];let o={pages:[],pageParams:[]},s=0;const c=async()=>{let n=!1;const c=S(t.options,t.fetchOptions),u=async(e,r,a)=>{if(n)return Promise.reject();if(null==r&&e.pages.length)return Promise.resolve(e);const l=(()=>{const e={client:t.client,queryKey:t.queryKey,pageParam:r,direction:a?"backward":"forward",meta:t.options.meta};var l;return l=e,Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(t.signal.aborted?n=!0:t.signal.addEventListener("abort",()=>{n=!0}),t.signal)}),e})(),i=await c(l),{maxPages:o}=t.options,s=a?N:C;return{pages:s(e.pages,i,o),pageParams:s(e.pageParams,r,o)}};if(a&&l.length){const e="backward"===a,t={pages:l,pageParams:i},n=(e?Y:X)(r,t);o=await u(t,n,e)}else{const t=e??l.length;do{const e=0===s?i[0]??r.initialPageParam:X(r,o);if(s>0&&null==e)break;o=await u(o,e),s++}while(s<t)}return o};t.options.persister?t.fetchFn=()=>t.options.persister?.(c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=c}}}function X(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function Y(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}var Z=i(609),J=i.n(Z);const $=window.ReactJSXRuntime;var ee=Z.createContext(void 0),te=e=>{const t=Z.useContext(ee);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},ne=({client:e,children:t})=>(Z.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),(0,$.jsx)(ee.Provider,{value:e,children:t})),re=new class{#x;#h;#d;#w;#E;#C;#N;#k;constructor(e={}){this.#x=e.queryCache||new U,this.#h=e.mutationCache||new V,this.#d=e.defaultOptions||{},this.#w=new Map,this.#E=new Map,this.#C=0}mount(){this.#C++,1===this.#C&&(this.#N=I.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#x.onFocus())}),this.#k=j.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#x.onOnline())}))}unmount(){this.#C--,0===this.#C&&(this.#N?.(),this.#N=void 0,this.#k?.(),this.#k=void 0)}isFetching(e){return this.#x.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#h.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#x.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=this.#x.build(this,t),r=n.state.data;return void 0===r?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(u(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(r))}getQueriesData(e){return this.#x.findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),a=this.#x.get(r.queryHash),l=a?.state.data,i=function(e,t){return"function"==typeof e?e(t):e}(t,l);if(void 0!==i)return this.#x.build(this,r).setData(i,{...n,manual:!0})}setQueriesData(e,t,n){return T.batch(()=>this.#x.findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#x.get(t.queryHash)?.state}removeQueries(e){const t=this.#x;T.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){const n=this.#x;return T.batch(()=>(n.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},r=T.batch(()=>this.#x.findAll(e).map(e=>e.cancel(n)));return Promise.all(r).then(o).catch(o)}invalidateQueries(e,t={}){return T.batch(()=>(this.#x.findAll(e).forEach(e=>{e.invalidate()}),"none"===e?.refetchType?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},r=T.batch(()=>this.#x.findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,n);return n.throwOnError||(t=t.catch(o)),"paused"===e.state.fetchStatus?Promise.resolve():t}));return Promise.all(r).then(o)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const n=this.#x.build(this,t);return n.isStaleByTime(u(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(o).catch(o)}fetchInfiniteQuery(e){return e.behavior=Q(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(o).catch(o)}ensureInfiniteQueryData(e){return e.behavior=Q(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return j.isOnline()?this.#h.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#x}getMutationCache(){return this.#h}getDefaultOptions(){return this.#d}setDefaultOptions(e){this.#d=e}setQueryDefaults(e,t){this.#w.set(f(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#w.values()],n={};return t.forEach(t=>{y(e,t.queryKey)&&Object.assign(n,t.defaultOptions)}),n}setMutationDefaults(e,t){this.#E.set(f(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#E.values()],n={};return t.forEach(t=>{y(e,t.mutationKey)&&Object.assign(n,t.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#d.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=p(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===k&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#d.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#x.clear(),this.#h.clear()}}({defaultOptions:{queries:{staleTime:3e5,gcTime:6e5,retry:3,refetchOnWindowFocus:!1,refetchOnReconnect:!0,refetchOnMount:!0},mutations:{retry:1,onError:function(e){console.error("Mutation error:",e)}}}}),ae=function(e){var t=e.children;return J().createElement(ne,{client:re},t)},le=!1,ie={},oe=null,se=function(e){le=e,e&&oe&&(clearTimeout(oe),oe=null,ie={})},ce=function(){if(null!==document.getElementById("add-ngg-gallery-modal"))ie={};else if(le)ie={};else{var e=new URLSearchParams(window.location.search);void 0!==ie.tab&&e.set("tab",ie.tab),void 0!==ie.subtab&&(null!==ie.subtab?e.set("subtab",ie.subtab):e.has("subtab")&&e.delete("subtab")),void 0!==ie.page&&e.set("page",ie.page),void 0!==ie.id&&(null!==ie.id?e.set("id",ie.id.toString()):e.has("id")&&e.delete("id"));var t="".concat(window.location.pathname,"?").concat(e.toString());window.history.pushState({},"",t),ie={},oe=null}},ue=function(e){null!==document.getElementById("add-ngg-gallery-modal")||le||(Object.assign(ie,e),oe&&clearTimeout(oe),oe=window.setTimeout(ce,0))};const me=window.wp.data,de=window.wp.i18n;function ge(){return ge=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ge.apply(null,arguments)}function pe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var fe,ye=["className"],he=["className"],_e=["className"],be=["className"],ve=["className"],xe=["className"],we=["className"],Ee=["className"],Ce=["className"],Ne=["className"],ke=["className"],Se=["className"],Oe=["className"],Pe=["className"],Te=["className"],De=["className"],Ie=["className"],je=["className"],Ae=["className"],Le=["className"],Me=["className"],Re=["className"],Fe=["className"],ze=["className"],Be=["className"],qe=["className"],He=["className"],Ge=["className"],Ue=["className"],We=["className"],Ve=["className"],Ke=["className"],Qe=["className"],Xe=["className"],Ye=["className"],Ze=["className"],Je=["className"],$e=["className"],et=["className"],tt=["className"],nt=["className"],rt=["className"],at=["className"],lt=["className"],it=["className"],ot=["className"],st=["className"],ct=["className"],ut=["className"],mt=["className"],dt=["className"],gt=["className"],pt=["className"],ft=["className"],yt=["className"],ht=["className"],_t=["className"],bt=["className"],vt=["className"],xt=["className"],wt=["className"],Et=["className"],Ct=["className"],Nt=["className"],kt=["className"],St=["className"],Ot=["className"],Pt=["className"],Tt=["className"],Dt=["className"],It=["className"],jt=["className"],At=["className"],Lt=function(e){var t=e.className,n=pe(e,ye);return J().createElement("svg",ge({className:t,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n),J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))},Mt=function(e){var t=e.className,n=pe(e,he);return J().createElement("svg",ge({className:t,width:"20",height:"20",viewBox:"0 0 15 16",xmlns:"http://www.w3.org/2000/svg"},n),J().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.3333 0.5H1.66667C0.75 0.5 0 1.25 0 2.16667V13.8333C0 14.75 0.741667 15.5 1.66667 15.5H13.3333C14.25 15.5 15 14.75 15 13.8333V2.16667C15 1.25 14.25 0.5 13.3333 0.5ZM13.3333 13.8333H1.66667V11.3333H4.63333C5.20833 12.325 6.275 13 7.50833 13C8.74167 13 9.8 12.325 10.3833 11.3333H13.3333V13.8333ZM9.175 9.66667H13.3333V2.16667H1.66667V9.66667H5.84167C5.84167 10.5833 6.59167 11.3333 7.50833 11.3333C8.425 11.3333 9.175 10.5833 9.175 9.66667Z",fill:"currentColor"}))},Rt=function(e){var t=e.className,n=pe(e,_e);return J().createElement("svg",ge({xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor"},n),J().createElement("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"}))},Ft=function(e){var t=e.className,n=pe(e,be);return J().createElement("svg",ge({xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor"},n),J().createElement("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"}))},zt=function(e){var t=e.className,n=pe(e,ve);return J().createElement("svg",ge({className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},n),J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))},Bt=function(e){var t=e.className,n=pe(e,xe);return J().createElement("svg",ge({className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},n),J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"}))},qt=function(e){var t=e.className,n=pe(e,we);return J().createElement("svg",ge({className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n),J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"}))},Ht=function(e){var t=e.className,n=pe(e,Ee);return J().createElement("svg",ge({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:t},n),J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 12.75a.75.75 0 110-1.5.75.75 0 010 1.5zM12 18.75a.75.75 0 110-1.5.75.75 0 010 1.5z"}))},Gt=function(e){var t=e.className,n=pe(e,Ce);return J().createElement("svg",ge({width:"20",height:"20",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t},n),J().createElement("path",{d:"M14.7461 17.2533H8.32279L9.70145 18.6005C9.95211 18.8512 10.0774 19.154 10.0774 19.5091C10.0774 19.8642 9.95211 20.1671 9.70145 20.4177C9.45078 20.6684 9.1479 20.7937 8.79279 20.7937C8.43768 20.7937 8.13479 20.6684 7.88413 20.4177L4.34349 16.8773C4.21816 16.752 4.12917 16.6162 4.07653 16.47C4.02389 16.3238 3.99841 16.1671 4.00008 16C4.00175 15.8329 4.02807 15.6762 4.07904 15.53C4.13001 15.3838 4.21857 15.248 4.34474 15.1227L7.88538 11.5823C8.13605 11.3316 8.43392 11.2063 8.779 11.2063C9.12408 11.2063 9.42154 11.3316 9.67137 11.5823C9.9212 11.8329 10.0465 12.1308 10.0474 12.4758C10.0482 12.8209 9.92287 13.1183 9.67137 13.3681L8.29146 14.7467H14.7461V8.29244L13.3361 9.70236C13.0854 9.95301 12.793 10.0733 12.4588 10.0633C12.1245 10.0533 11.8321 9.92252 11.5814 9.67103C11.3308 9.41954 11.2054 9.1221 11.2054 8.77871C11.2054 8.43531 11.3308 8.13745 11.5814 7.88513L15.1221 4.34467C15.2474 4.21934 15.3832 4.13036 15.5294 4.07772C15.6756 4.02508 15.8323 3.99918 15.9994 4.00002C16.1665 4.00086 16.3232 4.02676 16.4694 4.07772C16.6156 4.12869 16.7514 4.21767 16.8767 4.34467L20.4487 7.91646C20.6994 8.16711 20.8247 8.45954 20.8247 8.79375C20.8247 9.12795 20.6994 9.42038 20.4487 9.67103C20.198 9.92168 19.9002 10.047 19.5551 10.047C19.21 10.047 18.9125 9.92168 18.6627 9.67103L17.2527 8.29244V14.7467H23.676L22.2974 13.3995C22.0467 13.1488 21.9214 12.846 21.9214 12.4909C21.9214 12.1358 22.0467 11.8329 22.2974 11.5823C22.548 11.3316 22.8509 11.2063 23.206 11.2063C23.5611 11.2063 23.864 11.3316 24.1147 11.5823L27.6553 15.1227C27.7806 15.248 27.8696 15.3838 27.9223 15.53C27.9749 15.6762 28.0008 15.8329 28 16C27.9991 16.1671 27.9732 16.3238 27.9223 16.47C27.8713 16.6162 27.7823 16.752 27.6553 16.8773L24.0833 20.4491C23.8327 20.6997 23.5402 20.82 23.206 20.81C22.8718 20.8 22.5794 20.6692 22.3287 20.4177C22.078 20.1663 21.9527 19.8688 21.9527 19.5254C21.9527 19.182 22.078 18.8842 22.3287 18.6318L23.7073 17.2533H17.2527V23.6762L18.6 22.2976C18.8507 22.047 19.1536 21.9217 19.5087 21.9217C19.8638 21.9217 20.1667 22.047 20.4174 22.2976C20.668 22.5483 20.7934 22.8512 20.7934 23.2063C20.7934 23.5613 20.668 23.8642 20.4174 24.1149L16.8767 27.6553C16.7514 27.7807 16.6156 27.8696 16.4694 27.9223C16.3232 27.9749 16.1665 28.0008 15.9994 28C15.8323 27.9991 15.6756 27.9732 15.5294 27.9223C15.3832 27.8713 15.2474 27.7823 15.1221 27.6553L11.5501 24.0835C11.2994 23.8329 11.1795 23.5354 11.1904 23.1912C11.2013 22.847 11.3316 22.5491 11.5814 22.2976C11.8313 22.0462 12.1291 21.9208 12.4751 21.9217C12.821 21.9225 13.1184 22.0478 13.3674 22.2976L14.7461 23.7076V17.2533Z",fill:"currentColor"}))},Ut=function(e){var t=e.className,n=pe(e,Ne);return J().createElement("svg",ge({className:t,fill:"#EBAD35",viewBox:"0 0 18 18"},n),J().createElement("path",{d:"M8.167 4.833h1.666V6.5H8.167V4.833zm0 3.333h1.666v5H8.167v-5zM9 .666A8.336 8.336 0 00.667 9c0 4.6 3.733 8.333 8.333 8.333S17.333 13.6 17.333 9 13.6.667 9 .667zm0 15A6.676 6.676 0 012.333 9 6.676 6.676 0 019 2.333 6.675 6.675 0 0115.667 9 6.675 6.675 0 019 15.666z"}))},Wt=function(e){var t=e.className,n=pe(e,ke);return J().createElement("svg",ge({className:t,fill:"none",viewBox:"0 0 20 20"},n),J().createElement("path",{fill:"#D99B3D",d:"M6.25 9.167a2.81 2.81 0 01-2.063-.854 2.81 2.81 0 01-.854-2.063c0-.805.285-1.493.854-2.062a2.81 2.81 0 012.063-.854 2.81 2.81 0 012.062.854c.57.57.855 1.257.855 2.062a2.81 2.81 0 01-.855 2.063 2.81 2.81 0 01-2.062.854zm0-1.667c.347 0 .642-.121.885-.364s.365-.539.365-.886-.122-.642-.365-.885A1.205 1.205 0 006.25 5c-.347 0-.642.122-.886.365A1.205 1.205 0 005 6.25c0 .347.121.643.364.886.244.243.539.364.886.364zm7.5 9.167a2.81 2.81 0 01-2.063-.854 2.81 2.81 0 01-.854-2.063c0-.805.285-1.493.854-2.062a2.81 2.81 0 012.063-.854 2.81 2.81 0 012.062.854c.57.57.855 1.257.855 2.062a2.81 2.81 0 01-.855 2.063 2.81 2.81 0 01-2.062.854zm0-1.667c.347 0 .642-.121.885-.364s.365-.539.365-.886-.122-.642-.365-.885a1.206 1.206 0 00-.885-.365c-.347 0-.642.122-.886.365a1.205 1.205 0 00-.364.885c0 .347.121.643.364.886.244.243.539.364.886.364zM4.5 16.667L3.333 15.5 15.5 3.334 16.667 4.5 4.5 16.667z"}))},Vt=function(e){var t=e.className,n=pe(e,Se);return J().createElement("svg",ge({className:t,fill:"#37993B",viewBox:"0 0 21 20"},n),J().createElement("path",{d:"M10.5 1.667A8.336 8.336 0 002.167 10c0 4.6 3.733 8.333 8.333 8.333S18.833 14.6 18.833 10 15.1 1.667 10.5 1.667zm0 15A6.676 6.676 0 013.833 10 6.676 6.676 0 0110.5 3.333 6.675 6.675 0 0117.167 10a6.675 6.675 0 01-6.667 6.666zm3.825-10.35l-5.492 5.491-2.158-2.15L5.5 10.833l3.333 3.333L15.5 7.5l-1.175-1.184z"}))},Kt=function(e){var t=e.className,n=pe(e,Oe);return J().createElement("svg",ge({className:t,fill:"currentColor",fillOpacity:"0.7",viewBox:"0 0 20 20"},n),J().createElement("path",{fillRule:"evenodd",d:"M16.252 10a6.5 6.5 0 01-.058.816l1.758 1.375c.158.125.2.35.1.534l-1.667 2.883a.413.413 0 01-.358.208.47.47 0 01-.15-.025l-2.075-.833a6.4 6.4 0 01-1.409.817l-.316 2.208c-.025.2-.2.35-.409.35H8.335a.406.406 0 01-.408-.35l-.317-2.208a6.088 6.088 0 01-1.408-.817l-2.075.833a.416.416 0 01-.508-.183l-1.667-2.883a.42.42 0 01.1-.534l1.758-1.375A6.61 6.61 0 013.752 10c0-.275.025-.55.058-.817L2.052 7.808a.41.41 0 01-.1-.533L3.618 4.39a.413.413 0 01.359-.208c.05 0 .1.008.15.025l2.075.833c.433-.325.9-.608 1.408-.816l.317-2.208c.025-.2.2-.35.408-.35h3.333c.209 0 .384.15.409.35l.316 2.208c.509.208.975.483 1.409.817l2.075-.834a.416.416 0 01.508.183l1.667 2.884a.42.42 0 01-.1.533l-1.759 1.375a6.5 6.5 0 01.059.817zm-1.667 0c0-.175-.008-.35-.042-.608l-.116-.942.742-.583.891-.709-.583-1.008-1.059.425-.883.358-.758-.583a4.726 4.726 0 00-1.025-.592l-.884-.358-.133-.942-.158-1.125H9.418l-.166 1.125-.134.942-.883.358a4.881 4.881 0 00-1.042.609l-.75.566-.866-.35-1.059-.425-.583 1.008.9.7.742.584-.117.942c-.025.25-.042.441-.042.608 0 .166.017.358.042.617l.117.941-.742.584-.9.7.583 1.008 1.059-.425.883-.359.758.584c.334.25.667.441 1.025.591l.884.359.133.941.158 1.125h1.167l.167-1.125.133-.941.883-.358a4.886 4.886 0 001.042-.609l.75-.566.867.35 1.058.425.584-1.009-.9-.7-.742-.583.117-.942c.024-.25.041-.433.041-.608zm-4.583-3.333A3.332 3.332 0 1013.335 10a3.332 3.332 0 00-3.333-3.333zM8.335 10c0 .916.75 1.666 1.667 1.666.916 0 1.666-.75 1.666-1.666 0-.917-.75-1.667-1.666-1.667-.917 0-1.667.75-1.667 1.667z",clipRule:"evenodd"}))},Qt=function(e){var t=e.className,n=pe(e,Pe);return J().createElement("svg",ge({className:t,viewBox:"0 0 20 20",fill:"currentColor"},n),J().createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))},Xt=function(e){var t=e.className,n=pe(e,Te);return J().createElement("svg",ge({className:t,width:"8",height:"12",viewBox:"0 0 8 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),J().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5286 0.195262C3.78894 -0.0650874 4.21106 -0.0650874 4.4714 0.195262L7.80474 3.5286C8.06509 3.78894 8.06509 4.21106 7.80474 4.4714C7.54439 4.73175 7.12228 4.73175 6.86193 4.4714L4 1.60948L1.13807 4.4714C0.877722 4.73175 0.455612 4.73175 0.195262 4.4714C-0.0650874 4.21106 -0.0650874 3.78894 0.195262 3.5286L3.5286 0.195262ZM0.195262 7.5286C0.455612 7.26825 0.877722 7.26825 1.13807 7.5286L4 10.3905L6.86193 7.5286C7.12228 7.26825 7.54439 7.26825 7.80474 7.5286C8.06509 7.78895 8.06509 8.21106 7.80474 8.4714L4.4714 11.8047C4.21106 12.0651 3.78894 12.0651 3.5286 11.8047L0.195262 8.4714C-0.0650874 8.21106 -0.0650874 7.78895 0.195262 7.5286Z",fill:"#B7B7B7"}))},Yt=function(e){var t=e.className,n=pe(e,De);return J().createElement("svg",ge({className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n),J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"}))},Zt=function(e){var t=e.className,n=pe(e,Ie);return J().createElement("svg",ge({className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n),J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"}))},Jt=function(e){var t=e.className,n=pe(e,je);return J().createElement("svg",ge({width:"16",height:"18",viewBox:"0 0 18 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t},n),J().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.6667 0.833374C11.1269 0.833374 11.5 1.20647 11.5 1.66671V2.50004H16.5C16.9603 2.50004 17.3334 2.87314 17.3334 3.33337C17.3334 3.79361 16.9603 4.16671 16.5 4.16671H11.5V5.00004C11.5 5.46028 11.1269 5.83337 10.6667 5.83337C10.2064 5.83337 9.83335 5.46028 9.83335 5.00004V1.66671C9.83335 1.20647 10.2064 0.833374 10.6667 0.833374ZM0.666687 3.33337C0.666687 2.87314 1.03978 2.50004 1.50002 2.50004H7.33335C7.79359 2.50004 8.16669 2.87314 8.16669 3.33337C8.16669 3.79361 7.79359 4.16671 7.33335 4.16671H1.50002C1.03978 4.16671 0.666687 3.79361 0.666687 3.33337ZM5.66669 7.50004C6.12692 7.50004 6.50002 7.87314 6.50002 8.33337V11.6667C6.50002 12.1269 6.12692 12.5 5.66669 12.5C5.20645 12.5 4.83335 12.1269 4.83335 11.6667V10.8334H1.50002C1.03978 10.8334 0.666687 10.4603 0.666687 10C0.666687 9.5398 1.03978 9.16671 1.50002 9.16671H4.83335V8.33337C4.83335 7.87314 5.20645 7.50004 5.66669 7.50004ZM8.16669 10C8.16669 9.5398 8.53978 9.16671 9.00002 9.16671H16.5C16.9603 9.16671 17.3334 9.5398 17.3334 10C17.3334 10.4603 16.9603 10.8334 16.5 10.8334H9.00002C8.53978 10.8334 8.16669 10.4603 8.16669 10ZM12.3334 14.1667C12.7936 14.1667 13.1667 14.5398 13.1667 15V15.8334H16.5C16.9603 15.8334 17.3334 16.2065 17.3334 16.6667C17.3334 17.1269 16.9603 17.5 16.5 17.5H13.1667V18.3334C13.1667 18.7936 12.7936 19.1667 12.3334 19.1667C11.8731 19.1667 11.5 18.7936 11.5 18.3334V15C11.5 14.5398 11.8731 14.1667 12.3334 14.1667ZM0.666687 16.6667C0.666687 16.2065 1.03978 15.8334 1.50002 15.8334H9.00002C9.46026 15.8334 9.83335 16.2065 9.83335 16.6667C9.83335 17.1269 9.46026 17.5 9.00002 17.5H1.50002C1.03978 17.5 0.666687 17.1269 0.666687 16.6667Z",fill:"black",fillOpacity:"0.6"}))},$t=function(e){var t=e.className,n=pe(e,Ae);return J().createElement("svg",ge({width:"14",height:"14",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t},n),J().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.33334 2.66634C4.75601 2.66634 2.66668 4.75568 2.66668 7.33301C2.66668 9.91034 4.75601 11.9997 7.33334 11.9997C9.91067 11.9997 12 9.91034 12 7.33301C12 4.75568 9.91067 2.66634 7.33334 2.66634ZM1.33334 7.33301C1.33334 4.0193 4.01963 1.33301 7.33334 1.33301C10.6471 1.33301 13.3333 4.0193 13.3333 7.33301C13.3333 8.74968 12.8424 10.0517 12.0213 11.0781L14.4714 13.5283C14.7318 13.7886 14.7318 14.2107 14.4714 14.4711C14.2111 14.7314 13.789 14.7314 13.5286 14.4711L11.0785 12.0209C10.052 12.842 8.75002 13.333 7.33334 13.333C4.01963 13.333 1.33334 10.6467 1.33334 7.33301Z",fill:"black"}))},en=function(e){var t=e.className,n=pe(e,Le);return J().createElement("svg",ge({width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t},n),J().createElement("path",{d:"M6 7V19C6 20.1046 6.89543 21 8 21H16C17.1046 21 18 20.1046 18 19V7M6 7H5M6 7H8M18 7H19M18 7H16M10 11V17M14 11V17M8 7V5C8 3.89543 8.89543 3 10 3H14C15.1046 3 16 3.89543 16 5V7M8 7H16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))},tn=function(e){var t=e.className,n=pe(e,Me);return J().createElement("svg",ge({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t},n),J().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.59306 2.74482C5.49465 2.69241 5.38466 2.66552 5.27316 2.66662L5.26663 2.66668L2.66663 2.66665C2.48981 2.66665 2.32025 2.73689 2.19522 2.86191C2.0702 2.98694 1.99996 3.1565 1.99996 3.33332V12C1.99996 12.1768 2.0702 12.3464 2.19522 12.4714C2.32025 12.5964 2.48982 12.6666 2.66663 12.6666H12.3045C12.453 12.6677 12.5977 12.619 12.7154 12.5284C12.8332 12.4378 12.9173 12.3105 12.9545 12.1667L13.9811 8.16665C14.0066 8.06804 14.0091 7.96491 13.9885 7.86517C13.9679 7.76543 13.9248 7.67173 13.8623 7.59127C13.7999 7.51081 13.7198 7.44573 13.6283 7.40101C13.5368 7.35629 13.4363 7.33314 13.3345 7.33331L13.3333 7.33332H6.169C6.05041 7.3372 5.93496 7.37267 5.83461 7.43612C5.73244 7.50071 5.64976 7.59185 5.5954 7.6998L5.59214 7.70628L4.5921 9.6396C4.42295 9.96663 4.02071 10.0946 3.69368 9.92546C3.36664 9.75631 3.23866 9.35407 3.40781 9.02703L4.40631 7.09661C4.56941 6.7743 4.81676 6.50216 5.12213 6.30911C5.42862 6.11535 5.78201 6.00856 6.14452 6.00016L6.15996 5.99998H12.6666V5.33332C12.6666 5.15651 12.5964 4.98694 12.4714 4.86191C12.3463 4.73689 12.1768 4.66665 12 4.66665H8.04663C7.71552 4.6666 7.38949 4.58434 7.09802 4.42725C6.80777 4.27083 6.56072 4.0451 6.37883 3.77015L5.83646 2.96664C5.77514 2.87352 5.69148 2.79723 5.59306 2.74482ZM14 6.11354C14.0727 6.13916 14.1441 6.16903 14.2138 6.20307C14.4883 6.33721 14.7284 6.53247 14.9157 6.77385C15.103 7.01523 15.2325 7.29632 15.2943 7.59554C15.3561 7.8946 15.3485 8.20384 15.2722 8.49953L14.2455 12.5C14.134 12.9315 13.8817 13.3135 13.5284 13.5853C13.1758 13.8565 12.7428 14.0024 12.298 14H12.3L12.2955 14L12.298 14H2.66663C2.13619 14 1.62748 13.7893 1.25241 13.4142C0.87734 13.0391 0.666626 12.5304 0.666626 12V3.33332C0.666626 2.80288 0.87734 2.29418 1.25241 1.9191C1.62749 1.54403 2.13619 1.33332 2.66663 1.33332H5.26369L5.26009 1.33335L5.26663 1.33332H5.26369C5.59694 1.33065 5.9256 1.4113 6.21979 1.56797C6.5138 1.72454 6.76403 1.95206 6.94778 2.22985L7.4901 3.03329C7.55081 3.12547 7.63341 3.20116 7.73057 3.25352C7.8277 3.30586 7.93629 3.33328 8.04663 3.33332H12C12.5304 3.33332 13.0391 3.54403 13.4142 3.9191C13.7892 4.29418 14 4.80288 14 5.33332V6.11354Z",fill:"black",fillOpacity:"0.6"}))},nn=function(e){var t=e.className,n=pe(e,Re);return J().createElement("svg",ge({width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t},n),J().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.00008 2.33341C5.63189 2.33341 5.33342 2.63189 5.33342 3.00008V12.0001C5.33342 12.3683 5.63189 12.6667 6.00008 12.6667H7.9049L12.3828 8.18883C12.8781 7.69366 13.5498 7.41544 14.2501 7.41544C14.7558 7.41544 15.2466 7.5605 15.6667 7.82757V3.00008C15.6667 2.63189 15.3683 2.33341 15.0001 2.33341H6.00008ZM17.3334 3.00008C17.3334 1.71142 16.2887 0.666748 15.0001 0.666748H6.00008C4.71142 0.666748 3.66675 1.71142 3.66675 3.00008V12.0001C3.66675 13.2887 4.71142 14.3334 6.00008 14.3334H8.2495C8.24989 14.3334 8.25027 14.3334 8.25066 14.3334H15.0001C16.2887 14.3334 17.3334 13.2887 17.3334 12.0001V3.00008ZM15.6667 10.0953L14.9389 9.36738C14.9389 9.36737 14.9389 9.3674 14.9389 9.36738C14.7562 9.18475 14.5084 9.08211 14.2501 9.08211C13.9918 9.08211 13.744 9.1847 13.5613 9.36734C13.5613 9.36735 13.5614 9.36732 13.5613 9.36734L10.2619 12.6667H15.0001C15.3683 12.6667 15.6667 12.3683 15.6667 12.0001V10.0953ZM1.50008 3.66675C1.96032 3.66675 2.33341 4.03984 2.33341 4.50008V15.0001C2.33341 15.1769 2.40365 15.3465 2.52868 15.4715C2.6537 15.5965 2.82327 15.6667 3.00008 15.6667H13.5001C13.9603 15.6667 14.3334 16.0398 14.3334 16.5001C14.3334 16.9603 13.9603 17.3334 13.5001 17.3334H3.00008C2.38124 17.3334 1.78775 17.0876 1.35017 16.65C0.912581 16.2124 0.666748 15.6189 0.666748 15.0001V4.50008C0.666748 4.03984 1.03984 3.66675 1.50008 3.66675ZM9.00008 5.33342C8.63189 5.33342 8.33342 5.63189 8.33342 6.00008C8.33342 6.36827 8.63189 6.66675 9.00008 6.66675C9.36827 6.66675 9.66675 6.36827 9.66675 6.00008C9.66675 5.63189 9.36827 5.33342 9.00008 5.33342ZM6.66675 6.00008C6.66675 4.71142 7.71142 3.66675 9.00008 3.66675C10.2887 3.66675 11.3334 4.71142 11.3334 6.00008C11.3334 7.28875 10.2887 8.33342 9.00008 8.33342C7.71142 8.33342 6.66675 7.28875 6.66675 6.00008Z",fill:"white"}))},rn=function(e){var t=e.className,n=pe(e,Fe);return J().createElement("svg",ge({width:"18",height:"14",viewBox:"0 0 18 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t},n),J().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.00008 0.5C9.46032 0.5 9.83342 0.873096 9.83342 1.33333V8.11089L11.4192 6.56917C11.7492 6.24835 12.2768 6.25578 12.5976 6.58577C12.9184 6.91576 12.911 7.44334 12.581 7.76416L9.58098 10.6808C9.25755 10.9953 8.74262 10.9953 8.41918 10.6808L5.41918 7.76416C5.0892 7.44334 5.08176 6.91576 5.40259 6.58577C5.72341 6.25578 6.25099 6.24835 6.58098 6.56917L8.16675 8.11089V1.33333C8.16675 0.873096 8.53984 0.5 9.00008 0.5ZM1.35852 2.62131C1.79779 2.19424 2.3887 1.95833 3.00008 1.95833H6.00008C6.46032 1.95833 6.83341 2.33143 6.83341 2.79167C6.83341 3.2519 6.46032 3.625 6.00008 3.625H3.00008C2.81581 3.625 2.64366 3.69639 2.52032 3.8163C2.39778 3.93543 2.33341 4.09194 2.33341 4.25V11.5417C2.33341 11.6997 2.39778 11.8562 2.52032 11.9754C2.64366 12.0953 2.81581 12.1667 3.00008 12.1667H15.0001C15.1843 12.1667 15.3565 12.0953 15.4798 11.9754C15.6024 11.8562 15.6667 11.6997 15.6667 11.5417V4.25C15.6667 4.09194 15.6024 3.93543 15.4798 3.8163C15.3565 3.69639 15.1843 3.625 15.0001 3.625H12.0001C11.5398 3.625 11.1667 3.2519 11.1667 2.79167C11.1667 2.33143 11.5398 1.95833 12.0001 1.95833H15.0001C15.6115 1.95833 16.2024 2.19424 16.6416 2.62131C17.0817 3.04915 17.3334 3.63452 17.3334 4.25V11.5417C17.3334 12.1572 17.0817 12.7425 16.6416 13.1704C16.2024 13.5974 15.6115 13.8333 15.0001 13.8333H3.00008C2.3887 13.8333 1.79779 13.5974 1.35852 13.1704C0.918453 12.7425 0.666748 12.1572 0.666748 11.5417V4.25C0.666748 3.63452 0.918453 3.04915 1.35852 2.62131Z",fill:"currentColor",fillOpacity:"0.6"}))},an=function(e){var t=e.className,n=pe(e,ze);return J().createElement("svg",ge({className:t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},n),J().createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),J().createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"}))},ln=function(e){var t=e.className,n=pe(e,Be);return J().createElement("svg",ge({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:t},n),J().createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"}))},on=function(e){var t=e.className,n=pe(e,qe);return J().createElement("svg",ge({xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor"},n),J().createElement("path",{fillRule:"evenodd",d:"M10 2a1 1 0 00-1 1v1.323l-3.954 1.582A1 1 0 004 6.82v10.36c0 .818.897 1.324 1.606.894l3.394-1.697 3.394 1.697c.709.43 1.606-.076 1.606-.894V6.82a1 1 0 00-.046-.025L10 5.323V3a1 1 0 00-1-1z",clipRule:"evenodd"}))},sn=function(e){var t=e.className,n=pe(e,He);return J().createElement("svg",ge({xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor"},n),J().createElement("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"}))},cn=function(e){var t=e.className,n=pe(e,Ge);return J().createElement("svg",ge({xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor"},n),J().createElement("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z",clipRule:"evenodd"}))},un=function(e){var t=e.className,n=pe(e,Ue);return J().createElement("svg",ge({xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor"},n),J().createElement("path",{fillRule:"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z",clipRule:"evenodd"}))},mn=function(e){var t=e.className,n=pe(e,We);return J().createElement("svg",ge({xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor"},n),J().createElement("path",{d:"M11.4191 1.65413L1.65518 11.4213C1.53002 11.5468 1.45972 11.7168 1.45972 11.894C1.45972 12.0713 1.53002 12.2413 1.65518 12.3667C1.78066 12.4919 1.95066 12.5622 2.12789 12.5622C2.30512 12.5622 2.47512 12.4919 2.6006 12.3667L12.3678 2.60285C12.4303 2.54065 12.4798 2.46673 12.5137 2.38533C12.5475 2.30392 12.5649 2.21664 12.5649 2.12849C12.5649 2.04034 12.5475 1.95306 12.5137 1.87166C12.4798 1.79025 12.4303 1.71632 12.3678 1.65413C12.3056 1.59166 12.2317 1.54209 12.1503 1.50827C12.0689 1.47445 11.9816 1.45703 11.8934 1.45703C11.8053 1.45703 11.718 1.47445 11.6366 1.50827C11.5552 1.54209 11.4813 1.59166 11.4191 1.65413Z",fill:"currentColor",fillOpacity:"1"}),J().createElement("path",{d:"M15.1449 2.51661C14.9684 2.51675 14.7991 2.5866 14.6739 2.71096L2.71277 14.6721C2.58761 14.7975 2.51733 14.9675 2.51733 15.1448C2.51733 15.322 2.58761 15.492 2.71277 15.6175C2.83825 15.7426 3.00825 15.8129 3.18548 15.8129C3.36271 15.8129 3.53271 15.7426 3.65819 15.6175L15.6193 3.65968C15.6818 3.59749 15.7313 3.52357 15.7652 3.44216C15.799 3.36076 15.8164 3.27347 15.8164 3.18532C15.8164 3.09717 15.799 3.0099 15.7652 2.92849C15.7313 2.84709 15.6818 2.77316 15.6193 2.71096C15.5569 2.64899 15.4829 2.59992 15.4015 2.56657C15.3201 2.53322 15.2329 2.51625 15.1449 2.51661Z",fill:"currentColor",fillOpacity:"1"}),J().createElement("path",{d:"M17.2989 4.6709C17.122 4.67191 16.9526 4.74297 16.8279 4.86854L4.86679 16.8263C4.80432 16.8885 4.75474 16.9625 4.72092 17.0439C4.68709 17.1253 4.66968 17.2126 4.66968 17.3007C4.66968 17.3889 4.68709 17.4761 4.72092 17.5575C4.75474 17.639 4.80432 17.7129 4.86679 17.7751C4.92898 17.8375 5.0029 17.8871 5.0843 17.9209C5.16571 17.9548 5.25299 17.9722 5.34115 17.9722C5.4293 17.9722 5.51658 17.9548 5.59799 17.9209C5.67939 17.8871 5.75331 17.8375 5.8155 17.7751L17.7733 5.81397C17.8985 5.68849 17.9688 5.51849 17.9688 5.34126C17.9688 5.16403 17.8985 4.99402 17.7733 4.86854C17.7112 4.80597 17.6373 4.7563 17.5559 4.72238C17.4745 4.68847 17.3871 4.67097 17.2989 4.6709Z",fill:"currentColor",fillOpacity:"1"}),J().createElement("path",{d:"M18.3599 7.92579C18.272 7.92543 18.1848 7.94241 18.1034 7.97577C18.022 8.00912 17.948 8.05818 17.8856 8.12016L8.12167 17.884C8.0592 17.9462 8.00962 18.0202 7.9758 18.1016C7.94198 18.183 7.92456 18.2703 7.92456 18.3584C7.92456 18.4466 7.94198 18.5338 7.9758 18.6152C8.00962 18.6966 8.0592 18.7706 8.12167 18.8328C8.24715 18.9579 8.41715 19.0282 8.59438 19.0282C8.77161 19.0282 8.94161 18.9579 9.06709 18.8328L18.831 9.06559C18.9561 8.94011 19.0264 8.7701 19.0264 8.59287C19.0264 8.41563 18.9561 8.24564 18.831 8.12016C18.7057 7.99579 18.5364 7.92593 18.3599 7.92579Z",fill:"currentColor",fillOpacity:"1"}),J().createElement("path",{d:"M18.4983 12.0967C18.4104 12.0963 18.3232 12.1133 18.2418 12.1466C18.1604 12.18 18.0864 12.2291 18.024 12.291L12.2921 18.0262C12.167 18.1517 12.0967 18.3217 12.0967 18.4989C12.0967 18.6761 12.167 18.8461 12.2921 18.9716C12.4176 19.0968 12.5876 19.167 12.7648 19.167C12.9421 19.167 13.1121 19.0968 13.2375 18.9716L18.9727 13.2365C19.0978 13.111 19.1681 12.941 19.1681 12.7638C19.1681 12.5865 19.0978 12.4165 18.9727 12.291C18.9103 12.2291 18.8362 12.18 18.7548 12.1466C18.6734 12.1133 18.5863 12.0963 18.4983 12.0967Z",fill:"currentColor",fillOpacity:"1"}),J().createElement("path",{d:"M7.24871 1.51547L1.51358 7.2506C1.38841 7.37608 1.31812 7.54608 1.31812 7.72331C1.31812 7.90055 1.38841 8.07054 1.51358 8.19602C1.57577 8.25849 1.64969 8.30806 1.73109 8.34188C1.8125 8.37571 1.89978 8.39312 1.98794 8.39312C2.07609 8.39312 2.16337 8.37571 2.24478 8.34188C2.32618 8.30806 2.4001 8.25849 2.4623 8.19602L8.19743 2.46089C8.32259 2.33541 8.39289 2.16541 8.39289 1.98818C8.39289 1.81095 8.32259 1.64095 8.19743 1.51547C8.13523 1.453 8.06131 1.40342 7.97991 1.3696C7.89851 1.33578 7.81122 1.31836 7.72307 1.31836C7.63492 1.31836 7.54763 1.33578 7.46623 1.3696C7.38482 1.40342 7.3109 1.453 7.24871 1.51547Z",fill:"currentColor",fillOpacity:"1"}))},dn=function(e){var t=e.className,n=pe(e,Ve);return J().createElement("svg",ge({xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor"},n),J().createElement("path",{d:"M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"}))},gn=function(e){var t=e.className,n=pe(e,Ke);return J().createElement("svg",ge({xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 48 48",fill:"currentColor"},n),J().createElement("path",{d:"M43 21.8V8.2C43 5.2 41.72 4 38.54 4H30.46C27.28 4 26 5.2 26 8.2V21.8C26 24.8 27.28 26 30.46 26H38.54C41.72 26 43 24.8 43 21.8Z",fill:"#9AA1AD"}),J().createElement("path",{d:"M22 26.2V39.8C22 42.8 20.72 44 17.54 44H9.46C6.28 44 5 42.8 5 39.8V26.2C5 23.2 6.28 22 9.46 22H17.54C20.72 22 22 23.2 22 26.2Z",fill:"#9AA1AD"}),J().createElement("path",{d:"M43 39.8V34.2C43 31.2 41.72 30 38.54 30H30.46C27.28 30 26 31.2 26 34.2V39.8C26 42.8 27.28 44 30.46 44H38.54C41.72 44 43 42.8 43 39.8Z",fill:"#9AA1AD"}),J().createElement("path",{d:"M22 13.8V8.2C22 5.2 20.72 4 17.54 4H9.46C6.28 4 5 5.2 5 8.2V13.8C5 16.8 6.28 18 9.46 18H17.54C20.72 18 22 16.8 22 13.8Z",fill:"#9AA1AD"}))},pn=function(e){var t=e.className,n=pe(e,Qe);return J().createElement("svg",ge({xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor"},n),J().createElement("path",{fillRule:"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"}))},fn=function(e){var t=e.className,n=pe(e,Xe);return J().createElement("svg",ge({xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor"},n),J().createElement("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"}))},yn=function(e){var t=e.className,n=pe(e,Ye);return J().createElement("svg",ge({xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor"},n),J().createElement("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"}))},hn=function(e){var t=e.className,n=pe(e,Ze);return J().createElement("svg",ge({xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor"},n),J().createElement("path",{fillRule:"evenodd",d:"M10 2l.906 2.547L13.453 5l-2.547.906L10 8.453 9.094 5.906 6.547 5l2.547-.906L10 2z",clipRule:"evenodd"}),J().createElement("path",{d:"M15 3l.453 1.273L16.726 4.5l-1.273.453L15 6.226l-.453-1.273L13.274 4.5l1.273-.453L15 3z"}),J().createElement("path",{fillRule:"evenodd",d:"M5 11l.679 1.911L7.589 13.5l-1.91.679L5 16.089l-.679-1.91L2.411 13.5l1.91-.679L5 11z",clipRule:"evenodd"}),J().createElement("path",{d:"M16 15l.453 1.273L17.726 16.5l-1.273.453L16 18.226l-.453-1.273L14.274 16.5l1.273-.453L16 15z"}))},_n=function(e){var t=e.className,n=pe(e,Je);return J().createElement("svg",ge({width:"188",height:"188",viewBox:"0 0 188 188",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t},n),J().createElement("g",{clipPath:"url(#clip0_2670_9370)"},J().createElement("g",{filter:"url(#filter0_f_2670_9370)"},J().createElement("circle",{cx:"92",cy:"96",r:"64",fill:"#CEEDCB"})),J().createElement("rect",{x:"8",y:"50",width:"48",height:"56",rx:"12",fill:"white"}),J().createElement("rect",{x:"68",y:"74",width:"48",height:"48",rx:"12",fill:"white"}),J().createElement("rect",{x:"128",y:"50",width:"48",height:"56",rx:"12",fill:"white"}),J().createElement("rect",{x:"8",y:"118",width:"48",height:"48",rx:"12",fill:"white"}),J().createElement("rect",{x:"68",y:"134",width:"48",height:"56",rx:"12",fill:"white"}),J().createElement("rect",{x:"128",y:"118",width:"48",height:"48",rx:"12",fill:"white"}),J().createElement("path",{d:"M90.1857 22.6128C90.4395 20.4624 93.5606 20.4624 93.8144 22.6128C94.0287 24.429 96.4828 24.8385 97.2753 23.1903C98.2135 21.2388 101.166 22.2523 100.707 24.3686C100.32 26.1559 102.509 27.3401 103.793 26.0385C105.314 24.4974 107.777 26.4145 106.657 28.2673C105.71 29.8322 107.395 31.6627 109.033 30.8488C110.972 29.8851 112.679 32.498 111.018 33.8866C109.615 35.0594 110.614 37.3379 112.427 37.0998C114.574 36.818 115.34 39.8436 113.318 40.6175C111.61 41.2711 111.816 43.7506 113.608 44.1142C115.73 44.5447 115.472 47.6552 113.308 47.7305C111.48 47.7942 110.87 50.206 112.447 51.1319C114.314 52.2281 113.06 55.0864 110.989 54.455C109.24 53.9217 107.879 56.0046 109.07 57.3924C110.48 59.0355 108.366 61.3318 106.612 60.0621C105.131 58.9897 103.168 60.5179 103.844 62.2172C104.644 64.2292 101.899 65.7147 100.652 63.9443C99.5993 62.449 97.2461 63.2568 97.3336 65.0835C97.4372 67.2464 94.3587 67.7601 93.7544 65.6808C93.244 63.9247 90.756 63.9247 90.2457 65.6808C89.6414 67.7601 86.5628 67.2464 86.6665 65.0835C86.754 63.2568 84.4008 62.449 83.3478 63.9443C82.1011 65.7147 79.3562 64.2292 80.1565 62.2172C80.8324 60.5179 78.869 58.9897 77.3876 60.0621C75.6336 61.3318 73.5197 59.0355 74.93 57.3924C76.121 56.0046 74.7602 53.9217 73.0109 54.455C70.9396 55.0864 69.6859 52.2281 71.5532 51.1319C73.1303 50.206 72.5196 47.7942 70.6919 47.7305C68.5279 47.6552 68.2701 44.5447 70.3922 44.1142C72.1845 43.7506 72.39 41.2711 70.682 40.6175C68.6597 39.8436 69.4259 36.818 71.5728 37.0998C73.386 37.3379 74.3854 35.0594 72.9822 33.8866C71.3208 32.498 73.0279 29.8851 74.9669 30.8488C76.6046 31.6627 78.2897 29.8322 77.3433 28.2673C76.2228 26.4145 78.6858 24.4974 80.2069 26.0385C81.4916 27.3401 83.6797 26.1559 83.2927 24.3686C82.8345 22.2523 85.7865 21.2388 86.7248 23.1903C87.5173 24.8385 89.9713 24.429 90.1857 22.6128Z",fill:"#BAE0B5"}),J().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M105.333 44.0003C105.333 51.3641 99.3638 57.3337 92.0001 57.3337C84.6363 57.3337 78.6667 51.3641 78.6667 44.0003C78.6667 36.6365 84.6363 30.667 92.0001 30.667C99.3638 30.667 105.333 36.6365 105.333 44.0003ZM97.3738 39.9599C97.7643 40.3504 97.7643 40.9836 97.3738 41.3741L90.7071 48.0407C90.3166 48.4313 89.6835 48.4313 89.293 48.0407L86.6263 45.3741C86.2358 44.9835 86.2358 44.3505 86.6263 43.9599C87.0168 43.5694 87.65 43.5694 88.0405 43.9599L90.0001 45.9194L92.9798 42.9397L95.9597 39.9599C96.3502 39.5694 96.9833 39.5694 97.3738 39.9599Z",fill:"#11A800"})),J().createElement("defs",null,J().createElement("filter",{id:"filter0_f_2670_9370",x:"-32",y:"-28",width:"248",height:"248",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},J().createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),J().createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),J().createElement("feGaussianBlur",{stdDeviation:"30",result:"effect1_foregroundBlur_2670_9370"})),J().createElement("clipPath",{id:"clip0_2670_9370"},J().createElement("rect",{width:"188",height:"188",fill:"white"}))))},bn=function(e){var t=e.className,n=pe(e,$e);return J().createElement("svg",ge({xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor"},n),J().createElement("path",{d:"M19.6667 11.9167L16.5833 3.58333C16.0833 2.5 15 1.66666 13.75 1.66666C12.1667 1.66666 10.8333 3 10.8333 4.58333V5H9.16667V4.58333C9.16667 3 7.83333 1.66666 6.25 1.66666C5 1.66666 3.91667 2.5 3.5 3.66666L0.416667 12C0.166667 12.5 0 13.0833 0 13.75C0 16.25 2.08333 18.3333 4.58333 18.3333C7 18.3333 8.91667 16.5 9.16667 14.1667H10.8333C11.0833 16.5 13 18.3333 15.4167 18.3333C17.9167 18.3333 20 16.25 20 13.75C20 13.0833 19.8333 12.5 19.6667 11.9167ZM4.58333 16.6667C3 16.6667 1.66667 15.3333 1.66667 13.75C1.66667 12.1667 3 10.8333 4.58333 10.8333C6.16667 10.8333 7.5 12.1667 7.5 13.75C7.5 15.3333 6.16667 16.6667 4.58333 16.6667ZM7.5 7.16666V10.1667C6.66667 9.58333 5.66667 9.16666 4.58333 9.16666C4.08333 9.16666 3.58333 9.25 3.08333 9.41666L4.83333 4.83333L5.08333 4.25C5.16667 4 5.33333 3.75 5.5 3.58333C5.58333 3.5 5.66667 3.41666 5.83333 3.41666C5.83333 3.41666 5.83333 3.41666 5.91667 3.41666C6 3.33333 6.08333 3.33333 6.25 3.33333C6.91667 3.33333 7.5 3.91666 7.5 4.58333V7.16666ZM10.8333 6.66666V12.5H9.16667V6.66666H10.8333ZM12.5 7.16666V4.58333C12.5 3.91666 13.0833 3.33333 13.75 3.33333C13.9167 3.33333 14 3.33333 14.0833 3.41666C14.0833 3.41666 14.0833 3.41666 14.1667 3.41666C14.25 3.41666 14.4167 3.5 14.5 3.58333C14.6667 3.75 14.8333 4 14.9167 4.25L15.1667 4.83333L16.9167 9.41666C16.4167 9.25 15.9167 9.16666 15.4167 9.16666C14.3333 9.16666 13.3333 9.58333 12.5 10.25V7.16666ZM15.4167 16.6667C13.8333 16.6667 12.5 15.3333 12.5 13.75C12.5 12.1667 13.8333 10.8333 15.4167 10.8333C17 10.8333 18.3333 12.1667 18.3333 13.75C18.3333 15.3333 17 16.6667 15.4167 16.6667Z",fill:"currentColor"}))},vn=function(e){var t=e.className,n=pe(e,et);return J().createElement("svg",ge({xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor"},n),J().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.9 1.96969C5.04164 1.77893 5.26393 1.66666 5.5 1.66666H14.5C14.7361 1.66666 14.9584 1.77893 15.1 1.96969L17.35 5C17.4474 5.13113 17.5 5.29063 17.5 5.45454V16.0606C17.5 16.6634 17.2629 17.2414 16.841 17.6677C16.419 18.0939 15.8467 18.3333 15.25 18.3333H4.75C4.15326 18.3333 3.58097 18.0939 3.15901 17.6677C2.73705 17.2414 2.5 16.6634 2.5 16.0606V5.45454C2.5 5.29063 2.55263 5.13113 2.65 5L4.9 1.96969ZM5.875 3.18182L4.75 4.69697H15.25L14.125 3.18182H5.875ZM16 6.21212H4V16.0606C4 16.2615 4.07902 16.4542 4.21967 16.5963C4.36032 16.7384 4.55109 16.8182 4.75 16.8182H15.25C15.4489 16.8182 15.6397 16.7384 15.7803 16.5963C15.921 16.4542 16 16.2615 16 16.0606V6.21212ZM7 7.72727C7.41421 7.72727 7.75 8.06645 7.75 8.48485C7.75 9.08761 7.98705 9.66569 8.40901 10.0919C8.83097 10.5181 9.40326 10.7576 10 10.7576C10.5967 10.7576 11.169 10.5181 11.591 10.0919C12.0129 9.66569 12.25 9.08761 12.25 8.48485C12.25 8.06645 12.5858 7.72727 13 7.72727C13.4142 7.72727 13.75 8.06645 13.75 8.48485C13.75 9.48945 13.3549 10.4529 12.6517 11.1633C11.9484 11.8736 10.9946 12.2727 10 12.2727C9.00544 12.2727 8.05161 11.8736 7.34835 11.1633C6.64509 10.4529 6.25 9.48945 6.25 8.48485C6.25 8.06645 6.58579 7.72727 7 7.72727Z",fill:"currentColor"}))},xn=function(e){var t=e.className,n=pe(e,tt);return J().createElement("svg",ge({xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor"},n),J().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0053 3.18194C9.6239 3.18194 9.24864 3.27799 8.9141 3.46123C8.57957 3.64446 8.29652 3.909 8.09106 4.23044C7.91944 4.49896 7.59818 4.63131 7.2873 4.56159C6.91401 4.47787 6.52564 4.48979 6.15819 4.59625C5.79073 4.70271 5.4561 4.90025 5.18531 5.17057C4.91452 5.44089 4.71635 5.77523 4.60916 6.14259C4.50197 6.50995 4.48924 6.89844 4.57215 7.27203C4.64135 7.58386 4.50761 7.90561 4.2378 8.07643C3.914 8.28142 3.64729 8.56501 3.46247 8.90081C3.27766 9.2366 3.18074 9.61371 3.18074 9.99704C3.18074 10.3804 3.27766 10.7575 3.46247 11.0933C3.64729 11.4291 3.914 11.7127 4.2378 11.9176C4.50761 12.0885 4.64135 12.4102 4.57215 12.722C4.48924 13.0956 4.50197 13.4841 4.60916 13.8515C4.71635 14.2188 4.91452 14.5532 5.18531 14.8235C5.4561 15.0938 5.79073 15.2914 6.15819 15.3978C6.52564 15.5043 6.91401 15.5162 7.2873 15.4325C7.59881 15.3626 7.92066 15.4957 8.09201 15.7651C8.2972 16.0878 8.58047 16.3535 8.91557 16.5375C9.25068 16.7216 9.62679 16.8181 10.0091 16.8181C10.3914 16.8181 10.7675 16.7216 11.1026 16.5375C11.4377 16.3535 11.721 16.0878 11.9262 15.7651C12.0972 15.4961 12.4182 15.3631 12.7293 15.4321C13.1028 15.5151 13.4911 15.5023 13.8584 15.3951C14.2256 15.2879 14.5598 15.0896 14.83 14.8188C15.1003 14.5479 15.2977 14.2131 15.4042 13.8455C15.5106 13.4779 15.5225 13.0894 15.4388 12.716C15.3691 12.405 15.5014 12.0836 15.7698 11.912C16.0912 11.7064 16.3556 11.4233 16.5388 11.0886C16.7219 10.754 16.818 10.3786 16.818 9.99704C16.818 9.6155 16.7219 9.2401 16.5388 8.90544C16.3556 8.57079 16.0912 8.28764 15.7698 8.08211C15.5013 7.91033 15.369 7.58873 15.4389 7.27761C15.523 6.90362 15.5111 6.51445 15.4044 6.14628C15.2977 5.77811 15.0997 5.4429 14.8288 5.17185C14.5578 4.9008 14.2227 4.70271 13.8547 4.59599C13.4866 4.48927 13.0976 4.47741 12.7238 4.56149C12.4128 4.63144 12.0913 4.4991 11.9195 4.23044C11.7141 3.909 11.431 3.64446 11.0965 3.46123C10.762 3.27799 10.3867 3.18194 10.0053 3.18194ZM8.18664 2.13214C8.74419 1.82675 9.36964 1.66667 10.0053 1.66667C10.641 1.66667 11.2664 1.82675 11.824 2.13214C12.2323 2.3558 12.5946 2.65211 12.8938 3.00513C13.3576 2.96475 13.8264 3.01015 14.2764 3.14062C14.8898 3.31848 15.4482 3.64864 15.8998 4.10039C16.3514 4.55215 16.6815 5.11081 16.8593 5.72443C16.9897 6.17457 17.0351 6.64354 16.9947 7.10754C17.3476 7.40684 17.6438 7.76925 17.8674 8.17772C18.1727 8.73548 18.3327 9.36114 18.3327 9.99704C18.3327 10.6329 18.1727 11.2586 17.8674 11.8164C17.6438 12.2249 17.3475 12.5874 16.9945 12.8867C17.0345 13.3498 16.9892 13.8178 16.8591 14.2671C16.6817 14.8797 16.3526 15.4376 15.9022 15.8891C15.4519 16.3406 14.8948 16.671 14.2828 16.8497C13.834 16.9807 13.3663 17.0271 12.9034 16.988C12.604 17.3429 12.241 17.6409 11.8316 17.8658C11.2731 18.1725 10.6462 18.3333 10.0091 18.3333C9.37193 18.3333 8.74507 18.1725 8.18656 17.8658C7.77745 17.641 7.41471 17.3434 7.1155 16.9888C6.65296 17.0287 6.18553 16.9833 5.73682 16.8533C5.1244 16.6759 4.56667 16.3466 4.11536 15.8961C3.66404 15.4455 3.33375 14.8883 3.15511 14.276C3.02423 13.8275 2.97784 13.360 3.01673 12.8973C2.66052 12.5979 2.36137 12.2344 2.13557 11.8241C1.82754 11.2644 1.66602 10.6359 1.66602 9.99704C1.66602 9.35815 1.82754 8.72965 2.13557 8.16998C2.36137 7.75972 2.66052 7.39621 3.01673 7.09679C2.97784 6.63404 3.02423 6.16658 3.15511 5.71802C3.33375 5.10576 3.66405 4.54852 4.11536 4.09799C4.56667 3.64746 5.1244 3.31822 5.73682 3.14079C6.1859 3.01068 6.65373 2.9653 7.11665 3.00536C7.41587 2.65224 7.77823 2.35584 8.18664 2.13214ZM12.8129 7.94604C13.1087 8.24191 13.1087 8.72162 12.8129 9.01749L9.78347 12.048C9.48771 12.3439 9.00817 12.3439 8.7124 12.048L7.19767 10.5328C6.9019 10.2369 6.9019 9.75718 7.19767 9.46131C7.49344 9.16543 7.97298 9.16543 8.26875 9.46131L9.24794 10.4408L11.7419 7.94604C12.0376 7.65016 12.5172 7.65016 12.8129 7.94604Z",fill:"currentColor"}))},wn=function(e){var t=e.className,n=pe(e,nt);return J().createElement("svg",ge({xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor"},n),J().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.6682 2.33249C17.2419 1.90617 16.6637 1.66667 16.0608 1.66667H10.6262C10.0234 1.6668 9.44517 1.90635 9.01896 2.33265C9.01899 2.33262 9.01894 2.33267 9.01896 2.33265L2.42187 8.92974C1.93857 9.41612 1.66732 10.0739 1.66732 10.7596C1.66732 11.4453 1.93857 12.1031 2.42187 12.5894L2.42356 12.5911L7.40952 17.5771L7.41122 17.5788C7.89759 18.0621 8.5554 18.3333 9.24106 18.3333C9.92672 18.3333 10.5845 18.0621 11.0709 17.5788L11.0726 17.5771L17.6679 10.9818C17.668 10.9817 17.6679 10.9818 17.6679 10.9818C18.0942 10.5556 18.3339 9.97741 18.334 9.3746V3.9399C18.334 3.337 18.0945 2.7588 17.6682 2.33249ZM16.0608 3.18216C16.2617 3.18216 16.4545 3.26199 16.5966 3.4041C16.7387 3.5462 16.8185 3.73894 16.8185 3.9399V9.37428C16.8185 9.37422 16.8185 9.37433 16.8185 9.37428C16.8184 9.57517 16.7386 9.76797 16.5965 9.91L10.0027 16.5038C10.0024 16.504 10.0022 16.5043 10.0019 16.5046C9.79955 16.7052 9.52609 16.8179 9.24106 16.8179C8.95604 16.8179 8.68258 16.7052 8.48022 16.5046C8.47995 16.5043 8.47969 16.504 8.47943 16.5038L3.49687 11.5212C3.49661 11.521 3.49635 11.5207 3.49609 11.5204C3.29542 11.3181 3.1828 11.0446 3.1828 10.7596C3.1828 10.4746 3.29542 10.2011 3.49609 9.99875C3.49635 9.99848 3.49661 9.99822 3.49687 9.99796L10.0906 3.40426C10.2326 3.26218 10.4253 3.18224 10.6262 3.18216C10.6263 3.18216 10.6262 3.18216 10.6262 3.18216H16.0608ZM13.4087 6.97088C13.1994 6.97088 13.0298 6.80125 13.0298 6.592C13.0298 6.38276 13.1994 6.21313 13.4087 6.21313C13.6179 6.21313 13.7875 6.38276 13.7875 6.592C13.7875 6.80125 13.6179 6.97088 13.4087 6.97088ZM14.5453 6.592C14.5453 5.96427 14.0364 5.45539 13.4087 5.45539C12.7809 5.45539 12.272 5.96427 12.272 6.592C12.272 7.21974 12.7809 7.72862 13.4087 7.72862C14.0364 7.72862 14.5453 7.21974 14.5453 6.592Z",fill:"currentColor"}))},En=function(e){var t=e.className,n=pe(e,rt);return J().createElement("svg",ge({xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor"},n),J().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.56622 4.06558C2.03506 3.59674 2.67094 3.33334 3.33398 3.33334H16.6673C17.3304 3.33334 17.9662 3.59674 18.4351 4.06558C18.9039 4.53442 19.1673 5.1703 19.1673 5.83334V7.50001C19.1673 7.96025 18.7942 8.33334 18.334 8.33334C17.892 8.33334 17.468 8.50894 17.1555 8.8215C16.8429 9.13406 16.6673 9.55798 16.6673 10C16.6673 10.442 16.8429 10.866 17.1555 11.1785C17.468 11.4911 17.892 11.6667 18.334 11.6667C18.7942 11.6667 19.1673 12.0398 19.1673 12.5V14.1667C19.1673 14.8297 18.9039 15.4656 18.4351 15.9344C17.9662 16.4033 17.3304 16.6667 16.6673 16.6667H3.33398C2.67094 16.6667 2.03506 16.4033 1.56622 15.9344C1.09738 15.4656 0.833984 14.8297 0.833984 14.1667V12.5C0.833984 12.0398 1.20708 11.6667 1.66732 11.6667C2.10935 11.6667 2.53327 11.4911 2.84583 11.1785C3.15839 10.866 3.33398 10.442 3.33398 10C3.33398 9.55798 3.15839 9.13406 2.84583 8.8215C2.53327 8.50894 2.10935 8.33334 1.66732 8.33334C1.20708 8.33334 0.833984 7.96025 0.833984 7.50001V5.83334C0.833984 5.1703 1.09738 4.53442 1.56622 4.06558ZM3.33398 5.00001C3.11297 5.00001 2.90101 5.08781 2.74473 5.24409C2.58845 5.40037 2.50065 5.61233 2.50065 5.83334V6.77251C3.07234 6.92014 3.59972 7.21837 4.02434 7.64299C4.64946 8.26811 5.00065 9.11596 5.00065 10C5.00065 10.8841 4.64946 11.7319 4.02434 12.357C3.59972 12.7817 3.07234 13.0799 2.50065 13.2275V14.1667C2.50065 14.3877 2.58845 14.5997 2.74473 14.7559C2.90101 14.9122 3.11297 15 3.33398 15H16.6673C16.8883 15 17.1003 14.9122 17.2566 14.7559C17.4129 14.5997 17.5006 14.3877 17.5006 14.1667V13.2275C16.929 13.0799 16.4016 12.7817 15.977 12.357C15.3518 11.7319 15.0006 10.8841 15.0006 10C15.0006 9.11596 15.3518 8.26811 15.977 7.64299C16.4016 7.21837 16.929 6.92014 17.5006 6.77251V5.83334C17.5006 5.61233 17.4129 5.40037 17.2566 5.24409C17.1003 5.08781 16.8883 5.00001 16.6673 5.00001H3.33398ZM7.50065 8.33334C7.04041 8.33334 6.66732 7.96025 6.66732 7.50001C6.66732 7.03977 7.04041 6.66668 7.50065 6.66668H7.50898C7.96922 6.66668 8.34232 7.03977 8.34232 7.50001C8.34232 7.96025 7.96922 8.33334 7.50898 8.33334H7.50065ZM11.9114 6.91075C12.2368 6.58532 12.7645 6.58532 13.0899 6.91075C13.4153 7.23619 13.4153 7.76383 13.0899 8.08927L8.08991 13.0893C7.76447 13.4147 7.23683 13.4147 6.9114 13.0893C6.58596 12.7638 6.58596 12.2362 6.9114 11.9108L11.9114 6.91075ZM12.509 13.3333H12.5007C12.0404 13.3333 11.6673 12.9602 11.6673 12.5C11.6673 12.0398 12.0404 11.6667 12.5007 11.6667H12.509C12.9692 11.6667 13.3423 12.0398 13.3423 12.5C13.3423 12.9602 12.9692 13.3333 12.509 13.3333Z",fill:"currentColor"}))},Cn=function(e){var t=e.className,n=pe(e,at);return J().createElement("svg",ge({xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 20 20",fill:"currentColor"},n),J().createElement("path",{d:"M7.72678 2.97686C8.61648 1.0276 11.386 1.02754 12.2756 2.97686L12.5266 3.52764C12.6934 3.89294 13.0969 4.08686 13.4865 3.98955L14.0735 3.84307C16.1523 3.32303 17.8799 5.48866 16.9104 7.39971L16.636 7.93877C16.4542 8.29696 16.5542 8.73386 16.8733 8.97783L17.3537 9.34502C19.0565 10.6461 18.4406 13.347 16.342 13.7806L15.7492 13.9026C15.356 13.984 15.077 14.3341 15.0852 14.7356L15.0969 15.3411C15.1409 17.4832 12.6465 18.6848 10.9992 17.3147L10.5344 16.9271C10.2256 16.6701 9.77684 16.6702 9.46799 16.9271L9.00315 17.3147C7.35587 18.6849 4.86048 17.4832 4.90451 15.3411L4.91721 14.7356C4.9254 14.3342 4.64628 13.9841 4.25315 13.9026L3.66037 13.7806C1.56174 13.3471 0.945029 10.6462 2.64768 9.34502L3.12912 8.97783C3.44804 8.73384 3.54716 8.29691 3.36545 7.93877L3.09201 7.39971C2.12248 5.48878 3.84925 3.32344 5.92795 3.84307L6.51487 3.98955C6.90459 4.08704 7.309 3.8931 7.4758 3.52764L7.72678 2.97686ZM10.759 3.66924C10.4625 3.01937 9.53991 3.01938 9.24338 3.66924L8.99143 4.21904C8.49109 5.31557 7.27983 5.89923 6.11057 5.60674L5.52365 5.46025C4.83078 5.2871 4.25517 6.00884 4.57834 6.6458L4.85178 7.18486C5.39707 8.25961 5.0983 9.5702 4.14084 10.3021L3.66037 10.6692C3.09284 11.1029 3.2979 12.0031 3.99729 12.1478L4.59006 12.2708C5.77027 12.5147 6.6082 13.5659 6.58323 14.7708L6.57151 15.3753C6.55678 16.0892 7.38763 16.4897 7.93674 16.0335L8.40256 15.6458C9.32901 14.8754 10.6734 14.8753 11.5998 15.6458L12.0647 16.0335C12.6138 16.4903 13.4456 16.0894 13.4309 15.3753L13.4182 14.7708C13.3932 13.5658 14.232 12.5146 15.4123 12.2708L16.0051 12.1478C16.7043 12.003 16.9095 11.1028 16.342 10.6692L15.8615 10.3021C14.904 9.57025 14.6044 8.25965 15.1496 7.18486L15.424 6.6458C15.7472 6.00878 15.1707 5.28691 14.4778 5.46025L13.8918 5.60674C12.7226 5.89923 11.5103 5.31558 11.01 4.21904L10.759 3.66924ZM10.0012 6.66631C10.8851 6.66634 11.7326 7.01797 12.3576 7.64287C12.9828 8.26799 13.3342 9.11624 13.3342 10.0003C13.3341 10.8843 12.9827 11.7317 12.3576 12.3567C11.7326 12.9818 10.8852 13.3333 10.0012 13.3333C9.11714 13.3333 8.26889 12.9819 7.64377 12.3567C7.0189 11.7317 6.66825 10.8841 6.66819 10.0003C6.66819 9.11627 7.01869 8.26799 7.64377 7.64287C8.26889 7.01775 9.11714 6.66631 10.0012 6.66631ZM10.0012 8.3333C9.55917 8.3333 9.13504 8.50902 8.82248 8.82158C8.50996 9.13414 8.3342 9.55829 8.3342 10.0003C8.33427 10.4422 8.50998 10.8665 8.82248 11.179C9.13503 11.4914 9.55925 11.6663 10.0012 11.6663C10.4431 11.6663 10.8674 11.4915 11.1799 11.179C11.4924 10.8665 11.6681 10.4422 11.6682 10.0003C11.6682 9.55835 11.4924 9.13412 11.1799 8.82158C10.8674 8.50905 10.4432 8.3333 10.0012 8.3333Z",fill:"currentColor"}))},Nn=function(e){var t=e.className,n=pe(e,lt);return J().createElement("svg",ge({className:t,fill:"currentColor",viewBox:"0 0 20 20"},n),J().createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"}))},kn=function(e){var t=e.className,n=pe(e,it);return J().createElement("svg",ge({className:t,fill:"currentColor",viewBox:"0 0 20 20"},n),J().createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"}))},Sn=function(e){var t=e.className,n=pe(e,ot);return J().createElement("svg",ge({className:t,fill:"currentColor",viewBox:"0 0 20 20"},n),J().createElement("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"}))},On=function(e){var t=e.className,n=pe(e,st);return J().createElement("svg",ge({className:t,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),J().createElement("path",{d:"M8 1C9.85652 1 11.637 1.7375 12.9497 3.05025C14.2625 4.36301 15 6.14348 15 8C15 9.85652 14.2625 11.637 12.9497 12.9497C11.637 14.2625 9.85652 15 8 15C6.14348 15 4.36301 14.2625 3.05025 12.9497C1.7375 11.637 1 9.85652 1 8C1 6.14348 1.7375 4.36301 3.05025 3.05025C4.36301 1.7375 6.14348 1 8 1ZM8 4C7.87304 3.99989 7.74745 4.02626 7.63126 4.07743C7.51507 4.1286 7.41082 4.20344 7.32519 4.29717C7.23955 4.3909 7.1744 4.50146 7.13391 4.62179C7.09341 4.74211 7.07846 4.86957 7.09 4.996L7.455 9.002C7.46915 9.13668 7.53267 9.26136 7.63331 9.35197C7.73395 9.44259 7.86458 9.49274 8 9.49274C8.13542 9.49274 8.26605 9.44259 8.36669 9.35197C8.46733 9.26136 8.53085 9.13668 8.545 9.002L8.909 4.996C8.92053 4.86965 8.90561 4.74228 8.86517 4.62202C8.82474 4.50176 8.75968 4.39125 8.67415 4.29754C8.58862 4.20382 8.4845 4.12896 8.36843 4.07773C8.25235 4.0265 8.12688 4.00003 8 4ZM8 12C8.21217 12 8.41566 11.9157 8.56569 11.7657C8.71571 11.6157 8.8 11.4122 8.8 11.2C8.8 10.9878 8.71571 10.7843 8.56569 10.6343C8.41566 10.4843 8.21217 10.4 8 10.4C7.78783 10.4 7.58434 10.4843 7.43431 10.6343C7.28429 10.7843 7.2 10.9878 7.2 11.2C7.2 11.4122 7.28429 11.6157 7.43431 11.7657C7.58434 11.9157 7.78783 12 8 12Z",fill:"#DB1F21"}))},Pn=function(e){var t=e.className,n=pe(e,ct);return J().createElement("svg",ge({className:t,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),J().createElement("path",{d:"M12 8C16.9706 8 21 6.65685 21 5C21 3.34315 16.9706 2 12 2C7.02944 2 3 3.34315 3 5C3 6.65685 7.02944 8 12 8Z",stroke:"#DEA40F",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),J().createElement("path",{d:"M21 12C21 13.66 17 15 12 15C7 15 3 13.66 3 12",stroke:"#DEA40F",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),J().createElement("path",{d:"M3 5V19C3 20.66 7 22 12 22C17 22 21 20.66 21 19V5",stroke:"#DEA40F",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))},Tn=function(e){var t=e.className,n=pe(e,ut);return J().createElement("svg",ge({className:t,fill:"currentColor",viewBox:"0 0 20 20"},n),J().createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))},Dn=function(e){var t=e.className,n=pe(e,mt);return J().createElement("svg",ge({className:t,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},n),J().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 4C4.44772 4 4 4.44772 4 5V19C4 19.5523 4.44771 20 5 20H5.58579L14.3789 11.2069C14.9415 10.6445 15.7045 10.3284 16.5 10.3284C17.2955 10.3284 18.0584 10.6444 18.621 11.2068L20 12.5858V5C20 4.44771 19.5523 4 19 4H5ZM22 14.999V5C22 3.34315 20.6569 2 19 2H5C3.34315 2 2 3.34315 2 5V19C2 20.6569 3.34315 22 5 22H5.99902C5.99967 22 6.00033 22 6.00098 22H19C20.6569 22 22 20.6569 22 19V15.001C22 15.0003 22 14.9997 22 14.999ZM20 15.4142L17.207 12.6212C17.207 12.6212 17.207 12.6212 17.207 12.6212C17.0195 12.4338 16.7651 12.3284 16.5 12.3284C16.2349 12.3284 15.9806 12.4337 15.7931 12.6211C15.7931 12.6211 15.7931 12.6211 15.7931 12.6211L8.41421 20H19C19.5523 20 20 19.5523 20 19V15.4142ZM9 8C8.44772 8 8 8.44772 8 9C8 9.55228 8.44772 10 9 10C9.55228 10 10 9.55228 10 9C10 8.44772 9.55228 8 9 8ZM6 9C6 7.34315 7.34315 6 9 6C10.6569 6 12 7.34315 12 9C12 10.6569 10.6569 12 9 12C7.34315 12 6 10.6569 6 9Z"}))},In=function(e){var t=e.className,n=pe(e,dt);return J().createElement("svg",ge({xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"currentColor"},n),J().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.8769 3.00024C19.7295 3.00024 19.5835 3.02928 19.4473 3.08571C19.3111 3.14213 19.1873 3.22483 19.083 3.32909L15.064 7.34809C14.7827 7.62929 14.4012 7.78737 14.0034 7.78737C13.6057 7.78737 13.2242 7.6294 12.9429 7.34819L11.9989 6.40414C11.7344 6.13976 11.3758 5.99123 11.0019 5.99123C10.628 5.99123 10.2694 6.13976 10.005 6.40414L9.41466 6.99446L17.0064 14.5853L17.5968 13.9949C17.5967 13.9949 17.5968 13.9949 17.5968 13.9949C17.8611 13.7305 18.0097 13.3719 18.0097 12.998C18.0097 12.6241 17.8611 12.2655 17.5968 12.001L16.6528 11.0571C16.3716 10.7758 16.2135 10.3942 16.2135 9.99648C16.2135 9.59873 16.3715 9.21727 16.6527 8.93598L20.6707 4.91696C20.775 4.8127 20.8578 4.68885 20.9142 4.55263C20.9706 4.41642 20.9997 4.27042 20.9997 4.12298C20.9997 3.97554 20.9706 3.82954 20.9142 3.69333C20.8578 3.55711 20.7751 3.43334 20.6708 3.32909C20.5666 3.22483 20.4428 3.14213 20.3066 3.08571C20.1704 3.02928 20.0244 3.00024 19.8769 3.00024ZM14.9361 15.3435L9.11337 9.52147C8.31287 10.4827 7.43798 11.1765 6.48488 11.6882C5.50406 12.2149 4.4692 12.5328 3.41064 12.7669L4.51148 14.1028L14.2092 16.7479C14.349 16.5378 14.4739 16.334 14.5816 16.1393C14.7635 15.8103 14.8745 15.5452 14.9361 15.3435ZM15.3971 18.5292C15.4153 18.5068 15.4326 18.4836 15.449 18.4596C15.7849 18.0068 16.0869 17.5501 16.3319 17.107C16.4022 16.9798 16.4704 16.8493 16.5346 16.7162C16.6854 16.7662 16.8446 16.7924 17.0064 16.7924C17.4042 16.7924 17.7856 16.6344 18.0669 16.3532L19.011 15.4091C19.6504 14.7696 20.0097 13.9023 20.0097 12.998C20.0097 12.0937 19.6505 11.2264 19.0111 10.5869L18.4206 9.99644L22.085 6.33109C22.085 6.33111 22.0851 6.33106 22.085 6.33109C22.375 6.04113 22.605 5.69683 22.762 5.318C22.9189 4.93913 22.9997 4.53306 22.9997 4.12298C22.9997 3.7129 22.9189 3.30683 22.762 2.92796C22.605 2.54909 22.375 2.20484 22.085 1.91487C21.7951 1.6249 21.4508 1.39488 21.0719 1.23795C20.6931 1.08102 20.287 1.00024 19.8769 1.00024C19.4668 1.00024 19.0608 1.08102 18.6819 1.23795C18.303 1.39488 17.9588 1.6249 17.6688 1.91487L14.0034 5.58027L13.413 4.98987C12.7735 4.35048 11.9062 3.99123 11.0019 3.99123C10.0976 3.99123 9.23035 4.35043 8.59087 4.98982L7.64681 5.93387C7.36561 6.21516 7.20753 6.59673 7.20753 6.99448C7.20753 7.39223 7.3655 7.77369 7.64671 8.05498L7.69182 8.10009C7.01435 8.95034 6.29888 9.51802 5.53871 9.92621C4.5816 10.4402 3.50727 10.727 2.23479 10.9647C1.97809 11.012 1.73806 11.1252 1.53824 11.2932C1.33775 11.4617 1.18466 11.6796 1.09404 11.9254C1.00343 12.1711 0.978422 12.4362 1.02149 12.6946C1.06457 12.9529 1.17423 13.1956 1.33966 13.3986L3.16744 15.6167C3.16959 15.6193 3.17175 15.622 3.17392 15.6246L8.66319 22.2859C8.67719 22.3029 8.69175 22.3194 8.70685 22.3355C9.00421 22.6513 9.39618 22.8619 9.82368 22.9355C10.2512 23.0091 10.691 22.9417 11.0769 22.7435C11.1143 22.7243 11.1504 22.7027 11.1851 22.6789C12.3371 21.8897 13.7491 20.5544 14.8741 19.1924C15.0545 18.9739 15.2298 18.7521 15.3971 18.5292ZM12.8708 18.4559L6.71505 16.7769L10.1591 20.9563C10.9668 20.3843 11.9732 19.463 12.8708 18.4559Z"}))},jn=function(e){var t=e.className,n=pe(e,gt);return J().createElement("svg",ge({xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 24 24",fill:"currentColor"},n),J().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.5579 3.02796C16.0749 2.97339 15.5839 2.9892 15.1002 3.07733C14.1003 3.25952 13.1796 3.74211 12.4609 4.46081C11.7422 5.1795 11.2596 6.10016 11.0774 7.10009C10.8953 8.10001 11.0221 9.13172 11.4412 10.0577C11.6128 10.4369 11.5315 10.8828 11.2372 11.1771L4.32721 18.0871C4.11692 18.2974 3.99878 18.5826 3.99878 18.88C3.99878 19.1774 4.11692 19.4626 4.32721 19.6729C4.5375 19.8832 4.82271 20.0013 5.1201 20.0013C5.41749 20.0013 5.7027 19.8832 5.91299 19.6729L12.823 12.7629C13.1173 12.4686 13.5632 12.3873 13.9424 12.5589C14.8684 12.978 15.9001 13.1048 16.9 12.9226C17.8999 12.7404 18.8206 12.2578 19.5393 11.5392C20.258 10.8205 20.7406 9.8998 20.9228 8.89987C21.0109 8.41622 21.0267 7.92514 20.9721 7.44218L18.4001 10.0142C18.0263 10.3806 17.5236 10.5858 17.0001 10.5858C16.4766 10.5858 15.974 10.3806 15.6001 10.0141L15.593 10.0071L13.9859 8.40002C13.6195 8.02616 13.4142 7.52349 13.4142 6.99998C13.4142 6.47647 13.6195 5.97384 13.986 5.59998L13.993 5.59284L16.5579 3.02796ZM14.7417 1.10972C16.1416 0.854655 17.586 1.03228 18.8824 1.61892C19.1815 1.75426 19.3951 2.02777 19.4539 2.35073C19.5127 2.67369 19.4093 3.00496 19.1772 3.23709L15.4143 6.99998L17.0001 8.58577L20.763 4.82287C20.9951 4.59075 21.3264 4.48733 21.6493 4.54618C21.9723 4.60502 22.2458 4.81863 22.3812 5.11771C22.9678 6.41409 23.1454 7.85848 22.8904 9.25838C22.6353 10.6583 21.9597 11.9472 20.9535 12.9534C19.9473 13.9595 18.6584 14.6352 17.2585 14.8902C16.091 15.103 14.8927 15.0147 13.775 14.6393L7.32721 21.0871C6.74185 21.6724 5.94793 22.0013 5.1201 22.0013C4.29227 22.0013 3.49835 21.6724 2.91299 21.0871C2.32763 20.5017 1.99878 19.7078 1.99878 18.88C1.99878 18.0522 2.32763 17.2582 2.91299 16.6729L9.36075 10.2251C8.98534 9.10743 8.89713 7.90903 9.10984 6.74158C9.3649 5.34169 10.0405 4.05277 11.0467 3.0466C12.0529 2.04042 13.3418 1.36478 14.7417 1.10972Z"}))},An=function(e){var t=e.className,n=pe(e,pt);return J().createElement("svg",ge({width:"34",height:"43",viewBox:"0 0 34 43",fill:"none",className:t},n),J().createElement("ellipse",{cx:"16.9999",cy:"41.3026",rx:"11.3158",ry:"1.69737",fill:"black",fillOpacity:"0.15"}),J().createElement("path",{d:"M5.68408 7.78931H28.3157V33.0788C28.3157 34.7356 26.9725 36.0788 25.3157 36.0788H8.68408C7.02723 36.0788 5.68408 34.7356 5.68408 33.0788V7.78931Z",fill:"#FF7366"}),J().createElement("path",{d:"M1.15771 8.22485H32.8419M5.40114 8.22485H28.5985L27.4669 33.2937C27.4669 34.0324 27.1689 34.7409 26.6383 35.2633C26.1078 35.7856 25.3883 36.0791 24.638 36.0791H9.36166C8.61138 36.0791 7.89182 35.7856 7.36129 35.2633C6.83076 34.7409 6.53271 34.0324 6.53271 33.2937L5.40114 8.22485Z",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),J().createElement("path",{d:"M12.4741 14.6578V29.6577M21.5258 14.6578V29.6577M11.3425 3.06577H22.6572C23.1749 3.06577 23.6315 3.37946 23.8152 3.85263L25.5731 8.22485H8.42651L10.1844 3.85263C10.3681 3.37946 10.8247 3.06577 11.3425 3.06577Z",stroke:"black",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))},Ln=function(e){var t=e.className,n=pe(e,ft);return J().createElement("svg",ge({width:"41",height:"40",viewBox:"0 0 41 40",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t},n),J().createElement("circle",{cx:"20.5",cy:"20",r:"20",fill:"#EBF6EA"}),J().createElement("g",{clipPath:"url(#clip0_upload_icon)"},J().createElement("path",{d:"M24 24L20 20L16 24",stroke:"#22c55e",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),J().createElement("path",{d:"M20 20V29",stroke:"#22c55e",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),J().createElement("path",{d:"M28.39 26.39C29.3654 25.8583 30.1359 25.0169 30.5799 23.9986C31.0239 22.9804 31.1162 21.8432 30.8422 20.7667C30.5682 19.6901 29.9435 18.7355 29.0667 18.0534C28.1899 17.3714 27.1109 17.0007 26 17H24.74C24.4373 15.8292 23.8732 14.7423 23.09 13.821C22.3068 12.8996 21.3249 12.1678 20.2181 11.6806C19.1114 11.1933 17.9086 10.9633 16.7001 11.0079C15.4917 11.0524 14.3091 11.3703 13.2412 11.9376C12.1733 12.505 11.2479 13.3071 10.5346 14.2836C9.82135 15.26 9.33871 16.3855 9.123 17.5754C8.90729 18.7652 8.96413 19.9885 9.28923 21.1532C9.61434 22.318 10.1993 23.3938 11 24.3",stroke:"#22c55e",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),J().createElement("path",{d:"M24 24L20 20L16 24",stroke:"#22c55e",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})),J().createElement("defs",null,J().createElement("clipPath",{id:"clip0_upload_icon"},J().createElement("rect",{width:"24",height:"24",fill:"white",transform:"translate(8 8)"}))))},Mn=function(e){var t=e.className,n=pe(e,yt);return J().createElement("svg",ge({className:t,fill:"currentColor",viewBox:"0 0 20 20"},n),J().createElement("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"}))},Rn=function(e){var t=e.className,n=pe(e,ht);return J().createElement("svg",ge({className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n),J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"}))},Fn=function(e){var t=e.className,n=pe(e,_t);return J().createElement("svg",ge({className:t,fill:"currentColor",viewBox:"0 0 20 20"},n),J().createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"}))},zn=function(e){var t=e.className,n=pe(e,bt);return J().createElement("svg",ge({className:t,viewBox:"0 0 20 20",fill:"currentColor"},n),J().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.33301 3.33329C2.87277 3.33329 2.49967 3.70639 2.49967 4.16663V12.5C2.49967 12.9602 2.87277 13.3333 3.33301 13.3333H16.6663C17.1266 13.3333 17.4997 12.9602 17.4997 12.5V4.16663C17.4997 3.70639 17.1266 3.33329 16.6663 3.33329H3.33301ZM10.833 15H16.6663C18.0471 15 19.1663 13.8807 19.1663 12.5V4.16663C19.1663 2.78591 18.0471 1.66663 16.6663 1.66663H3.33301C1.9523 1.66663 0.833008 2.78591 0.833008 4.16663V12.5C0.833008 13.8807 1.9523 15 3.33301 15H9.16634V16.6666H6.66634C6.2061 16.6666 5.83301 17.0397 5.83301 17.5C5.83301 17.9602 6.2061 18.3333 6.66634 18.3333H13.333C13.7932 18.3333 14.1663 17.9602 14.1663 17.5C14.1663 17.0397 13.7932 16.6666 13.333 16.6666H10.833V15Z"}))},Bn=function(e){var t=e.className,n=pe(e,vt);return J().createElement("svg",ge({className:t,viewBox:"0 0 14 20",fill:"currentColor"},n),J().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.83301 2.50004C2.37277 2.50004 1.99967 2.87314 1.99967 3.33337V16.6667C1.99967 17.1269 2.37277 17.5 2.83301 17.5H11.1663C11.6266 17.5 11.9997 17.1269 11.9997 16.6667V3.33337C11.9997 2.87314 11.6266 2.50004 11.1663 2.50004H2.83301ZM0.333008 3.33337C0.333008 1.95266 1.4523 0.833374 2.83301 0.833374H11.1663C12.5471 0.833374 13.6663 1.95266 13.6663 3.33337V16.6667C13.6663 18.0474 12.5471 19.1667 11.1663 19.1667H2.83301C1.4523 19.1667 0.333008 18.0474 0.333008 16.6667V3.33337ZM6.16634 15C6.16634 14.5398 6.53944 14.1667 6.99967 14.1667H7.00801C7.46825 14.1667 7.84134 14.5398 7.84134 15C7.84134 15.4603 7.46825 15.8334 7.00801 15.8334H6.99967C6.53944 15.8334 6.16634 15.4603 6.16634 15Z"}))},qn=function(e){var t=e.className,n=pe(e,xt);return J().createElement("svg",ge({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",className:t},n),J().createElement("path",{d:"M15.8333 10H4.16663",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),J().createElement("path",{d:"M9.99996 15.8332L4.16663 9.99984L9.99996 4.1665",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))},Hn=function(e){var t=e.className,n=pe(e,wt);return J().createElement("svg",ge({className:t,viewBox:"0 0 20 20",fill:"currentColor"},n),J().createElement("path",{fillRule:"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z",clipRule:"evenodd"}))},Gn=function(e){var t=e.className,n=pe(e,Et);return J().createElement("svg",ge({className:t,viewBox:"0 0 24 24",fill:"currentColor"},n),J().createElement("path",{fillRule:"evenodd",d:"M6.75 3a.75.75 0 01.75.75V5h9V3.75a.75.75 0 011.5 0V5h.75A2.25 2.25 0 0121 7.25v11.5A2.25 2.25 0 0118.75 21H5.25A2.25 2.25 0 013 18.75V7.25A2.25 2.25 0 015.25 5H6V3.75A.75.75 0 016.75 3zm0 7.5a.75.75 0 000 1.5h10.5a.75.75 0 000-1.5H6.75z",clipRule:"evenodd"}))},Un=function(e){var t=e.className,n=pe(e,Ct);return J().createElement("svg",ge({className:t,width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),J().createElement("path",{d:"M1.5 3H2.5H10.5",stroke:"#374151",strokeLinecap:"round",strokeLinejoin:"round"}),J().createElement("path",{d:"M9.5 3V10C9.5 10.2652 9.39464 10.5196 9.20711 10.7071C9.01957 10.8946 8.76522 11 8.5 11H3.5C3.23478 11 2.98043 10.8946 2.79289 10.7071C2.60536 10.5196 2.5 10.2652 2.5 10V3M4 3V2C4 1.73478 4.10536 1.48043 4.29289 1.29289C4.48043 1.10536 4.73478 1 5 1H7C7.26522 1 7.51957 1.10536 7.70711 1.29289C7.89464 1.48043 8 1.73478 8 2V3",stroke:"#374151",strokeLinecap:"round",strokeLinejoin:"round"}))},Wn=function(e){var t=e.className,n=pe(e,Nt);return J().createElement("svg",ge({className:t,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},n),J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"}))},Vn=function(e){var t=e.className,n=pe(e,kt);return J().createElement("svg",ge({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t},n),J().createElement("path",{d:"M15.8327 10H4.16602",stroke:"#374151",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),J().createElement("path",{d:"M9.99935 15.8332L4.16602 9.99984L9.99935 4.1665",stroke:"#374151",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))},Kn=function(e){var t=e.className,n=pe(e,St);return J().createElement("svg",ge({width:"21",height:"20",viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t},n),J().createElement("path",{d:"M4.6665 10.625H16.3332",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),J().createElement("path",{d:"M10.5 4.79175L16.3333 10.6251L10.5 16.4584",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))},Qn=function(e){var t=e.className,n=pe(e,Ot);return J().createElement("svg",ge({xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",fill:"none",className:t},n),J().createElement("g",{clipPath:"url(#empty_state_clip)"},J().createElement("ellipse",{cx:"32",cy:"57",fill:"#000",fillOpacity:".1",rx:"20",ry:"2"}),J().createElement("path",{fill:"#F1F1F1",d:"M49.492 35.1c-.297 1.419-1.74 2.563-3.182 2.563H17.569c-1.442 0-2.885-1.144-3.182-2.564L9.1 10.564C8.78 9.144 9.718 8 11.16 8h41.558c1.443 0 2.381 1.145 2.06 2.564z"}),J().createElement("path",{fill:"#D2D2D2",d:"M38.775 13.742c-1.443 0-3.022 1.122-3.526 2.473l-1.443 4.075c-.48 1.374-2.06 2.496-3.525 2.496H9.608c-1.442 0-2.313 1.122-1.946 2.519l5.836 24.967c.366 1.397 1.854 2.542 3.297 2.542h30.383c1.442 0 2.93-1.145 3.297-2.542l5.836-24.967c.389-1.397 1.076-3.64 1.58-5.015l1.442-4.075c.48-1.35-.298-2.473-1.74-2.473z"}),J().createElement("path",{fill:"#000",fillOpacity:".7",d:"M30.024 34.394c0 1.512-.893 2.748-1.992 2.748-1.077 0-1.97-1.236-1.97-2.748 0-1.534.893-2.77 1.97-2.77 1.099 0 1.991 1.236 1.991 2.77M41.002 34.394c0 1.512-.893 2.748-1.992 2.748s-1.969-1.236-1.969-2.748c0-1.534.87-2.77 1.97-2.77 1.098 0 1.991 1.236 1.991 2.77"}),J().createElement("path",{fill:"#000",fillOpacity:".7",fillRule:"evenodd",d:"M39.017 41.093a.547.547 0 0 1-.244.733c-2.673 1.336-7.896 1.15-10.189.047a.547.547 0 0 1 .214-1.072c3.172 1.083 6.963 1.083 9.478.05l.008-.003a.547.547 0 0 1 .733.245",clipRule:"evenodd"}),J().createElement("path",{fill:"#000",fillOpacity:".7",d:"M4.253 35.736a1.043 1.043 0 0 1-1.487-1.464l6.507-6.61 1.447 1.504z"}),J().createElement("path",{fill:"#000",fillOpacity:".7",fillRule:"evenodd",d:"M22.248 29.01c-3.866 3.686-9.99 3.548-13.69-.313-3.701-3.86-3.562-9.985.298-13.685s10-3.567 13.7.293c3.686 3.866 3.552 10.005-.308 13.706m-1.455-1.526c3.023-2.899 3.122-7.696.237-10.724-2.895-3.008-7.697-3.122-10.72-.222-3.012 2.88-3.126 7.682-.226 10.705 2.884 3.027 7.681 3.126 10.709.242",clipRule:"evenodd"}),J().createElement("path",{fill:"#fff",fillOpacity:".8",d:"M10.084 27.243c-2.9-3.023-2.786-7.825.227-10.705 3.023-2.9 7.825-2.786 10.72.222 2.884 3.028 2.785 7.825-.238 10.724-3.027 2.885-7.825 2.786-10.71-.241"})),J().createElement("defs",null,J().createElement("clipPath",{id:"empty_state_clip"},J().createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"}))))},Xn=function(e){var t=e.className,n=pe(e,Pt);return J().createElement("svg",ge({width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t},n),J().createElement("path",{d:"M25.3333 14.6667H6.66667C5.19391 14.6667 4 15.8607 4 17.3334V26.6667C4 28.1395 5.19391 29.3334 6.66667 29.3334H25.3333C26.8061 29.3334 28 28.1395 28 26.6667V17.3334C28 15.8607 26.8061 14.6667 25.3333 14.6667Z",stroke:"#0D0E11",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),J().createElement("path",{d:"M9.3335 14.6667V9.33341C9.3335 7.5653 10.0359 5.86961 11.2861 4.61937C12.5364 3.36913 14.2321 2.66675 16.0002 2.66675C17.7683 2.66675 19.464 3.36913 20.7142 4.61937C21.9644 5.86961 22.6668 7.5653 22.6668 9.33341V14.6667",stroke:"#0D0E11",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))},Yn=function(e){var t=e.className,n=pe(e,Tt);return J().createElement("svg",ge({width:"35",height:"63",viewBox:"0 0 35 63",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t},n),J().createElement("path",{d:"M29.2576 53.2228C23.969 53.4453 20.1738 51.2042 17.4501 46.8813C16.741 45.7589 15.6984 44.8617 15.0777 43.5826C13.4649 40.4019 13.4307 40.2794 13.3431 36.4086C14.7597 36.2771 15.9893 36.66 17.3415 37.0086C21.3198 38.0103 25.7084 36.4546 27.8892 33.1388C28.7635 31.7723 29.6037 30.2833 30.0863 28.6961C31.0072 25.6001 30.4067 23.9192 27.8412 22.0608C26.2501 20.8547 24.5464 19.4818 22.4285 19.9412C19.9088 20.3808 17.7164 21.5213 15.8172 23.24C13.8738 25.0371 12.1997 27.089 10.9514 29.4843C10.5092 30.2679 10.1314 30.5715 9.32378 29.8067C7.20433 27.8899 5.7862 25.6451 5.24628 22.759C5.17801 22.514 5.15396 22.1906 5.00734 21.9014C3.3464 18.0739 4.20913 14.532 5.6405 10.8973C6.98342 7.41939 8.90894 4.37289 11.8089 1.97858C9.88026 0.272487 9.88022 0.272513 7.95703 1.66784C2.57533 5.34938 0.538852 10.6055 0.382867 16.9209C0.279658 20.5808 1.27965 23.9327 3.10351 26.9224C4.52164 29.1672 6.17485 31.5444 8.6822 32.9568C9.38739 33.3541 9.68059 33.9324 9.64025 34.7359C9.40672 36.9798 9.54092 39.1209 10.4005 41.2576C11.8264 44.9527 13.7084 48.3883 16.5912 51.1483C18.8573 53.3544 21.256 55.3253 24.5733 55.8514C25.4111 56.0135 25.5477 56.5035 24.9488 57.1989C24.3941 57.816 23.6043 58.3006 22.9713 58.8735C22.4267 59.2897 21.8379 59.7842 21.5624 60.4553C21.287 61.1264 21.3351 61.7731 22.2412 62.1803C23.6958 62.8964 24.8673 62.8334 26.2459 61.8542C28.2917 60.4246 30.4158 59.0392 32.4616 57.6097C34.8409 55.9549 35.2451 54.3236 33.5477 52.0248C32.8728 51.0249 32.1978 50.025 31.8565 48.8C31.7541 48.4324 31.6075 48.1433 31.3383 47.8883C30.4182 46.9569 28.5958 46.3435 28.0412 46.9605C27.187 47.9253 27.7394 48.9594 28.0908 49.9836C28.4422 51.0078 28.9946 52.0419 29.2576 53.2228ZM25.5231 28.914C25.2376 29.786 24.928 30.3346 24.4618 30.7949C23.9955 31.2552 23.5293 31.7155 23.1073 32.0975C21.2865 33.8603 17.3059 34.5098 15.1461 33.3964C14.0491 32.7785 13.9808 32.5334 14.4432 31.348C15.1267 29.7707 16.2803 28.4583 17.4339 27.1458C19.0538 25.373 21.0212 23.8993 23.4967 23.5381C25.6046 23.2796 26.7155 24.4218 26.4921 26.4648C26.3974 27.5476 25.9552 28.3312 25.5231 28.914Z",fill:"#B5CBA8"}))},Zn=function(e){var t=e.className,n=pe(e,Dt);return J().createElement("svg",ge({width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t},n),J().createElement("path",{d:"M28.4468 19.8349C28.1951 20.4465 29.8965 22.7846 28.9876 24.0004C27.9727 25.3564 25.5245 25.1503 25.1101 25.6088C24.5757 26.1996 24.8802 28.7067 23.501 29.4862C22.0476 30.1862 19.9453 28.7209 19.3365 28.9465C18.2732 29.362 17.711 31.4941 16.0005 31.4941C14.2901 31.4941 13.7281 29.362 12.6646 28.9465C11.939 28.757 10.0703 30.1791 8.50002 29.4862C7.12064 28.7062 7.42533 26.1996 6.89089 25.6088C6.47658 25.1503 4.02808 25.3559 3.01345 24.0004C2.10402 22.7851 3.8057 20.4467 3.55373 19.8349C3.18484 18.9367 1.00586 18.1401 1.00586 16.5002C1.00586 14.8604 3.1848 14.0637 3.55398 13.1653C3.80593 12.5542 2.1043 10.2156 3.0137 9C4.02858 7.64406 6.47683 7.84987 6.89114 7.39162C7.42557 6.8008 7.12063 4.29375 8.50027 3.51418C9.89039 2.81106 11.9407 4.21831 12.6648 4.05349C13.7278 3.63772 14.2901 1.50562 16.0005 1.50562C17.711 1.50562 18.273 3.63768 19.3365 4.05324C19.9873 4.27614 22.1685 2.82668 23.501 3.51393C24.8801 4.2935 24.5757 6.80056 25.1101 7.39137C25.5244 7.84987 27.9729 7.64382 28.9876 8.99975C29.897 10.2151 28.1953 12.5537 28.4468 13.1651C28.8159 14.0635 30.9949 14.8601 30.9949 16.5C30.9947 18.1401 28.8157 18.9367 28.4468 19.8349Z",fill:"#69BC85"}),J().createElement("path",{d:"M13.3293 16.3186C11.8489 16.3186 10.8765 15.2736 10.8765 13.9238C10.8765 12.5595 11.8489 11.5 13.3293 11.5C14.8242 11.5 15.7966 12.5595 15.7966 13.9238C15.7966 15.2736 14.8242 16.3186 13.3293 16.3186ZM13.4744 21.3258H12.3859L18.5688 11.6451H19.6718L13.4744 21.3258ZM18.6559 21.5C17.1754 21.5 16.203 20.455 16.203 19.1052C16.203 17.7409 17.1754 16.6669 18.6559 16.6669C20.1363 16.6669 21.1232 17.7409 21.1232 19.1052C21.1232 20.455 20.1363 21.5 18.6559 21.5ZM13.3293 15.1865C13.9969 15.1865 14.4904 14.693 14.4904 13.9238C14.4904 13.1255 13.9969 12.6321 13.3293 12.6321C12.6762 12.6321 12.1827 13.1255 12.1827 13.9238C12.1827 14.693 12.6762 15.1865 13.3293 15.1865ZM18.6559 20.3679C19.3235 20.3679 19.817 19.889 19.817 19.1052C19.817 18.307 19.3235 17.8135 18.6559 17.8135C17.9882 17.8135 17.5093 18.307 17.5093 19.1052C17.5093 19.889 17.9882 20.3679 18.6559 20.3679Z",fill:"white"}))},Jn=function(e){var t=e.className,n=pe(e,It);return J().createElement("svg",ge({xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",fill:"none",className:t},n),J().createElement("rect",{width:"48",height:"48",fill:"#F0F1F3",rx:"8"}),J().createElement("g",{clipPath:"url(#whcc_clip)"},J().createElement("path",{fill:"#374151",d:"M14 30.26q0 1.56 1.1 2.64t2.66 1.1h12.5q1.54 0 2.64-1.1t1.1-2.64v-12.5q0-1.56-1.1-2.66T30.26 14h-12.5q-1.56 0-2.66 1.1a3.62 3.62 0 0 0-1.1 2.66zm2.5 0v-12.5q0-.52.36-.88t.9-.38h12.5q.5 0 .88.38t.36.88v12.5q0 .52-.36.88t-.88.36h-12.5q-.52 0-.9-.36a1.1 1.1 0 0 1-.36-.88M17.76 29q0 .52.36.9t.88.36h10q.52 0 .88-.36t.38-.9v-.58q-.14-.28-.7-1.68t-1-2.24-.8-1.32q-.34-.36-.7-.38t-.72.24-.72.7-.74.98-.72 1.06-.72 1-.68.74-.68.28q-.36 0-1.04-.9-.1-.12-.3-.38-.7-.94-1-1.14-.48-.32-.74.22-.14.32-.58 1.4t-.66 1.6zm0-9.36q0 .78.54 1.32t1.32.54 1.34-.54.54-1.32a1.98 1.98 0 0 0-.54-1.34q-.52-.56-1.34-.54t-1.32.54-.54 1.34"})),J().createElement("defs",null,J().createElement("clipPath",{id:"whcc_clip"},J().createElement("path",{fill:"#fff",d:"M14 14h20v20H14z"}))))},$n=function(e){var t=e.className,n=pe(e,jt);return J().createElement("svg",ge({xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",fill:"none",className:t},n),J().createElement("rect",{width:"48",height:"48",fill:"#F0F1F3",rx:"8"}),J().createElement("g",{clipPath:"url(#manual_clip)"},J().createElement("path",{fill:"#374151",d:"M14 30.26v-12.5q0-1.56 1.1-2.66a3.62 3.62 0 0 1 2.66-1.1h12.5q1.54 0 2.64 1.1t1.1 2.66v12.5q0 1.56-1.1 2.64a3.7 3.7 0 0 1-2.64 1.1h-12.5a3.62 3.62 0 0 1-2.66-1.1Q14 31.8 14 30.26m2.5 0q0 .52.36.88t.9.36h12.5q.5 0 .88-.36t.36-.88v-12.5q0-.52-.36-.88a1.27 1.27 0 0 0-.88-.38h-12.5a1.23 1.23 0 0 0-.9.38 1.14 1.14 0 0 0-.36.88zM19 29v-2.5h2.5V29zm0-3.74v-2.5h2.5v2.5zm0-3.76V19h2.5v2.5zm3.76 7.5v-2.5H29V29zm0-3.74v-2.5H29v2.5zm0-3.76V19H29v2.5z"})),J().createElement("defs",null,J().createElement("clipPath",{id:"manual_clip"},J().createElement("path",{fill:"#fff",d:"M14 14h20v20H14z"}))))},er=function(e){var t=e.className,n=pe(e,At);return J().createElement("svg",ge({xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",fill:"none",className:t},n),J().createElement("rect",{width:"48",height:"48",fill:"#F0F1F3",rx:"8"}),J().createElement("g",{fill:"#374151",clipPath:"url(#digital_clip)"},J().createElement("path",{d:"M31.5 23.583v7.5h-3.333v-7.5zm.833-1.666h-5a.833.833 0 0 0-.833.833v9.167a.833.833 0 0 0 .833.833h5a.834.834 0 0 0 .834-.834V22.75a.833.833 0 0 0-.834-.834"}),J().createElement("path",{d:"M29.834 16.917H16.917a.833.833 0 0 0-.833.833v9.167a.833.833 0 0 0 .833.833h7.917v-1.667h-7.083v-7.5H29v1.667h1.666v-2.5a.833.833 0 0 0-.833-.834M24.834 29.417v1.666h-9.167a.833.833 0 1 1 0-1.666z"})),J().createElement("defs",null,J().createElement("clipPath",{id:"digital_clip"},J().createElement("path",{fill:"#fff",d:"M14 14h20v20H14z"}))))},tr="imagely/admin-app",nr=(null===(fe=window.imagelyApp)||void 0===fe?void 0:fe.proTypeInstalled)||"lite";const rr=function(){var e=(0,me.useDispatch)(tr),t=(0,me.useSelect)(function(e){return e(tr).getNotifications()},[]),n=function(e){switch(e){case"success":return"bg-green-50 border-green-200 text-green-800";case"info":return"bg-blue-50 border-blue-200 text-blue-800";case"warning":return"bg-yellow-50 border-yellow-200 text-yellow-800";case"error":return"bg-red-50 border-red-200 text-red-800";default:return"bg-gray-50 border-gray-200 text-gray-800"}},r=function(e){switch(e){case"success":return"text-green-400";case"info":return"text-blue-400";case"warning":return"text-yellow-400";case"error":return"text-red-400";default:return"text-gray-400"}};return 0===t.length?null:J().createElement("div",{className:"fixed top-10 right-4 z-50 space-y-3 max-w-sm"},t.map(function(t){return J().createElement("div",{key:t.id,className:"p-4 rounded-lg border shadow-lg transition-all duration-300 ease-in-out transform hover:scale-105 ".concat(n(t.type))},J().createElement("div",{className:"flex items-start"},J().createElement("div",{className:"flex-shrink-0 ".concat(r(t.type))},function(e){switch(e){case"success":return J().createElement(Nn,{className:"w-5 h-5"});case"info":return J().createElement(kn,{className:"w-5 h-5"});case"warning":return J().createElement(Sn,{className:"w-5 h-5"});case"error":return J().createElement(Tn,{className:"w-5 h-5"});default:return null}}(t.type)),J().createElement("div",{className:"ml-3 flex-1"},J().createElement("p",{className:"text-sm font-medium"},t.message)),t.dismissible&&J().createElement("div",{className:"ml-4 flex-shrink-0"},J().createElement("button",{onClick:function(){return e.dismissNotice(t.id)},className:"inline-flex text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-600 transition ease-in-out duration-150"},J().createElement(zt,{className:"w-4 h-4"})))))}))},ar=function(e){var t=e.size,n=void 0===t?"lg":t,r=e.color,a=void 0===r?"green":r,l=e.className,i=void 0===l?"":l,o=e.text,s=e.centerInContainer,c=void 0===s||s,u=J().createElement("div",{className:"flex flex-col items-center gap-2"},J().createElement("div",{className:"animate-spin rounded-full border-b-2 ".concat({sm:"h-4 w-4",md:"h-8 w-8",lg:"h-16 w-16",xl:"h-32 w-32"}[n]," ").concat({green:"border-green-600",blue:"border-blue-600",gray:"border-gray-600",red:"border-red-600"}[a]," ").concat(i)}),o&&J().createElement("div",{className:"text-sm text-gray-600 font-medium"},o));return c?J().createElement("div",{className:"flex items-center justify-center ".concat({sm:"h-16",md:"h-32",lg:"h-48",xl:"h-64"}[n])},u):u},lr=function(){return(0,me.useSelect)(function(e){return{isPageLoading:e(tr).getPageLoading()}},[]).isPageLoading?J().createElement("div",{className:"fixed inset-0 bg-white bg-opacity-75 flex items-center justify-center z-50"},J().createElement(ar,{size:"lg",color:"green",text:(0,de.__)("Loading...","nggallery"),centerInContainer:!1})):null};var ir=function(e){var t=e.className;return J().createElement("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor"},J().createElement("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"}))},or=function(e){var t=e.className;return J().createElement("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor"},J().createElement("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"}))},sr=function(e){var t=e.className;return J().createElement("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor"},J().createElement("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"}))},cr=function(e){var t=e.className;return J().createElement("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor"},J().createElement("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"}))},ur=function(e){var t=e.className;return J().createElement("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor"},J().createElement("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}))},mr=function(e){var t=e.className;return J().createElement("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor"},J().createElement("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}))};const dr=function(){var e,t,n=(null===(e=window.imagelyApp)||void 0===e?void 0:e.version)||"",r="lite"===(null===(t=window.imagelyApp)||void 0===t?void 0:t.proTypeInstalled);return J().createElement("footer",{className:"mt-8"},J().createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-2"},J().createElement("div",{className:"text-center mb-4"},J().createElement("p",{className:"text-gray-600 flex items-center justify-center gap-2"},(0,de.__)("Made with","nggallery"),J().createElement(ur,{className:"w-4 h-4 text-red-500"}),(0,de.__)("by the Imagely Team","nggallery"))),J().createElement("div",{className:"flex items-center justify-center gap-4 mb-4 text-sm"},J().createElement("a",{href:r?"https://wordpress.org/support/plugin/nextgen-gallery/":"https://www.imagely.com/account/support/?utm_source=imagely&utm_medium=wpfooter&utm_campaign=support",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 hover:underline"},(0,de.__)("Support","nggallery")),J().createElement("span",{className:"text-gray-400"},"/"),J().createElement("a",{href:"https://www.imagely.com/docs?utm_source=imagely&utm_medium=wpfooter&utm_campaign=docs",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 hover:underline"},(0,de.__)("Docs","nggallery")),J().createElement("span",{className:"text-gray-400"},"/"),J().createElement("a",{href:"admin.php?page=imagely-about-us",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 hover:underline"},(0,de.__)("Free Plugins","nggallery"))),J().createElement("div",{className:"flex items-center justify-center gap-4 mb-4"},J().createElement("a",{href:"https://www.facebook.com/imagely",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-blue-600 transition-colors","aria-label":"Facebook"},J().createElement(ir,{className:"w-5 h-5"})),J().createElement("a",{href:"https://www.instagram.com/imagely/",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-pink-600 transition-colors","aria-label":"Instagram"},J().createElement(or,{className:"w-5 h-5"})),J().createElement("a",{href:"https://twitter.com/imagely",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-gray-900 transition-colors","aria-label":"X (Twitter)"},J().createElement(sr,{className:"w-5 h-5"})),J().createElement("a",{href:"https://www.youtube.com/c/Imagely",target:"_blank",rel:"noopener noreferrer",className:"text-gray-400 hover:text-red-600 transition-colors","aria-label":"YouTube"},J().createElement(cr,{className:"w-5 h-5"}))),J().createElement("div",{className:"text-center text-sm text-gray-600 mb-4"},J().createElement("p",{className:"flex items-center justify-center gap-2 flex-wrap"},(0,de.__)("Please rate Imagely","nggallery"),J().createElement("span",{className:"flex items-center text-yellow-500"},J().createElement(mr,{className:"w-4 h-4"}),J().createElement(mr,{className:"w-4 h-4"}),J().createElement(mr,{className:"w-4 h-4"}),J().createElement(mr,{className:"w-4 h-4"}),J().createElement(mr,{className:"w-4 h-4"})),J().createElement("span",null,(0,de.__)("on","nggallery")," ",J().createElement("a",{href:"https://wordpress.org/support/plugin/nextgen-gallery/reviews/?filter=5#new-post",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 hover:underline"},"WordPress.org")," ",(0,de.__)("to help us spread the word. Thank you from the Imagely team!","nggallery")))),n&&J().createElement("div",{className:"text-center text-xs text-gray-500"},(0,de.__)("Version","nggallery")," ",n)))},gr=function(){var e=(0,me.useDispatch)(),t=(0,me.useSelect)(function(e){return e(tr).getInboxActiveCount()},[]),n=(0,me.useSelect)(function(e){return e(tr).getInboxIsOpen()},[]);return(0,Z.useEffect)(function(){e(tr).fetchInboxNotifications()},[e]),J().createElement("button",{type:"button",onClick:function(){n?e(tr).closeInboxPanel():e(tr).openInboxPanel()},className:"relative p-1 sm:p-1.5 rounded-full text-gray-500 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500","aria-label":"Notifications"},J().createElement(Mt,{className:"h-5 w-5",width:"20",height:"20",viewBox:"0 0 15 16"}),t>0&&J().createElement("span",{className:"absolute -top-0.5 -right-0.5 inline-flex items-center justify-center px-1.5 py-0.5 text-xs font-bold leading-none text-white transform translate-x-1/4 -translate-y-1/4 bg-red-500 rounded-full min-w-[18px]"},t>99?"99+":t))},pr=function(){var e,t,n="lite"===(null===(e=window.imagelyApp)||void 0===e?void 0:e.proTypeInstalled),r=React.createElement(React.Fragment,null,React.createElement("div",{className:"flex-shrink-0"},React.createElement("img",{className:"h-10 w-auto",src:(null===(t=window.imagelyApp)||void 0===t?void 0:t.assetsURL)+"/images/logo-icon.png",title:"Imagely",alt:"Imagely Logo"})),React.createElement("h1",{className:"ml-3 text-xl font-semibold text-gray-900"},"IMAGELY"));return React.createElement("header",{className:"bg-white shadow-sm h-[64px]"},React.createElement("div",{className:"w-full px-4 sm:px-6 lg:px-8 xl:px-12 2xl:px-16"},React.createElement("div",{className:"flex items-center justify-between h-16"},React.createElement("div",{className:"flex items-center"},n?React.createElement("a",{href:"https://www.imagely.com/lite/?utm_source=imagely&utm_medium=wpheader&utm_campaign=logo",target:"_blank",rel:"noopener noreferrer",className:"flex items-center hover:opacity-80 transition-opacity"},r):React.createElement("div",{className:"flex items-center"},r)),React.createElement("div",{className:"flex items-center space-x-4"},React.createElement(gr,null),React.createElement("button",{type:"button",className:"p-1 rounded-full text-gray-500 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",onClick:function(){var e=n?"https://wordpress.org/support/plugin/nextgen-gallery/":"https://www.imagely.com/account/support/?utm_source=imagely&utm_medium=wpheader&utm_campaign=support";window.open(e,"_blank")}},React.createElement("span",{className:"sr-only"},(0,de.__)("View help","nextgen-gallery")),React.createElement(Lt,{className:"h-6 w-6"}))))))};function fr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function yr(e,t){if(e){if("string"==typeof e)return fr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fr(e,t):void 0}}function hr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,l,i,o=[],s=!0,c=!1;try{if(l=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=l.call(n)).done)&&(o.push(r.value),o.length!==t);s=!0);}catch(e){c=!0,a=e}finally{try{if(!s&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||yr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var _r="imagely_lite_banner_dismissed";const br=function(){var e,t=hr((0,Z.useState)(!1),2),n=t[0],r=t[1],a="lite"===(null===(e=window.imagelyApp)||void 0===e?void 0:e.proTypeInstalled);return(0,Z.useEffect)(function(){if(a){var e=localStorage.getItem(_r);if(e){var t=JSON.parse(e).timestamp;if((Date.now()-t)/864e5<30)return void r(!1)}r(!0)}else r(!1)},[a]),n?J().createElement("div",{className:"bg-green-500 text-white px-4 py-3 relative flex items-center justify-center"},J().createElement("div",{className:"flex items-center gap-2 text-center pr-8 sm:pr-10"},J().createElement("svg",{className:"w-5 h-5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},J().createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})),J().createElement("span",{className:"text-sm sm:text-base break-words"},(0,de.__)("You're using","nggallery")," ",J().createElement("strong",{className:"font-bold"},(0,de.__)("Imagely Lite","nggallery")),(0,de.__)(".","nggallery")," ",(0,de.__)("To unlock all features in Imagely, consider","nggallery")," ",J().createElement("a",{href:"https://www.imagely.com/lite/?utm_source=imagely&utm_medium=litebanner&utm_campaign=upgradetopro",target:"_blank",rel:"noopener noreferrer",className:"underline font-semibold hover:opacity-90 transition-opacity"},(0,de.__)("Upgrading to PRO","nggallery")),".")),J().createElement("button",{onClick:function(){var e={timestamp:Date.now()};localStorage.setItem(_r,JSON.stringify(e)),r(!1)},className:"absolute right-1 sm:right-2 top-1/2 -translate-y-1/2 p-1.5 sm:p-1 hover:bg-green-600 rounded transition-colors min-w-[32px] min-h-[32px] flex items-center justify-center","aria-label":(0,de.__)("Dismiss banner","nggallery")},J().createElement("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))):null};var vr=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=(0,Z.useRef)(null);return(0,Z.useEffect)(function(){if(t){var r=function(t){var r=null==n?void 0:n.current;r&&!r.contains((null==t?void 0:t.target)||null)&&e(t)};return document.addEventListener("mousedown",r),document.addEventListener("touchstart",r),function(){document.removeEventListener("mousedown",r),document.removeEventListener("touchstart",r)}}},[n,e,t]),n};const xr=function(e){var t=e.isOpen,n=e.onClose,r=e.title,a=void 0===r?"":r,l=e.children,i=e.id,o=e.showHeader,s=void 0===o||o,c=vr(function(){return n()},t);return(0,Z.useEffect)(function(){var e=function(e){"Escape"===e.key&&t&&n()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[t,n]),(0,Z.useEffect)(function(){return document.body.style.overflow=t?"hidden":"unset",function(){document.body.style.overflow="unset"}},[t]),t?J().createElement("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",id:i},J().createElement("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-20 transition-opacity duration-300 ease-in-out"}),J().createElement("div",{className:"flex min-h-screen items-center justify-center p-2 text-center sm:p-0"},J().createElement("div",{ref:c,className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all duration-300 ease-in-out w-full max-w-lg sm:my-8 sm:w-full sm:max-w-lg"},s&&J().createElement("div",{className:"flex justify-between items-center p-3 sm:p-4 ".concat(a?"border-b":"")},J().createElement("h2",{className:"text-base sm:text-lg font-medium text-gray-900 pr-2",id:"modal-title"},a),J().createElement("button",{onClick:n,className:"text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 flex-shrink-0","aria-label":"Close modal"},J().createElement(zt,{className:"h-6 w-6"}))),J().createElement("div",{className:"p-3 sm:p-4"},l)))):null};function wr(e,t,n,r,a,l,i){try{var o=e[l](i),s=o.value}catch(e){return void n(e)}o.done?t(s):Promise.resolve(s).then(r,a)}function Er(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var l=e.apply(t,n);function i(e){wr(l,r,a,i,o,"next",e)}function o(e){wr(l,r,a,i,o,"throw",e)}i(void 0)})}}const Cr=window.regeneratorRuntime;var Nr=i.n(Cr),kr=class extends D{constructor(e,t){super(),this.options=t,this.#u=e,this.#S=null,this.#O=A(),this.bindMethods(),this.setOptions(t)}#u;#P=void 0;#T=void 0;#D=void 0;#I;#j;#O;#S;#A;#L;#M;#R;#F;#z;#B=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#P.addObserver(this),Sr(this.#P,this.options)?this.#q():this.updateResult(),this.#H())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Or(this.#P,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Or(this.#P,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#G(),this.#U(),this.#P.removeObserver(this)}setOptions(e){const t=this.options,n=this.#P;if(this.options=this.#u.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof m(this.options.enabled,this.#P))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#W(),this.#P.setOptions(this.options),t._defaulted&&!b(this.options,t)&&this.#u.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#P,observer:this});const r=this.hasListeners();r&&Pr(this.#P,n,this.options,t)&&this.#q(),this.updateResult(),!r||this.#P===n&&m(this.options.enabled,this.#P)===m(t.enabled,this.#P)&&u(this.options.staleTime,this.#P)===u(t.staleTime,this.#P)||this.#V();const a=this.#K();!r||this.#P===n&&m(this.options.enabled,this.#P)===m(t.enabled,this.#P)&&a===this.#z||this.#Q(a)}getOptimisticResult(e){const t=this.#u.getQueryCache().build(this.#u,e),n=this.createResult(t,e);return r=n,!b(this.getCurrentResult(),r)&&(this.#D=n,this.#j=this.options,this.#I=this.#P.state),n;var r}getCurrentResult(){return this.#D}trackResult(e,t){return new Proxy(e,{get:(e,n)=>(this.trackProp(n),t?.(n),"promise"===n&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==this.#O.status||this.#O.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,n))})}trackProp(e){this.#B.add(e)}getCurrentQuery(){return this.#P}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#u.defaultQueryOptions(e),n=this.#u.getQueryCache().build(this.#u,t);return n.fetch().then(()=>this.createResult(n,t))}fetch(e){return this.#q({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#D))}#q(e){this.#W();let t=this.#P.fetch(this.options,e);return e?.throwOnError||(t=t.catch(o)),t}#V(){this.#G();const e=u(this.options.staleTime,this.#P);if(l||this.#D.isStale||!s(e))return;const t=c(this.#D.dataUpdatedAt,e)+1;this.#R=a.setTimeout(()=>{this.#D.isStale||this.updateResult()},t)}#K(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#P):this.options.refetchInterval)??!1}#Q(e){this.#U(),this.#z=e,!l&&!1!==m(this.options.enabled,this.#P)&&s(this.#z)&&0!==this.#z&&(this.#F=a.setInterval(()=>{(this.options.refetchIntervalInBackground||I.isFocused())&&this.#q()},this.#z))}#H(){this.#V(),this.#Q(this.#K())}#G(){this.#R&&(a.clearTimeout(this.#R),this.#R=void 0)}#U(){this.#F&&(a.clearInterval(this.#F),this.#F=void 0)}createResult(e,t){const n=this.#P,r=this.options,a=this.#D,l=this.#I,i=this.#j,o=e!==n?e.state:this.#T,{state:s}=e;let c,u={...s},d=!1;if(t._optimisticResults){const a=this.hasListeners(),l=!a&&Sr(e,t),i=a&&Pr(e,n,t,r);(l||i)&&(u={...u,...q(s.data,e.options)}),"isRestoring"===t._optimisticResults&&(u.fetchStatus="idle")}let{error:g,errorUpdatedAt:p,status:f}=u;c=u.data;let y=!1;if(void 0!==t.placeholderData&&void 0===c&&"pending"===f){let e;a?.isPlaceholderData&&t.placeholderData===i?.placeholderData?(e=a.data,y=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#M?.state.data,this.#M):t.placeholderData,void 0!==e&&(f="success",c=E(a?.data,e,t),d=!0)}if(t.select&&void 0!==c&&!y)if(a&&c===l?.data&&t.select===this.#A)c=this.#L;else try{this.#A=t.select,c=t.select(c),c=E(a?.data,c,t),this.#L=c,this.#S=null}catch(e){this.#S=e}this.#S&&(g=this.#S,c=this.#L,p=Date.now(),f="error");const h="fetching"===u.fetchStatus,_="pending"===f,b="error"===f,v=_&&h,x=void 0!==c,w={status:f,fetchStatus:u.fetchStatus,isPending:_,isSuccess:"success"===f,isError:b,isInitialLoading:v,isLoading:v,data:c,dataUpdatedAt:u.dataUpdatedAt,error:g,errorUpdatedAt:p,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>o.dataUpdateCount||u.errorUpdateCount>o.errorUpdateCount,isFetching:h,isRefetching:h&&!_,isLoadingError:b&&!x,isPaused:"paused"===u.fetchStatus,isPlaceholderData:d,isRefetchError:b&&x,isStale:Tr(e,t),refetch:this.refetch,promise:this.#O,isEnabled:!1!==m(t.enabled,e)};if(this.options.experimental_prefetchInRender){const t=e=>{"error"===w.status?e.reject(w.error):void 0!==w.data&&e.resolve(w.data)},r=()=>{const e=this.#O=w.promise=A();t(e)},a=this.#O;switch(a.status){case"pending":e.queryHash===n.queryHash&&t(a);break;case"fulfilled":"error"!==w.status&&w.data===a.value||r();break;case"rejected":"error"===w.status&&w.error===a.reason||r()}}return w}updateResult(){const e=this.#D,t=this.createResult(this.#P,this.options);this.#I=this.#P.state,this.#j=this.options,void 0!==this.#I.data&&(this.#M=this.#P),b(t,e)||(this.#D=t,this.#X({listeners:(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,n="function"==typeof t?t():t;if("all"===n||!n&&!this.#B.size)return!0;const r=new Set(n??this.#B);return this.options.throwOnError&&r.add("error"),Object.keys(this.#D).some(t=>{const n=t;return this.#D[n]!==e[n]&&r.has(n)})})()}))}#W(){const e=this.#u.getQueryCache().build(this.#u,this.options);if(e===this.#P)return;const t=this.#P;this.#P=e,this.#T=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#H()}#X(e){T.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(this.#D)}),this.#u.getQueryCache().notify({query:this.#P,type:"observerResultsUpdated"})})}};function Sr(e,t){return function(e,t){return!1!==m(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||void 0!==e.state.data&&Or(e,t,t.refetchOnMount)}function Or(e,t,n){if(!1!==m(t.enabled,e)&&"static"!==u(t.staleTime,e)){const r="function"==typeof n?n(e):n;return"always"===r||!1!==r&&Tr(e,t)}return!1}function Pr(e,t,n,r){return(e!==t||!1===m(r.enabled,e))&&(!n.suspense||"error"!==e.state.status)&&Tr(e,n)}function Tr(e,t){return!1!==m(t.enabled,e)&&e.isStaleByTime(u(t.staleTime,e))}var Dr=Z.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}()),Ir=Z.createContext(!1),jr=(Ir.Provider,(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()}));function Ar(e,t){return function(e,t,n){const r=Z.useContext(Ir),a=Z.useContext(Dr),i=te(n),s=i.defaultQueryOptions(e);i.getDefaultOptions().queries?._experimental_beforeQuery?.(s),s._optimisticResults=r?"isRestoring":"optimistic",(e=>{if(e.suspense){const t=1e3,n=e=>"static"===e?e:Math.max(e??t,t),r=e.staleTime;e.staleTime="function"==typeof r?(...e)=>n(r(...e)):n(r),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,t))}})(s),((e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))})(s,a),(e=>{Z.useEffect(()=>{e.clearReset()},[e])})(a);const c=!i.getQueryCache().get(s.queryHash),[u]=Z.useState(()=>new t(i,s)),m=u.getOptimisticResult(s),d=!r&&!1!==e.subscribed;if(Z.useSyncExternalStore(Z.useCallback(e=>{const t=d?u.subscribe(T.batchCalls(e)):o;return u.updateResult(),t},[u,d]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),Z.useEffect(()=>{u.setOptions(s)},[s,u]),((e,t)=>e?.suspense&&t.isPending)(s,m))throw jr(s,u,a);if((({result:e,errorResetBoundary:t,throwOnError:n,query:r,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(a&&void 0===e.data||O(n,[e.error,r])))({result:m,errorResetBoundary:a,throwOnError:s.throwOnError,query:i.getQueryCache().get(s.queryHash),suspense:s.suspense}))throw m.error;if(i.getDefaultOptions().queries?._experimental_afterQuery?.(s,m),s.experimental_prefetchInRender&&!l&&((e,t)=>e.isLoading&&e.isFetching&&!t)(m,r)){const e=c?jr(s,u,a):i.getQueryCache().get(s.queryHash)?.promise;e?.catch(o).finally(()=>{u.updateResult()})}return s.notifyOnChangeProps?m:u.trackResult(m)}(e,kr,t)}var Lr=class extends D{#u;#D=void 0;#Y;#Z;constructor(e,t){super(),this.#u=e,this.setOptions(t),this.bindMethods(),this.#J()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){const t=this.options;this.options=this.#u.defaultMutationOptions(e),b(this.options,t)||this.#u.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#Y,observer:this}),t?.mutationKey&&this.options.mutationKey&&f(t.mutationKey)!==f(this.options.mutationKey)?this.reset():"pending"===this.#Y?.state.status&&this.#Y.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#Y?.removeObserver(this)}onMutationUpdate(e){this.#J(),this.#X(e)}getCurrentResult(){return this.#D}reset(){this.#Y?.removeObserver(this),this.#Y=void 0,this.#J(),this.#X()}mutate(e,t){return this.#Z=t,this.#Y?.removeObserver(this),this.#Y=this.#u.getMutationCache().build(this.#u,this.options),this.#Y.addObserver(this),this.#Y.execute(e)}#J(){const e=this.#Y?.state??{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0};this.#D={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#X(e){T.batch(()=>{if(this.#Z&&this.hasListeners()){const t=this.#D.variables,n=this.#D.context,r={client:this.#u,meta:this.options.meta,mutationKey:this.options.mutationKey};"success"===e?.type?(this.#Z.onSuccess?.(e.data,t,n,r),this.#Z.onSettled?.(e.data,null,t,n,r)):"error"===e?.type&&(this.#Z.onError?.(e.error,t,n,r),this.#Z.onSettled?.(void 0,e.error,t,n,r))}this.listeners.forEach(e=>{e(this.#D)})})}};function Mr(e,t){const n=te(t),[r]=Z.useState(()=>new Lr(n,e));Z.useEffect(()=>{r.setOptions(e)},[r,e]);const a=Z.useSyncExternalStore(Z.useCallback(e=>r.subscribe(T.batchCalls(e)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),l=Z.useCallback((e,t)=>{r.mutate(e,t).catch(o)},[r]);if(a.error&&O(r.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:l,mutateAsync:a.mutate}}const Rr=window.wp.apiFetch;var Fr=i.n(Rr);function zr(e){return function(e){if(Array.isArray(e))return fr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||yr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Br(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function qr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Br(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Br(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Hr=null;Fr().use(function(e,t){return e.path&&e.path.includes("/imagely/v1/")?t(qr(qr({},e),{},{parse:!1})).then(function(e){if(e.headers){var t=e.headers.get("X-WP-Total"),n=e.headers.get("X-WP-TotalPages");Hr={total:t||"0",totalPages:n||"1"}}else Hr={total:"0",totalPages:"1"};if(204===e.status||205===e.status)return null;var r=e.headers.get("content-type");if(!r||!r.includes("application/json"))return e.text().then(function(e){return e||null});var a=e.headers.get("content-length");return a&&0===parseInt(a)?null:"function"==typeof e.json?e.text().then(function(e){if(!e||""===e.trim())return null;try{return JSON.parse(e)}catch(t){return console.warn("Failed to parse response as JSON:",e,t),e}}):e}).catch(function(e){throw console.error("Error in API fetch:",e),e}):t(e)});var Gr=function(){return Hr},Ur={galleries:[],albums:[],albumDetail:{},images:[],tags:[],displayTypes:[],settings:[],loading:{},error:{},pagination:{galleries:{total:0,per_page:20,current_page:1,total_pages:1},albums:{total:0,per_page:20,current_page:1,total_pages:1},images:{total:0,per_page:20,current_page:1,total_pages:1},tags:{total:0,per_page:20,current_page:1,total_pages:1},displayTypes:{total:0,per_page:20,current_page:1,total_pages:1},settings:{total:0,per_page:20,current_page:1,total_pages:1}},router:{currentTab:new URLSearchParams(window.location.search).get("tab")||"general",currentSubTab:new URLSearchParams(window.location.search).get("subtab")||null,currentPage:new URLSearchParams(window.location.search).get("page")||"imagely",currentId:Number(new URLSearchParams(window.location.search).get("id"))||null},ui:{activeModal:null,notifications:[],inbox:{active:[],dismissed:[],counts:{active:0,dismissed:0},isOpen:!1,loading:!1,error:null},isPageLoading:!1}},Wr={FETCH_FROM_API:(0,me.createRegistryControl)(function(){return function(e){var t=e.request;return Fr()(t)}}),FETCH_DETAIL:(0,me.createRegistryControl)(function(){return function(e){var t,n=e.entityType,r=e.id,a=null===(t=window.imagelyApp)||void 0===t?void 0:t.nonce;return Fr()({path:"/imagely/v1/".concat(n,"/").concat(r),headers:{"X-WP-Nonce":a,"Content-Type":"application/json"}})}}),CREATE_ITEM:(0,me.createRegistryControl)(function(){return function(e){var t,n=e.entityType,r=e.data,a=null===(t=window.imagelyApp)||void 0===t?void 0:t.nonce;return Fr()({path:"/imagely/v1/".concat(n),method:"POST",headers:{"X-WP-Nonce":a,"Content-Type":"application/json"},data:r})}}),UPDATE_ITEM:(0,me.createRegistryControl)(function(){return function(e){var t,n=e.entityType,r=e.id,a=e.data,l=null===(t=window.imagelyApp)||void 0===t?void 0:t.nonce;return Fr()({path:"/imagely/v1/".concat(n,"/").concat(r),method:"PUT",headers:{"X-WP-Nonce":l,"Content-Type":"application/json"},data:a})}}),DELETE_ITEM:(0,me.createRegistryControl)(function(){return function(e){var t,n=e.entityType,r=e.id,a=null===(t=window.imagelyApp)||void 0===t?void 0:t.nonce;return Fr()({path:"/imagely/v1/".concat(n,"/").concat(r),method:"DELETE",headers:{"X-WP-Nonce":a,"Content-Type":"application/json"},parse:!1}).then(function(e){var t=e;return 204===t.status?null:t.json()})}}),FETCH_GALLERY_IMAGES:(0,me.createRegistryControl)(function(){return function(e){var t,n=e.galleryId,r=null===(t=window.imagelyApp)||void 0===t?void 0:t.nonce;return Fr()({path:"/imagely/v1/images?gallery_id=".concat(n,"&per_page=-1"),headers:{"X-WP-Nonce":r,"Content-Type":"application/json"}})}}),UPDATE_BULK_IMAGES:(0,me.createRegistryControl)(function(){return function(e){var t,n=e.images,r=null===(t=window.imagelyApp)||void 0===t?void 0:t.nonce;return Fr()({path:"/imagely/v1/images/bulk",method:"PUT",headers:{"X-WP-Nonce":r,"Content-Type":"application/json"},data:{images:n}})}}),FETCH_NOTIFICATIONS:(0,me.createRegistryControl)(function(){return function(){var e,t=null===(e=window.imagelyApp)||void 0===e?void 0:e.nonce;return Fr()({path:"/imagely/v1/notifications",method:"GET",headers:{"X-WP-Nonce":t,"Content-Type":"application/json"}})}}),DISMISS_NOTIFICATION:(0,me.createRegistryControl)(function(){return function(e){var t,n=e.id,r=null===(t=window.imagelyApp)||void 0===t?void 0:t.nonce;return Fr()({path:"/imagely/v1/notifications/dismiss",method:"POST",headers:{"X-WP-Nonce":r,"Content-Type":"application/json"},data:{id:n}})}})},Vr={setItems:function(e,t){return{type:"SET_ITEMS",entityType:e,items:t}},setDetail:function(e,t,n){return{type:"SET_DETAIL",entityType:e,id:t,item:n}},setLoading:function(e,t){return{type:"SET_LOADING",entityType:e,isLoading:t}},setError:function(e,t){return{type:"SET_ERROR",entityType:e,error:t}},setCurrentTab:function(e){return ue({tab:e}),{type:"SET_CURRENT_TAB",tab:e}},setCurrentSubTab:function(e){return ue({subtab:e}),{type:"SET_CURRENT_SUB_TAB",subTab:e}},setCurrentPage:function(e){return ue({page:e}),{type:"SET_CURRENT_PAGE",page:e}},setCurrentId:function(e){return ue({id:e}),{type:"SET_CURRENT_ID",id:e}},setRouterState:function(e,t,n,r){return{type:"SET_ROUTER_STATE",page:e,tab:t,subTab:n,id:r}},navigateTo:function(e,t,n,r){var a=null,l=null;return"number"==typeof n?(l=n,a=null):"string"==typeof n?(a=n,l=r||null):(a=null,l=r||null),ue({page:e,tab:t,subtab:a,id:l}),{type:"NAVIGATE_TO",page:e,tab:t,subTab:a,id:l}},setActiveModal:function(e,t){return{type:"SET_ACTIVE_MODAL",modalType:e,modalProps:t}},setPagination:function(e,t){return{type:"SET_PAGINATION",entityType:e,pagination:t}},setImages:function(e){return{type:"SET_IMAGES",images:e}},setImageReloadKey:function(e,t){return{type:"SET_IMAGE_RELOAD_KEY",pid:e,reloadKey:t}},showNotice:function(e,t,n){var r={id:"notification-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)),type:e,message:t,timestamp:Date.now(),dismissible:!1!==(null==n?void 0:n.dismissible),duration:(null==n?void 0:n.duration)||("error"===e?0:700)};return r.duration>0&&setTimeout(function(){var e;(null===(e=window.wp)||void 0===e||null===(e=e.data)||void 0===e?void 0:e.select(tr))&&window.wp.data.dispatch(tr).dismissNotice(r.id)},r.duration),{type:"ADD_NOTIFICATION",notification:r}},dismissNotice:function(e){return{type:"DISMISS_NOTIFICATION",id:e}},clearAllNotices:function(){return{type:"CLEAR_ALL_NOTIFICATIONS"}},setPageLoading:function(e){return{type:"SET_PAGE_LOADING",loading:e}},setInboxLoading:function(e){return{type:"SET_INBOX_LOADING",loading:e}},setInboxError:function(e){return{type:"SET_INBOX_ERROR",error:e}},setInboxNotifications:function(e,t,n){return{type:"SET_INBOX_NOTIFICATIONS",active:e,dismissed:t,counts:n}},setInboxOpen:function(e){return{type:"SET_INBOX_OPEN",isOpen:e}},updateInboxCounts:function(e){return{type:"UPDATE_INBOX_COUNTS",counts:e}},fetchItems:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Nr().mark(function n(){var r,a,l,i,o,s,c,u,m,d,g,p,f,y,h,_,b;return Nr().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Vr.setLoading(e,!0);case 2:return n.prev=2,i=Object.entries(t).map(function(e){var t=hr(e,2),n=t[0],r=t[1];return"".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(r))}).join("&"),o="/imagely/v1/".concat(e).concat(i?"?".concat(i):""),s=null===(r=window.imagelyApp)||void 0===r?void 0:r.nonce,n.next=8,{type:"FETCH_FROM_API",request:{path:o,method:"GET",headers:{"X-WP-Nonce":s,"Content-Type":"application/json"}}};case 8:return c=n.sent,u=parseInt((null===(a=Hr)||void 0===a?void 0:a.total)||"0",10),m=parseInt((null===(l=Hr)||void 0===l?void 0:l.totalPages)||"1",10),d=parseInt(t.per_page||"20",10),g=parseInt(t.page||"1",10),p=Array.isArray(c)?c:[],f=p.length,y=Math.ceil(f/d),h=t.search?f:u,_=t.search?y:m,n.next=20,Vr.setPagination(e,{total:h,total_pages:Math.max(1,_),per_page:d,current_page:Math.min(g,Math.max(1,_))});case 20:return n.next=22,Vr.setItems(e,p);case 22:return n.next=24,Vr.setError(e,null);case 24:n.next=35;break;case 26:return n.prev=26,n.t0=n.catch(2),b=n.t0,n.next=31,Vr.setError(e,b.message||"Unknown error");case 31:return n.next=33,Vr.setItems(e,[]);case 33:return n.next=35,Vr.setPagination(e,{total:0,total_pages:1,per_page:parseInt(t.per_page||"20",10),current_page:1});case 35:return n.prev=35,n.next=38,Vr.setLoading(e,!1);case 38:return n.finish(35);case 39:case"end":return n.stop()}},n,null,[[2,26,35,39]])})()},fetchDetail:Nr().mark(function e(t,n){var r,a;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="albumDetail",e.next=3,Vr.setLoading(r,!0);case 3:return e.prev=3,e.next=6,{type:"FETCH_DETAIL",entityType:t,id:n};case 6:if(a=e.sent){e.next=9;break}throw new Error("No ".concat(t," found with ID ").concat(n));case 9:return e.next=11,Vr.setDetail(r,n,a);case 11:return e.next=13,Vr.setError(r,null);case 13:return e.abrupt("return",a);case 16:return e.prev=16,e.t0=e.catch(3),console.error("Store: Error fetching ".concat(t," detail:"),e.t0),e.next=21,Vr.setError(r,e.t0.message);case 21:return e.abrupt("return",null);case 22:return e.prev=22,e.next=25,Vr.setLoading(r,!1);case 25:return e.finish(22);case 26:case"end":return e.stop()}},e,null,[[3,16,22,26]])}),createItem:Nr().mark(function e(t,n){var r;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vr.setLoading(t,!0);case 2:return e.prev=2,e.next=5,{type:"CREATE_ITEM",entityType:t,data:n};case 5:return r=e.sent,e.next=8,Vr.fetchItems(t);case 8:return e.next=10,Vr.setError(t,null);case 10:return e.abrupt("return",r);case 13:return e.prev=13,e.t0=e.catch(2),e.next=17,Vr.setError(t,e.t0.message);case 17:return e.abrupt("return",null);case 18:return e.prev=18,e.next=21,Vr.setLoading(t,!1);case 21:return e.finish(18);case 22:case"end":return e.stop()}},e,null,[[2,13,18,22]])}),updateItem:Nr().mark(function e(t,n,r){var a,l,i,o,s;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=(a="albums"===t)?"".concat(t,"Detail"):t,e.next=4,Vr.setLoading(l,!0);case 4:return e.prev=4,e.next=7,{type:"UPDATE_ITEM",entityType:t,id:n,data:r};case 7:if(i=e.sent,!a){e.next=15;break}return e.next=11,Vr.fetchItems(t);case 11:return e.next=13,Vr.setDetail("albumDetail",n,i);case 13:e.next=22;break;case 15:if("images"!==t){e.next=22;break}return e.next=18,(0,me.select)(tr).getImages();case 18:return o=e.sent,s=o.map(function(e){return e.pid===n?qr(qr(qr({},e),i),{},{tags:Array.isArray(i.tags)?i.tags:[]}):e}),e.next=22,Vr.setImages(s);case 22:return e.next=24,Vr.setError(l,null);case 24:return e.abrupt("return",i);case 27:return e.prev=27,e.t0=e.catch(4),e.next=31,Vr.setError(l,e.t0.message);case 31:return e.abrupt("return",null);case 32:return e.prev=32,e.next=35,Vr.setLoading(l,!1);case 35:return e.finish(32);case 36:case"end":return e.stop()}},e,null,[[4,27,32,36]])}),deleteItem:Nr().mark(function e(t,n){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vr.setLoading(t,!0);case 2:return e.prev=2,e.next=5,{type:"DELETE_ITEM",entityType:t,id:n};case 5:if("galleries"!==t&&"albums"!==t){e.next=10;break}return e.next=8,Vr.fetchItems(t);case 8:return e.next=10,Vr.setError(t,null);case 10:return e.abrupt("return",!0);case 13:return e.prev=13,e.t0=e.catch(2),e.next=17,Vr.setError(t,e.t0.message);case 17:return e.abrupt("return",!1);case 18:return e.prev=18,e.next=21,Vr.setLoading(t,!1);case 21:return e.finish(18);case 22:case"end":return e.stop()}},e,null,[[2,13,18,22]])}),fetchGalleryImages:Nr().mark(function e(t){var n,r;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vr.setLoading("images",!0);case 2:return e.prev=2,e.next=5,{type:"FETCH_GALLERY_IMAGES",galleryId:t};case 5:return n=e.sent,r=Array.isArray(n)?zr(n).sort(function(e,t){return e.sortorder-t.sortorder}):[],e.next=9,Vr.setItems("images",r);case 9:return e.next=11,Vr.setError("images",null);case 11:return e.abrupt("return",r);case 14:return e.prev=14,e.t0=e.catch(2),console.error("Store: Error fetching images for gallery ".concat(t,":"),e.t0),e.next=19,Vr.setError("images",e.t0.message);case 19:return e.next=21,Vr.setItems("images",[]);case 21:return e.abrupt("return",[]);case 22:return e.prev=22,e.next=25,Vr.setLoading("images",!1);case 25:return e.finish(22);case 26:case"end":return e.stop()}},e,null,[[2,14,22,26]])}),updateBulkImages:Nr().mark(function e(t){var n;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vr.setLoading("images",!0);case 2:return e.prev=2,e.next=5,{type:"UPDATE_BULK_IMAGES",images:t};case 5:return n=e.sent,e.next=8,Vr.setError("images",null);case 8:return e.abrupt("return",n);case 11:return e.prev=11,e.t0=e.catch(2),e.next=15,Vr.setError("images",e.t0.message);case 15:return e.abrupt("return",null);case 16:return e.prev=16,e.next=19,Vr.setLoading("images",!1);case 19:return e.finish(16);case 20:case"end":return e.stop()}},e,null,[[2,11,16,20]])}),fetchInboxNotifications:Nr().mark(function e(){var t;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vr.setInboxLoading(!0);case 2:return e.prev=2,e.next=5,{type:"FETCH_NOTIFICATIONS"};case 5:return t=e.sent,e.next=8,Vr.setInboxNotifications(t.active,t.dismissed,t.counts);case 8:return e.next=10,Vr.setInboxError(null);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(2),e.next=16,Vr.setInboxError(e.t0.message);case 16:return e.prev=16,e.next=19,Vr.setInboxLoading(!1);case 19:return e.finish(16);case 20:case"end":return e.stop()}},e,null,[[2,12,16,20]])}),dismissInboxNotification:Nr().mark(function e(t){var n;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,{type:"DISMISS_NOTIFICATION",id:t};case 3:return n=e.sent,e.next=6,Vr.updateInboxCounts(n.counts);case 6:return e.next=8,Vr.fetchInboxNotifications();case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,Vr.setInboxError(e.t0.message);case 14:case"end":return e.stop()}},e,null,[[0,10]])}),dismissAllInboxNotifications:Nr().mark(function e(){var t;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,{type:"DISMISS_NOTIFICATION",id:"all"};case 3:return t=e.sent,e.next=6,Vr.updateInboxCounts(t.counts);case 6:return e.next=8,Vr.fetchInboxNotifications();case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,Vr.setInboxError(e.t0.message);case 14:case"end":return e.stop()}},e,null,[[0,10]])}),openInboxPanel:Nr().mark(function e(){var t,n,r;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vr.setInboxOpen(!0);case 2:return e.next=4,(0,me.select)(tr);case 4:if(n=e.sent,!((r=null===(t=n.ui)||void 0===t?void 0:t.inbox)&&r.active&&r.dismissed&&0===r.active.length&&0===r.dismissed.length)||r.loading){e.next=9;break}return e.next=9,Vr.fetchInboxNotifications();case 9:case"end":return e.stop()}},e)}),closeInboxPanel:Nr().mark(function e(){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vr.setInboxOpen(!1);case 2:case"end":return e.stop()}},e)})},Kr={getItems:function(e,t){return Array.isArray(e[t])?e[t]:[]},getGalleries:function(e){return Array.isArray(e.galleries)?e.galleries:[]},getAlbums:function(e){return e.albums},getAlbumDetail:function(e,t){return e.albumDetail[t]},getImages:function(e){return e.images},getTags:function(e){return e.tags},getDisplayTypes:function(e){return e.displayTypes},getSettings:function(e){return e.settings},getLoading:function(e,t){return e.loading[t]||!1},getError:function(e,t){return e.error[t]||null},getCurrentTab:function(e){return e.router.currentTab},getCurrentSubTab:function(e){return e.router.currentSubTab},getCurrentPage:function(e){return e.router.currentPage},getCurrentId:function(e){return e.router.currentId},getRouteParams:function(e){return e.router},getUIState:function(e){return e.ui},getActiveModal:function(e){return e.ui.activeModal},getPagination:function(e,t){return e.pagination[t]||Ur.pagination[t]},getNotifications:function(e){return e.ui.notifications},getPageLoading:function(e){return e.ui.isPageLoading},getInboxState:function(e){return e.ui.inbox||Ur.ui.inbox},getInboxActive:function(e){var t;return(null===(t=e.ui.inbox)||void 0===t?void 0:t.active)||[]},getInboxDismissed:function(e){var t;return(null===(t=e.ui.inbox)||void 0===t?void 0:t.dismissed)||[]},getInboxCounts:function(e){var t;return(null===(t=e.ui.inbox)||void 0===t?void 0:t.counts)||{active:0,dismissed:0}},getInboxActiveCount:function(e){var t;return(null===(t=e.ui.inbox)||void 0===t||null===(t=t.counts)||void 0===t?void 0:t.active)||0},getInboxDismissedCount:function(e){var t;return(null===(t=e.ui.inbox)||void 0===t||null===(t=t.counts)||void 0===t?void 0:t.dismissed)||0},getInboxIsOpen:function(e){var t;return(null===(t=e.ui.inbox)||void 0===t?void 0:t.isOpen)||!1},getInboxLoading:function(e){var t;return(null===(t=e.ui.inbox)||void 0===t?void 0:t.loading)||!1},getInboxError:function(e){var t;return(null===(t=e.ui.inbox)||void 0===t?void 0:t.error)||null}},Qr=(0,me.createReduxStore)(tr,{reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ur,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ITEMS":return qr(qr({},e),{},n({},t.entityType,t.items));case"SET_DETAIL":return qr(qr({},e),{},n({},t.entityType,qr(qr({},e[t.entityType]),{},n({},t.id,t.item))));case"REMOVE_DETAIL":var r=qr({},e[t.entityType]);return r[t.id],qr(qr({},e),{},n({},t.entityType,r));case"SET_LOADING":return qr(qr({},e),{},{loading:qr(qr({},e.loading),{},n({},t.entityType,t.isLoading))});case"SET_ERROR":return qr(qr({},e),{},{error:qr(qr({},e.error),{},n({},t.entityType,t.error))});case"SET_CURRENT_TAB":return qr(qr({},e),{},{router:qr(qr({},e.router),{},{currentTab:t.tab})});case"SET_CURRENT_SUB_TAB":return qr(qr({},e),{},{router:qr(qr({},e.router),{},{currentSubTab:t.subTab})});case"SET_CURRENT_PAGE":return qr(qr({},e),{},{router:qr(qr({},e.router),{},{currentPage:t.page})});case"SET_CURRENT_ID":return qr(qr({},e),{},{router:qr(qr({},e.router),{},{currentId:t.id})});case"SET_ROUTER_STATE":case"NAVIGATE_TO":return qr(qr({},e),{},{router:{currentPage:t.page,currentTab:t.tab,currentSubTab:t.subTab,currentId:t.id}});case"SET_ACTIVE_MODAL":return qr(qr({},e),{},{ui:qr(qr({},e.ui),{},{activeModal:t.modalType?{type:t.modalType,props:t.modalProps||{}}:null})});case"SET_PAGINATION":return qr(qr({},e),{},{pagination:qr(qr({},e.pagination),{},n({},t.entityType,t.pagination))});case"SET_IMAGES":return qr(qr({},e),{},{images:t.images});case"SET_IMAGE_RELOAD_KEY":return qr(qr({},e),{},{images:e.images.map(function(e){return e.pid===t.pid?qr(qr({},e),{},{reloadKey:t.reloadKey}):e})});case"ADD_NOTIFICATION":return qr(qr({},e),{},{ui:qr(qr({},e.ui),{},{notifications:[].concat(zr(e.ui.notifications),[t.notification])})});case"DISMISS_NOTIFICATION":return qr(qr({},e),{},{ui:qr(qr({},e.ui),{},{notifications:e.ui.notifications.filter(function(e){return e.id!==t.id})})});case"CLEAR_ALL_NOTIFICATIONS":return qr(qr({},e),{},{ui:qr(qr({},e.ui),{},{notifications:[]})});case"SET_PAGE_LOADING":return qr(qr({},e),{},{ui:qr(qr({},e.ui),{},{isPageLoading:t.loading})});case"SET_INBOX_LOADING":return qr(qr({},e),{},{ui:qr(qr({},e.ui),{},{inbox:qr(qr({},e.ui.inbox),{},{loading:t.loading})})});case"SET_INBOX_ERROR":return qr(qr({},e),{},{ui:qr(qr({},e.ui),{},{inbox:qr(qr({},e.ui.inbox),{},{error:t.error})})});case"SET_INBOX_NOTIFICATIONS":return qr(qr({},e),{},{ui:qr(qr({},e.ui),{},{inbox:qr(qr({},e.ui.inbox),{},{active:t.active,dismissed:t.dismissed,counts:t.counts})})});case"SET_INBOX_OPEN":return qr(qr({},e),{},{ui:qr(qr({},e.ui),{},{inbox:qr(qr({},e.ui.inbox),{},{isOpen:t.isOpen})})});case"UPDATE_INBOX_COUNTS":return qr(qr({},e),{},{ui:qr(qr({},e.ui),{},{inbox:qr(qr({},e.ui.inbox),{},{counts:t.counts})})});default:return e}},actions:Vr,selectors:Kr,controls:Wr});try{(0,me.select)(tr)||(0,me.register)(Qr)}catch(e){console.error("Error registering store:",e);try{(0,me.register)(Qr)}catch(e){console.error("Failed to register NextGen Gallery store:",e)}}var Xr=function(e){return["album",e]},Yr=function(e){var t,n=J().useMemo(function(){return Xr(e)},[e]),r=te().getQueryState(n),a="error"===(null==r?void 0:r.status);return Ar({queryKey:n,queryFn:(t=Er(Nr().mark(function t(){var n,r;return Nr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=null===(n=window.imagelyApp)||void 0===n?void 0:n.nonce,t.next=3,Fr()({path:"/imagely/v1/albums/".concat(e),method:"GET",headers:{"X-WP-Nonce":r}});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t)})),function(){return t.apply(this,arguments)}),enabled:!!e&&!a,staleTime:12e4,gcTime:6e5,retry:0,throwOnError:!1,refetchOnWindowFocus:!1})},Zr=function(e){var t,n=new URLSearchParams;return null!=e&&e.get_all?n.append("per_page","1000"):(null!=e&&e.page&&n.append("page",e.page.toString()),null!=e&&e.per_page&&n.append("per_page",e.per_page.toString())),null!=e&&e.search&&n.append("search",e.search),null!=e&&e.sort&&n.append("orderby",e.sort),null!=e&&e.order&&n.append("order",e.order),Ar({queryKey:["albums",e],queryFn:(t=Er(Nr().mark(function t(){var r,a,l,i,o,s,c,u,m,d;return Nr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=null===(r=window.imagelyApp)||void 0===r?void 0:r.nonce,l="/imagely/v1/albums".concat(n.toString()?"?".concat(n.toString()):""),t.next=4,Fr()({path:l,method:"GET",headers:{"X-WP-Nonce":a}});case 4:return i=t.sent,o=Gr(),s=parseInt((null==o?void 0:o.total)||"0"),c=parseInt((null==o?void 0:o.totalPages)||"1"),u=(null==e?void 0:e.page)||1,m=null!=e&&e.get_all?s:(null==e?void 0:e.per_page)||20,d={albums:i,pagination:{total:s,total_pages:c,per_page:m,current_page:u}},t.abrupt("return",d);case 12:case"end":return t.stop()}},t)})),function(){return t.apply(this,arguments)}),staleTime:3e4,gcTime:6e5,retry:0,throwOnError:!1,refetchOnWindowFocus:!0,refetchOnMount:!1,placeholderData:function(e){return e}})},Jr=function(){var e,t=te();return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var n,r,a,l,i;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,a=t.data,l=null===(n=window.imagelyApp)||void 0===n?void 0:n.nonce,e.next=4,Fr()({path:"/imagely/v1/albums/".concat(r),method:"PUT",headers:{"X-WP-Nonce":l,"Content-Type":"application/json"},data:a});case 4:return i=e.sent,e.abrupt("return",i.album);case 6:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),onSuccess:function(e,n){var r=n.id;t.setQueryData(Xr(r),e),t.invalidateQueries({queryKey:["albums"]})}})};function $r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ea(){var e=(0,me.useDispatch)(tr),t=(0,me.useSelect)(function(e){return e(tr).getNotifications()},[]),r=(0,Z.useCallback)(function(t,n,r){e.showNotice(t,n,r)},[e]),a=(0,Z.useCallback)(function(t){e.dismissNotice(t)},[e]),l=(0,Z.useCallback)(function(){e.clearAllNotices()},[e]),i=(0,Z.useCallback)(function(t,n){e.showNotice("success",t,n)},[e]),o=(0,Z.useCallback)(function(t,r){e.showNotice("error",t,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$r(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$r(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({duration:0},r))},[e]),s={onSuccess:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,de.__)("Changes saved successfully!","nggallery");e.showNotice("success",t)},onError:function(t,n){var r,a=n||(0,de.__)("An error occurred. Please try again.","nggallery");null!=t&&t.message?a=t.message:null!=t&&null!==(r=t.data)&&void 0!==r&&r.message?a=t.data.message:"string"==typeof t&&(a=t),e.showNotice("error",a)}};return{notifications:t,showNotification:r,dismissNotification:a,clearNotifications:l,showSuccess:i,showError:o,showWarning:(0,Z.useCallback)(function(t,n){e.showNotice("warning",t,n)},[e]),showInfo:(0,Z.useCallback)(function(t,n){e.showNotice("info",t,n)},[e]),mutationCallbacks:s}}var ta=(0,Z.createContext)({isEmbed:!1}),na=function(){return(0,Z.useContext)(ta)},ra=["isOpen","onClose","onAlbumCreated"];const aa=function(e){var t=e.current,n=e.total,r=e.label,a=e.showPercentage,l=void 0===a||a,i=n>0?Math.round(t/n*100):0;return J().createElement("div",{className:"w-full"},r&&J().createElement("div",{className:"flex justify-between items-center mb-2"},J().createElement("span",{className:"text-sm font-medium text-gray-700"},r),l&&J().createElement("span",{className:"text-sm text-gray-500"},t," / ",n," (",i,"%)")),J().createElement("div",{className:"w-full bg-gray-200 rounded-full h-2.5 overflow-hidden"},J().createElement("div",{className:"bg-green-600 h-2.5 rounded-full transition-all duration-300 ease-out",style:{width:"".concat(i,"%")}})))};var la=function(){var e,t,n=window;return(null===(e=n.wpApiSettings)||void 0===e?void 0:e.nonce)||(null===(t=n.imagelyApp)||void 0===t?void 0:t.nonce)||""},ia=function(){return{"X-WP-Nonce":la(),"Content-Type":"application/json"}},oa=function(e){return function(){var t=Er(Nr().mark(function t(n,r){return Nr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Fr()({path:"/imagely/v1/images/".concat(n,"/").concat(e),method:"POST",headers:ia(),data:r});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()},sa=function(e){return function(){var t=Er(Nr().mark(function t(n){return Nr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Fr()({path:"/imagely/v1/images/".concat(e),method:"POST",headers:ia(),data:n});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()};function ca(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ua(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ua(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){o=!0,l=e},f:function(){try{i||null==n.return||n.return()}finally{if(o)throw l}}}}function ua(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ma(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function da(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ma(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ma(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ga=function(e){return["gallery",e]},pa=function(e){return["gallery",e,"images"]},fa=function(e){var t,n=J().useMemo(function(){return ga(e)},[e]),r=te().getQueryState(n),a="error"===(null==r?void 0:r.status);return Ar({queryKey:n,queryFn:(t=Er(Nr().mark(function t(){return Nr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Fr()({path:"/imagely/v1/galleries/".concat(e),method:"GET",headers:ia()});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)})),function(){return t.apply(this,arguments)}),enabled:!!e&&!a,staleTime:12e4,gcTime:6e5,retry:0,throwOnError:!1})},ya=function(e){var t,n=new URLSearchParams;return null!=e&&e.get_all?n.append("per_page","1000"):(null!=e&&e.page&&n.append("page",e.page.toString()),null!=e&&e.per_page&&n.append("per_page",e.per_page.toString())),null!=e&&e.search&&n.append("search",e.search),null!=e&&e.sort&&n.append("orderby",e.sort),null!=e&&e.order&&n.append("order",e.order),Ar({queryKey:["galleries",e],queryFn:(t=Er(Nr().mark(function t(){var r,a,l,i,o,s,c,u;return Nr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r="/imagely/v1/galleries".concat(n.toString()?"?".concat(n.toString()):""),t.next=4,Fr()({path:r,method:"GET",headers:ia()});case 4:return a=t.sent,l=Gr(),i=parseInt((null==l?void 0:l.total)||"0"),o=parseInt((null==l?void 0:l.totalPages)||"1"),s=(null==e?void 0:e.page)||1,c=null!=e&&e.get_all?i:(null==e?void 0:e.per_page)||20,u={galleries:a,pagination:{total:i,total_pages:o,per_page:c,current_page:s}},t.abrupt("return",u);case 14:throw t.prev=14,t.t0=t.catch(0),console.error(" [useGalleries] API call failed:",t.t0),t.t0;case 18:case"end":return t.stop()}},t,null,[[0,14]])})),function(){return t.apply(this,arguments)}),staleTime:3e4,gcTime:6e5,retry:0,throwOnError:!1,refetchOnWindowFocus:!0,refetchOnMount:!1,placeholderData:function(e){return e}})};function ha(){var e,t,n=te();return Mr({mutationFn:(t=Er(Nr().mark(function e(t){var n,r,a,l;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.data,a=da({},r),e.next=4,Fr()({path:"/imagely/v1/galleries/".concat(n),method:"PUT",headers:ia(),data:a});case 4:return l=e.sent,e.abrupt("return",l);case 6:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),onMutate:(e=Er(Nr().mark(function e(t){var r,a,l;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,a=t.data,e.next=3,n.cancelQueries({queryKey:ga(r)});case 3:return(l=n.getQueryData(ga(r)))&&n.setQueryData(ga(r),da(da({},l),a)),e.abrupt("return",{previousGallery:l});case 6:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),onError:function(e,t,r){var a=t.id;null!=r&&r.previousGallery&&n.setQueryData(ga(a),r.previousGallery)},onSettled:function(e,t,r){var a=r.id;n.invalidateQueries({queryKey:ga(a)}),n.invalidateQueries({queryKey:["galleries"]})}})}var _a=function(e){var t,n=J().useMemo(function(){return pa(e)},[e]),r=te(),a=Ar({queryKey:n,queryFn:(t=Er(Nr().mark(function t(){var a,l,i,o,s,c,u;return Nr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Fr()({path:"/imagely/v1/images?gallery_id=".concat(e,"&per_page=-1"),method:"GET",headers:ia()});case 2:if(a=t.sent,Array.isArray(a)){t.next=5;break}return t.abrupt("return",[]);case 5:if(l=zr(a).sort(function(e,t){return e.sortorder-t.sortorder}),!(i=r.getQueryData(n))||!Array.isArray(i)){t.next=13;break}o=new Map,s=ca(i);try{for(s.s();!(c=s.n()).done;)void 0!==(u=c.value).reloadKey&&o.set(u.pid,u.reloadKey)}catch(e){s.e(e)}finally{s.f()}if(!(o.size>0)){t.next=13;break}return t.abrupt("return",l.map(function(e){return o.has(e.pid)?da(da({},e),{},{reloadKey:o.get(e.pid)}):e}));case 13:return t.abrupt("return",l);case 14:case"end":return t.stop()}},t)})),function(){return t.apply(this,arguments)}),enabled:!!e,staleTime:6e4,gcTime:6e5,retry:0,throwOnError:!1});return a},ba=function(){var e,t,n=te();return Mr({mutationFn:(t=Er(Nr().mark(function e(t){var n;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fr()({path:"/imagely/v1/galleries/".concat(t),method:"DELETE",headers:ia()});case 3:e.next=11;break;case 5:if(e.prev=5,e.t0=e.catch(0),404!==(null===e.t0||void 0===e.t0?void 0:e.t0.status)&&404!==(null===e.t0||void 0===e.t0||null===(n=e.t0.response)||void 0===n?void 0:n.status)){e.next=10;break}return console.warn("Gallery ".concat(t," already deleted or doesn't exist")),e.abrupt("return");case 10:throw e.t0;case 11:case"end":return e.stop()}},e,null,[[0,5]])})),function(e){return t.apply(this,arguments)}),onMutate:(e=Er(Nr().mark(function e(t){var r;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.cancelQueries({queryKey:["galleries"]});case 2:return r=n.getQueriesData({queryKey:["galleries"]}),n.setQueriesData({queryKey:["galleries"]},function(e){return null!=e&&e.galleries?da(da({},e),{},{galleries:e.galleries.filter(function(e){return e.id!==t}),pagination:da(da({},e.pagination),{},{total:Math.max(0,e.pagination.total-1)})}):e}),e.abrupt("return",{previousGalleries:r});case 5:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),onError:function(e,t,r){var a;404!==(null==e?void 0:e.status)&&404!==(null==e||null===(a=e.response)||void 0===a?void 0:a.status)&&null!=r&&r.previousGalleries&&r.previousGalleries.forEach(function(e){var t=hr(e,2),r=t[0],a=t[1];n.setQueryData(r,a)})},onSettled:function(e,t){var r;(!t||404!==(null==t?void 0:t.status)&&404!==(null==t||null===(r=t.response)||void 0===r?void 0:r.status))&&n.invalidateQueries({queryKey:["galleries"]})}})},va=function(){var e=Er(Nr().mark(function e(t){var n;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fr()({path:"/imagely/v1/images?gallery_id=".concat(t,"&per_page=999999"),method:"GET",headers:ia()});case 3:return n=e.sent,e.abrupt("return",Array.isArray(n)?n.map(function(e){return e.pid}):[]);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("Failed to fetch image IDs for gallery ".concat(t,": ").concat(e.t0 instanceof Error?e.t0.message:String(e.t0)));case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),xa=function(){var e=Er(Nr().mark(function e(t){var n,r,a,l,i;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=ca(t),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=18;break}return l=a.value,e.prev=6,e.next=9,va(l);case 9:i=e.sent,n.push.apply(n,zr(i)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),console.error("Error fetching images for gallery ".concat(l,":"),e.t0);case 16:e.next=4;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(2),r.e(e.t1);case 23:return e.prev=23,r.f(),e.finish(23);case 26:return e.abrupt("return",n);case 27:case"end":return e.stop()}},e,null,[[2,20,23,26],[6,13]])}));return function(t){return e.apply(this,arguments)}}(),wa=function(){var e,t=te();return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var n,r,a;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.pid,r=t.rotation,a=oa("rotate"),e.next=4,a(n,{rotation:r});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),onSuccess:function(){t.invalidateQueries({queryKey:["images"]}),t.invalidateQueries({queryKey:["gallery"]})}})},Ea=function(){var e,t=te();return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var n;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=oa("recover"),e.next=3,n(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),onSuccess:function(){t.invalidateQueries({queryKey:["images"]}),t.invalidateQueries({queryKey:["gallery"]})}})};function Ca(e){return"boolean"==typeof e?e:"string"==typeof e?"1"===e||"true"===e:"number"==typeof e&&1===e}function Na(e){return e?"1":"0"}function ka(e){if(!e||"object"!==t(e))return e;if(Array.isArray(e))return e.map(function(e){return ka(e)});for(var n={},r=0,a=Object.entries(e);r<a.length;r++){var l=hr(a[r],2),i=l[0],o=l[1];"boolean"==typeof o?n[i]=Na(o):o&&"object"===t(o)?n[i]=ka(o):n[i]=o}return n}function Sa(e){if(!e||"object"!==t(e))return e;if(Array.isArray(e))return e.map(function(e){return Sa(e)});for(var n={},r=0,a=Object.entries(e);r<a.length;r++){var l=hr(a[r],2),i=l[0],o=l[1];"string"!=typeof o||"1"!==o&&"0"!==o?o&&"object"===t(o)?n[i]=Sa(o):n[i]=o:n[i]=Ca(o)}return n}function Oa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Pa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oa(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oa(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Ta={pluginSettings:["settings","plugin"],rolesCapabilities:["settings","roles"]},Da=function(){return Ar({queryKey:Ta.pluginSettings,queryFn:(e=Er(Nr().mark(function e(){var t,n;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===(t=window.imagelyApp)||void 0===t?void 0:t.nonce,e.next=3,Fr()({path:"/imagely/v1/settings",method:"GET",headers:{"X-WP-Nonce":n}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)}),staleTime:3e5,gcTime:6e5});var e},Ia=function(){var e,t,n=te();return Mr({mutationFn:(t=Er(Nr().mark(function e(t){var n,r,a;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=null===(n=window.imagelyApp)||void 0===n?void 0:n.nonce,a=ka(t),e.next=4,Fr()({path:"/imagely/v1/settings",method:"PUT",headers:{"X-WP-Nonce":r,"Content-Type":"application/json"},data:a});case 4:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),onMutate:(e=Er(Nr().mark(function e(t){var r;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.cancelQueries({queryKey:Ta.pluginSettings});case 2:return r=n.getQueryData(Ta.pluginSettings),n.setQueryData(Ta.pluginSettings,function(e){return e?Pa(Pa({},e),t):void 0}),e.abrupt("return",{previousSettings:r});case 5:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),onError:function(e,t,r){null!=r&&r.previousSettings&&n.setQueryData(Ta.pluginSettings,r.previousSettings)},onSettled:function(){n.invalidateQueries({queryKey:Ta.pluginSettings})}})};function ja(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Aa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ja(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ja(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function La(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ma(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ma(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){o=!0,l=e},f:function(){try{i||null==n.return||n.return()}finally{if(o)throw l}}}}function Ma(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ra(e){var t,n=null!==(t=null==e?void 0:e.ID)&&void 0!==t?t:null==e?void 0:e.id,r=(null==e?void 0:e.date)||(new Date).toISOString();return{id:Number(n),title:String((null==e?void 0:e.title)||""),date:r,settings:null==e?void 0:e.settings,digital_download_settings:null==e?void 0:e.digital_download_settings,post_author:null==e?void 0:e.post_author}}var Fa=function(e){return["pricelists",e]},za=function(e){return["pricelist",e]},Ba=function(e){return Ar({queryKey:e?za(e):["pricelist","none"],enabled:!!e,queryFn:(t=Er(Nr().mark(function t(){var n,r,a;return Nr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=null===(n=window.imagelyApp)||void 0===n?void 0:n.nonce,t.next=3,Fr()({path:"/imagely/v1/pricelists/".concat(e),method:"GET",headers:{"X-WP-Nonce":r}});case 3:return a=t.sent,t.abrupt("return",Ra(a));case 5:case"end":return t.stop()}},t)})),function(){return t.apply(this,arguments)}),staleTime:0,gcTime:6e5,retry:0,refetchOnMount:!0,refetchOnWindowFocus:!1});var t},qa=function(e){var t,n=new URLSearchParams;return null!=e&&e.page&&n.append("page",String(e.page)),null!=e&&e.per_page&&n.append("per_page",String(e.per_page)),null!=e&&e.search&&n.append("search",e.search),null!=e&&e.sort&&n.append("sort",e.sort),null!=e&&e.order&&n.append("order",e.order),null!=e&&e.period&&n.append("period",e.period),Ar({queryKey:Fa(e||{}),enabled:!1!==(null==e?void 0:e.enabled),queryFn:(t=Er(Nr().mark(function e(){var t,r,a,l,i,o;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=null===(t=window.imagelyApp)||void 0===t?void 0:t.nonce,a="/imagely/v1/pricelists".concat(n.toString()?"?".concat(n.toString()):""),e.next=4,Fr()({path:a,method:"GET",headers:{"X-WP-Nonce":r}});case 4:return l=e.sent,i=((null==l?void 0:l.pricelists)||[]).map(Ra),o=(null==l?void 0:l.pagination)||{total:0,total_pages:1,per_page:10,current_page:1},e.abrupt("return",{pricelists:i,pagination:o});case 8:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),staleTime:3e4,gcTime:6e5,retry:0,throwOnError:!1,refetchOnWindowFocus:!0,refetchOnMount:!1,placeholderData:function(e){return e}})};function Ha(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ga(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ha(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ha(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ua(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Wa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ua(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ua(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Va(e){var t,n,r,a="percent"===(null==e?void 0:e.discount_type)?"percentage":"flat",l=null!==(t=null==e?void 0:e.ID)&&void 0!==t?t:null==e?void 0:e.id,i=(null==e?void 0:e.date)||(null==e?void 0:e.date_start)||"";return{id:Number(l),coupon_for:String((null==e?void 0:e.title)||""),coupon_code:String((null==e?void 0:e.id_code)||""),discount_type:a,discount_value:String(null!==(n=null!==(r=null==e?void 0:e.discount_amount)&&void 0!==r?r:null==e?void 0:e.discount_value)&&void 0!==n?n:""),start_date:(null==e?void 0:e.date_start)||void 0,end_date:(null==e?void 0:e.date_end)||void 0,usage_limit:null!==(null==e?void 0:e.usage_limit)&&void 0!==(null==e?void 0:e.usage_limit)?String(null==e?void 0:e.usage_limit):void 0,date:i,status:null==e?void 0:e.status,times_used:"number"==typeof(null==e?void 0:e.times_used)?null==e?void 0:e.times_used:void 0}}function Ka(e){var t;return{id:Number(null==e?void 0:e.id),coupon_for:String((null==e?void 0:e.coupon_for)||""),coupon_code:String((null==e?void 0:e.coupon_code)||""),discount_type:"percentage"===(null==e?void 0:e.discount_type)||"flat"===(null==e?void 0:e.discount_type)?null==e?void 0:e.discount_type:"flat",discount_value:String(null!==(t=null==e?void 0:e.discount_value)&&void 0!==t?t:""),start_date:(null==e?void 0:e.start_date)||void 0,end_date:(null==e?void 0:e.end_date)||void 0,usage_limit:null!==(null==e?void 0:e.usage_limit)&&void 0!==(null==e?void 0:e.usage_limit)?String(null==e?void 0:e.usage_limit):void 0,date:(null==e?void 0:e.date)||(null==e?void 0:e.start_date)||"",status:null==e?void 0:e.status,times_used:"number"==typeof(null==e?void 0:e.times_used)?null==e?void 0:e.times_used:void 0}}var Qa=function(e){return["coupons",e]},Xa=function(e){return["coupon",e]},Ya=function(e){return Ar({queryKey:e?Xa(e):["coupon","none"],enabled:!!e,queryFn:(t=Er(Nr().mark(function t(){var n,r,a;return Nr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=null===(n=window.imagelyApp)||void 0===n?void 0:n.nonce,t.next=3,Fr()({path:"/imagely/v1/coupons/".concat(e),method:"GET",headers:{"X-WP-Nonce":r}});case 3:if(!(a=t.sent)||!a.id_code&&!a.ID){t.next=6;break}return t.abrupt("return",Va(a));case 6:return t.abrupt("return",Ka(a));case 7:case"end":return t.stop()}},t)})),function(){return t.apply(this,arguments)}),staleTime:0,gcTime:6e5,retry:0,refetchOnMount:!0,refetchOnWindowFocus:!1});var t},Za={currencies:["currencies"],countries:["countries"],currency:function(e){return["currencies",e]}},Ja=function(){return Ar({queryKey:Za.currencies,queryFn:(e=Er(Nr().mark(function e(){var t,n,r;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===(t=window.imagelyApp)||void 0===t?void 0:t.nonce,e.next=3,Fr()({path:"/imagely/v1/currencies",method:"GET",headers:{"X-WP-Nonce":n}});case 3:if((r=e.sent).success){e.next=6;break}throw new Error("Failed to fetch currencies");case 6:return e.abrupt("return",r.data);case 7:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)}),staleTime:18e5,gcTime:36e5});var e},$a=function(){var e=Ja().data,t=Da().data;return(0,Z.useMemo)(function(){var n,r;if(!e||!t)return"$";var a=t.ecommerce_currency,l=String(a),i=e.find(function(e){return("number"==typeof e.id?e.id:Number(e.id))===Number(l)||e.id===l});return i||(i=e.find(function(e){return e.code===l})),null!==(n=i)&&void 0!==n&&n.symbol?el(i.symbol):(null===(r=i)||void 0===r?void 0:r.code)||"$"},[e,t])},el=function(e){if(!e)return"$";var t=e;if(Object.entries({"&#8364;":"","&#163;":"","&#165;":"","&#8377;":"","&#8381;":"","&#8362;":"","&#8361;":"","&#3647;":"","&#8363;":"","&#8366;":"","&#8365;":""}).forEach(function(e){var n=hr(e,2),r=n[0],a=n[1];t=t.replace(new RegExp(r,"g"),a)}),t.includes("&#"))try{var n=document.createElement("div");n.innerHTML=t;var r=n.textContent||n.innerText||t;r!==t&&(t=r)}catch(e){console.warn("Failed to decode HTML entity:",t)}return t},tl=function(e){var t=e.length;return{left:t<=1?"pl-10":t<=2?"pl-12":t<=3?"pl-14":"pl-16",right:"pr-3"}},nl=function(e){var t=e.length;return t<=1||t<=2?"left-3":"left-4"},rl=function(e){if("number"==typeof e)return e;var t=e;if(e.match(/^&#\d+;$/)){var n=e.match(/&#(\d+);/);if(n){var r=parseInt(n[1],10);if(r>65535)return r}}if(e.includes("&#"))try{var a=document.createElement("div");a.innerHTML=e,t=a.textContent||a.innerText||e}catch(n){t=e.replace(/&#\d+;/g,"").trim()}var l=t.match(/[\d.]+/);return l?parseFloat(l[0]):0};var al=i(795),ll=i.n(al),il=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=hr((0,Z.useState)({offsetX:0,offsetY:0}),2),r=n[0],a=n[1];return(0,Z.useLayoutEffect)(function(){var n=function(){var t=e();if(t){var n=t.getBoundingClientRect();a({offsetX:n.left,offsetY:n.top})}else a({offsetX:0,offsetY:0})};if(n(),t)return window.addEventListener("resize",n),window.addEventListener("scroll",n,!0),function(){window.removeEventListener("resize",n),window.removeEventListener("scroll",n,!0)}},[t]),r},ol=function(){var e=document.querySelectorAll(".imagely-wrap");return e.length>0?e[e.length-1]:document.body},sl=function(){return J().createElement("div",{className:"ml-1 w-4 h-4 text-gray-500 hover:text-gray-700"},J().createElement(ln,null))},cl=function(e){var t=e.text,n=e.children,r=void 0===n?J().createElement(sl,null):n,a=e.placement,l=void 0===a?"top":a,i=(0,Z.useRef)(null),o=(0,Z.useRef)(null),s=hr((0,Z.useState)(!1),2),c=s[0],u=s[1],m=hr((0,Z.useState)(null),2),d=m[0],g=m[1],p=il(ol,c);return(0,Z.useLayoutEffect)(function(){if(c&&i.current&&o.current){var e=i.current.getBoundingClientRect(),t=o.current.getBoundingClientRect(),n=ol().getBoundingClientRect(),r=0,a=0;switch(l){case"right":r=e.top+e.height/2-t.height/2-p.offsetY,a=e.right+8-p.offsetX;break;case"bottom":r=e.bottom+8-p.offsetY,a=e.left+e.width/2-t.width/2-p.offsetX;break;default:r=e.top-t.height-8-p.offsetY,a=e.left+e.width/2-t.width/2-p.offsetX}var s=n.width-16,u=n.height-16;a<16&&(a=16),a+t.width>s&&(a=s-t.width),r<16&&(r=16),r+t.height>u&&(r=u-t.height),g({top:r,left:a})}},[c,t,l,p]),J().createElement("div",{className:"relative inline-block",ref:i},J().createElement("div",{className:"inline-block cursor-help align-middle",onMouseEnter:function(){return u(!0)},onMouseLeave:function(){return u(!1)}},r),c&&ll().createPortal(J().createElement("div",{ref:o,style:{position:"absolute",top:d?"".concat(d.top,"px"):"0",left:d?"".concat(d.left,"px"):"0",opacity:d?1:0,zIndex:9999},className:"px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg min-w-[200px] sm:min-w-[280px] max-w-[calc(100vw-2rem)] sm:max-w-md whitespace-normal break-words pointer-events-none transition-opacity duration-200"},t),ol()))};const ul=function(e){var t=e.htmlFor,n=e.help,r=e.tooltipPlacement,a=void 0===r?"top":r,l=e.children,i=e.className,o=J().createElement("div",{className:"flex items-center"},J().createElement("span",null,l),n&&J().createElement(cl,{text:n,placement:a}));return t?J().createElement("label",{htmlFor:t,className:"block text-sm font-medium text-gray-700 mb-1 ".concat(i||"")},o):J().createElement("div",{className:"block text-sm font-medium text-gray-700 mb-2 ".concat(i||"")},o)},ml=function(e){var t=e.id,n=e.name,r=e.value,a=e.onChange,l=e.children,i=e.label,o=e.help,s=e.tooltipPlacement;return J().createElement(J().Fragment,null,J().createElement(ul,{htmlFor:t,help:o,tooltipPlacement:s,className:i?void 0:"hidden"},i||""),J().createElement("select",{id:t,name:n,value:r,onChange:a,className:"bg-white border text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full max-w-full p-2.5 hover:border-green-500 border-gray-400 transition-colors"},l))},dl=function(e){var t=e.type,n=e.id,r=e.name,a=e.value,l=e.onChange,i=e.label,o=e.help,s=e.min,c=void 0===s?0:s,u=e.max,m=void 0===u?1e4:u,d=e.step,g=void 0===d?1:d,p=e.placeholder,f=void 0===p?"":p,y=e.minString,h=e.maxString,_=e.tooltipPlacement,b=e.prefix,v=null!=a?a:"";return J().createElement(J().Fragment,null,J().createElement(ul,{htmlFor:null!=n?n:r,help:o,tooltipPlacement:_,className:i?void 0:"hidden"},i||""),J().createElement("div",{className:"relative ".concat(b?"has-prefix":"")},b&&J().createElement("span",{className:"absolute inset-y-0 ".concat(nl(b)," flex items-center text-gray-500 text-sm pointer-events-none px-2")},b),J().createElement("input",ge({type:t,id:null!=n?n:r,name:r,value:v,onChange:l,className:"bg-white border text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full ".concat(b?"".concat(tl(b).left," pr-2.5 py-2.5"):"p-2.5"," hover:border-green-500 border-gray-400 transition-colors")},"number"===t&&{min:c,max:m,step:g},"number"!==t&&{min:y,max:h},{placeholder:f}))))};function gl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function pl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gl(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gl(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function fl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function yl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fl(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fl(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var hl=function(){var e,t=te();return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var n,r,a,l;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.imageId,a=t.data,l=null===(n=window.imagelyApp)||void 0===n?void 0:n.nonce,e.next=4,Fr()({path:"/imagely/v1/images/".concat(r),method:"PUT",headers:{"X-WP-Nonce":l,"Content-Type":"application/json"},data:a});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),onSuccess:function(e){t.setQueryData(["gallery",e.galleryid,"images"],function(t){return t?t.map(function(t){return t.pid===e.pid?e:t}):[e]}),t.invalidateQueries({queryKey:["gallery",e.galleryid]})}})},_l=["isOpen","entityType","items","getItemId","getItemLabel","onClose","onConfirm","title","singularLabel","pluralLabel","confirmLabel","cancelLabel","maxList"];const bl=function(e){var t=e.isOpen,n=e.entityType,r=e.items,a=e.getItemId,l=e.getItemLabel,i=e.onClose,o=void 0===i?function(){}:i,s=e.onConfirm,c=void 0===s?function(){}:s,u=e.title,m=e.singularLabel,d=void 0===m?"item":m,g=e.pluralLabel,p=void 0===g?"items":g,f=e.confirmLabel,y=void 0===f?(0,de.__)("Delete"):f,h=e.cancelLabel,_=void 0===h?(0,de.__)("Cancel"):h,b=e.maxList,v=void 0===b?5:b,x=pe(e,_l),w=function(){var e,t=te();return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var n,r,a;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.imageId,a=null===(n=window.imagelyApp)||void 0===n?void 0:n.nonce,e.next=4,Fr()({path:"/imagely/v1/images/".concat(r),method:"DELETE",headers:{"X-WP-Nonce":a}});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),onSuccess:function(e,n){var r=n.imageId;t.setQueriesData({queryKey:["gallery"]},function(e){return Array.isArray(e)?e.filter(function(e){return e.pid!==r}):e}),t.invalidateQueries({queryKey:["gallery"]})}})}(),E=ba(),C=function(){var e,t=te();return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var n,r,a;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=null===(n=window.imagelyApp)||void 0===n?void 0:n.nonce,e.prev=1,e.next=4,Fr()({path:"/imagely/v1/albums/".concat(t),method:"DELETE",headers:{"X-WP-Nonce":r}});case 4:e.next=12;break;case 6:if(e.prev=6,e.t0=e.catch(1),404!==(null===e.t0||void 0===e.t0?void 0:e.t0.status)&&404!==(null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a?void 0:a.status)){e.next=11;break}return console.warn("Album ".concat(t," already deleted or doesn't exist")),e.abrupt("return");case 11:throw e.t0;case 12:case"end":return e.stop()}},e,null,[[1,6]])})),function(t){return e.apply(this,arguments)}),onSuccess:function(){t.invalidateQueries({queryKey:["albums"]})}})}(),N=ea(),k=N.showSuccess,S=N.showError,O=w.isPending||E.isPending||C.isPending,P=(0,Z.useMemo)(function(){return r.length<=v?J().createElement("ul",{className:"list-none text-sm text-gray-700 px-4 text-center"},r.map(function(e){return J().createElement("li",{key:a(e)},l(e))})):null},[r,a,l,v]),T=function(){var e=Er(Nr().mark(function e(){var t;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==r.length){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,"images"!==n){e.next=8;break}return e.next=6,Promise.all(r.map(function(e){return w.mutateAsync({imageId:a(e)})}));case 6:e.next=16;break;case 8:if("galleries"!==n){e.next=13;break}return e.next=11,Promise.all(r.map(function(e){return E.mutateAsync(a(e))}));case 11:e.next=16;break;case 13:if("albums"!==n){e.next=16;break}return e.next=16,Promise.all(r.map(function(e){return C.mutateAsync(a(e))}));case 16:t=1===r.length?d:p,k((0,de.__)("Successfully deleted ".concat(r.length," ").concat(t),"nggallery")),c(),o(),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(2),console.error("Error deleting items:",e.t0),S((0,de.__)("Failed to delete items","nggallery"));case 26:case"end":return e.stop()}},e,null,[[2,22]])}));return function(){return e.apply(this,arguments)}}();return J().createElement(xr,ge({isOpen:t,onClose:o},x),J().createElement("div",{className:"space-y-4"},J().createElement("div",{className:"flex items-center gap-2 justify-center"},J().createElement("div",null,J().createElement(An,null))),u&&J().createElement("h2",{className:"text-xl font-bold text-center text-gray-900 mt-2"},u),J().createElement("p",{className:"text-sm text-gray-500 text-center"},(0,de.__)("Are you sure you want to delete ".concat(r.length," ").concat(1===r.length?d:p,"?"))),P,J().createElement("p",{className:"text-sm text-red-500 text-center"},(0,de.__)("This action cannot be undone.")),J().createElement("div",{className:"flex justify-center space-x-3 !mb-4 ".concat(O?"cursor-wait":"")},J().createElement("button",{type:"button",onClick:o,disabled:O,className:"px-8 py-2 font-medium text-gray-700 bg-white border border-gray-300 rounded-lg shadow hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},_),J().createElement("button",{type:"button",onClick:T,disabled:O,className:"px-8 py-2 font-bold text-white bg-green-500 border border-transparent rounded-lg shadow hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},O?J().createElement("span",{className:"flex items-center"},J().createElement(an,{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white"}),(0,de.__)("Deleting...","nggallery")):y))))};var vl=["isOpen","albums","onClose","onConfirm","title"];var xl=["isOpen","galleries","onClose","onConfirm","title"];var wl=["isOpen","images","onClose","onConfirm","title"];var El=["isOpen","tags","onClose","onConfirm","title"];function Cl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Nl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cl(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cl(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function kl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Sl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kl(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kl(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const Ol=function(e){var t=e.id,n=e.name,r=e.value,a=e.onChange,l=e.label,i=e.help,o=e.placeholder,s=void 0===o?"":o,c=e.rows,u=void 0===c?4:c;return J().createElement(J().Fragment,null,J().createElement(ul,{htmlFor:null!=t?t:n,help:i,className:l?void 0:"hidden"},l||""),J().createElement("textarea",{id:null!=t?t:n,name:n,value:r,onChange:a,rows:u,className:"bg-white border border-input-border text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5 hover:border-gray-400 transition-colors",placeholder:s}))};function Pl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Tl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pl(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pl(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const Dl=function(e){var t=e.gallery,r=e.onClose,a=e.onUpdate,l=ha(),i=ea(),o=i.showSuccess,s=i.showError,c=hr((0,Z.useState)({title:"",galdesc:""}),2),u=c[0],m=c[1];(0,Z.useEffect)(function(){m({title:t.title||"",galdesc:t.galdesc||""})},[t]);var d=function(e){var t=e.target,r=t.name,a=t.value;m(function(e){return Tl(Tl({},e),{},n({},r,a))})},g=function(){var e=Er(Nr().mark(function e(n){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,l.mutateAsync({id:t.gid,data:{title:u.title,name:u.title,galdesc:u.galdesc}});case 4:a&&a(),r(),o((0,de.__)("Gallery updated successfully!","nggallery")),e.next=14;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Error updating gallery:",e.t0),console.error("Error details:",{message:e.t0 instanceof Error?e.t0.message:"Unknown error",stack:e.t0 instanceof Error?e.t0.stack:void 0,errorObject:e.t0}),s((0,de.__)("Failed to update gallery. Please try again.","nggallery"));case 14:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t){return e.apply(this,arguments)}}();return J().createElement("form",{onSubmit:g,className:"space-y-4"},J().createElement(dl,{type:"text",name:"title",value:u.title,onChange:d,label:(0,de.__)("Gallery Title","nggallery"),placeholder:(0,de.__)("Enter gallery title","nggallery")}),J().createElement(Ol,{name:"galdesc",value:u.galdesc,onChange:d,label:(0,de.__)("Gallery Description","nggallery"),placeholder:(0,de.__)("Enter gallery description","nggallery"),rows:6}),J().createElement("div",{className:"flex justify-end space-x-2"},J().createElement("button",{type:"button",onClick:r,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors"},(0,de.__)("Cancel","nggallery")),J().createElement("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"},(0,de.__)("Save Changes","nggallery"))))};function Il(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function jl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Il(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Il(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const Al=function(e){var t=e.onSuccess,r=(0,me.useDispatch)(tr),a=function(){var e,t,n=te();return Mr({mutationFn:(t=Er(Nr().mark(function e(t){var n;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=da(da({},t),{},{is_ecommerce_enabled:t.is_ecommerce_enabled,is_private:void 0!==t.is_private?t.is_private?1:0:void 0}),e.next=3,Fr()({path:"/imagely/v1/galleries",method:"POST",headers:ia(),data:n});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),onMutate:(e=Er(Nr().mark(function e(t){var r;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.cancelQueries({queryKey:["galleries"]});case 2:return r=n.getQueriesData({queryKey:["galleries"]}),n.setQueriesData({queryKey:["galleries"]},function(e){if(null!=e&&e.galleries){var n={id:Date.now(),galleryTitle:t.title||t.name||"New Gallery",thumbnail:"",shortcode:'[ngg id="'.concat(Date.now(),'"]'),count:0,eCommerce:"1"===t.is_ecommerce_enabled,is_private:t.is_private||!1,created:(new Date).toLocaleDateString(),modified:(new Date).toLocaleDateString()};return da(da({},e),{},{galleries:[n].concat(zr(e.galleries)),pagination:da(da({},e.pagination),{},{total:e.pagination.total+1})})}return e}),e.abrupt("return",{previousGalleries:r});case 5:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),onError:function(e,t,r){null!=r&&r.previousGalleries&&r.previousGalleries.forEach(function(e){var t=hr(e,2),r=t[0],a=t[1];n.setQueryData(r,a)})},onSuccess:function(e){n.setQueriesData({queryKey:["galleries"]},function(t){return null!=t&&t.galleries?da(da({},t),{},{galleries:t.galleries.map(function(t){return t.id===e.gid||t.galleryTitle===e.title?{id:e.gid,galleryTitle:e.title,thumbnail:e.previewpic_url||"",shortcode:'[ngg id="'.concat(e.gid,'"]'),count:0,eCommerce:"1"===e.is_ecommerce_enabled,is_private:e.is_private,created:e.date_created,modified:e.date_modified}:t})}):t})},onSettled:function(){n.invalidateQueries({queryKey:["galleries"]})}})}(),l=ea(),i=l.showSuccess,o=l.showError,s=hr((0,Z.useState)({title:"",galdesc:""}),2),c=s[0],u=s[1],m=function(e){var t=e.target,r=t.name,a=t.value;u(function(e){return jl(jl({},e),{},n({},r,a))})},d=function(){var e=Er(Nr().mark(function e(n){var l;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,a.mutateAsync(jl(jl({},c),{},{name:c.title}));case 4:l=e.sent,u({title:"",galdesc:""}),r.setActiveModal(null),t&&null!=l&&l.gid?(t(l.gid),i((0,de.__)("Gallery created successfully!","nggallery"))):null!=l&&l.gid?(r.navigateTo("imagely-add-new","images",l.gid),i((0,de.__)("Gallery created successfully!","nggallery"))):(console.warn("Could not navigate: Gallery ID is missing from response"),console.warn("Response structure:",Object.keys(l||{}))),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.error("Error creating gallery:",e.t0),console.error("Error details:",{message:e.t0 instanceof Error?e.t0.message:"Unknown error",stack:e.t0 instanceof Error?e.t0.stack:void 0,errorObject:e.t0}),o((0,de.__)("Failed to create gallery. Please try again.","nggallery"));case 15:case"end":return e.stop()}},e,null,[[1,10]])}));return function(t){return e.apply(this,arguments)}}();return J().createElement("form",{onSubmit:d,className:"space-y-4"},J().createElement(dl,{type:"text",name:"title",value:c.title,onChange:m,label:(0,de.__)("Gallery Title","nggallery"),placeholder:(0,de.__)("Enter gallery title","nggallery")}),J().createElement(Ol,{name:"galdesc",value:c.galdesc,onChange:m,label:(0,de.__)("Gallery Description","nggallery"),placeholder:(0,de.__)("Enter gallery description","nggallery"),rows:6}),J().createElement("button",{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg transition-colors"},(0,de.__)("Create Gallery","nggallery")))};var Ll=["isOpen","onClose","onGalleryCreated"];const Ml=function(e){var t=e.id,n=e.name,r=e.checked,a=e.onChange,l=e.label,i=e.help,o=Ca(r);return J().createElement("div",{className:"relative inline-flex items-start gap-3 w-full"},J().createElement("div",{className:"relative"},J().createElement("input",{type:"checkbox",id:t,name:n,checked:o,onChange:a,className:"sr-only peer"}),J().createElement("label",{htmlFor:t,className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full inline-block cursor-pointer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})),J().createElement("div",{className:"flex items-center gap-1"},J().createElement("label",{htmlFor:t,className:"text-sm font-medium text-gray-900 cursor-pointer"},l),i&&J().createElement(cl,{text:i})))};function Rl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Fl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rl(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rl(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function zl(){var e=(0,me.useDispatch)(tr),t=(0,me.useSelect)(function(e){var t=e(tr);return{routeParams:t.getRouteParams(),currentTab:t.getCurrentTab(),currentSubTab:t.getCurrentSubTab(),currentPage:t.getCurrentPage(),currentId:t.getCurrentId()}},[]);return Fl(Fl({},t),{},{setCurrentTab:e.setCurrentTab,setCurrentSubTab:e.setCurrentSubTab,setCurrentPage:e.setCurrentPage,setCurrentId:e.setCurrentId,navigateTo:e.navigateTo,setActiveModal:e.setActiveModal})}var Bl=function(e){var t=e.width,n=void 0===t?130:t,r=e.height,a=void 0===r?90:r,l=e.backgroundColor,i=void 0===l?"#e0e0e0":l,o=e.textColor,s=void 0===o?"#888888":o,c=e.fontSize,u=void 0===c?14:c,m=e.text,d=void 0===m?"":m,g='\n    <svg xmlns="http://www.w3.org/2000/svg" width="'.concat(n,'" height="').concat(a,'">\n      <rect width="100%" height="100%" fill="').concat(i,'"/>\n      <text x="50%" y="50%" fill="').concat(s,'" dy=".3em" text-anchor="middle" font-family="sans-serif" font-size="').concat(u,'px">\n        ').concat(d||"".concat(n,"").concat(a),"\n      </text>\n    </svg>\n  ").trim(),p=encodeURIComponent(g);return"data:image/svg+xml;charset=UTF-8,".concat(p)};function ql(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Hl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ql(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ql(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Gl={images:"image/jpeg,image/png,image/gif,image/webp",zip:"application/zip,application/x-zip-compressed"},Ul=function(e){return Gl.images.includes(e.type)||Gl.zip.includes(e.type)},Wl=function(e){return Gl.zip.includes(e.type)};const Vl=function(e){var n=e.galleryId,r=e.onGalleryCreated,a=hr((0,Z.useState)("media"),2),l=a[0],i=a[1],o=hr((0,Z.useState)(!1),2),s=o[0],c=o[1],u=hr((0,Z.useState)([]),2),m=u[0],d=u[1],g=hr((0,Z.useState)([]),2),p=g[0],f=g[1],y=hr((0,Z.useState)(""),2),h=y[0],_=y[1],b=hr((0,Z.useState)(!1),2),v=b[0],x=b[1],w=hr((0,Z.useState)(""),2),E=w[0],C=w[1],N=hr((0,Z.useState)(""),2),k=N[0],S=N[1],O=hr((0,Z.useState)([]),2),P=O[0],T=O[1],D=hr((0,Z.useState)(!1),2),I=D[0],j=D[1],A=(0,Z.useRef)(null),L=!n,M=(0,me.useDispatch)(tr),R=zl(),F=R.navigateTo,z=R.setCurrentId,B=ea(),q=B.showSuccess,H=B.showError,G=te();(0,Z.useEffect)(function(){"folder"===l&&W()},[l]);var U=function(e){setTimeout(function(){d(function(t){return t.filter(function(t){return t.file!==e||"uploading"===t.status||"error"===t.status})})},1e3)},W=function(){var e=Er(Nr().mark(function e(){var t,n,r=arguments;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"",x(!0),C(""),e.prev=3,e.next=6,Fr()({path:"/imagely/v1/folders/browse".concat(t?"?dir=".concat(encodeURIComponent(t)):""),method:"GET"});case 6:n=e.sent,f(n.directories||[]),_(t),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.error("Error loading directories:",e.t0),C((0,de.__)("Failed to load directories. Please try again.","nggallery"));case 15:return e.prev=15,x(!1),e.finish(15);case 18:case"end":return e.stop()}},e,null,[[3,11,15,18]])}));return function(){return e.apply(this,arguments)}}(),V=function(){var e=Er(Nr().mark(function e(t){var n,a;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),k.trim()){e.next=4;break}return H((0,de.__)("Please provide a gallery title.","nggallery")),e.abrupt("return");case 4:return e.prev=4,M.setPageLoading(!0),e.next=8,Fr()({path:"/imagely/v1/galleries",method:"POST",headers:ia(),data:{title:k.trim(),name:k.trim(),galdesc:""}});case 8:if(null==(n=e.sent)||!n.gid){e.next=18;break}a=n.gid,M.setActiveModal(null),G.invalidateQueries({queryKey:["galleries"]}),G.invalidateQueries({queryKey:["gallery",a]}),r?r(a):F("imagely-add-new","images",a),q((0,de.__)("Gallery created successfully! You can now add images.","nggallery")),e.next=19;break;case 18:throw new Error((0,de.__)("Failed to create gallery","nggallery"));case 19:e.next=25;break;case 21:e.prev=21,e.t0=e.catch(4),console.error("Error creating gallery:",e.t0),H((0,de.__)("Failed to create gallery. Please try again.","nggallery"));case 25:return e.prev=25,M.setPageLoading(!1),e.finish(25);case 28:case"end":return e.stop()}},e,null,[[4,21,25,28]])}));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Er(Nr().mark(function e(){var r,a,l,i;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=3;break}return C((0,de.__)("Please select a folder to import.","nggallery")),e.abrupt("return");case 3:if(n||k.trim()){e.next=6;break}return C((0,de.__)("Please provide a gallery title.","nggallery")),e.abrupt("return");case 6:return x(!0),C(""),e.prev=8,r={folder:h,keep_location:I},n?r.gallery_id=n:k&&(r.gallery_title=k),e.next=13,Fr()({path:"/imagely/v1/folders/import",method:"POST",headers:ia(),data:r}).catch(function(){var e=Er(Nr().mark(function e(t){var n;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof Response)){e.next=6;break}return e.next=3,t.json();case 3:if(null==(n=e.sent)||!n.error){e.next=6;break}throw new Error(n.error);case 6:throw new Error((0,de.__)("Failed to import folder. Please try again.","nggallery"));case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 13:if(!(a=e.sent)||"object"!==t(a)||!("error"in a)){e.next=16;break}throw new Error(a.error);case 16:if(l=null==a?void 0:a.gallery_id){e.next=19;break}throw new Error((0,de.__)("No gallery ID returned from the import.","nggallery"));case 19:return q((0,de.__)("Folder imported successfully!","nggallery")),e.next=22,re(l);case 22:e.next=29;break;case 24:e.prev=24,e.t0=e.catch(8),i=(null===e.t0||void 0===e.t0?void 0:e.t0.message)||(0,de.__)("Failed to import folder. Please try again.","nggallery"),C(i),H(i);case 29:return e.prev=29,x(!1),e.finish(29);case 32:case"end":return e.stop()}},e,null,[[8,24,29,32]])}));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Er(Nr().mark(function e(r){var a,l,i,o,s,c,u;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Ul(r)){e.next=3;break}return d(function(e){return e.map(function(e){return e.file===r?Hl(Hl({},e),{},{status:"error",error:(0,de.__)("Invalid file type. Please upload images (JPEG, PNG, GIF, WebP) or ZIP files.","nggallery")}):e})}),e.abrupt("return");case 3:return(l=new FormData).append("file",r),n?l.append("gallery_id",n.toString()):k&&l.append("gallery_name",k),d(function(e){return e.map(function(e){return e.file===r?Hl(Hl({},e),{},{status:"uploading",progress:1}):e})}),i=window,o=(null===(a=i.imagelyApp)||void 0===a?void 0:a.restURL)||"/wp-json/",s=o.replace(/\/+$/,""),c="".concat(s,"/imagely/v1/images/upload"),u=la(),e.next=14,new Promise(function(e){var n=new XMLHttpRequest,a=null;n.open("POST",c,!0),n.withCredentials=!0,u&&n.setRequestHeader("X-WP-Nonce",u),n.upload.onprogress=function(e){if(e.lengthComputable&&0!==e.total){var t=e.loaded/e.total*100,n=Math.round(t);d(function(e){return e.map(function(e){if(e.file!==r||"uploading"!==e.status)return e;var t=Math.min(100,Math.max(1,n)),a=Math.round(t/100*80),l=e.progress||0,i=Math.max(l,a);return Hl(Hl({},e),{},{progress:i})})}),e.lengthComputable&&e.loaded===e.total&&null===a&&(a=window.setInterval(function(){d(function(e){return e.map(function(e){if(e.file!==r||"uploading"!==e.status)return e;var t=e.progress||0;return t>=95?e:Hl(Hl({},e),{},{progress:Math.min(95,t+1)})})})},200))}},n.onerror=function(){null!==a&&clearInterval(a),console.error("Error uploading file:",r.name,n.statusText),d(function(e){return e.map(function(e){return e.file===r?Hl(Hl({},e),{},{status:"error",error:(0,de.__)("Upload failed","nggallery")}):e})}),e(void 0)},n.onload=function(){var l;null!==a&&clearInterval(a);try{var i=n.status,o=n.responseText||"";if(i<200||i>=300){if(o)try{var s=JSON.parse(o);if(s&&"object"===t(s)&&s.error)throw new Error(s.error)}catch(e){}throw new Error((0,de.__)("Upload failed","nggallery"))}if((l=o?JSON.parse(o):{}).error)throw new Error(l.error);d(function(e){return e.map(function(e){return e.file===r?Hl(Hl({},e),{},{status:"completed",progress:100}):e})}),U(r),e(l)}catch(t){console.error("Error uploading file:",r.name,t),d(function(e){return e.map(function(e){return e.file===r?Hl(Hl({},e),{},{status:"error",error:(0,de.__)("Upload failed","nggallery")}):e})}),e(void 0)}},n.send(l)});case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();(0,Z.useEffect)(function(){return function(){P.forEach(function(e){e.preview.startsWith("blob:")&&URL.revokeObjectURL(e.preview)})}},[P]);var X=function(e){var t=Array.from(e).map(function(e){return{file:e,preview:Wl(e)?Bl({width:130,height:130,text:"ZIP FILE",backgroundColor:"#f0f0f0",textColor:"#666666",fontSize:24}):URL.createObjectURL(e),excluded:!1,id:"".concat(e.name,"-").concat(e.lastModified)}});T(function(e){return[].concat(zr(e),zr(t))})},Y=function(){var e=Er(Nr().mark(function e(t){var a,l,i,o,s,c,u,m,g,p,f,y,h;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n||k.trim()){e.next=4;break}return alert((0,de.__)("Please provide a gallery title.","nggallery")),e.abrupt("return");case 4:if(a=Array.from(t),l=a.map(function(e){return{file:e,progress:0,status:"pending"}}),d(function(e){return[].concat(zr(e),zr(l))}),i=n,o=!1,s=function(){var e=Er(Nr().mark(function e(t){var n;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t);case 2:return(n=e.sent)&&!n.error||(o=!0),e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),c=0,n||!(a.length>0)){e.next=18;break}return e.next=15,s(a[0]);case 15:u=e.sent,c=1,null!=u&&u.gallery_id&&(i=u.gallery_id,r||z(i),n=i);case 18:if(!i){e.next=29;break}if(!((m=a.length-c)>0)){e.next=29;break}for(g=c,p=function(){var e=Er(Nr().mark(function e(){var t,n;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=g)>=a.length)){e.next=4;break}return e.abrupt("break",10);case 4:return g+=1,n=a[t],e.next=8,s(n);case 8:e.next=0;break;case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),f=Math.min(3,m),y=[],h=0;h<f;h++)y.push(p());return e.next=29,Promise.all(y);case 29:if(o||!i){e.next=33;break}return q((0,de.__)("Images uploaded successfully!","nggallery")),e.next=33,re(i);case 33:T([]),e.next=40;break;case 36:e.prev=36,e.t0=e.catch(0),console.error("Error handling file upload:",e.t0),H((0,de.__)("Failed to upload images. Please try again.","nggallery"));case 40:return e.prev=40,e.finish(40);case 42:case"end":return e.stop()}},e,null,[[0,36,40,42]])}));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Er(Nr().mark(function e(t){var r,a;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,x(!0),C(""),r={attachment_ids:t},n?r.gallery_id=n:k&&(r.gallery_name=k),e.next=7,Fr()({path:"/imagely/v1/images/import-media-library",method:"POST",headers:ia(),data:r});case 7:if(!(a=e.sent).error){e.next=10;break}throw new Error(a.error);case 10:return e.abrupt("return",a);case 13:throw e.prev=13,e.t0=e.catch(0),console.error("Error importing media library images:",e.t0),C((0,de.__)("Failed to import media library images. Please try again.","nggallery")),e.t0;case 18:return e.prev=18,x(!1),e.finish(18);case 21:case"end":return e.stop()}},e,null,[[0,13,18,21]])}));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Er(Nr().mark(function e(){var t;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n||k.trim()){e.next=3;break}return alert((0,de.__)("Please provide a gallery title.","nggallery")),e.abrupt("return");case 3:(t=window.wp.media({title:(0,de.__)("Select Images","nggallery"),button:{text:(0,de.__)("Add to Gallery","nggallery")},multiple:!0,library:{type:"image"},states:[new window.wp.media.controller.Library({library:window.wp.media.query({type:"image"}),multiple:!0,title:(0,de.__)("Select Images","nggallery"),priority:20,filterable:"uploaded",editable:!0,allowLocalEdits:!0,displaySettings:!0,displayUserSettings:!0})]})).on("open",function(){setTimeout(function(){var e=document.querySelector(".media-button-primary");e?e.addEventListener("click",function(){M.showNotice("info",(0,de.__)("Loading images from WP Media, please wait...","nggallery"),{dismissible:!0,duration:15e3}),M.setPageLoading(!0)},{once:!0}):document.querySelectorAll(".media-button").forEach(function(e){e.addEventListener("click",function(){var t;(null!==(t=e.textContent)&&void 0!==t&&t.includes("Add to Gallery")||e.classList.contains("media-button-primary"))&&(M.showNotice("info",(0,de.__)("Loading images from WP Media, please wait...","nggallery"),{dismissible:!0,duration:15e3}),M.setPageLoading(!0))},{once:!0})})},100)}),t.on("select",Er(Nr().mark(function e(){var n,r,a,l;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.state().get("selection").toJSON(),r=n.map(function(e){return e.id}),e.prev=2,e.next=5,$(r);case 5:if(!(a=e.sent).error){e.next=8;break}throw new Error(a.error);case 8:if(l=null==a?void 0:a.gallery_id){e.next=11;break}throw new Error((0,de.__)("No gallery ID returned from the import.","nggallery"));case 11:return e.next=13,re(l);case 13:q((0,de.__)("Media library images imported successfully!","nggallery")),e.next=22;break;case 16:e.prev=16,e.t0=e.catch(2),console.error("Error importing images:",e.t0),H((0,de.__)("Failed to import media library images. Please try again.","nggallery")),M.clearAllNotices(),M.setPageLoading(!1);case 22:case"end":return e.stop()}},e,null,[[2,16]])}))),t.open();case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),ne=function(){return new Promise(function(e){setTimeout(function t(){var n=document.querySelectorAll('[data-testid="gallery-image"], .gallery-image, img[src*="gallery"]');if(n.length>0){var r=Array.from(n).filter(function(e){return e.complete&&0!==e.naturalHeight});if(r.length===n.length&&r.length>0)return void e()}setTimeout(t,200)},300),setTimeout(function(){e()},3e3)})},re=function(){var e=Er(Nr().mark(function e(t){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:G.invalidateQueries({queryKey:["gallery",t,"images"]}),G.invalidateQueries({queryKey:["gallery",t]}),G.invalidateQueries({queryKey:["galleries"]}),L&&(r?r(t):F("imagely-add-new","images",t)),M.setActiveModal(null),setTimeout(Er(Nr().mark(function e(){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne();case 2:M.clearAllNotices(),M.setPageLoading(!1);case 4:case"end":return e.stop()}},e)})),100);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return J().createElement("div",{className:"p-0 max-h-[90vh] flex flex-col overflow-y-auto"},!n&&J().createElement("form",{onSubmit:V,className:"mb-2"},J().createElement(dl,{type:"text",name:"gallery-title",value:k,onChange:function(e){return S(e.target.value)},label:(0,de.__)("Gallery Title","nggallery"),placeholder:(0,de.__)("Enter a title for your new gallery","nggallery")}),J().createElement("button",{type:"submit",style:{display:"none"},"aria-hidden":"true"})),J().createElement("div",{className:"flex-1 min-h-0"},"folder"===l?J().createElement("div",{className:"flex flex-col h-full"},J().createElement("div",{className:"flex items-center space-x-1 sm:space-x-2 text-xs sm:text-sm mb-2 bg-white overflow-x-auto"},J().createElement("button",{onClick:function(){return W("")},className:"text-gray-700 underline hover:text-green-600 p-0"},(0,de.__)("Root","nggallery")),h&&J().createElement(J().Fragment,null,J().createElement("span",null,"/"),h.split("/").filter(Boolean).map(function(e,t,n){return J().createElement(J().Fragment,{key:e},J().createElement("button",{onClick:function(){return W(n.slice(0,t+1).join("/"))},className:"text-gray-700 underline hover:text-green-600"},e),t<n.length-1&&J().createElement("span",null,"/"))}))),J().createElement("div",{className:"flex-1 min-h-0 overflow-hidden flex flex-col"},J().createElement("div",{className:"border rounded-lg divide-y max-h-48 sm:max-h-64 overflow-y-auto"},v?J().createElement("div",{className:"p-2 text-center text-gray-500 text-xs sm:text-sm"},(0,de.__)("Loading...","nggallery")):p.length>0?p.map(function(e){return J().createElement("button",{key:e.relative_path,onClick:function(){W(e.relative_path)},className:"w-full text-left py-2 px-2 sm:py-1.5 hover:bg-gray-50 flex items-center space-x-2 text-xs sm:text-sm"},J().createElement("span",{className:"text-sm sm:text-base"},J().createElement(tn,null)),J().createElement("span",{className:"truncate"},e.name))}):J().createElement("div",{className:"p-2 text-center text-gray-500 text-xs sm:text-sm"},h?(0,de.__)("No subdirectories found. Click Import to import images from this folder.","nggallery"):(0,de.__)("No directories found.","nggallery"))),J().createElement("div",{className:"mt-3 sm:mt-4 p-2 sm:p-3 rounded-lg border"},J().createElement(Ml,{id:"keep-original-location",name:"keep_original_location",checked:I,onChange:function(e){return j(e.target.checked)},label:(0,de.__)("Keep images in original location","nggallery"),help:(0,de.__)("Caution: If you keep images in the original folder and later delete the gallery, the images in that folder might be deleted depending on your settings.","nggallery")})),E&&J().createElement("div",{className:"text-red-500 text-xs sm:text-sm p-2 mt-2"},E),h&&J().createElement("div",{className:"mt-3 sm:mt-4"},J().createElement("button",{onClick:K,disabled:v,className:"w-full py-2 sm:py-3 px-3 sm:px-4 text-white rounded-lg transition-colors text-sm sm:text-base ".concat(v?"bg-green-300":"bg-green-500 hover:bg-green-600")},v?(0,de.__)("Importing...","nggallery"):(0,de.__)("Import Selected Folder","nggallery"))))):J().createElement("div",{className:"relative text-center p-4 sm:p-8 border border-dashed rounded-lg transition-colors h-full overflow-y-auto ".concat(s?"border-blue-500 bg-blue-50":"border-gray-300"),onDragOver:function(e){e.preventDefault(),c(!0)},onDragLeave:function(e){e.preventDefault(),c(!1)},onDrop:function(e){e.preventDefault(),c(!1);var t=e.dataTransfer.files;t.length>0&&X(t)}},J().createElement("input",{ref:A,type:"file",multiple:!0,accept:"".concat(Gl.images,",").concat(Gl.zip),onChange:function(e){var t=e.target.files;t&&t.length>0&&X(t)},className:"hidden"}),m.length>0?J().createElement("div",{className:"space-y-3 sm:space-y-4"},m.map(function(e,t){return J().createElement("div",{key:"".concat(e.file.name,"-").concat(t),className:"text-left py-3 px-5 sm:p-4 text-gray-900"},J().createElement("div",{className:"flex justify-between mb-2"},J().createElement("span",{className:"text-xs sm:text-sm text-gray-900 truncate pr-2"},e.file.name),J().createElement("span",{className:"text-xs sm:text-sm text-gray-900 flex-shrink-0"},"completed"===e.status&&"","error"===e.status&&"","uploading"===e.status&&"".concat(e.progress,"%"))),J().createElement("div",{className:"w-full bg-gray-100 rounded-full h-1"},J().createElement("div",{className:"h-1 rounded-full ".concat("completed"===e.status?"bg-green-500":"error"===e.status?"bg-red-500":"bg-blue-500"),style:{width:"".concat(e.progress,"%")}})),e.error&&J().createElement("p",{className:"text-xs sm:text-sm text-red-500 mt-1"},e.error))})):P.length>0?J().createElement("div",{className:"space-y-3 sm:space-y-4"},J().createElement("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-2 sm:gap-4"},J().createElement("button",{onClick:function(){var e;return null===(e=A.current)||void 0===e?void 0:e.click()},className:"relative aspect-square border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 transition-colors flex flex-col items-center justify-center gap-1 sm:gap-2"},J().createElement("span",{className:"text-xl sm:text-2xl"},"+"),J().createElement("span",{className:"text-xs sm:text-sm text-gray-600"},(0,de.__)("Add More","nggallery"))),P.filter(function(e){return!e.excluded}).map(function(e){return J().createElement("div",{key:e.id,className:"relative aspect-square group"},J().createElement("div",{className:"absolute inset-0 rounded-lg overflow-hidden"},J().createElement("img",{src:e.preview,alt:e.file.name,className:"w-full h-full object-cover"}),J().createElement("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center cursor-pointer",onClick:function(t){var n;t.preventDefault(),t.stopPropagation(),n=e.file,T(function(e){return e.map(function(e){return e.file===n?Hl(Hl({},e),{},{excluded:!0}):e})})},title:(0,de.__)("Remove","nggallery")},J().createElement("div",{className:"text-white transform scale-100 group-hover:scale-110 transition-transform"},J().createElement(en,null)))))})),J().createElement("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mt-4 sm:mt-6 pt-3 sm:pt-4 border-t border-gray-200 gap-3 sm:gap-0"},J().createElement("div",{className:"text-xs sm:text-sm text-gray-500"},P.filter(function(e){return!e.excluded}).length," ",(0,de.__)("files selected","nggallery")),J().createElement("div",{className:"flex gap-2 sm:gap-3 w-full sm:w-auto"},J().createElement("button",{onClick:function(){T([]),A.current&&(A.current.value="")},className:"px-3 sm:px-4 py-2 text-sm font-medium text-gray-600 hover:text-gray-800 transition-colors"},(0,de.__)("Clear All","nggallery")),J().createElement("button",{onClick:function(){var e=P.filter(function(e){return!e.excluded}).map(function(e){return e.file});Y(e)},className:"px-4 sm:px-6 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm font-medium flex-1 sm:flex-none",disabled:0===P.filter(function(e){return!e.excluded}).length},(0,de.__)("Upload","nggallery"))))):J().createElement(J().Fragment,null,J().createElement("div",{className:"flex flex-col items-center mb-4 sm:mb-6"},J().createElement(Ln,{className:"mb-4"}),J().createElement("p",{className:"text-sm sm:text-base text-gray-600"},(0,de.__)("Drag images, ZIP files here or","nggallery")," ",J().createElement("button",{onClick:function(){var e;return null===(e=A.current)||void 0===e?void 0:e.click()},className:"text-green-500 hover:text-green-600 hover:underline transition-colors cursor-pointer bg-transparent border-none p-0 text-sm sm:text-base font-bold"},(0,de.__)("Browse from Computer","nggallery")))),J().createElement("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center mb-4 sm:mb-6"},J().createElement("button",{onClick:ee,className:"px-4 sm:px-6 py-2 sm:py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors flex items-center justify-center gap-2 text-sm sm:text-base"},J().createElement(nn,null),(0,de.__)("Media Library","nggallery")),(!n||k)&&J().createElement("button",{onClick:function(){return i("folder")},className:"px-4 sm:px-6 py-2 sm:py-3 border-2 border-green-500 text-green-500 rounded-lg hover:bg-green-600 hover:text-white transition-colors flex items-center justify-center gap-2 text-sm sm:text-base"},J().createElement(rn,null),(0,de.__)("Import Folder","nggallery")))))))};var Kl=i(93),Ql=i.n(Kl);function Xl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Yl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xl(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xl(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Zl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Jl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zl(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zl(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function $l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ei(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$l(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ti(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ni(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ti(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ti(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ri=function(e){var t,n;e?t=e:t="imagely"===(n=(new URLSearchParams(window.location.search).get("page")||"imagely").replace(/^imagely-?/,""))||""===n?"galleries":n.replace(/[-_\s]/g,"").toLowerCase();return"".concat("https://www.imagely.com/lite","?utm_source=").concat("ngg","&utm_medium=").concat(t,"&utm_campaign=").concat("upgradetopro")};var ai=function(){var e=Er(Nr().mark(function e(t){var n,r;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/imagely/v1/pricelist-items?pricelist_id=".concat(t),e.next=3,Fr()({path:n});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),li=function(){var e=Er(Nr().mark(function e(t){var n,r,a,l;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=null===(n=window.imagelyApp)||void 0===n?void 0:n.nonce,e.next=4,Fr()({path:"/imagely/v1/pricelist-items/bulk",method:"POST",headers:{"X-WP-Nonce":r},data:{items:t}});case 4:if(!((a=e.sent).created_items&&a.created_items.length>0)){e.next=9;break}return e.abrupt("return",a.created_items);case 9:if(!(a.errors>0)){e.next=13;break}throw new Error("Failed to create items: ".concat((null===(l=a.error_messages)||void 0===l?void 0:l.join(", "))||"Unknown error"));case 13:throw new Error("No items were created");case 14:e.next=20;break;case 16:throw e.prev=16,e.t0=e.catch(0),console.error("Error creating multiple pricelist items:",e.t0),e.t0;case 20:case"end":return e.stop()}},e,null,[[0,16]])}));return function(t){return e.apply(this,arguments)}}(),ii=function(){var e=Er(Nr().mark(function e(t){var n,r,a;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=null===(n=window.imagelyApp)||void 0===n?void 0:n.nonce,e.next=4,Fr()({path:"/nggpro/v1/commerce/admin/save_pricelist",method:"POST",headers:{"X-WP-Nonce":r},data:t});case 4:return a=e.sent,e.abrupt("return",a);case 8:throw e.prev=8,e.t0=e.catch(0),console.error(" Error saving pricelist (legacy):",e.t0),console.error(" Error details:",{message:e.t0.message,status:e.t0.status,response:e.t0.response,data:t}),e.t0;case 13:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}}(),oi=function(){var e=Er(Nr().mark(function e(t){var n,r,a,l,i;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/imagely/v1/whcc-catalog",r=t?"".concat(n,"?category=").concat(encodeURIComponent(t)):n,e.prev=2,l=null===(a=window.imagelyApp)||void 0===a?void 0:a.nonce,e.next=6,Fr()({path:r,method:"GET",headers:{"X-WP-Nonce":l}});case 6:return i=e.sent,e.abrupt("return",i);case 10:throw e.prev=10,e.t0=e.catch(2),console.error("Error fetching WHCC catalog:",e.t0),e.t0;case 14:case"end":return e.stop()}},e,null,[[2,10]])}));return function(t){return e.apply(this,arguments)}}();function si(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ci(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?si(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):si(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ui=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"$";if("number"==typeof t)return"".concat(n," ").concat(t.toFixed(2));var r=rl(e);return"".concat(n," ").concat(r.toFixed(2))},mi=function(e){var t=e.className;return J().createElement("svg",{className:t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))};var di={gallery:function(e){var t=e.isOpen,n=e.onClose,r=e.onGalleryCreated,a=pe(e,Ll),l=na(),i=(0,Z.useCallback)(function(){n&&n(),null!=l&&l.isEmbed&&null!=l&&l.onClose&&l.onClose()},[n,l]);return J().createElement(xr,ge({isOpen:t,onClose:i,title:(0,de.__)("New Gallery","nggallery")},a),J().createElement(Al,{onSuccess:r}))},album:function(e){var t=e.isOpen,r=e.onClose,a=e.onAlbumCreated,l=pe(e,ra),i=hr((0,Z.useState)(""),2),o=i[0],s=i[1],c=hr((0,Z.useState)(!1),2),u=c[0],m=c[1],d=function(){var e,t=te();return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var n,r,a;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=null===(n=window.imagelyApp)||void 0===n?void 0:n.nonce,e.next=3,Fr()({path:"/imagely/v1/albums",method:"POST",headers:{"X-WP-Nonce":r,"Content-Type":"application/json"},data:t});case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),onSuccess:function(){t.invalidateQueries({queryKey:["albums"]})}})}(),g=ea(),p=g.showSuccess,f=g.showError,y=(0,me.useDispatch)(tr),h=na(),_=(0,Z.useCallback)(function(){var e=Er(Nr().mark(function e(t){var l,i,c,u,g,_,b;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),o.trim()){e.next=4;break}return f((0,de.__)("Album name is required","nggallery")),e.abrupt("return");case 4:return m(!0),e.prev=5,u="photocrati-nextgen_basic_compact_album",g={open_gallery_in_lightbox:!1,gallery_display_type:"photocrati-nextgen_basic_thumbnails",galleries_per_page:20,enable_breadcrumbs:1,enable_descriptions:0,display_view:"default",template:"default",override_thumbnail_settings:1,thumbnail_width:240,thumbnail_height:160,thumbnail_crop:1,animate_images_enable:!1,animate_images_style:"wobble",animate_images_duration:1500,animate_images_delay:250,animate_pagination_enable:!1,animate_pagination_style:"flipInX",animate_pagination_duration:1500,animate_pagination_delay:250,is_ecommerce_enabled:0},_={name:o.trim(),description:"",sortorder:[],display_type:u,display_type_settings:n({},u,g)},e.next=11,d.mutateAsync(_);case 11:null!=(b=e.sent)&&b.message&&p(b.message),s(""),a&&null!=b&&null!==(l=b.album)&&void 0!==l&&l.id?a(b.album.id):null!=h&&h.isEmbed&&null!=h&&h.onInsertAlbum&&null!=b&&null!==(i=b.album)&&void 0!==i&&i.id?h.onInsertAlbum(b.album.id):null!=b&&null!==(c=b.album)&&void 0!==c&&c.id?(y.navigateTo("imagely-albums","galleries",b.album.id),r()):r(),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(5),console.error(" Error details:",JSON.stringify(e.t0,null,2)),f((0,de.__)("Failed to create album","nggallery"));case 21:return e.prev=21,m(!1),e.finish(21);case 24:case"end":return e.stop()}},e,null,[[5,17,21,24]])}));return function(t){return e.apply(this,arguments)}}(),[o,p,f,r,d,y,h]),b=(0,Z.useCallback)(function(){s(""),r(),null!=h&&h.isEmbed&&null!=h&&h.onClose&&h.onClose()},[r,h]);return J().createElement(xr,ge({isOpen:t,onClose:b,title:(0,de.__)("Create New Album","nggallery")},l),J().createElement("form",{onSubmit:_,className:"space-y-6"},J().createElement("div",null,J().createElement("label",{htmlFor:"album-name",className:"block text-sm font-medium text-gray-700 mb-2"},(0,de.__)("Album Name","nggallery")," ",J().createElement("span",{className:"text-red-500"},"*")),J().createElement("input",{id:"album-name",type:"text",value:o,onChange:function(e){return s(e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:(0,de.__)("Enter album name","nggallery"),disabled:u,required:!0})),J().createElement("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200"},J().createElement("button",{type:"button",onClick:b,disabled:u,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50"},(0,de.__)("Cancel","nggallery")),J().createElement("button",{type:"submit",disabled:u||!o.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-green-500 border border-transparent rounded-md hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center"},u?J().createElement("span",{className:"inline-flex items-center"},J().createElement("span",{className:"mr-2"},J().createElement(ar,{size:"sm",color:"gray",className:"!border-white",centerInContainer:!1})),J().createElement("span",null,(0,de.__)("Creating...","nggallery"))):(0,de.__)("Create Album","nggallery")))))},albumSuccess:function(e){var t=e.isOpen,n=e.onClose,r=e.albumId,a=e.albumName,l=(0,me.useDispatch)(tr),i=(0,Z.useMemo)(function(){return r?'[imagely album="'.concat(r,'"]'):""},[r]),o=function(){var e=Er(Nr().mark(function e(){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(i);case 3:l.showNotice("success",(0,de.__)("Shortcode copied to clipboard!","nggallery")),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),l.showNotice("error",(0,de.__)("Failed to copy shortcode to clipboard","nggallery"));case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(){return e.apply(this,arguments)}}();return J().createElement(xr,{isOpen:t,onClose:n,title:""},J().createElement("div",{className:"text-center"},J().createElement("div",{className:"flex items-center justify-center mx-auto"},J().createElement(_n,{className:"w-48 h-48"})),J().createElement("h3",{className:"text-2xl font-semibold text-gray-800 mb-3"},a?(0,de.sprintf)((0,de.__)("%s updated successfully!","nggallery"),a):(0,de.__)("Album updated successfully!","nggallery")),J().createElement("p",{className:"text-gray-600 text-center mb-6 text-base"},(0,de.__)("Your album is ready to be published. You can add it to any page, post, or widget area using the Imagely Album block or the shortcode below:","nggallery")),i&&J().createElement("div",{className:"mb-8"},J().createElement("button",{onClick:o,className:"bg-gray-100 border-2 border-gray-300 rounded-lg px-6 py-3 font-mono text-base text-gray-800 hover:bg-green-50 hover:border-green-500 transition-colors cursor-pointer w-3/5 mx-auto block",title:(0,de.__)("Click to copy shortcode","nggallery")},i)),J().createElement("div",{className:"flex justify-center mb-6"},J().createElement("button",{onClick:function(){n(),l.navigateTo("imagely-albums","general")},className:"inline-flex items-center justify-center bg-green-500 text-white text-center text-base py-3 px-8 rounded-lg font-medium hover:bg-green-600 transition-colors"},(0,de.__)("View Albums","nggallery")))))},galleryEdit:function(e){var t=e.isOpen,n=e.galleryId,r=e.onClose,a=fa(n),l=a.data,i=a.refetch;if(!l)return null;var o=function(){var e=Er(Nr().mark(function e(){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return J().createElement(xr,{isOpen:t,onClose:r,title:(0,de.__)("Edit Gallery Details","nggallery")},J().createElement(Dl,{gallery:l,onClose:r,onUpdate:o}))},gallerySuccess:function(e){var t=e.isOpen,n=e.onClose,r=e.galleryId,a=e.galleryName,l=e.pageId,i=e.pageName,o=(0,me.useDispatch)(tr),s=hr((0,Z.useState)(i),2),c=s[0],u=s[1],m=hr((0,Z.useState)(void 0),2),d=m[0],g=m[1],p=hr((0,Z.useState)(!1),2),f=(p[0],p[1]),y=(0,Z.useMemo)(function(){return r?'[imagely id="'.concat(r,'"]'):""},[r]);(0,Z.useEffect)(function(){var e=function(){var e=Er(Nr().mark(function e(){var n,r,a;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!l||i||!t){e.next=18;break}return f(!0),e.prev=2,e.next=5,Fr()({path:"/wp/v2/pages/".concat(l)});case 5:null!=(r=e.sent)&&null!==(n=r.title)&&void 0!==n&&n.rendered&&u(r.title.rendered),null!=r&&r.link&&g(r.link),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error("Error fetching page:",e.t0);case 13:return e.prev=13,f(!1),e.finish(13);case 16:e.next=33;break;case 18:if(!(l&&i&&t)){e.next=33;break}return f(!0),e.prev=20,e.next=23,Fr()({path:"/wp/v2/pages/".concat(l)});case 23:null!=(a=e.sent)&&a.link&&g(a.link),e.next=30;break;case 27:e.prev=27,e.t1=e.catch(20),console.error("Error fetching page:",e.t1);case 30:return e.prev=30,f(!1),e.finish(30);case 33:case"end":return e.stop()}},e,null,[[2,10,13,16],[20,27,30,33]])}));return function(){return e.apply(this,arguments)}}();e()},[l,i,t]),(0,Z.useEffect)(function(){t||(u(i),g(void 0))},[t,i]);var h=function(){var e=Er(Nr().mark(function e(){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(y);case 3:o.showNotice("success",(0,de.__)("Shortcode copied to clipboard!","nggallery")),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),o.showNotice("error",(0,de.__)("Failed to copy shortcode to clipboard","nggallery"));case 9:case"end":return e.stop()}},e,null,[[0,6]])}));return function(){return e.apply(this,arguments)}}();return J().createElement(xr,{isOpen:t,onClose:n,title:""},J().createElement("div",{className:"text-center"},J().createElement("div",{className:"flex items-center justify-center mx-auto"},J().createElement(_n,{className:"w-48 h-48"})),J().createElement("h3",{className:"text-2xl font-semibold text-gray-800 mb-3"},a?(0,de.sprintf)((0,de.__)("%s created successfully!","nggallery"),a):(0,de.__)("Gallery created successfully!","nggallery")),J().createElement("p",{className:"text-gray-600 text-center mb-6 text-base"},l&&c?J().createElement(J().Fragment,null,(0,de.__)("Your gallery has been linked to the page","nggallery")," ",d?J().createElement("a",{href:d,target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-700 font-medium underline"},'"',c,'"'):J().createElement("span",{className:"font-medium"},'"',c,'"'),". ",(0,de.__)("You can also add it to any other page, post, or widget area using the Imagely Gallery block or the shortcode below:","nggallery")):(0,de.__)("Your gallery is ready to be published. You can add it to any page, post, or widget area using the Imagely Gallery block or the shortcode below:","nggallery")),y&&J().createElement("div",{className:"mb-8"},J().createElement("button",{onClick:h,className:"bg-gray-100 border-2 border-gray-300 rounded-lg px-6 py-3 font-mono text-base text-gray-800 hover:bg-green-50 hover:border-green-500 transition-colors cursor-pointer w-3/5 mx-auto block",title:(0,de.__)("Click to copy shortcode","nggallery")},y)),J().createElement("div",{className:"flex justify-center mb-6"},J().createElement("button",{onClick:function(){n(),o.navigateTo("imagely","galleryList")},className:"inline-flex items-center justify-center bg-green-500 text-white text-center text-base py-3 px-8 rounded-lg font-medium hover:bg-green-700 transition-colors"},(0,de.__)("View Galleries","nggallery")))))},deleteGalleries:function(e){var t=e.isOpen,n=e.galleries,r=e.onClose,a=void 0===r?function(){}:r,l=e.onConfirm,i=void 0===l?function(){}:l,o=e.title,s=pe(e,xl);return J().createElement(bl,ge({isOpen:t,entityType:"galleries",items:n,getItemId:function(e){return e.id},getItemLabel:function(e){return e.galleryTitle},onClose:a,onConfirm:i,title:o||(0,de.__)("Delete Galleries"),singularLabel:(0,de.__)("gallery"),pluralLabel:(0,de.__)("galleries")},s))},deleteAlbums:function(e){var t=e.isOpen,n=e.albums,r=e.onClose,a=void 0===r?function(){}:r,l=e.onConfirm,i=void 0===l?function(){}:l,o=e.title,s=pe(e,vl);return J().createElement(bl,ge({isOpen:t,entityType:"albums",items:n,getItemId:function(e){return e.id},getItemLabel:function(e){return e.albumTitle},onClose:a,onConfirm:i,title:o||(0,de.__)("Delete Albums"),singularLabel:(0,de.__)("album"),pluralLabel:(0,de.__)("albums")},s))},deleteImages:function(e){var t=e.isOpen,n=e.images,r=e.onClose,a=void 0===r?function(){}:r,l=e.onConfirm,i=void 0===l?function(){}:l,o=e.title,s=pe(e,wl);return J().createElement(bl,ge({isOpen:t,entityType:"images",items:n,getItemId:function(e){return e.pid},getItemLabel:function(e){return e.filename},onClose:a,onConfirm:i,title:o||(0,de.__)("Delete Images"),singularLabel:(0,de.__)("image"),pluralLabel:(0,de.__)("images")},s))},deleteTags:function(e){var t=e.isOpen,n=e.tags,r=e.onClose,a=void 0===r?function(){}:r,l=e.onConfirm,i=void 0===l?function(){}:l,o=e.title,s=pe(e,El);return J().createElement(bl,ge({isOpen:t,entityType:"tags",items:n,getItemId:function(e){return e.term_id},getItemLabel:function(e){return e.name},onClose:a,onConfirm:i,title:o||(0,de.__)("Delete Tags","nggallery"),singularLabel:(0,de.__)("tag","nggallery"),pluralLabel:(0,de.__)("tags","nggallery")},s))},deleteCoupons:function(e){var t=e.isOpen,n=e.onClose,r=e.couponIds,a=e.items,l=e.onConfirm,i=void 0===l?function(){}:l,o=e.title,s=function(){var e,t=te();return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var n,r,a;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=null===(n=window.imagelyApp)||void 0===n?void 0:n.nonce,e.prev=1,e.next=4,Fr()({path:"/imagely/v1/coupons/".concat(t),method:"DELETE",headers:{"X-WP-Nonce":r},parse:!1});case 4:e.next=12;break;case 6:if(e.prev=6,e.t0=e.catch(1),404!==((null===e.t0||void 0===e.t0?void 0:e.t0.status)||(null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a?void 0:a.status))){e.next=11;break}return e.abrupt("return");case 11:throw e.t0;case 12:case"end":return e.stop()}},e,null,[[1,6]])})),function(t){return e.apply(this,arguments)}),onSettled:function(){t.invalidateQueries({queryKey:["coupons"]})}})}(),c=ea(),u=c.showSuccess,m=c.showError,d=c.clearNotifications,g=(0,Z.useMemo)(function(){return a&&a.length?a:r.map(function(e){return{id:e,title:(0,de.__)("Coupon","nggallery"),code:String(e)}})},[r,a]),p=(0,Z.useMemo)(function(){return g.length>0&&g.length<=5?J().createElement("ul",{className:"list-none text-sm text-gray-700 px-4 text-center"},g.map(function(e){return J().createElement("li",{key:e.id},e.title," (",e.code,")")})):null},[g]),f=function(){var e=Er(Nr().mark(function e(){var t;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==r.length){e.next=2;break}return e.abrupt("return");case 2:return s.reset&&s.reset(),e.prev=3,e.next=6,Promise.all(r.map(function(e){return s.mutateAsync(e)}));case 6:t=1===r.length?(0,de.__)("coupon","nggallery"):(0,de.__)("coupons","nggallery"),d(),u((0,de.__)("Successfully deleted ".concat(r.length," ").concat(t),"nggallery")),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),d(),m((0,de.__)("Failed to delete coupon(s)","nggallery"));case 15:i(),n();case 17:case"end":return e.stop()}},e,null,[[3,11]])}));return function(){return e.apply(this,arguments)}}(),y=J().createElement(An,null);return J().createElement(xr,{isOpen:t,onClose:n},J().createElement("div",{className:"space-y-4"},J().createElement("div",{className:"flex items-center gap-2 justify-center"},J().createElement("div",null,y)),o&&J().createElement("h2",{className:"text-xl font-bold text-center text-gray-900 mt-2"},o),J().createElement("p",{className:"text-sm text-gray-500 text-center"},1===r.length?(0,de.__)("Are you sure you want to delete this coupon?","nggallery"):(0,de.__)("Are you sure you want to delete the selected coupons?","nggallery")),p,J().createElement("p",{className:"text-sm text-red-500 text-center"},(0,de.__)("This action cannot be undone.","nggallery")),J().createElement("div",{className:"flex justify-center space-x-3 !mb-4 ".concat(s.isPending?"cursor-wait":"")},J().createElement("button",{type:"button",onClick:n,disabled:s.isPending,className:"px-8 py-2 font-medium text-white bg-green-500 rounded-lg shadow hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},(0,de.__)("Cancel","nggallery")),J().createElement("button",{type:"button",onClick:f,disabled:s.isPending,className:"px-8 py-2 font-bold text-white bg-red-600 border border-transparent rounded-lg shadow hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},s.isPending?J().createElement("span",{className:"flex items-center"},J().createElement(an,{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white"}),(0,de.__)("Deleting...","nggallery")):(0,de.__)("Delete","nggallery")))))},imageUploader:function(e){var t=e.isOpen,n=e.onClose,r=e.galleryId,a=e.onGalleryCreated,l=r?(0,de.__)("Add Images","nggallery"):(0,de.__)("Add a New Gallery","nggallery");return J().createElement(xr,{isOpen:t,onClose:n,title:l},J().createElement(Vl,{galleryId:r,onGalleryCreated:a}))},imageView:function(e){var t=e.isOpen,n=e.onClose,r=e.image,a=e.returnTo,l=hr((0,Z.useState)(!1),2),i=l[0],o=l[1],s=hr((0,Z.useState)(Date.now()),2),c=s[0],u=s[1],m=hr((0,Z.useState)(!1),2),d=m[0],g=m[1],p=hr((0,Z.useState)(void 0),2),f=p[0],y=p[1],h=hr((0,Z.useState)(null),2),_=h[0],b=h[1],v=(0,me.useDispatch)(tr),x=r.galleryid,w=te(),E=fa(x).data,C=ha(),N=hl(),k=ea(),S=k.showSuccess,O=k.showError,P=wa(),T=function(){var e,t=te();return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var n,r,a;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.pid,r=t.cropData,a=oa("crop-thumbnail"),e.next=4,a(n,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),onSuccess:function(){t.invalidateQueries({queryKey:["images"]}),t.invalidateQueries({queryKey:["gallery"]})}})}(),D=Ea(),I=function(){var e=Er(Nr().mark(function e(t){var n,a,l;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,e.next=4,P.mutateAsync({pid:r.pid,rotation:t});case 4:if(n=Date.now(),u(n),a=["gallery",x,"images"],w.setQueryData(a,function(e){return e?e.map(function(e){return e.pid===r.pid?Yl(Yl({},e),{},{reloadKey:n}):e}):e}),!E||E.previewpic!==r.pid){e.next=20;break}return e.prev=9,l="".concat(E.previewpic_url.split("?")[0],"?t=").concat(n),e.next=13,C.mutateAsync({id:E.gid,data:{previewpic_url:l}});case 13:S((0,de.__)("Gallery thumbnail updated after image rotation!","nggallery")),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(9),console.error("Error updating gallery thumbnail:",e.t0),O((0,de.__)("Failed to update gallery thumbnail.","nggallery"));case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(1),console.error("Error rotating image",e.t1);case 25:return e.prev=25,o(!1),e.finish(25);case 28:case"end":return e.stop()}},e,null,[[1,22,25,28],[9,16]])}));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Er(Nr().mark(function e(){var t,n;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o(!0),e.prev=1,e.next=4,D.mutateAsync(r.pid);case 4:if(t=Date.now(),u(t),w.setQueryData(["gallery",x,"images"],function(e){return e?e.map(function(e){return e.pid===r.pid?Yl(Yl({},e),{},{reloadKey:t}):e}):e}),!E||E.previewpic!==r.pid){e.next=19;break}return e.prev=8,n="".concat(E.previewpic_url.split("?")[0],"?t=").concat(t),e.next=12,C.mutateAsync({id:E.gid,data:{previewpic_url:n}});case 12:S((0,de.__)("Gallery thumbnail updated after image recovery!","nggallery")),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(8),console.error("Error updating gallery thumbnail:",e.t0),O((0,de.__)("Failed to update gallery thumbnail.","nggallery"));case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(1),console.error("Error recovering image",e.t1);case 24:return e.prev=24,o(!1),e.finish(24);case 27:case"end":return e.stop()}},e,null,[[1,21,24,27],[8,15]])}));return function(){return e.apply(this,arguments)}}(),A=(0,Z.useCallback)(Er(Nr().mark(function e(){var t,n,a,l,i,s,c,m,d,p,h,b;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(_&&f){e.next=2;break}return e.abrupt("return");case 2:return o(!0),e.prev=3,t=r.image_url||"",e.next=7,fetch(t);case 7:return n=e.sent,e.next=10,n.blob();case 10:return a=e.sent,(l=new Image).src=URL.createObjectURL(a),e.next=15,new Promise(function(e){l.onload=e});case 15:return i=l.naturalWidth/_.width,s=l.naturalHeight/_.height,c=f.x*i,m=f.y*s,d=f.width*i,p=f.height*s,e.next=23,T.mutateAsync({pid:r.pid,cropData:{x:c,y:m,w:d,h:p,rr:1}});case 23:if(h=Date.now(),u(h),w.setQueryData(["gallery",x,"images"],function(e){if(!e)return e;var t=e.map(function(e){return e.pid===r.pid?Yl(Yl({},e),{},{reloadKey:h}):e});return t}),!E||E.previewpic!==r.pid){e.next=38;break}return e.prev=27,b="".concat(E.previewpic_url.split("?")[0],"?t=").concat(h),e.next=31,C.mutateAsync({id:E.gid,data:{previewpic_url:b}});case 31:S((0,de.__)("Gallery thumbnail updated after crop!","nggallery")),e.next=38;break;case 34:e.prev=34,e.t0=e.catch(27),console.error("Error updating gallery thumbnail:",e.t0),O((0,de.__)("Failed to update gallery thumbnail.","nggallery"));case 38:S((0,de.__)("Image cropped successfully!","nggallery")),g(!1),y(void 0),e.next=47;break;case 43:e.prev=43,e.t1=e.catch(3),console.error("Error cropping thumbnail",e.t1),O((0,de.__)("Failed to crop thumbnail","nggallery"));case 47:return e.prev=47,o(!1),e.finish(47);case 50:case"end":return e.stop()}},e,null,[[3,43,47,50],[27,34]])})),[f,_,r,E,N,C,S,O]),L=function(e,t){var n=120,r=80;(e<n||t<r)&&(n=e,(r=Math.round(n/1.5))>t&&(r=t,n=Math.round(1.5*r)));var a=Math.round(.1*e),l=Math.round(.1*t);return a+n>e&&(a=e-n),l+r>t&&(l=t-r),a<0&&(a=0),l<0&&(l=0),{unit:"px",width:n,height:r,x:a,y:l}};(0,Z.useEffect)(function(){d&&_&&!f&&y(L(_.naturalWidth,_.naturalHeight))},[d,_,f]);var M=J().createElement("svg",{className:"w-5 h-5",viewBox:"0 0 18 18",fill:"none"},J().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.00016 0.833496C5.4604 0.833496 5.8335 1.20659 5.8335 1.66683V4.16683H13.3335C13.9965 4.16683 14.6324 4.43022 15.1013 4.89906C15.5701 5.3679 15.8335 6.00379 15.8335 6.66683V14.1668H18.3335C18.7937 14.1668 19.1668 14.5399 19.1668 15.0002C19.1668 15.4604 18.7937 15.8335 18.3335 15.8335H15.8335V18.3335C15.8335 18.7937 15.4604 19.1668 15.0002 19.1668C14.5399 19.1668 14.1668 18.7937 14.1668 18.3335V15.8335H6.66683C6.00379 15.8335 5.3679 15.5701 4.89906 15.1013C4.43022 14.6324 4.16683 13.9965 4.16683 13.3335V5.8335H1.66683C1.20659 5.8335 0.833496 5.4604 0.833496 5.00016C0.833496 4.53993 1.20659 4.16683 1.66683 4.16683H4.16683V1.66683C4.16683 1.20659 4.53993 0.833496 5.00016 0.833496ZM5.8335 5.8335V13.3335C5.8335 13.5545 5.92129 13.7665 6.07757 13.9228C6.23385 14.079 6.44582 14.1668 6.66683 14.1668H14.1668V6.66683C14.1668 6.44582 14.079 6.23385 13.9228 6.07757C13.7665 5.92129 13.5545 5.8335 13.3335 5.8335H5.8335Z",fill:"currentColor",fillOpacity:"0.6"})),R=J().createElement("svg",{className:"w-5 h-5",viewBox:"0 0 18 18",fill:"none"},J().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.00016 1.66683C5.31826 1.66683 2.3335 4.65159 2.3335 8.3335C2.3335 12.0154 5.31826 15.0002 9.00016 15.0002C12.6821 15.0002 15.6668 12.0154 15.6668 8.3335C15.6668 4.65159 12.6821 1.66683 9.00016 1.66683ZM1.00016 8.3335C1.00016 4.09937 4.76603 0.666504 9.00016 0.666504C13.2343 0.666504 17.0002 4.09937 17.0002 8.3335C17.0002 12.5676 13.2343 16.0005 9.00016 16.0005C4.76603 16.0005 1.00016 12.5676 1.00016 8.3335ZM9.00016 4.16683C9.4604 4.16683 9.8335 4.53993 9.8335 5.00016V8.3335L12.1668 10.6668C12.4933 10.9933 12.4933 11.5068 12.1668 11.8333C11.8404 12.1598 11.3268 12.1598 11.0003 11.8333L8.3335 9.1665V5.00016C8.3335 4.53993 8.70659 4.16683 9.00016 4.16683Z",fill:"currentColor",fillOpacity:"0.6"}));return J().createElement(xr,{isOpen:t,onClose:function(){n(),a&&setTimeout(function(){v.setActiveModal(a.type,a.props)},100)},title:r.filename},J().createElement("div",{className:"space-y-4"},J().createElement("div",{className:"relative"},J().createElement("div",{className:"flex justify-center items-center max-h-[50vh] max-w-full mx-auto transition-all duration-300"},d?J().createElement(Ql(),{crop:f,onChange:function(e){return y(e)},onComplete:function(e){return y(e)},aspect:1.5},J().createElement("img",{src:"".concat(r.image_url||"").concat(c?"?t=".concat(c):""),alt:r.alttext,className:"!max-w-full !max-h-[50vh] !shadow-lg !mx-auto ".concat(i?"!opacity-50":""),style:{display:"block",margin:"0 auto"},ref:b})):J().createElement("img",{src:"".concat(r.image_url||"").concat(c?"?t=".concat(c):""),alt:r.alttext,className:"max-w-full max-h-[50vh] shadow-lg mx-auto ".concat(i?"opacity-50":""),style:{display:"block",margin:"0 auto"},ref:b}),i&&J().createElement("div",{className:"absolute inset-0 flex items-center justify-center"},J().createElement(an,{className:"animate-spin h-8 w-8 text-green-500"})))),J().createElement("div",{className:"flex justify-center space-x-4"},J().createElement(cl,{text:(0,de.__)("Rotate 90 degrees clockwise","nggallery")},J().createElement("button",{onClick:function(){return I("cw")},disabled:i||d,className:"px-4 py-2 bg-gray-400 text-white rounded hover:bg-gray-500 flex items-center space-x-2 ".concat(i||d?"opacity-50 cursor-not-allowed":"")},J().createElement("svg",{className:"w-5 h-5",viewBox:"0 0 18 18",fill:"none"},J().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.99984 2.33317C7.6813 2.33317 6.39237 2.72416 5.29604 3.45671C4.19971 4.18925 3.34523 5.23044 2.84064 6.44861C2.33606 7.66679 2.20404 9.00723 2.46127 10.3004C2.71851 11.5936 3.35345 12.7815 4.2858 13.7139C5.21815 14.6462 6.40603 15.2812 7.69924 15.5384C8.99245 15.7956 10.3329 15.6636 11.5511 15.159C12.7692 14.6545 13.8104 13.8 14.543 12.7036C15.2755 11.6073 15.6665 10.3184 15.6665 8.99984C15.6665 8.5396 16.0396 8.1665 16.4998 8.1665C16.9601 8.1665 17.3332 8.5396 17.3332 8.99984C17.3332 10.648 16.8444 12.2592 15.9288 13.6296C15.0131 15 13.7116 16.0681 12.1889 16.6988C10.6662 17.3296 8.9906 17.4946 7.37409 17.173C5.75758 16.8515 4.27272 16.0578 3.10728 14.8924C1.94185 13.727 1.14817 12.2421 0.82663 10.6256C0.505087 9.00908 0.670115 7.33353 1.30084 5.81081C1.93158 4.28809 2.99968 2.9866 4.37009 2.07092C5.7405 1.15525 7.35166 0.666504 8.99984 0.666504C11.3213 0.666504 13.535 1.58751 15.194 3.18241L15.2058 3.19391L15.6665 3.65466V1.49984C15.6665 1.0396 16.0396 0.666504 16.4998 0.666504C16.9601 0.666504 17.3332 1.0396 17.3332 1.49984V5.6665C17.3332 6.12674 16.9601 6.49984 16.4998 6.49984H12.3332C11.8729 6.49984 11.4998 6.12674 11.4998 5.6665C11.4998 5.20627 11.8729 4.83317 12.3332 4.83317H14.488L14.0332 4.3784C12.6763 3.07672 10.8757 2.33317 8.99984 2.33317Z",fill:"currentColor",fillOpacity:"0.6"})))),J().createElement(cl,{text:(0,de.__)("Rotate 90 degrees counter-clockwise","nggallery")},J().createElement("button",{onClick:function(){return I("ccw")},disabled:i||d,className:"px-4 py-2 bg-gray-400 text-white rounded hover:bg-gray-500 flex items-center space-x-2 ".concat(i||d?"opacity-50 cursor-not-allowed":"")},J().createElement("svg",{className:"w-5 h-5",viewBox:"0 0 18 18",fill:"none"},J().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.9967 0.666516L8.99984 0.666504C10.648 0.66651 12.2592 1.15525 13.6296 2.07093C15 2.98661 16.0681 4.2881 16.6988 5.81081C17.3296 7.33353 17.4946 9.00909 17.173 10.6256C16.8515 12.2421 16.0578 13.727 14.8924 14.8924C13.727 16.0578 12.2421 16.8515 10.6256 17.1731C9.00908 17.4946 7.33353 17.3296 5.81081 16.6988C4.28809 16.0681 2.9866 15 2.07092 13.6296C1.15525 12.2592 0.666504 10.648 0.666504 8.99984C0.666504 8.53961 1.0396 8.16651 1.49984 8.16651C1.96007 8.16651 2.33317 8.53961 2.33317 8.99984C2.33317 10.3184 2.72416 11.6073 3.45671 12.7036C4.18925 13.8 5.23044 14.6545 6.44861 15.159C7.66679 15.6636 9.00723 15.7956 10.3004 15.5384C11.5936 15.2812 12.7815 14.6462 13.7139 13.7139C14.6462 12.7815 15.2812 11.5937 15.5384 10.3004C15.7956 9.00724 15.6636 7.66679 15.159 6.44862C14.6545 5.23045 13.8 4.18926 12.7036 3.45671C11.6077 2.72446 10.3194 2.33348 9.0014 2.33318C7.12259 2.34065 5.31925 3.07305 3.96731 4.37755L3.51168 4.83318H5.6665C6.12674 4.83318 6.49984 5.20627 6.49984 5.66651C6.49984 6.12675 6.12674 6.49984 5.6665 6.49984H1.49984C1.0396 6.49984 0.666504 6.12675 0.666504 5.66651V1.49984C0.666504 1.03961 1.0396 0.66651 1.49984 0.66651C1.96007 0.66651 2.33317 1.03961 2.33317 1.49984V3.65466L2.79392 3.19392L2.80397 3.18404C4.46605 1.57726 6.68495 0.675212 8.9967 0.666516Z",fill:"currentColor",fillOpacity:"0.6"})))),d?J().createElement(cl,{text:(0,de.__)("Apply current crop","nggallery")},J().createElement("button",{onClick:A,disabled:i,className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 flex items-center space-x-2 ".concat(i?"opacity-50 cursor-not-allowed":"")},M)):J().createElement(cl,{text:(0,de.__)("Select crop area for the thumbnail","nggallery")},J().createElement("button",{onClick:function(){_&&y(L(_.naturalWidth,_.naturalHeight)),g(!0)},disabled:i,className:"px-4 py-2 bg-gray-400 text-white rounded hover:bg-gray-500 flex items-center space-x-2 ".concat(i?"opacity-50 cursor-not-allowed":"")},M)),J().createElement(cl,{text:(0,de.__)("Restore from backup","nggallery")},J().createElement("button",{onClick:j,disabled:i||d,className:"px-4 py-2 bg-gray-400 text-white rounded hover:bg-gray-500 flex items-center space-x-2 ".concat(i||d?"opacity-50 cursor-not-allowed":"")},R)))))},galleryImageView:function(e){var t=e.isOpen,n=e.onClose,r=e.image,a=e.galleryId,l=hr((0,Z.useState)(0),2),i=l[0],o=l[1],s=_a(a&&a>0?a:null).data,c=void 0===s?[]:s;(0,Z.useEffect)(function(){if(c.length>0&&t){var e=c.findIndex(function(e){return e.pid===r.pid});e>=0&&o(e)}},[c.length,r.pid,t]);var u=c[i],m=(0,Z.useCallback)(function(){i>0&&o(i-1)},[i]),d=(0,Z.useCallback)(function(){i<c.length-1&&o(i+1)},[i,c.length]);if((0,Z.useEffect)(function(){var e=function(e){t&&("Escape"===e.key?(e.preventDefault(),n()):"ArrowLeft"===e.key?(e.preventDefault(),m()):"ArrowRight"===e.key&&(e.preventDefault(),d()))};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}},[t,m,d,n]),(0,Z.useEffect)(function(){return document.body.style.overflow=t?"hidden":"unset",function(){document.body.style.overflow="unset"}},[t]),!t||!u||!a||a<=0)return null;var g=i>0,p=i<c.length-1;return J().createElement("div",{className:"fixed inset-0 z-[9999] bg-black bg-opacity-95 flex items-center justify-center",onClick:n},J().createElement("button",{onClick:n,className:"absolute top-3 sm:top-[39px] right-3 sm:right-4 z-50 text-white hover:text-gray-300 transition-colors",title:(0,de.__)("Close (ESC)","nextgen-gallery")},J().createElement("svg",{className:"w-6 h-6 sm:w-8 sm:h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))),J().createElement("div",{className:"absolute top-3 sm:top-[39px] left-3 sm:left-4 z-50 text-white"},J().createElement("h2",{className:"text-sm sm:text-lg font-medium text-gray-300"},u.filename," (",i+1," of ",c.length,")")),J().createElement("div",{className:"relative w-full h-full flex items-center justify-between p-2 sm:p-4 ml-0",onClick:function(e){return e.stopPropagation()}},J().createElement("div",{className:"flex items-center justify-center w-8 sm:w-16 h-full"},g&&J().createElement("button",{onClick:m,className:"bg-black bg-opacity-60 hover:bg-opacity-80 text-white rounded-full p-2 sm:p-3 transition-all",title:(0,de.__)("Previous image ()","nextgen-gallery")},J().createElement("svg",{className:"w-5 h-5 sm:w-8 sm:h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})))),J().createElement("div",{className:"flex-1 flex items-center justify-center max-w-full max-h-full mx-2 sm:mx-4"},J().createElement("div",{className:"relative"},J().createElement("img",{src:u.image_url||"",alt:u.alttext||u.filename,className:"max-w-full max-h-full object-contain ".concat(u.exclude?"opacity-50 grayscale":""),style:{maxHeight:"85vh",maxWidth:"100%"}}),u.exclude&&J().createElement("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none"},J().createElement("div",{className:"bg-gray-600 text-white text-sm px-3 py-2 rounded font-medium shadow-lg"},(0,de.__)("Hidden","nextgen-gallery"))))),J().createElement("div",{className:"flex items-center justify-center w-8 sm:w-16 h-full"},p&&J().createElement("button",{onClick:d,className:"bg-black bg-opacity-60 hover:bg-opacity-80 text-white rounded-full p-2 sm:p-3 transition-all",title:(0,de.__)("Next image ()","nextgen-gallery")},J().createElement("svg",{className:"w-5 h-5 sm:w-8 sm:h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"}))))),J().createElement("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 bg-black bg-opacity-80 text-white p-2 sm:p-4 rounded-t-lg w-full sm:w-auto max-w-4xl"},J().createElement("div",{className:"px-2 sm:px-4"},J().createElement("div",{className:"text-center mb-2 sm:mb-3"},J().createElement("h2",{className:"text-sm sm:text-lg font-medium text-gray-300"},u.filename," (",i+1," of ",c.length,")")),J().createElement("div",{className:"text-center mb-2 sm:mb-4"},u.alttext&&J().createElement("p",{className:"text-sm sm:text-lg font-medium mb-1 sm:mb-2"},u.alttext),u.description&&J().createElement("p",{className:"text-xs sm:text-sm text-gray-300"},u.description)),c.length>1&&J().createElement("div",{className:"flex justify-center space-x-1 sm:space-x-2 mb-2"},c.map(function(e,t){return J().createElement("button",{key:t,onClick:function(){return o(t)},className:"w-2 h-2 sm:w-3 sm:h-3 rounded-full transition-colors ".concat(t===i?"bg-white":"bg-gray-500 hover:bg-gray-300"),title:"".concat((0,de.__)("Go to image","nextgen-gallery")," ").concat(t+1)})})),J().createElement("div",{className:"text-center text-xs text-gray-400"},(0,de.__)("Use   arrow keys to navigate  ESC to close","nextgen-gallery")))))},bulkResize:function(e){var t=e.isOpen,n=e.onClose,r=e.imageIds,a=e.galleryId,l=e.onConfirm,i=void 0===l?function(){}:l,o=hr((0,Z.useState)(""),2),s=o[0],c=o[1],u=hr((0,Z.useState)(""),2),m=u[0],d=u[1],g=te(),p=function(){var e,t=te();return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var n,r,a,l,i;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.imageIds,r=t.width,a=t.height,l=sa("bulk-resize"),i={image_ids:n},r&&(i.width=r),a&&(i.height=a),e.next=7,l(i);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),onSuccess:function(){t.invalidateQueries({queryKey:["images"]}),t.invalidateQueries({queryKey:["gallery"]})}})}(),f=ea(),y=f.showSuccess,h=f.showError,_=f.showWarning,b=function(){var e=Er(Nr().mark(function e(){var t,l,o,c;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=s?parseInt(s,10):void 0,l=m?parseInt(m,10):void 0,e.next=5,p.mutateAsync({imageIds:r,width:t,height:l});case 5:o=e.sent,c=Date.now(),a&&g.setQueryData(pa(a),function(e){return Array.isArray(e)?e.map(function(e){return r.includes(e.pid)?Wa(Wa({},e),{},{reloadKey:c}):e}):e}),o.success_count>0&&y("Successfully resized ".concat(o.success_count," of ").concat(o.processed," images")),o.failure_count>0&&_("Failed to resize ".concat(o.failure_count," images")),i(),n(),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("Error bulk resizing images:",e.t0),h("Failed to resize selected images");case 18:case"end":return e.stop()}},e,null,[[0,14]])}));return function(){return e.apply(this,arguments)}}();return J().createElement(xr,{isOpen:t,onClose:n,title:(0,de.__)("Bulk Resize Images","nggallery")},J().createElement("div",{className:"space-y-4"},J().createElement("p",{className:"text-gray-600"},(0,de.__)("Resize","nggallery")," ",r.length," ",(0,de.__)("selected images. Leave fields empty to use global settings.","nggallery")),J().createElement("div",{className:"space-y-4"},J().createElement("div",null,J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},(0,de.__)("Width (pixels)","nggallery")),J().createElement("input",{type:"number",min:"1",placeholder:(0,de.__)("Leave empty for global setting","nggallery"),value:s,onChange:function(e){return c(e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",disabled:p.isPending})),J().createElement("div",null,J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},(0,de.__)("Height (pixels)","nggallery")),J().createElement("input",{type:"number",min:"1",placeholder:(0,de.__)("Leave empty for global setting","nggallery"),value:m,onChange:function(e){return d(e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",disabled:p.isPending}))),J().createElement("div",{className:"flex justify-end space-x-3 pt-4"},J().createElement("button",{onClick:n,disabled:p.isPending,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50"},(0,de.__)("Cancel","nggallery")),J().createElement("button",{onClick:b,disabled:p.isPending,className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 disabled:opacity-50 flex items-center space-x-2"},p.isPending&&J().createElement(an,{className:"animate-spin h-4 w-4 text-white"}),J().createElement("span",null,p.isPending?(0,de.__)("Resizing...","nggallery"):(0,de.__)("Resize Images","nggallery"))))))},bulkGenerateThumbnails:function(e){var t=e.isOpen,n=e.onClose,r=e.imageIds,a=e.galleryId,l=e.onConfirm,i=void 0===l?function(){}:l,o=hr((0,Z.useState)("240x160"),2),s=o[0],c=o[1],u=hr((0,Z.useState)("240"),2),m=u[0],d=u[1],g=hr((0,Z.useState)("160"),2),p=g[0],f=g[1],y=hr((0,Z.useState)(!1),2),h=y[0],_=y[1],b=hr((0,Z.useState)(!1),2),v=b[0],x=b[1],w=hr((0,Z.useState)(!1),2),E=w[0],C=w[1],N=hr((0,Z.useState)(function(){var e=localStorage.getItem("ngg_custom_thumbnail_sizes");return e?JSON.parse(e):[]}),2),k=N[0],S=N[1],O=te(),P=Ia(),T=Da(),D=T.data,I=T.isLoading,j=ea(),A=j.showSuccess,L=j.showError,M=j.showWarning,R=function(){var e,t=te();return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var n,r,a,l,i,o;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.pid,r=t.width,a=t.height,l=t.setFixDimension,i=void 0!==l&&l,o=oa("create-thumbnail"),e.next=4,o(n,{width:r,height:a,fix_dimension:i});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),onSuccess:function(){t.invalidateQueries({queryKey:["images"]}),t.invalidateQueries({queryKey:["gallery"]})}})}();(0,Z.useEffect)(function(){if(D&&t&&!E){var e=D.thumbwidth||240,n=D.thumbheight||160,r=D.thumbfix||!1;d(e.toString()),f(n.toString()),_(r);var a="".concat(e,"x").concat(n);if("240x160"===a||k.includes(a))c(a);else{if(!k.includes(a)&&"240x160"!==a){var l=[].concat(zr(k),[a]);S(l),localStorage.setItem("ngg_custom_thumbnail_sizes",JSON.stringify(l))}c(a)}C(!0)}},[D,t,E,k]),(0,Z.useEffect)(function(){t||C(!1)},[t]);var F=function(e,t){var n="".concat(e,"x").concat(t);if("240x160"!==n&&!k.includes(n)){var r=[].concat(zr(k),[n]);S(r),localStorage.setItem("ngg_custom_thumbnail_sizes",JSON.stringify(r))}},z=function(){var e=Er(Nr().mark(function e(){var t,l,o,c,u,d,g,f,y,_,b,v;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.prev=1,"custom"===s?(t=m?parseInt(m,10):240,l=p?parseInt(p,10):160):(o=s.split("x"),c=hr(o,2),u=c[0],d=c[1],t=parseInt(u,10),l=parseInt(d,10)),"custom"===s&&F(t,l),e.prev=4,e.next=7,P.mutateAsync({thumbwidth:t,thumbheight:l,thumbfix:h});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.error("Error saving thumbnail settings:",e.t0);case 12:g=0,f=0,y=La(r),e.prev=15,y.s();case 17:if((_=y.n()).done){e.next=31;break}return b=_.value,e.prev=19,e.next=22,R.mutateAsync({pid:b,width:t,height:l,setFixDimension:h});case 22:g++,e.next=29;break;case 25:e.prev=25,e.t1=e.catch(19),console.error("Error generating thumbnail for image ".concat(b,":"),e.t1),f++;case 29:e.next=17;break;case 31:e.next=36;break;case 33:e.prev=33,e.t2=e.catch(15),y.e(e.t2);case 36:return e.prev=36,y.f(),e.finish(36);case 39:v=Date.now(),a&&O.setQueryData(pa(a),function(e){return Array.isArray(e)?e.map(function(e){return r.includes(e.pid)?Aa(Aa({},e),{},{reloadKey:v}):e}):e}),g>0&&A("Successfully generated thumbnails for ".concat(g," of ").concat(r.length," images")),f>0&&M("Failed to generate thumbnails for ".concat(f," images")),i(),n(),e.next=51;break;case 47:e.prev=47,e.t3=e.catch(1),console.error("Error bulk generating thumbnails:",e.t3),L("Failed to generate thumbnails for selected images");case 51:return e.prev=51,x(!1),e.finish(51);case 54:case"end":return e.stop()}},e,null,[[1,47,51,54],[4,9],[15,33,36,39],[19,25]])}));return function(){return e.apply(this,arguments)}}();return J().createElement(xr,{isOpen:t,onClose:n,title:(0,de.__)("Create new thumbnails","nggallery")},J().createElement("div",{className:"space-y-4"},J().createElement("p",{className:"text-gray-600"},(0,de.__)("Generate custom thumbnails for","nggallery")," ",r.length," ",(0,de.__)("selected images.","nggallery")),I&&J().createElement("div",{className:"flex items-center justify-center py-4"},J().createElement(an,{className:"animate-spin h-5 w-5 text-gray-500"}),J().createElement("span",{className:"ml-2 text-gray-500"},(0,de.__)("Loading current settings...","nggallery"))),!I&&J().createElement("div",{className:"space-y-4"},J().createElement("div",null,J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},(0,de.__)("Width x height (in pixel)","nggallery")),J().createElement("select",{value:s,onChange:function(e){return function(e){if(c(e),"custom"!==e&&e.includes("x")){var t=hr(e.split("x"),2),n=t[0],r=t[1];d(n),f(r)}}(e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",disabled:v},J().createElement("option",{value:"240x160"},"240x160"),k.map(function(e){return J().createElement("option",{key:e,value:e},e)}),J().createElement("option",{value:"custom"},(0,de.__)("Custom","nggallery"))),"custom"===s&&J().createElement("div",{className:"mt-3"},J().createElement("div",{className:"flex items-center space-x-2"},J().createElement("input",{type:"number",min:"1",value:m,onChange:function(e){return d(e.target.value)},className:"w-24 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",disabled:v}),J().createElement("span",{className:"text-gray-500"},"x"),J().createElement("input",{type:"number",min:"1",value:p,onChange:function(e){return f(e.target.value)},className:"w-24 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",disabled:v})),J().createElement("p",{className:"text-xs text-gray-500 mt-1"},(0,de.__)("These are maximum values","nggallery")))),J().createElement("div",null,J().createElement("div",{className:"flex items-center space-x-2"},J().createElement("input",{type:"checkbox",id:"setFixDimension",checked:h,onChange:function(e){return _(e.target.checked)},className:"rounded border-gray-300 text-green-600 focus:ring-green-500",disabled:v}),J().createElement("label",{htmlFor:"setFixDimension",className:"text-sm text-gray-700"},(0,de.__)("Set fix dimension","nggallery"))),J().createElement("p",{className:"text-xs text-gray-500 ml-5 mt-1"},(0,de.__)("Ignore the aspect ratio, no portrait thumbnails","nggallery")))),J().createElement("div",{className:"flex justify-end space-x-3 pt-4"},J().createElement("button",{onClick:n,disabled:v||I,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50"},(0,de.__)("Cancel","nggallery")),J().createElement("button",{onClick:z,disabled:v||I,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 flex items-center space-x-2"},v&&J().createElement(an,{className:"animate-spin h-4 w-4 text-white"}),J().createElement("span",null,v?(0,de.__)("Generating...","nggallery"):(0,de.__)("OK","nggallery"))))))},bulkOperationConfirmation:function(e){var t,n,r=e.isOpen,a=e.onClose,l=e.galleries,i=e.operationType,o=e.onConfirm,s=e.title,c=e.description,u=e.warningText,m=e.confirmLabel,d=void 0===m?(0,de.__)("OK","nggallery"):m,g=e.processingLabel,p=void 0===g?(0,de.__)("Processing...","nggallery"):g,f=hr((0,Z.useState)(!1),2),y=f[0],h=f[1],_=hr((0,Z.useState)(null),2),b=_[0],v=_[1],x=function(){var e=Er(Nr().mark(function e(){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),v({current:0,total:0}),e.prev=2,e.next=5,o(function(e,t){v({current:e,total:t})});case 5:a(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error("Operation failed:",e.t0);case 11:return e.prev=11,h(!1),v(null),e.finish(11);case 15:case"end":return e.stop()}},e,null,[[2,8,11,15]])}));return function(){return e.apply(this,arguments)}}(),w=s||function(){switch(i){case"watermark":return(0,de.__)("Set Watermark","nggallery");case"metadata":return(0,de.__)("Import Metadata","nggallery");case"recovery":return(0,de.__)("Recover from Backup","nggallery");default:return(0,de.__)("Confirm Operation","nggallery")}}(),E=c||function(){var e=l.length,t=1===e?(0,de.__)("gallery","nggallery"):(0,de.__)("galleries","nggallery");switch(i){case"watermark":return(0,de.__)("Apply watermark to all images in ".concat(e," ").concat(t,"?"),"nggallery");case"metadata":return(0,de.__)("Import metadata for all images in ".concat(e," ").concat(t,"?"),"nggallery");case"recovery":return(0,de.__)("Recover all images from backup in ".concat(e," ").concat(t,"?"),"nggallery");default:return(0,de.__)("Perform operation on ".concat(e," ").concat(t,"?"),"nggallery")}}(),C=u||("recovery"===i?(0,de.__)("This will overwrite current images with their backup versions.","nggallery"):null);return J().createElement(xr,{isOpen:r,onClose:a,title:w},J().createElement("div",{className:"space-y-4"},J().createElement("p",{className:"text-sm text-gray-600 text-center"},E),(t=l.slice(0,5),n=l.length-5,J().createElement("div",{className:"my-4"},J().createElement("ul",{className:"list-none text-sm text-gray-700 px-4 text-center"},t.map(function(e){return J().createElement("li",{key:e.id},e.galleryTitle)}),n>0&&J().createElement("li",{className:"text-gray-500 italic"},(0,de.__)("and ".concat(n," more..."),"nggallery"))))),C&&J().createElement("p",{className:"text-sm text-yellow-600 text-center bg-yellow-50 p-3 rounded border border-yellow-200"}," ",C),y&&b&&b.total>0&&J().createElement("div",{className:"mt-4"},J().createElement(aa,{current:b.current,total:b.total,label:(0,de.__)("Processing images","nggallery"),showPercentage:!0})),J().createElement("div",{className:"flex justify-center space-x-3 !mb-4 ".concat(y?"cursor-wait":"")},J().createElement("button",{type:"button",onClick:a,disabled:y,className:"px-8 py-2 font-medium text-gray-700 bg-white border border-gray-300 rounded-lg shadow hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},(0,de.__)("Cancel","nggallery")),J().createElement("button",{type:"button",onClick:x,disabled:y,className:"px-8 py-2 font-bold text-white bg-green-600 border border-transparent rounded-lg shadow hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},y?J().createElement("span",{className:"flex items-center"},J().createElement(an,{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white"}),p):d))))},bulkCreateThumbnailsGalleries:function(e){var t=e.isOpen,n=e.onClose,r=e.galleryIds,a=e.onConfirm,l=void 0===a?function(){}:a,i=hr((0,Z.useState)("240x160"),2),o=i[0],s=i[1],c=hr((0,Z.useState)("240"),2),u=c[0],m=c[1],d=hr((0,Z.useState)("160"),2),g=d[0],p=d[1],f=hr((0,Z.useState)(!1),2),y=f[0],h=f[1],_=hr((0,Z.useState)(!1),2),b=_[0],v=_[1],x=hr((0,Z.useState)(!1),2),w=x[0],E=x[1],C=hr((0,Z.useState)(0),2),N=C[0],k=C[1],S=hr((0,Z.useState)(0),2),O=S[0],P=S[1],T=hr((0,Z.useState)(function(){var e=localStorage.getItem("ngg_custom_thumbnail_sizes");return e?JSON.parse(e):[]}),2),D=T[0],I=T[1],j=Ia(),A=function(){var e,t=te(),n=oa("create-thumbnail");return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var r,a,l,i,o,s,c,u,m,d;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.galleryIds,a=t.width,l=t.height,i=t.fixDimension,o=t.onProgress,e.next=3,xa(r);case 3:s=e.sent,c=s.length,u=0,m=0,d=0;case 8:if(!(d<s.length)){e.next=23;break}return e.prev=9,e.next=12,n(s[d],{width:a,height:l,fix_dimension:i});case 12:u++,e.next=19;break;case 15:e.prev=15,e.t0=e.catch(9),console.error("Failed to generate thumbnail for image ".concat(s[d],":"),e.t0),m++;case 19:o&&o(d+1,c);case 20:d++,e.next=8;break;case 23:return e.abrupt("return",{successCount:u,failureCount:m,total:c});case 24:case"end":return e.stop()}},e,null,[[9,15]])})),function(t){return e.apply(this,arguments)}),onSuccess:function(){t.invalidateQueries({queryKey:["gallery"]})}})}(),L=Da(),M=L.data,R=L.isLoading,F=ea(),z=F.showSuccess,B=F.showError,q=F.showWarning;(0,Z.useEffect)(function(){if(M&&t&&!w){var e=M.thumbwidth||240,n=M.thumbheight||160,r=M.thumbfix||!1;m(e.toString()),p(n.toString()),h(r);var a="".concat(e,"x").concat(n);if("240x160"===a||D.includes(a))s(a);else{if(!D.includes(a)&&"240x160"!==a){var l=[].concat(zr(D),[a]);I(l),localStorage.setItem("ngg_custom_thumbnail_sizes",JSON.stringify(l))}s(a)}E(!0)}},[M,t,w,D]),(0,Z.useEffect)(function(){t||E(!1)},[t]);var H=function(e,t){var n="".concat(e,"x").concat(t);if("240x160"!==n&&!D.includes(n)){var r=[].concat(zr(D),[n]);I(r),localStorage.setItem("ngg_custom_thumbnail_sizes",JSON.stringify(r))}},G=function(){var e=Er(Nr().mark(function e(){var t,a,i,s,c,m,d;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),k(0),P(0),e.prev=3,"custom"===o?(t=u?parseInt(u,10):240,a=g?parseInt(g,10):160):(i=o.split("x"),s=hr(i,2),c=s[0],m=s[1],t=parseInt(c,10),a=parseInt(m,10)),"custom"===o&&H(t,a),e.prev=6,e.next=9,j.mutateAsync({thumbwidth:t,thumbheight:a,thumbfix:y});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),console.error("Error saving thumbnail settings:",e.t0);case 14:return e.next=16,A.mutateAsync({galleryIds:r,width:t,height:a,fixDimension:y,onProgress:function(e,t){k(e),P(t)}});case 16:(d=e.sent).failureCount>0?q("".concat((0,de.__)("Generated thumbnails for","nggallery")," ").concat(d.successCount," ").concat((0,de.__)("of","nggallery")," ").concat(d.total," ").concat((0,de.__)("images","nggallery"))):z("".concat((0,de.__)("Successfully generated thumbnails for","nggallery")," ").concat(d.total," ").concat((0,de.__)("images","nggallery"))),l(),n(),e.next=26;break;case 22:e.prev=22,e.t1=e.catch(3),console.error("Error bulk generating thumbnails:",e.t1),B((0,de.__)("Failed to generate thumbnails for selected galleries","nggallery"));case 26:return e.prev=26,v(!1),e.finish(26);case 29:case"end":return e.stop()}},e,null,[[3,22,26,29],[6,11]])}));return function(){return e.apply(this,arguments)}}();return J().createElement(xr,{isOpen:t,onClose:n,title:(0,de.__)("Create new thumbnails","nggallery")},J().createElement("div",{className:"space-y-4"},J().createElement("p",{className:"text-gray-600"},(0,de.__)("Generate custom thumbnails for","nggallery")," ",r.length," ",(0,de.__)("selected galleries.","nggallery")),R&&J().createElement("div",{className:"flex items-center justify-center py-4"},J().createElement(an,{className:"animate-spin h-5 w-5 text-gray-500"}),J().createElement("span",{className:"ml-2 text-gray-500"},(0,de.__)("Loading current settings...","nggallery"))),!R&&J().createElement("div",{className:"space-y-4"},J().createElement("div",null,J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},(0,de.__)("Width x height (in pixel)","nggallery")),J().createElement("select",{value:o,onChange:function(e){return function(e){if(s(e),"custom"!==e&&e.includes("x")){var t=hr(e.split("x"),2),n=t[0],r=t[1];m(n),p(r)}}(e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",disabled:b},J().createElement("option",{value:"240x160"},"240x160"),D.map(function(e){return J().createElement("option",{key:e,value:e},e)}),J().createElement("option",{value:"custom"},(0,de.__)("Custom","nggallery"))),"custom"===o&&J().createElement("div",{className:"mt-3"},J().createElement("div",{className:"flex items-center space-x-2"},J().createElement("input",{type:"number",min:"1",value:u,onChange:function(e){return m(e.target.value)},className:"w-24 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",disabled:b}),J().createElement("span",{className:"text-gray-500"},"x"),J().createElement("input",{type:"number",min:"1",value:g,onChange:function(e){return p(e.target.value)},className:"w-24 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",disabled:b})),J().createElement("p",{className:"text-xs text-gray-500 mt-1"},(0,de.__)("These are maximum values","nggallery")))),J().createElement("div",null,J().createElement("div",{className:"flex items-center space-x-2"},J().createElement("input",{type:"checkbox",id:"setFixDimension",checked:y,onChange:function(e){return h(e.target.checked)},className:"rounded border-gray-300 text-green-600 focus:ring-green-500",disabled:b}),J().createElement("label",{htmlFor:"setFixDimension",className:"text-sm text-gray-700"},(0,de.__)("Set fix dimension","nggallery"))),J().createElement("p",{className:"text-xs text-gray-500 ml-5 mt-1"},(0,de.__)("Ignore the aspect ratio, no portrait thumbnails","nggallery")))),b&&O>0&&J().createElement("div",{className:"mt-4"},J().createElement(aa,{current:N,total:O,label:(0,de.__)("Processing images","nggallery"),showPercentage:!0})),J().createElement("div",{className:"flex justify-end space-x-3 pt-4"},J().createElement("button",{onClick:n,disabled:b||R,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50"},(0,de.__)("Cancel","nggallery")),J().createElement("button",{onClick:G,disabled:b||R,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 flex items-center space-x-2"},b&&J().createElement(an,{className:"animate-spin h-4 w-4 text-white"}),J().createElement("span",null,b?(0,de.__)("Generating...","nggallery"):(0,de.__)("OK","nggallery"))))))},bulkResizeImagesGalleries:function(e){var t=e.isOpen,n=e.onClose,r=e.galleryIds,a=e.onConfirm,l=void 0===a?function(){}:a,i=hr((0,Z.useState)("800"),2),o=i[0],s=i[1],c=hr((0,Z.useState)("600"),2),u=c[0],m=c[1],d=hr((0,Z.useState)(!1),2),g=d[0],p=d[1],f=hr((0,Z.useState)(!1),2),y=f[0],h=f[1],_=hr((0,Z.useState)(0),2),b=_[0],v=_[1],x=hr((0,Z.useState)(0),2),w=x[0],E=x[1],C=Ia(),N=function(){var e,t=te(),n=oa("resize");return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var r,a,l,i,o,s,c,u,m;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.galleryIds,a=t.width,l=t.height,i=t.onProgress,e.next=3,xa(r);case 3:o=e.sent,s=o.length,c=0,u=0,m=0;case 8:if(!(m<o.length)){e.next=23;break}return e.prev=9,e.next=12,n(o[m],{width:a,height:l});case 12:c++,e.next=19;break;case 15:e.prev=15,e.t0=e.catch(9),console.error("Failed to resize image ".concat(o[m],":"),e.t0),u++;case 19:i&&i(m+1,s);case 20:m++,e.next=8;break;case 23:return e.abrupt("return",{successCount:c,failureCount:u,total:s});case 24:case"end":return e.stop()}},e,null,[[9,15]])})),function(t){return e.apply(this,arguments)}),onSuccess:function(){t.invalidateQueries({queryKey:["gallery"]})}})}(),k=Da(),S=k.data,O=k.isLoading,P=ea(),T=P.showSuccess,D=P.showError,I=P.showWarning;(0,Z.useEffect)(function(){if(S&&t&&!y){var e=S.imgWidth||800,n=S.imgHeight||600;s(e.toString()),m(n.toString()),h(!0)}},[S,t,y]),(0,Z.useEffect)(function(){t||h(!1)},[t]);var j=function(){var e=Er(Nr().mark(function e(){var t,a,i;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),v(0),E(0),e.prev=3,t=o?parseInt(o,10):800,a=u?parseInt(u,10):600,e.prev=6,e.next=9,C.mutateAsync({imgWidth:t,imgHeight:a});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),console.error("Error saving resize settings:",e.t0);case 14:return e.next=16,N.mutateAsync({galleryIds:r,width:t,height:a,onProgress:function(e,t){v(e),E(t)}});case 16:(i=e.sent).failureCount>0?I("".concat((0,de.__)("Resized","nggallery")," ").concat(i.successCount," ").concat((0,de.__)("of","nggallery")," ").concat(i.total," ").concat((0,de.__)("images","nggallery"))):T("".concat((0,de.__)("Successfully resized","nggallery")," ").concat(i.total," ").concat((0,de.__)("images","nggallery"))),l(),n(),e.next=26;break;case 22:e.prev=22,e.t1=e.catch(3),console.error("Error bulk resizing images:",e.t1),D((0,de.__)("Failed to resize images for selected galleries","nggallery"));case 26:return e.prev=26,p(!1),e.finish(26);case 29:case"end":return e.stop()}},e,null,[[3,22,26,29],[6,11]])}));return function(){return e.apply(this,arguments)}}();return J().createElement(xr,{isOpen:t,onClose:n,title:(0,de.__)("Resize Images","nggallery")},J().createElement("div",{className:"space-y-4"},J().createElement("p",{className:"text-gray-600"},(0,de.__)("Resize images in","nggallery")," ",r.length," ",(0,de.__)("selected galleries.","nggallery")),O&&J().createElement("div",{className:"flex items-center justify-center py-4"},J().createElement(an,{className:"animate-spin h-5 w-5 text-gray-500"}),J().createElement("span",{className:"ml-2 text-gray-500"},(0,de.__)("Loading current settings...","nggallery"))),!O&&J().createElement("div",{className:"space-y-4"},J().createElement("div",null,J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},(0,de.__)("Resize Images to","nggallery")),J().createElement("div",{className:"flex items-center space-x-2"},J().createElement("input",{type:"number",min:"1",value:o,onChange:function(e){return s(e.target.value)},className:"w-24 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",disabled:g}),J().createElement("span",{className:"text-gray-500"},"x"),J().createElement("input",{type:"number",min:"1",value:u,onChange:function(e){return m(e.target.value)},className:"w-24 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",disabled:g}),J().createElement("span",{className:"text-gray-500 ml-2"},"px")),J().createElement("p",{className:"text-xs text-gray-500 mt-1"},(0,de.__)("Width x height. Leave height or width empty to keep ratio.","nggallery")))),g&&w>0&&J().createElement("div",{className:"mt-4"},J().createElement(aa,{current:b,total:w,label:(0,de.__)("Processing images","nggallery"),showPercentage:!0})),J().createElement("div",{className:"flex justify-end space-x-3 pt-4"},J().createElement("button",{onClick:n,disabled:g||O,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50"},(0,de.__)("Cancel","nggallery")),J().createElement("button",{onClick:j,disabled:g||O,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50 flex items-center space-x-2"},g&&J().createElement(an,{className:"animate-spin h-4 w-4 text-white"}),J().createElement("span",null,g?(0,de.__)("Resizing...","nggallery"):(0,de.__)("OK","nggallery"))))))},gallerySelect:function(e){var t=e.isOpen,n=e.onClose,r=e.imageIds,a=e.operation,l=void 0===a?"copy":a,i=e.onConfirm,o=e.excludeGalleryId,s=hr((0,Z.useState)(null),2),c=s[0],u=s[1],m=ya({get_all:!0}),d=m.data,g=m.isLoading,p=ea(),f=p.showSuccess,y=p.showError,h=p.showWarning,_=function(){var e,t=te();return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var n,r,a;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.imageIds,r=t.destinationGalleryId,a=sa("bulk-copy"),e.next=4,a({image_ids:n,destination_gallery_id:r});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),onSuccess:function(){t.invalidateQueries({queryKey:["images"]}),t.invalidateQueries({queryKey:["gallery"]})}})}(),b=function(){var e,t=te();return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var n,r,a;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.imageIds,r=t.destinationGalleryId,a=sa("bulk-move"),e.next=4,a({image_ids:n,destination_gallery_id:r});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),onSuccess:function(){t.invalidateQueries({queryKey:["images"]}),t.invalidateQueries({queryKey:["gallery"]})}})}(),v=((null==d?void 0:d.galleries)||[]).filter(function(e){return!o||e.id!==o}),x=function(){var e=Er(Nr().mark(function e(){var t,a;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=2;break}return e.abrupt("return");case 2:return t="copy"===l?_:b,e.prev=3,e.next=6,t.mutateAsync({imageIds:r,destinationGalleryId:c});case 6:(a=e.sent).success_count>0&&f(a.message),a.failure_count>0&&h("Failed to ".concat(l," ").concat(a.failure_count," images")),i&&i(c),n(),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.error("Error ".concat(l,"ing images:"),e.t0),y("Failed to ".concat(l," images"));case 17:case"end":return e.stop()}},e,null,[[3,13]])}));return function(){return e.apply(this,arguments)}}(),w="copy"===l?(0,de.__)("Copy","nggallery"):(0,de.__)("Move","nggallery"),E="copy"===l?(0,de.__)("copy","nggallery"):(0,de.__)("move","nggallery");return J().createElement(xr,{isOpen:t,onClose:n,title:(0,de.sprintf)((0,de.__)("%s Images to Gallery","nggallery"),w)},J().createElement("p",{className:"text-gray-600 mb-4"},(0,de.sprintf)((0,de.__)("Select the gallery where you want to %s the selected images.","nggallery"),E)),J().createElement("div",{className:"mb-4"},J().createElement("p",{className:"text-sm text-gray-500"},1===r.length?(0,de.sprintf)((0,de.__)("1 image will be %s","nggallery"),"copy"===l?(0,de.__)("copied","nggallery"):(0,de.__)("moved","nggallery")):(0,de.sprintf)((0,de.__)("%d images will be %s","nggallery"),r.length,"copy"===l?(0,de.__)("copied","nggallery"):(0,de.__)("moved","nggallery")))),g?J().createElement("div",{className:"py-8"},J().createElement(ar,{size:"md",text:(0,de.__)("Loading galleries...","nggallery")})):0===v.length?J().createElement("div",{className:"text-center py-8"},J().createElement("p",{className:"text-gray-500"},(0,de.__)("No galleries available","nggallery"))):J().createElement("div",{className:"space-y-2 max-h-96 overflow-y-auto"},v.map(function(e){return J().createElement("div",{key:e.id,className:"flex items-center p-3 border rounded-lg cursor-pointer transition-colors ".concat(c===e.id?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),onClick:function(){return u(e.id)}},J().createElement("input",{type:"radio",name:"gallery",value:e.id,checked:c===e.id,onChange:function(){return u(e.id)},className:"mr-3"}),e.thumbnail?J().createElement("img",{src:e.thumbnail,alt:e.galleryTitle,className:"w-12 h-12 object-cover rounded mr-3"}):J().createElement("div",{className:"w-12 h-12 bg-gray-200 rounded mr-3 flex items-center justify-center"},J().createElement("span",{className:"text-gray-500 text-xs"},(0,de.__)("No image","nggallery"))),J().createElement("div",{className:"flex-1"},J().createElement("h3",{className:"font-medium"},e.galleryTitle),J().createElement("p",{className:"text-sm text-gray-500"},e.count," ","1"===e.count?(0,de.__)("image","nggallery"):(0,de.__)("images","nggallery"))))})),J().createElement("div",{className:"flex justify-end space-x-2 mt-6"},J().createElement("button",{onClick:n,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:_.isPending||b.isPending},(0,de.__)("Cancel","nggallery")),J().createElement("button",{onClick:x,disabled:!c||_.isPending||b.isPending,className:"px-4 py-2 text-white rounded-md hover:bg-opacity-90 disabled:opacity-50 disabled:cursor-not-allowed flex items-center ".concat("move"===l?"bg-orange-600 hover:bg-orange-700":"bg-green-500 hover:bg-green-600")},(_.isPending||b.isPending)&&J().createElement(an,{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white"}),(0,de.sprintf)((0,de.__)("%s Images","nggallery"),w))))},tags:function(e){var t=e.isOpen,n=e.onClose,r=e.imageIds,a=e.onConfirm,l=hr((0,Z.useState)(""),2),i=l[0],o=l[1],s=hr((0,Z.useState)(new Set),2),c=s[0],u=s[1],m=hr((0,Z.useState)("append"),2),d=m[0],g=m[1],p=hr((0,Z.useState)([]),2),f=p[0],y=p[1],h=hr((0,Z.useState)(!1),2),_=h[0],b=h[1],v=function(){var e,t=te(),n=ea(),r=n.showSuccess,a=n.showWarning,l=n.showError;return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var n,r,a,l,i;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.imageIds,a=t.tags,l=t.append,i=null===(n=window.imagelyApp)||void 0===n?void 0:n.nonce,e.next=4,Fr()({path:"/imagely/v1/images/bulk-add-tags",method:"POST",headers:{"X-WP-Nonce":i,"Content-Type":"application/json"},data:{image_ids:r,tags:a,append:l}});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),onSuccess:function(e){t.invalidateQueries({queryKey:["gallery"]}),e.success_count>0&&r(e.message),e.failure_count>0&&a("Failed to add tags to ".concat(e.failure_count," images"))},onError:function(e){console.error("Error adding tags:",e),l("Failed to add tags to images")}})}(),x=function(){var e,t=te(),n=ea(),r=n.showSuccess,a=n.showWarning,l=n.showError;return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var n,r,a;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.imageIds,a=null===(n=window.imagelyApp)||void 0===n?void 0:n.nonce,e.next=4,Fr()({path:"/imagely/v1/images/bulk-remove-tags",method:"POST",headers:{"X-WP-Nonce":a,"Content-Type":"application/json"},data:{image_ids:r}});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),onSuccess:function(e){t.invalidateQueries({queryKey:["gallery"]}),e.success_count>0&&r(e.message),e.failure_count>0&&a("Failed to remove tags from ".concat(e.failure_count," images"))},onError:function(e){console.error("Error removing tags:",e),l("Failed to remove tags from images")}})}(),w=ea().showWarning;(0,Z.useEffect)(function(){t&&E()},[t]);var E=function(){var e=Er(Nr().mark(function e(){var t,n,r;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.prev=1,n=null===(t=window.imagelyApp)||void 0===t?void 0:t.nonce,e.next=5,Fr()({path:"/imagely/v1/tags",method:"GET",headers:{"X-WP-Nonce":n,"Content-Type":"application/json"}});case 5:r=e.sent,y(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Error fetching tags:",e.t0);case 12:return e.prev=12,b(!1),e.finish(12);case 15:case"end":return e.stop()}},e,null,[[1,9,12,15]])}));return function(){return e.apply(this,arguments)}}(),C=function(e){return e.split(",").map(function(e){return e.trim()}).filter(function(e){return e.length>0})},N=function(){var e=Er(Nr().mark(function e(){var t,l,o;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("remove"!==d){e.next=12;break}return e.prev=1,e.next=4,x.mutateAsync({imageIds:r});case 4:a&&a(),n(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error removing tags:",e.t0);case 11:return e.abrupt("return");case 12:if(t=C(i),l=Array.from(c),0!==(o=[].concat(zr(t),l)).length){e.next=18;break}return w((0,de.__)("Please select existing tags or enter new tags","nggallery")),e.abrupt("return");case 18:return e.prev=18,e.next=21,v.mutateAsync({imageIds:r,tags:o,append:"append"===d});case 21:a&&a(),n(),e.next=28;break;case 25:e.prev=25,e.t1=e.catch(18),console.error("Error adding tags:",e.t1);case 28:case"end":return e.stop()}},e,null,[[1,8],[18,25]])}));return function(){return e.apply(this,arguments)}}();return J().createElement(xr,{isOpen:t,onClose:n,title:(0,de.__)("Add Tags to Images","nggallery")},J().createElement("div",{className:"mb-4"},J().createElement("p",{className:"text-sm text-gray-500"},1===r.length?(0,de.__)("1 image will be tagged","nggallery"):(0,de.sprintf)((0,de.__)("%d images will be tagged","nggallery"),r.length))),J().createElement("div",{className:"mb-6"},J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-3"},(0,de.__)("Tag Mode","nggallery")),J().createElement("div",{className:"space-y-2"},J().createElement("label",{className:"flex items-center"},J().createElement("input",{type:"radio",name:"tagMode",checked:"append"===d,onChange:function(){return g("append")},className:"mr-2"}),J().createElement("span",null,(0,de.__)("Add to existing tags","nggallery"))),J().createElement("label",{className:"flex items-center"},J().createElement("input",{type:"radio",name:"tagMode",checked:"replace"===d,onChange:function(){return g("replace")},className:"mr-2"}),J().createElement("span",{className:"text-orange-600"},(0,de.__)("Replace all existing tags","nggallery"))),J().createElement("label",{className:"flex items-center"},J().createElement("input",{type:"radio",name:"tagMode",checked:"remove"===d,onChange:function(){return g("remove")},className:"mr-2"}),J().createElement("span",{className:"text-red-600"},(0,de.__)("Remove all tags","nggallery"))))),"remove"!==d&&J().createElement("div",{className:"mb-6"},J().createElement("label",{htmlFor:"newTags",className:"block text-sm font-medium text-gray-700 mb-2"},(0,de.__)("New Tags","nggallery")),J().createElement("input",{id:"newTags",type:"text",value:i,onChange:function(e){return o(e.target.value)},placeholder:(0,de.__)("Enter new tags separated by commas (e.g., nature, landscape, photography)","nggallery"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"}),J().createElement("p",{className:"text-xs text-gray-500 mt-1"},(0,de.__)("Separate multiple tags with commas","nggallery"))),"remove"!==d&&J().createElement("div",{className:"mb-6"},J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},(0,de.__)("Existing Tags","nggallery")),_?J().createElement("div",{className:"py-4"},J().createElement(ar,{size:"sm",text:(0,de.__)("Loading tags...","nggallery"),centerInContainer:!1})):0===f.length?J().createElement("p",{className:"text-gray-500 py-4"},(0,de.__)("No existing tags found","nggallery")):J().createElement("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-3"},J().createElement("div",{className:"space-y-2"},f.map(function(e){return J().createElement("label",{key:e.term_id,className:"flex items-center cursor-pointer"},J().createElement("input",{type:"checkbox",checked:c.has(e.name),onChange:function(){return t=e.name,(n=new Set(c)).has(t)?n.delete(t):n.add(t),void u(n);var t,n},className:"mr-2"}),J().createElement("span",{className:"flex-1"},e.name),J().createElement("span",{className:"text-xs text-gray-500 ml-2"},"(",e.count,")"))})))),"remove"===d&&J().createElement("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md"},J().createElement("div",{className:"flex"},J().createElement(Sn,{className:"w-5 h-5 text-red-400 mr-2 mt-0.5"}),J().createElement("div",null,J().createElement("h3",{className:"text-sm font-medium text-red-800"},(0,de.__)("Warning: This will remove all tags","nggallery")),J().createElement("p",{className:"text-sm text-red-700 mt-1"},1===r.length?(0,de.__)("All tags will be permanently removed from the selected image.","nggallery"):(0,de.sprintf)((0,de.__)("All tags will be permanently removed from all %d selected images.","nggallery"),r.length))))),J().createElement("div",{className:"flex justify-end space-x-2"},J().createElement("button",{onClick:n,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",disabled:v.isPending||x.isPending},(0,de.__)("Cancel","nggallery")),J().createElement("button",{onClick:N,disabled:v.isPending||x.isPending,className:"px-4 py-2 text-white rounded-md hover:bg-opacity-90 disabled:opacity-50 disabled:cursor-not-allowed flex items-center ".concat("remove"===d?"bg-red-600 hover:bg-red-700":"bg-green-500 hover:bg-green-600")},(v.isPending||x.isPending)&&J().createElement(an,{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white"}),"remove"===d?(0,de.__)("Remove All Tags","nggallery"):(0,de.__)("Add Tags","nggallery"))))},tagForm:function(e){var t=e.isOpen,r=e.onClose,a=e.tag,l=void 0===a?null:a,i=e.onSuccess,o=(0,me.useDispatch)(tr),s=hr((0,Z.useState)({name:"",slug:"",description:""}),2),c=s[0],u=s[1],m=hr((0,Z.useState)(!1),2),d=m[0],g=m[1],p=hr((0,Z.useState)({}),2),f=p[0],y=p[1],h=!!l;(0,Z.useEffect)(function(){t&&(u(l?{name:l.name||"",slug:l.slug||"",description:l.description||""}:{name:"",slug:"",description:""}),y({}))},[t,l]);var _=function(e,t){var n,r=(null==e?void 0:e.message)||t;null!=e&&e.code&&(r+=" (".concat((0,de.__)("Error Code","nggallery"),": ").concat(e.code,")")),null!=e&&null!==(n=e.data)&&void 0!==n&&n.details&&(r+=" - ".concat(e.data.details)),o.showNotice("error",r)},b=function(){var e={};return c.name.trim()||(e.name=(0,de.__)("Tag name is required","nggallery")),y(e),0===Object.keys(e).length},v=function(e){var t=e.target,r=t.name,a=t.value;u(function(e){return ni(ni({},e),{},n({},r,a))}),f[r]&&y(function(e){return ni(ni({},e),{},n({},r,""))})},x=function(){var e=Er(Nr().mark(function e(t){var n,a,s,u;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),b()){e.next=3;break}return e.abrupt("return");case 3:if(g(!0),e.prev=4,a=null===(n=window.imagelyApp)||void 0===n?void 0:n.nonce,s={name:c.name.trim(),description:c.description.trim()},c.slug.trim()&&(s.slug=c.slug.trim()),!h||!l){e.next=14;break}return e.next=11,Fr()({path:"/imagely/v1/tags/".concat(l.term_id),method:"PUT",headers:{"X-WP-Nonce":a,"Content-Type":"application/json"},data:s});case 11:o.showNotice("success",(0,de.__)("Tag updated successfully","nggallery")),e.next=17;break;case 14:return e.next=16,Fr()({path:"/imagely/v1/tags",method:"POST",headers:{"X-WP-Nonce":a,"Content-Type":"application/json"},data:s});case 16:o.showNotice("success",(0,de.__)("Tag created successfully","nggallery"));case 17:i&&i(),r(),e.next=38;break;case 21:if(e.prev=21,e.t0=e.catch(4),console.error("Error saving tag:",e.t0),!(e.t0 instanceof Response)){e.next=37;break}return e.prev=25,e.next=28,e.t0.json();case 28:u=e.sent,_(u,(0,de.__)("Failed to save tag","nggallery")),e.next=35;break;case 32:e.prev=32,e.t1=e.catch(25),o.showNotice("error",(0,de.__)("Failed to save tag","nggallery"));case 35:e.next=38;break;case 37:_(e.t0,(0,de.__)("Failed to save tag","nggallery"));case 38:return e.prev=38,g(!1),e.finish(38);case 41:case"end":return e.stop()}},e,null,[[4,21,38,41],[25,32]])}));return function(t){return e.apply(this,arguments)}}();return J().createElement(xr,{isOpen:t,onClose:r,title:h?(0,de.__)("Edit Tag","nggallery"):(0,de.__)("Add New Tag","nggallery")},J().createElement("form",{onSubmit:x,className:"space-y-4"},J().createElement("div",null,J().createElement("label",{htmlFor:"tag-name",className:"block text-sm font-medium text-gray-700 mb-1"},(0,de.__)("Name","nggallery")," ",J().createElement("span",{className:"text-red-500"},"*")),J().createElement("input",{type:"text",id:"tag-name",name:"name",value:c.name,onChange:v,className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 ".concat(f.name?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-green-500 focus:border-green-500"),placeholder:(0,de.__)("Enter tag name","nggallery"),disabled:d}),f.name&&J().createElement("p",{className:"mt-1 text-sm text-red-600"},f.name)),J().createElement("div",null,J().createElement("label",{htmlFor:"tag-slug",className:"block text-sm font-medium text-gray-700 mb-1"},(0,de.__)("Slug","nggallery")),J().createElement("input",{type:"text",id:"tag-slug",name:"slug",value:c.slug,onChange:v,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:(0,de.__)("Leave empty to auto-generate from name","nggallery"),disabled:d}),J().createElement("p",{className:"mt-1 text-sm text-gray-500"},(0,de.__)("The slug is the URL-friendly version of the name. Leave empty to auto-generate.","nggallery"))),J().createElement("div",null,J().createElement("label",{htmlFor:"tag-description",className:"block text-sm font-medium text-gray-700 mb-1"},(0,de.__)("Description","nggallery")),J().createElement("textarea",{id:"tag-description",name:"description",value:c.description,onChange:v,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:(0,de.__)("Optional description for this tag","nggallery"),disabled:d})),J().createElement("div",{className:"flex justify-end space-x-3 pt-4"},J().createElement("button",{type:"button",onClick:r,disabled:d,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed"},(0,de.__)("Cancel","nggallery")),J().createElement("button",{type:"submit",disabled:d,className:"px-4 py-2 text-sm font-medium text-white bg-green-500 border border-transparent rounded-md shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed"},d?J().createElement("span",{className:"flex items-center"},J().createElement(an,{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white"}),(0,de.__)("Saving...","nggallery")):h?(0,de.__)("Update Tag","nggallery"):(0,de.__)("Create Tag","nggallery")))))},editImage:function(e){var t=e.isOpen,r=e.onClose,a=e.image,l=(0,me.useDispatch)(tr),i=fa(a.galleryid).data,o=qa({enabled:"pro"===nr}),s=o.data,c=o.isLoading,u=_a(a.galleryid).data,m=(null==u?void 0:u.find(function(e){return e.pid===a.pid}))||a,d=hl(),g=ea(),p=g.showSuccess,f=g.showError,y=function(e){var t=e.pricelist_id;return 0===t?"0":-1===t?"-1":t&&t>0?t.toString():"0"},h=hr((0,Z.useState)(function(){var e={alttext:"",description:"",tags:""};return"pro"===nr?Sl(Sl({},e),{},{pricelist_id:"0"}):e}),2),_=h[0],b=h[1],v=hr((0,Z.useState)(!1),2),x=v[0],w=v[1],E=hr((0,Z.useState)({}),2),C=E[0],N=E[1];(0,Z.useEffect)(function(){if(t&&m){var e,n={alttext:m.alttext||"",description:m.description||"",tags:(null===(e=m.tags)||void 0===e?void 0:e.join(","))||""},r="pro"===nr?Sl(Sl({},n),{},{pricelist_id:y(m)}):n;b(r),N({})}},[t,m]);var k=function(){var e={};return _.alttext.trim()||(e.alttext=(0,de.__)("Alt text is required for accessibility","nextgen-gallery")),N(e),0===Object.keys(e).length},S=function(){var e=Er(Nr().mark(function e(t){var n,l,i,o;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),k()){e.next=3;break}return e.abrupt("return");case 3:return w(!0),e.prev=4,n=zr(new Set(_.tags.split(",").map(function(e){return e.trim()}).filter(function(e){return e.length>0}))).join(","),l={alttext:_.alttext,description:_.description,tags:n},i="pro"===nr&&"pricelist_id"in _?Sl(Sl({},l),{},{pricelist_id:parseInt(_.pricelist_id,10)}):l,e.next=10,d.mutateAsync({imageId:a.pid,data:i});case 10:p((0,de.__)("Image updated successfully","nextgen-gallery")),setTimeout(function(){r()},100),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(4),o=e.t0 instanceof Error?e.t0.message:(0,de.__)("Failed to update image","nextgen-gallery"),f(o);case 18:return e.prev=18,w(!1),e.finish(18);case 21:case"end":return e.stop()}},e,null,[[4,14,18,21]])}));return function(t){return e.apply(this,arguments)}}(),O=function(e){var t=e.target,r=t.name,a=t.value;b(function(e){return Sl(Sl({},e),{},n({},r,a))}),C[r]&&N(function(e){return Sl(Sl({},e),{},n({},r,""))})};return J().createElement(xr,{isOpen:t,onClose:r,title:(0,de.__)("Edit Image","nextgen-gallery")},J().createElement("form",{onSubmit:S,className:"space-y-4"},J().createElement("div",{className:"flex justify-center mb-6"},J().createElement("div",{className:"relative w-48 h-32 cursor-pointer hover:opacity-80 transition-opacity",onClick:function(e){e.stopPropagation(),e.preventDefault();var t={image:{filename:a.filename,alttext:a.alttext||"",galleryPath:(null==i?void 0:i.path)||"",pid:a.pid,galleryid:a.galleryid},returnTo:{type:"editImage",props:{image:a}}};l.setActiveModal("imageView",t)},title:(0,de.__)("Click to edit image","nextgen-gallery")},J().createElement("img",{src:a.thumb_url||"",alt:a.alttext,className:"w-full h-full object-cover rounded-lg shadow-md"}),J().createElement("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity bg-black bg-opacity-30 rounded-lg"},J().createElement("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"}))))),J().createElement("div",null,J().createElement("label",{htmlFor:"alttext",className:"block text-sm font-medium text-gray-700 mb-1"},(0,de.__)("Alt Text","nextgen-gallery")),J().createElement("input",{type:"text",id:"alttext",name:"alttext",value:_.alttext,onChange:O,className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 ".concat(C.alttext?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-green-500 focus:border-green-500")}),C.alttext&&J().createElement("p",{className:"mt-1 text-sm text-red-600"},C.alttext)),J().createElement("div",null,J().createElement("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1"},(0,de.__)("Description","nextgen-gallery")),J().createElement("textarea",{id:"description",name:"description",value:_.description,onChange:O,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"})),J().createElement("div",null,J().createElement("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700 mb-1"},(0,de.__)("Tags (comma-separated)","nextgen-gallery")),J().createElement("input",{type:"text",id:"tags",name:"tags",value:_.tags,onChange:O,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500"})),"pro"===nr?J().createElement("div",null,J().createElement("label",{htmlFor:"pricelist_id",className:"block text-sm font-medium text-gray-700 mb-1"},(0,de.__)("Pricelist","nextgen-gallery")),J().createElement("select",{id:"pricelist_id",name:"pricelist_id",value:"pricelist_id"in _?_.pricelist_id:"0",onChange:O,disabled:x||c,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",style:{width:"100%",minWidth:"100%"}},c?J().createElement("option",{value:"0"},(0,de.__)("Loading pricelists...","nggallery")):J().createElement(J().Fragment,null,J().createElement("option",{value:"0"},(0,de.__)("Use gallery's pricelist","nggallery")),J().createElement("option",{value:"-1"},(0,de.__)("None (not for sale)","nggallery")),((null==s?void 0:s.pricelists)||[]).map(function(e){return J().createElement("option",{key:e.id,value:e.id.toString()},e.title)}))),J().createElement("p",{className:"text-xs text-gray-500 mt-1"},(0,de.__)("Choose how to handle pricing for this image.","nggallery"))):J().createElement("div",{className:"relative"},J().createElement("div",{className:"opacity-50 pointer-events-none"},J().createElement("label",{htmlFor:"pricelist_id",className:"block text-sm font-medium text-gray-700 mb-1"},(0,de.__)("Pricelist","nextgen-gallery")),J().createElement("select",{id:"pricelist_id",name:"pricelist_id",value:"0",onChange:function(){},disabled:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500",style:{width:"100%",minWidth:"100%"}},J().createElement("option",{value:"0"},(0,de.__)("Use gallery's pricelist","nggallery")),J().createElement("option",{value:"-1"},(0,de.__)("None (not for sale)","nggallery"))),J().createElement("p",{className:"text-xs text-gray-500 mt-1"},(0,de.__)("Choose how to handle pricing for this image.","nggallery"))),J().createElement("div",{className:"absolute inset-0 cursor-pointer flex items-center",onClick:function(){l.setActiveModal("upgrade",{feature:"eCommerce features",onClose:function(){l.setActiveModal("editImage",{image:a})}})},title:(0,de.__)("Requires NextGEN Gallery Pro","nggallery")},J().createElement("span",{className:"sr-only"},(0,de.__)("Upgrade to Pro for eCommerce features","nggallery")))),J().createElement("div",{className:"flex justify-end space-x-3 pt-4"},J().createElement("button",{type:"button",onClick:r,disabled:x,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"},(0,de.__)("Cancel","nextgen-gallery")),J().createElement("button",{type:"submit",disabled:x,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center"},x&&J().createElement(an,{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white"}),x?(0,de.__)("Saving...","nextgen-gallery"):(0,de.__)("Save Changes","nextgen-gallery")))))},upgrade:function(e){var t=e.isOpen,n=e.onClose,r=e.feature,a=void 0===r?"eCommerce features":r,l=a.replace(/\s+(features?)$/i,"").trim(),i="eCommerce"===l?l:l.split(" ").map(function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}).join(" "),o="eCommerce"===l?l:function(e){return e.toLowerCase()}(i),s=/layout/i.test(a),c=ri();return J().createElement(xr,{isOpen:t,onClose:n,title:""},J().createElement("div",{className:"text-center"},J().createElement("div",{className:"flex items-center justify-center w-10 h-10 mx-auto mb-4"},J().createElement(Xn,{className:"w-12 h-12"})),J().createElement("h3",{className:"text-xl font-semibold text-gray-800 mb-4"},s?(0,de.__)("This layout is a Pro Feature","nggallery"):(0,de.__)("".concat(i," is a Pro Feature"),"nggallery")),J().createElement("p",{className:"text-gray-600 text-center mb-0"},s?(0,de.__)("We're sorry, using this layout is not available on your plan.","nggallery"):(0,de.__)("We're sorry, using ".concat(o," is not available on your plan."),"nggallery")),J().createElement("p",{className:"text-gray-600 text-center mb-6"},(0,de.__)("Please upgrade to the Pro plan to unlock this and all our awesome features.","nggallery")),J().createElement("div",{className:"relative mb-8 flex justify-center items-center"},J().createElement(Yn,{className:"absolute -left-0 -top-4 w-12 h-12 flex-shrink-0"}),J().createElement("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center bg-green-500 text-white text-center text-lg py-3 px-6 rounded-lg font-medium hover:bg-green-600 transition-colors"},(0,de.__)("Upgrade to Pro","nggallery"),J().createElement(Kn,{className:"w-4 h-4 ml-2 flex-shrink-0"}))),J().createElement("div",{className:"bg-[#F0FDE6] border-t border-green-100 -mx-4 -mb-4 sm:px-16 px-8 py-4 rounded-b-lg"},J().createElement("div",{className:"flex items-center"},J().createElement(Zn,{className:"w-8 h-8 sm:ml-8 ml-2 mr-2 flex-shrink-0"}),J().createElement("p",{className:"text-gray-700 text-sm text-left"},(0,de.__)("Imagely lite users get","nggallery")," ",J().createElement("strong",{className:"text-green-600"},(0,de.__)("50% off","nggallery"))," ",(0,de.__)("the regular price, automatically applied at checkout!","nggallery"))))))},licenseRequired:function(e){var t=e.isOpen,n=e.onClose,r=e.action,a=void 0===r?"create new galleries":r,l=(0,me.useDispatch)(tr),i=na();return J().createElement(xr,{id:"license-required-modal",isOpen:t,onClose:n,title:""},J().createElement("div",{className:"text-center"},J().createElement("div",{className:"flex items-center justify-center w-16 h-16 mx-auto mb-4 bg-orange-100 rounded-full"},J().createElement(Mn,{className:"w-8 h-8 text-orange-600"})),J().createElement("h3",{className:"text-xl font-semibold text-gray-800 mb-4"},(0,de.__)("License Activation Required","nggallery")),J().createElement("p",{className:"text-gray-600 text-center mb-2"},(0,de.__)("To ".concat(a,", you need an active license."),"nggallery")),J().createElement("p",{className:"text-gray-600 text-center mb-6"},(0,de.__)("Please add or update your license key to continue.","nggallery")),J().createElement("div",{className:"flex flex-col sm:flex-row gap-3 justify-center mb-6"},J().createElement("button",{onClick:function(){if(n(),null!=i&&i.isEmbed){var e,t=null!==(e=window.imagelyApp)&&void 0!==e&&e.adminURL?"".concat(window.imagelyApp.adminURL,"admin.php?page=imagely-settings&tab=license"):"/wp-admin/admin.php?page=imagely-settings&tab=license";window.location.href=t}else l.navigateTo("imagely-settings","license",null)},className:"inline-flex items-center justify-center bg-green-500 text-white text-center text-base py-3 px-6 rounded-lg font-medium hover:bg-green-600 transition-colors"},J().createElement(Rn,{className:"w-5 h-5 mr-2"}),(0,de.__)("Activate License","nggallery")),J().createElement("button",{onClick:n,className:"inline-flex items-center justify-center bg-gray-100 text-gray-700 text-center text-base py-3 px-6 rounded-lg font-medium hover:bg-gray-200 transition-colors"},(0,de.__)("Cancel","nggallery"))),J().createElement("div",{className:"bg-green-50 border-t border-green-100 -mx-4 -mb-4 px-6 py-4 rounded-b-lg"},J().createElement("div",{className:"flex items-start"},J().createElement(Fn,{className:"w-5 h-5 text-green-500 mr-2 flex-shrink-0 mt-0.5"}),J().createElement("p",{className:"text-gray-700 text-sm text-left"},(0,de.__)("Your license key can be found in your account dashboard. If your license has expired, you can renew it to continue using all pro features.","nggallery"))))))},couponForm:function(e){var t=e.isOpen,r=e.onClose,a=e.onSuccess,l=ea(),i=l.showSuccess,o=l.showError,s=te(),c=hr((0,Z.useState)(!1),2),u=c[0],m=c[1],d=hr((0,Z.useState)({}),2),g=d[0],p=d[1],f=hr((0,Z.useState)({couponFor:"",couponCode:"",discountType:"percentage",discountValue:"",startDate:"",endDate:"",usageLimit:""}),2),y=f[0],h=f[1],_=$a();(0,Z.useEffect)(function(){t&&(h({couponFor:"",couponCode:"",discountType:"percentage",discountValue:"",startDate:"",endDate:"",usageLimit:""}),p({}),m(!1))},[t]);var b=function(e){var t=e.target,r=t.name,a=t.value;h(function(e){var t=yl(yl({},e),{},n({},r,a));if("startDate"!==r||a||(t.endDate=""),"startDate"===r&&e.endDate&&a&&e.endDate&&a>e.endDate&&(t.endDate=a),"endDate"===r&&e.startDate&&a&&e.startDate&&a<e.startDate&&(t.startDate=a),"discountValue"===r){var l=String(a).replace(/[^0-9.]/g,"");if("percentage"===e.discountType){var i=parseFloat(l||"0");t.discountValue=String(Math.min(100,isNaN(i)?0:i))}else t.discountValue=l}if("discountType"===r&&"percentage"===a){var o=parseFloat(String(e.discountValue||"0"));isNaN(o)||(t.discountValue=String(Math.min(100,o)))}return t}),g[r]&&p(function(e){return yl(yl({},e),{},n({},r,""))})},v=function(){var e={};return y.couponFor.trim()||(e.couponFor=(0,de.__)("This field is required","nggallery")),y.couponCode.trim()||(e.couponCode=(0,de.__)("This field is required","nggallery")),y.discountValue.trim()||(e.discountValue=(0,de.__)("This field is required","nggallery")),y.startDate&&y.endDate&&y.endDate<y.startDate&&(e.endDate=(0,de.__)("End date cannot be before start date","nggallery")),p(e),0===Object.keys(e).length},x=function(){var e=Er(Nr().mark(function e(t){var n,l,c,u;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),v()){e.next=3;break}return e.abrupt("return");case 3:return m(!0),e.prev=4,l=null===(n=window.imagelyApp)||void 0===n?void 0:n.nonce,c={title:y.couponFor.trim(),id_code:y.couponCode.trim(),discount_type:"percentage"===y.discountType?"percent":"flat",discount_amount:parseFloat(String(y.discountValue).trim()),date_start:y.startDate||void 0,date_end:y.endDate||void 0,usage_limit:y.usageLimit?parseInt(String(y.usageLimit),10):void 0},e.next=9,Fr()({path:"/imagely/v1/coupons",method:"POST",headers:{"X-WP-Nonce":l,"Content-Type":"application/json"},data:c});case 9:s.invalidateQueries({queryKey:["coupons"]}),i((0,de.__)("Coupon created successfully","nggallery")),a&&a(),r(),e.next=20;break;case 15:e.prev=15,e.t0=e.catch(4),u=(0,de.__)("Failed to create coupon","nggallery"),e.t0&&e.t0.message&&(u=e.t0.message),o(u);case 20:return e.prev=20,m(!1),e.finish(20);case 23:case"end":return e.stop()}},e,null,[[4,15,20,23]])}));return function(t){return e.apply(this,arguments)}}();return J().createElement(xr,{isOpen:t,onClose:r,title:(0,de.__)("Create New Coupon","nggallery")},J().createElement("form",{onSubmit:x,className:"space-y-4"},J().createElement("div",null,J().createElement(dl,{type:"text",id:"couponFor",name:"couponFor",value:y.couponFor,onChange:b,label:(0,de.__)("Coupon For","nggallery"),help:(0,de.__)("This is a label for your reference only and is not shown to customers.","nggallery"),tooltipPlacement:"right",placeholder:(0,de.__)("For e.g. Black Friday","nggallery")}),g.couponFor&&J().createElement("p",{className:"mt-1 text-sm text-red-600"},g.couponFor)),J().createElement("div",null,J().createElement(dl,{type:"text",id:"couponCode",name:"couponCode",value:y.couponCode,onChange:b,label:(0,de.__)("Coupon Code","nggallery"),help:(0,de.__)("This field must be unique from every other coupon code","nggallery"),tooltipPlacement:"right",placeholder:(0,de.__)("Enter unique coupon code","nggallery")}),g.couponCode&&J().createElement("p",{className:"mt-1 text-sm text-red-600"},g.couponCode)),J().createElement("div",null,J().createElement(ml,{id:"discountType",name:"discountType",value:y.discountType,onChange:b,label:(0,de.__)("Discount Type","nggallery"),tooltipPlacement:"right"},J().createElement("option",{value:"percentage"},(0,de.__)("Percentage","nggallery")),J().createElement("option",{value:"flat"},(0,de.__)("Flat Amount","nggallery")))),J().createElement("div",null,J().createElement(dl,{type:"number",id:"discountValue",name:"discountValue",value:y.discountValue,onChange:b,label:(0,de.__)("Discount Value","nggallery"),placeholder:(0,de.__)("Enter Discount Amount","nggallery"),prefix:"percentage"===y.discountType?"%":_}),g.discountValue&&J().createElement("p",{className:"mt-1 text-sm text-red-600"},g.discountValue)),J().createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3"},J().createElement("div",null,J().createElement(dl,{type:"date",id:"startDate",name:"startDate",value:y.startDate,onChange:b,label:(0,de.__)("Start Date","nggallery"),placeholder:(0,de.__)("Select Start Date","nggallery"),maxString:y.endDate||void 0})),J().createElement("div",null,J().createElement(dl,{type:"date",id:"endDate",name:"endDate",value:y.endDate,onChange:b,label:(0,de.__)("End Date","nggallery"),placeholder:(0,de.__)("Select End Date","nggallery"),minString:y.startDate||void 0}))),J().createElement("div",null,J().createElement(dl,{type:"number",id:"usageLimit",name:"usageLimit",value:y.usageLimit,onChange:b,label:(0,de.__)("Usage Limit","nggallery"),help:(0,de.__)("How many times this coupon may be used by users before it becomes invalid. An empty or 0 setting allows infinite uses.","nggallery"),tooltipPlacement:"right",placeholder:(0,de.__)("Enter Usage Limit","nggallery")})),J().createElement("div",{className:"flex justify-end space-x-3 pt-4"},J().createElement("button",{type:"button",onClick:r,disabled:u,className:"px-4 py-2 text-sm font-medium text-green-700 bg-white border border-green-500 rounded-md shadow-sm hover:bg-green-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed"},(0,de.__)("Cancel","nggallery")),J().createElement("button",{type:"submit",disabled:u,className:"px-4 py-2 text-sm font-semibold text-white bg-green-500 border border-transparent rounded-md shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed"},u?J().createElement("span",{className:"flex items-center"},J().createElement(an,{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white"}),(0,de.__)("Creating...","nggallery")):(0,de.__)("Create Code","nggallery")))))},couponDetails:function(e){var t,n,r,a,l,i,o,s,c,u,m,d,g,p,f=e.isOpen,y=e.onClose,h=e.data,_=e.onEdit,b=(0,me.useDispatch)(tr),v=Ya(null==h?void 0:h.id),x=v.data,w=v.isLoading,E=v.isFetching,C=v.refetch;(0,Z.useEffect)(function(){f&&null!=h&&h.id&&C()},[f,null==h?void 0:h.id,C]);var N,k,S=x?{couponFor:null!==(t=null==x?void 0:x.coupon_for)&&void 0!==t?t:"",couponCode:null!==(n=null==x?void 0:x.coupon_code)&&void 0!==n?n:"",discountType:null!==(r=null==x?void 0:x.discount_type)&&void 0!==r?r:"",discountValue:String(null!==(a=null!==(l=null==x?void 0:x.discount_value)&&void 0!==l?l:null==x?void 0:x.discount_amount)&&void 0!==a?a:""),startDate:null!==(i=null!==(o=null==x?void 0:x.start_date)&&void 0!==o?o:null==x?void 0:x.date_start)&&void 0!==i?i:"",endDate:null!==(s=null!==(c=null==x?void 0:x.end_date)&&void 0!==c?c:null==x?void 0:x.date_end)&&void 0!==s?s:"",usageLimit:String(null!==(u=null==x?void 0:x.usage_limit)&&void 0!==u?u:"")}:{couponFor:h.couponFor,couponCode:h.couponCode,discountType:h.discountType,discountValue:null!==(m=h.discountValue)&&void 0!==m?m:"",startDate:null!==(d=h.startDate)&&void 0!==d?d:"",endDate:null!==(g=h.endDate)&&void 0!==g?g:"",usageLimit:null!==(p=h.usageLimit)&&void 0!==p?p:""},O=function(e){return(null==e?"":String(e).trim())||"-"},P=function(e){if(!e)return"-";var t=new Date(e),n=String(t.getDate()).padStart(2,"0"),r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],a=t.getFullYear();return"".concat(n," ").concat(r," ").concat(a)},T="percentage"===S.discountType?(0,de.__)("Percentage","nggallery"):"flat"===S.discountType?(0,de.__)("Flat","nggallery"):"-",D=$a(),I=(k=(null!==(N=S.discountValue)&&void 0!==N?N:"").trim())?"percentage"===S.discountType?"".concat(k,"%"):"".concat(D," ").concat(k):"-",j=function(e){var t=(null!==(e=S.usageLimit)&&void 0!==e?e:"").trim();if(!t)return"-";var n=Number(t);return Number.isNaN(n)||0===n?"-":String(n)}();return J().createElement(xr,{isOpen:f,onClose:y,title:(0,de.__)("Coupon Details","nggallery")},J().createElement("div",{className:"absolute top-4 right-12"},J().createElement("button",{type:"button",onClick:function(){_?_():b.setActiveModal("couponEdit",{data:{id:null==h?void 0:h.id,couponFor:S.couponFor,couponCode:S.couponCode,discountType:S.discountType,discountValue:S.discountValue,startDate:S.startDate,endDate:S.endDate,usageLimit:S.usageLimit}})},className:"inline-flex items-center gap-1.5 px-2.5 py-1.5 text-xs border border-gray-300 rounded-md bg-white text-gray-700 hover:bg-gray-50"},J().createElement(qt,{className:"w-4 h-4"}),(0,de.__)("Edit","nggallery"))),w||E?J().createElement("div",{className:"py-10"},J().createElement(ar,{size:"md",color:"gray",text:(0,de.__)("Loading","nggallery")})):J().createElement("div",{className:"space-y-6"},J().createElement("div",{className:"text-center"},J().createElement("div",{className:"text-[11px] tracking-wide text-gray-500"},(0,de.__)("Coupon For","nggallery")),J().createElement("div",{className:"text-lg font-semibold text-gray-900 mt-1"},O(S.couponFor))),J().createElement("div",{className:""},J().createElement("div",{className:"bg-gray-100 border border-gray-200 rounded-md px-5 py-3 text-center w-full"},J().createElement("div",{className:"text-[11px] tracking-wide text-gray-600"},(0,de.__)("Coupon Code","nggallery")),J().createElement("div",{className:"mt-1 text-lg font-bold tracking-wider text-gray-900"},O(S.couponCode)))),J().createElement("div",{className:"grid grid-cols-2 gap-8"},J().createElement("div",{className:"text-center"},J().createElement("div",{className:"text-[11px] tracking-wide text-gray-500"},(0,de.__)("Discount Type","nggallery")),J().createElement("div",{className:"pt-3 text-base font-medium text-gray-900"},T)),J().createElement("div",{className:"text-center"},J().createElement("div",{className:"text-[11px] tracking-wide text-gray-500"},(0,de.__)("Discount Value","nggallery")),J().createElement("div",{className:"pt-3 text-base font-semibold text-gray-900"},I))),J().createElement("div",{className:"border-t border-dashed border-gray-300"}),J().createElement("div",{className:"grid grid-cols-2 gap-8"},J().createElement("div",{className:"text-center"},J().createElement("div",{className:"text-[11px] tracking-wide text-gray-500"},(0,de.__)("Start Date","nggallery")),J().createElement("div",{className:"pt-2 text-base font-medium text-gray-900"},P(S.startDate))),J().createElement("div",{className:"text-center"},J().createElement("div",{className:"text-[11px] tracking-wide text-gray-500"},(0,de.__)("End Date","nggallery")),J().createElement("div",{className:"pt-2 text-base font-medium text-gray-900"},P(S.endDate)))),J().createElement("div",{className:"text-center"},J().createElement("div",{className:"text-[11px] tracking-wide text-gray-500"},(0,de.__)("Usage Limit","nggallery")),J().createElement("div",{className:"pt-1 text-lg text-gray-900 font-semibold"},j))))},couponEdit:function(e){var t=e.isOpen,r=e.onClose,a=e.data,l=e.onSuccess,i=ea(),o=i.showSuccess,s=i.showError,c=function(){var e,t=te();return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var n,r,a,l,i,o,s,c,u;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,a=t.data,l=null===(n=window.imagelyApp)||void 0===n?void 0:n.nonce,i={},"coupon_for"in a&&(i.title=""===a.coupon_for?null:a.coupon_for),"coupon_code"in a&&(i.id_code=""===a.coupon_code?null:a.coupon_code),"discount_type"in a&&(o=a.discount_type,i.discount_type=null==o?null:"percentage"===o?"percent":"flat"===o?"flat":null),"discount_value"in a&&(s=null===a.discount_value||void 0===a.discount_value||""===String(a.discount_value).trim()?null:parseFloat(String(a.discount_value)),i.discount_amount=s),"start_date"in a&&(i.date_start=a.start_date&&""!==String(a.start_date).trim()?a.start_date:null),"end_date"in a&&(i.date_end=a.end_date&&""!==String(a.end_date).trim()?a.end_date:null),"usage_limit"in a&&(c=null===a.usage_limit||void 0===a.usage_limit||""===String(a.usage_limit).trim()?null:parseInt(String(a.usage_limit),10),i.usage_limit=c),e.next=12,Fr()({path:"/imagely/v1/coupons/".concat(r),method:"PUT",headers:{"X-WP-Nonce":l},data:i});case 12:return u=e.sent,e.abrupt("return",Va(u));case 14:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),onSuccess:function(e){t.invalidateQueries({queryKey:["coupons"]}),t.invalidateQueries({queryKey:Xa(e.id)})}})}(),u=Ya(null==a?void 0:a.id).data,m=hr((0,Z.useState)(!1),2),d=m[0],g=m[1],p=hr((0,Z.useState)({}),2),f=p[0],y=p[1],h=$a(),_=hr((0,Z.useState)({couponFor:"",couponCode:"",discountType:"percentage",discountValue:"",startDate:"",endDate:"",usageLimit:""}),2),b=_[0],v=_[1];(0,Z.useEffect)(function(){var e;t&&(v(u?{couponFor:u.coupon_for||"",couponCode:u.coupon_code||"",discountType:u.discount_type||"percentage",discountValue:String((null!==(e=u.discount_value)&&void 0!==e?e:u.discount_amount)||"").replace(/[^0-9.]/g,""),startDate:u.start_date||u.date_start||"",endDate:u.end_date||u.date_end||"",usageLimit:u.usage_limit?String(u.usage_limit).replace(/[^0-9]/g,""):""}:{couponFor:(null==a?void 0:a.couponFor)||"",couponCode:(null==a?void 0:a.couponCode)||"",discountType:(null==a?void 0:a.discountType)||"percentage",discountValue:((null==a?void 0:a.discountValue)||"").replace(/[^0-9.]/g,""),startDate:(null==a?void 0:a.startDate)||"",endDate:(null==a?void 0:a.endDate)||"",usageLimit:((null==a?void 0:a.usageLimit)||"").replace(/[^0-9]/g,"")}),y({}),g(!1))},[t,a,u]);var x=function(e){var t=e.target,r=t.name,a=t.value;v(function(e){var t=pl(pl({},e),{},n({},r,a));if("startDate"!==r||a||(t.endDate=""),"startDate"===r&&e.endDate&&a&&e.endDate&&a>e.endDate&&(t.endDate=a),"endDate"===r&&e.startDate&&a&&e.startDate&&a<e.startDate&&(t.startDate=a),"discountValue"===r){var l=String(a).replace(/[^0-9.]/g,"");if("percentage"===e.discountType){var i=parseFloat(l||"0");t.discountValue=String(Math.min(100,isNaN(i)?0:i))}else t.discountValue=l}if("discountType"===r&&"percentage"===a){var o=parseFloat(String(e.discountValue||"0"));isNaN(o)||(t.discountValue=String(Math.min(100,o)))}return t}),f[r]&&y(function(e){return pl(pl({},e),{},n({},r,""))})},w=function(){var e={};return b.couponFor.trim()||(e.couponFor=(0,de.__)("This field is required","nggallery")),b.couponCode.trim()||(e.couponCode=(0,de.__)("This field is required","nggallery")),b.discountValue.trim()||(e.discountValue=(0,de.__)("This field is required","nggallery")),b.startDate&&b.endDate&&b.endDate<b.startDate&&(e.endDate=(0,de.__)("End date cannot be before start date","nggallery")),y(e),0===Object.keys(e).length},E=function(){var e=Er(Nr().mark(function e(t){var n;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),w()){e.next=3;break}return e.abrupt("return");case 3:return g(!0),e.prev=4,n=(null==a?void 0:a.id)||(null==a?void 0:a.couponId),e.next=8,c.mutateAsync({id:n,data:{coupon_for:b.couponFor,coupon_code:b.couponCode,discount_type:b.discountType,discount_value:b.discountValue,start_date:b.startDate||void 0,end_date:b.endDate||void 0,usage_limit:b.usageLimit||void 0}});case 8:o((0,de.__)("Coupon updated successfully","nggallery")),l&&l(),r(),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),s((null===e.t0||void 0===e.t0?void 0:e.t0.message)||(0,de.__)("Failed to update coupon","nggallery"));case 16:return e.prev=16,g(!1),e.finish(16);case 19:case"end":return e.stop()}},e,null,[[4,13,16,19]])}));return function(t){return e.apply(this,arguments)}}();return J().createElement(xr,{isOpen:t,onClose:r,title:(0,de.__)("Edit Coupon","nggallery")},J().createElement("form",{onSubmit:E,className:"space-y-4"},J().createElement("div",null,J().createElement(dl,{type:"text",id:"couponFor",name:"couponFor",value:b.couponFor,onChange:x,label:(0,de.__)("Coupon For","nggallery"),help:(0,de.__)("This is a label for your reference only and is not shown to customers.","nggallery"),tooltipPlacement:"right",placeholder:(0,de.__)("For e.g. Black Friday","nggallery")}),f.couponFor&&J().createElement("p",{className:"mt-1 text-sm text-red-600"},f.couponFor)),J().createElement("div",null,J().createElement(dl,{type:"text",id:"couponCode",name:"couponCode",value:b.couponCode,onChange:x,label:(0,de.__)("Coupon Code","nggallery"),help:(0,de.__)("This field must be unique from every other coupon code","nggallery"),tooltipPlacement:"right",placeholder:(0,de.__)("Enter unique coupon code","nggallery")}),f.couponCode&&J().createElement("p",{className:"mt-1 text-sm text-red-600"},f.couponCode)),J().createElement("div",null,J().createElement(ml,{id:"discountType",name:"discountType",value:b.discountType,onChange:x,label:(0,de.__)("Discount Type","nggallery"),tooltipPlacement:"right"},J().createElement("option",{value:"percentage"},(0,de.__)("Percentage","nggallery")),J().createElement("option",{value:"flat"},(0,de.__)("Flat Amount","nggallery")))),J().createElement("div",null,J().createElement(dl,{type:"number",id:"discountValue",name:"discountValue",value:b.discountValue,onChange:x,label:(0,de.__)("Discount Value","nggallery"),placeholder:(0,de.__)("Enter Discount Amount","nggallery"),prefix:"percentage"===b.discountType?"%":h}),f.discountValue&&J().createElement("p",{className:"mt-1 text-sm text-red-600"},f.discountValue)),J().createElement("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3"},J().createElement("div",null,J().createElement(dl,{type:"date",id:"startDate",name:"startDate",value:b.startDate,onChange:x,label:(0,de.__)("Start Date","nggallery"),placeholder:(0,de.__)("Select Start Date","nggallery"),maxString:b.endDate||void 0})),J().createElement("div",null,J().createElement(dl,{type:"date",id:"endDate",name:"endDate",value:b.endDate,onChange:x,label:(0,de.__)("End Date","nggallery"),placeholder:(0,de.__)("Select End Date","nggallery"),minString:b.startDate||void 0}))),J().createElement("div",null,J().createElement(dl,{type:"number",id:"usageLimit",name:"usageLimit",value:b.usageLimit,onChange:x,label:(0,de.__)("Usage Limit","nggallery"),help:(0,de.__)("How many times this coupon may be used by users before it becomes invalid. An empty or 0 setting allows infinite uses.","nggallery"),tooltipPlacement:"right",placeholder:(0,de.__)("Enter Usage Limit","nggallery")})),J().createElement("div",{className:"flex justify-end space-x-3 pt-4"},J().createElement("button",{type:"button",onClick:r,disabled:d,className:"px-4 py-2 text-sm font-medium text-green-700 bg-white border border-green-500 rounded-md shadow-sm hover:bg-green-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed"},(0,de.__)("Cancel","nggallery")),J().createElement("button",{type:"submit",disabled:d,className:"px-4 py-2 text-sm font-semibold text-white bg-green-500 border border-transparent rounded-md shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed"},d?J().createElement("span",{className:"flex items-center"},J().createElement(an,{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white"}),(0,de.__)("Saving...","nggallery")):(0,de.__)("SAVE","nggallery")))))},pricelistForm:function(e){var t=e.isOpen,r=e.onClose,a=e.onSuccess,l=ea(),i=l.showSuccess,o=l.showError,s=function(){var e,t=te();return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var n,r,a;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=null===(n=window.imagelyApp)||void 0===n?void 0:n.nonce,e.next=3,Fr()({path:"/imagely/v1/pricelists",method:"POST",headers:{"X-WP-Nonce":r},data:{title:t.title}});case 3:return a=e.sent,e.abrupt("return",Ra(a));case 5:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),onSuccess:function(){t.invalidateQueries({queryKey:["pricelists"]})}})}(),c=hr((0,Z.useState)({}),2),u=c[0],m=c[1],d=hr((0,Z.useState)({title:""}),2),g=d[0],p=d[1];(0,Z.useEffect)(function(){t&&(p({title:""}),m({}))},[t]);var f=function(){var e={};return g.title.trim()||(e.title=(0,de.__)("Pricelist name is required","nggallery")),m(e),0===Object.keys(e).length},y=function(){var e=Er(Nr().mark(function e(t){var n;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),f()){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,s.mutateAsync({title:g.title.trim()});case 6:i((0,de.__)("Pricelist created successfully","nggallery")),a&&a(),r(),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(3),console.error("Failed to create pricelist:",e.t0),n=(0,de.__)("Failed to create pricelist","nggallery"),e.t0&&e.t0.message&&(n=e.t0.message),o(n);case 17:case"end":return e.stop()}},e,null,[[3,11]])}));return function(t){return e.apply(this,arguments)}}(),h=s.isPending;return J().createElement(xr,{isOpen:t,onClose:r,title:(0,de.__)("Add New Pricelist","nggallery")},J().createElement("form",{onSubmit:y,className:"space-y-4"},J().createElement("div",null,J().createElement(dl,{type:"text",id:"title",name:"title",value:g.title,onChange:function(e){var t=e.target,r=t.name,a=t.value;p(function(e){return ei(ei({},e),{},n({},r,a))}),u[r]&&m(function(e){return ei(ei({},e),{},n({},r,""))})},label:(0,de.__)("New Pricelist Name","nggallery"),placeholder:(0,de.__)("For e.g. Wedding Album","nggallery")}),u.title&&J().createElement("p",{className:"mt-1 text-sm text-red-600"},u.title)),J().createElement("div",{className:"flex justify-end space-x-3 pt-4"},J().createElement("button",{type:"button",onClick:r,disabled:h,className:"px-4 py-2 text-sm font-medium text-green-700 bg-white border border-green-500 rounded-md shadow-sm hover:bg-green-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed"},(0,de.__)("Cancel","nggallery")),J().createElement("button",{type:"submit",disabled:h,className:"px-4 py-2 text-sm font-semibold text-white bg-green-500 border border-transparent rounded-md shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed"},h?J().createElement("span",{className:"flex items-center"},J().createElement(an,{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white"}),(0,de.__)("Creating...","nggallery")):(0,de.__)("Create Pricelist","nggallery")))))},deletePricelists:function(e){var t=e.isOpen,n=e.onClose,r=e.pricelistIds,a=e.items,l=e.onConfirm,i=void 0===l?function(){}:l,o=e.title,s=function(){var e,t=te();return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var n,r,a;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=null===(n=window.imagelyApp)||void 0===n?void 0:n.nonce,e.prev=1,e.next=4,Fr()({path:"/imagely/v1/pricelists/".concat(t),method:"DELETE",headers:{"X-WP-Nonce":r},parse:!1});case 4:e.next=12;break;case 6:if(e.prev=6,e.t0=e.catch(1),404!==((null===e.t0||void 0===e.t0?void 0:e.t0.status)||(null===e.t0||void 0===e.t0||null===(a=e.t0.response)||void 0===a?void 0:a.status))){e.next=11;break}return e.abrupt("return");case 11:throw e.t0;case 12:case"end":return e.stop()}},e,null,[[1,6]])})),function(t){return e.apply(this,arguments)}),onSettled:function(){t.invalidateQueries({queryKey:["pricelists"]})}})}(),c=ea(),u=c.showSuccess,m=c.showError,d=c.clearNotifications,g=(0,Z.useMemo)(function(){return a&&a.length?a:r.map(function(e){return{id:e,title:(0,de.__)("Pricelist","nggallery")}})},[r,a]),p=(0,Z.useMemo)(function(){return g.length>0&&g.length<=5?J().createElement("ul",{className:"list-none text-sm text-gray-700 px-4 text-center"},g.map(function(e){return J().createElement("li",{key:e.id},e.title)})):null},[g]),f=function(){var e=Er(Nr().mark(function e(){var t;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==r.length){e.next=2;break}return e.abrupt("return");case 2:return s.reset&&s.reset(),e.prev=3,e.next=6,Promise.all(r.map(function(e){return s.mutateAsync(e)}));case 6:t=1===r.length?(0,de.__)("pricelist","nggallery"):(0,de.__)("pricelists","nggallery"),d(),u((0,de.__)("Successfully deleted ".concat(r.length," ").concat(t),"nggallery")),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),d(),m((0,de.__)("Failed to delete pricelist(s)","nggallery"));case 15:i(),n();case 17:case"end":return e.stop()}},e,null,[[3,11]])}));return function(){return e.apply(this,arguments)}}(),y=J().createElement(An,null);return J().createElement(xr,{isOpen:t,onClose:n},J().createElement("div",{className:"space-y-4"},J().createElement("div",{className:"flex items-center gap-2 justify-center"},J().createElement("div",null,y)),o&&J().createElement("h2",{className:"text-xl font-bold text-center text-gray-900 mt-2"},o),J().createElement("p",{className:"text-sm text-gray-500 text-center"},1===r.length?(0,de.__)("Are you sure you want to delete this pricelist?","nggallery"):(0,de.__)("Are you sure you want to delete the selected pricelists?","nggallery")),p,J().createElement("p",{className:"text-sm text-red-500 text-center"},(0,de.__)("This action cannot be undone.","nggallery")),J().createElement("div",{className:"flex justify-center space-x-3 !mb-4 ".concat(s.isPending?"cursor-wait":"")},J().createElement("button",{type:"button",onClick:n,disabled:s.isPending,className:"px-8 py-2 font-medium text-white bg-green-500 rounded-lg shadow hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},(0,de.__)("Cancel","nggallery")),J().createElement("button",{type:"button",onClick:f,disabled:s.isPending,className:"px-8 py-2 font-bold text-white bg-red-600 border border-transparent rounded-lg shadow hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},s.isPending?J().createElement("span",{className:"flex items-center"},J().createElement(an,{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white"}),(0,de.__)("Deleting...","nggallery")):(0,de.__)("Delete","nggallery")))))},deletePricelistItem:function(e){var t=e.isOpen,n=e.onClose,r=e.itemTitle,a=e.onConfirm,l=e.isBulkDelete,i=void 0!==l&&l,o=e.bulkCount,s=void 0===o?1:o,c=J().createElement(An,null);return J().createElement(xr,{isOpen:t,onClose:n},J().createElement("div",{className:"space-y-4"},J().createElement("div",{className:"flex items-center gap-2 justify-center"},J().createElement("div",null,c)),J().createElement("h2",{className:"text-xl font-bold text-center text-gray-900 mt-2"},i?(0,de.__)("Delete ".concat(s," Products"),"nggallery"):(0,de.__)("Delete Product","nggallery")),J().createElement("p",{className:"text-sm text-gray-500 text-center"},i?(0,de.__)("Are you sure you want to delete these ".concat(s," products?"),"nggallery"):(0,de.__)("Are you sure you want to delete this product?","nggallery")),J().createElement("div",{className:"text-sm text-gray-700 px-4 text-center"},J().createElement("strong",null,r)),J().createElement("p",{className:"text-sm text-red-500 text-center"},(0,de.__)("This action cannot be undone.","nggallery")),J().createElement("div",{className:"flex justify-center space-x-3 !mb-4"},J().createElement("button",{type:"button",onClick:n,className:"px-8 py-2 font-medium text-white bg-green-500 rounded-lg shadow hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors"},(0,de.__)("Cancel","nggallery")),J().createElement("button",{type:"button",onClick:function(){a(),n()},className:"px-8 py-2 font-bold text-white bg-red-600 border border-transparent rounded-lg shadow hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-colors"},i?(0,de.__)("Delete (".concat(s,")"),"nggallery"):(0,de.__)("Delete","nggallery")))))},addProduct:function(e){var t=e.isOpen,n=e.onClose,r=e.pricelistId,a=e.existingItems,l=e.onSuccess,i=(0,me.useDispatch)(tr),o=[{id:"whcc",title:(0,de.__)("WHCC Prints","nggallery"),description:(0,de.__)("Automatically fulfill orders via Printlab","nggallery"),icon:J().createElement(Jn,{className:"w-12 h-12"})},{id:"manual",title:(0,de.__)("Manual Sizes & Orders","nggallery"),description:(0,de.__)("Manually fulfill customer orders","nggallery"),icon:J().createElement($n,{className:"w-12 h-12"})},{id:"digital",title:(0,de.__)("Digital Downloads","nggallery"),description:(0,de.__)("Include print lab options in your Pricelist","nggallery"),icon:J().createElement(er,{className:"w-12 h-12"})}];return J().createElement(xr,{isOpen:t,onClose:n,title:(0,de.__)("Add Product","nggallery")},J().createElement("p",{className:"text-gray-600 text-sm mb-6"},(0,de.__)("Select an option from the following to add pricelist","nggallery")),J().createElement("div",{className:"space-y-4 mb-6"},o.map(function(e){return J().createElement("div",{key:e.id,className:"flex items-center justify-between p-4 rounded-lg"},J().createElement("div",{className:"flex items-center space-x-4"},J().createElement("div",{className:"flex-shrink-0"},J().createElement("div",{className:"w-12 h-12 flex items-center justify-center"},e.icon)),J().createElement("div",null,J().createElement("h4",{className:"text-sm font-medium text-gray-900"},e.title),J().createElement("p",{className:"text-sm text-gray-500 mt-1"},e.description))),J().createElement("div",{className:"flex-shrink-0"},J().createElement("button",{type:"button",onClick:function(){return function(e){n();var t={pricelistId:r,existingItems:a,onBack:function(){i.setActiveModal("addProduct",{pricelistId:r,existingItems:a,onSuccess:l})},onSuccess:function(e){null==l||l(e)}};switch(e.id){case"whcc":i.setActiveModal("whccPrints",t);break;case"manual":i.setActiveModal("manualSizesOrders",t);break;case"digital":i.setActiveModal("digitalDownloads",t)}}(e)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"},(0,de.__)("Add Now","nggallery"))))})))},whccPrints:function(e){var r,a=e.isOpen,l=e.onClose,i=e.pricelistId,o=e.existingItems,s=void 0===o?{}:o,c=e.onBack,u=e.onSuccess,m=hr((0,Z.useState)(""),2),d=m[0],g=m[1],p=hr((0,Z.useState)(!0),2),f=p[0],y=p[1],h=hr((0,Z.useState)({}),2),_=h[0],b=h[1],v=hr((0,Z.useState)(null),2),x=v[0],w=v[1],E=hr((0,Z.useState)(!1),2),C=E[0],N=E[1],k=Ar({queryKey:["whcc-catalog",r],queryFn:function(){return oi(r)},staleTime:9e5,refetchOnWindowFocus:!1,retry:3}),S=k.data,O=k.isLoading,P=k.error,T=function(){var e=te();return Mr({mutationFn:li,onSuccess:function(t,n){if(n.length>0){var r=n[0].pricelist_id;e.invalidateQueries({queryKey:["pricelist-items",r]}),e.invalidateQueries({queryKey:["pricelist-items"]})}}})}(),D=ea().showError,I=$a(),j=(0,Z.useMemo)(function(){if(!S||"object"!==t(S))return[];try{return Object.keys(S).filter(function(e){var t=S[e];return!e.toLowerCase().includes("digital")&&!t.label.toLowerCase().includes("digital")}).map(function(e){var t=S[e];return{id:e,label:(null==t?void 0:t.label)||e}})}catch(e){return console.error("Error creating tabs:",e),[]}},[S])||[];(0,Z.useEffect)(function(){!(j&&j.length>0)||d&&null!=S&&S[d]||g(j[0].id)},[j,S]),(0,Z.useEffect)(function(){a&&s&&b({})},[a,s]);var A=(0,Z.useMemo)(function(){return S&&S[d]&&S[d].products||[]},[S,d]);(0,Z.useEffect)(function(){if(d&&A.length>0&&!_[d]){var e=function(e){var t;if(!s||null==S||!S[e])return[];var n=null===(t=S[e])||void 0===t?void 0:t.ngg_id;return n?(s[n]||[]).filter(function(e){var t;return"ngg_whcc_pricelist"===e.source&&(null===(t=e.source_data)||void 0===t?void 0:t.product_id)}).map(function(e){return String(e.source_data.product_id)}):[]}(d);if(e.length>0){var t=e.filter(function(e){return A.some(function(t){return t.id===e})});if(t.length>0)return void b(function(e){return ci(ci({},e),{},n({},d,t))})}if(["prints","mounted_prints","canvas"].some(function(e){var t;return d.toLowerCase().includes(e)||(null==S||null===(t=S[d])||void 0===t||null===(t=t.label)||void 0===t?void 0:t.toLowerCase().includes(e))}))if(Object.keys(S||{}).every(function(e){var t,n=null==S||null===(t=S[e])||void 0===t?void 0:t.ngg_id;return!n||null==s||!s[n]||0===(s[n]||[]).length})){var r,a=(null===(r=A.filter(function(e){return e.is_default}))||void 0===r?void 0:r.map(function(e){return e.id}))||[];b(function(e){return ci(ci({},e),{},n({},d,a.length>0?a:[]))})}else b(function(e){return ci(ci({},e),{},n({},d,[]))});else b(function(e){return ci(ci({},e),{},n({},d,[]))})}},[d,A,_,s,S]);var L=function(){return Object.entries(_).filter(function(e){var t=hr(e,2);return t[0],t[1].length>0}).map(function(e){var t=hr(e,2);return{tabId:t[0],productIds:t[1]}})},M=function(){return Object.values(_).reduce(function(e,t){return e+t.length},0)},R=function(){return Object.keys(_).some(function(e){return e.toLowerCase().includes("canvas")&&_[e].length>0})},F=function(){var e=Er(Nr().mark(function e(){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==M()&&S){e.next=3;break}return e.abrupt("return");case 3:if(!R()){e.next=6;break}return N(!0),e.abrupt("return");case 6:return e.next=8,z();case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Er(Nr().mark(function e(){var t,n;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==M()&&S){e.next=3;break}return e.abrupt("return");case 3:if(e.prev=3,t=L(),n=t.flatMap(function(e){var t=e.tabId,n=e.productIds,r=null==S?void 0:S[t];return n.map(function(e){var n,a=null===(n=S[t])||void 0===n||null===(n=n.products)||void 0===n?void 0:n.find(function(t){return t.id===e});return a&&r?{pricelist_id:i,title:a.name,cost:a.estimated_raw||0,source:"ngg_whcc_pricelist",category:r.ngg_id,source_data:{product_id:a.id,lab_id:a.lab_id,catalog_id:a.catalog_id,category_id:a.category_id,options:a.options||{},lab_properties:a.lab_properties||{}},sortorder:0,resolution:""}:(console.warn(" Missing product or category for ".concat(e," in ").concat(t)),null)})}).filter(function(e){return null!==e}),0!==n.length){e.next=9;break}return D((0,de.__)("No valid products selected. Please try again.","nggallery")),e.abrupt("return");case 9:u&&u(n),l(),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),D((0,de.__)("Failed to add products to pricelist","nggallery")),console.error("Error creating pricelist items:",e.t0);case 17:case"end":return e.stop()}},e,null,[[3,13]])}));return function(){return e.apply(this,arguments)}}(),B=_[d]||[],q=A.length>0&&B.length===A.length,H=B.length>0,G=function(e){w(function(t){return{key:e,direction:(null==t?void 0:t.key)===e&&"asc"===t.direction?"desc":"asc"}})},U=(0,Z.useMemo)(function(){if(!x)return A;var e=zr(A);return e.sort(function(e,t){var n,r;switch(x.key){case"name":n=e.name.toLowerCase(),r=t.name.toLowerCase();break;case"cost":n=e.cost_raw,r=t.cost_raw;break;case"estimatedCost":n=e.estimated_raw,r=t.estimated_raw;break;default:return 0}return"asc"===x.direction?n<r?-1:n>r?1:0:n>r?-1:n<r?1:0}),e},[A,x]);return(0,Z.useEffect)(function(){var e=function(){y(window.innerWidth>=1280)};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[]),(0,Z.useEffect)(function(){var e=function(e){"Escape"===e.key&&a&&l()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}},[a,l]),a?j?O?J().createElement("div",{className:"fixed inset-0 z-50 overflow-y-auto",role:"dialog","aria-modal":"true"},J().createElement("div",{className:"fixed inset-0 bg-black bg-opacity-30 transition-opacity duration-300 ease-in-out",onClick:l}),J().createElement("div",{className:"relative flex min-h-screen items-center justify-center p-4"},J().createElement("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-2xl transition-all duration-300 ease-in-out",style:{width:"1100px",maxWidth:"90vw",marginLeft:f?"160px":"0"}},J().createElement("div",{className:"p-8"},J().createElement(ar,{size:"lg",color:"green",text:(0,de.__)("Loading WHCC Catalog...","nggallery")}))))):P?J().createElement("div",{className:"fixed inset-0 z-50 overflow-y-auto",role:"dialog","aria-modal":"true"},J().createElement("div",{className:"fixed inset-0 bg-black bg-opacity-30 transition-opacity duration-300 ease-in-out",onClick:l}),J().createElement("div",{className:"relative flex min-h-screen items-center justify-center p-4"},J().createElement("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-2xl transition-all duration-300 ease-in-out",style:{width:"1100px",maxWidth:"90vw",marginLeft:f?"160px":"0"}},J().createElement("div",{className:"p-8 text-center"},J().createElement("div",{className:"text-red-500 mb-4"},J().createElement(mi,{className:"w-12 h-12 mx-auto"})),J().createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},(0,de.__)("Failed to Load WHCC Catalog","nggallery")),J().createElement("p",{className:"text-sm text-gray-500 mb-4"},(0,de.__)("Unable to fetch the WHCC product catalog. Please try again later.","nggallery")),J().createElement("button",{onClick:l,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"},(0,de.__)("Close","nggallery")))))):j&&0!==j.length?J().createElement(J().Fragment,null,J().createElement("div",{className:"fixed inset-0 z-50 overflow-y-auto",role:"dialog","aria-modal":"true"},J().createElement("div",{className:"fixed inset-0 bg-black bg-opacity-30 transition-opacity duration-300 ease-in-out",onClick:l}),J().createElement("div",{className:"relative flex min-h-screen items-center justify-center p-4"},J().createElement("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-2xl transition-all duration-300 ease-in-out",style:{width:"1100px",maxWidth:"90vw",marginLeft:f?"160px":"0"}},J().createElement("div",{className:"relative bg-white px-6 py-4 border-b border-gray-200"},J().createElement("div",{className:"flex items-center justify-between"},J().createElement("div",{className:"flex items-center space-x-3"},c&&J().createElement("button",{onClick:c,className:"p-1 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500","aria-label":(0,de.__)("Go back","nggallery")},J().createElement(Vn,{className:"w-5 h-5"})),J().createElement("h3",{className:"text-lg font-medium text-gray-900"},(0,de.__)("WHCC Prints","nggallery"))),J().createElement("button",{onClick:l,className:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":(0,de.__)("Close modal","nggallery")},J().createElement(mi,{className:"h-6 w-6"})))),J().createElement("div",{className:"p-6"},J().createElement("div",{className:"border-b border-gray-200 mb-6"},J().createElement("nav",{className:"-mb-px flex overflow-x-auto"},j&&j.map(function(e){return J().createElement("button",{key:e.id,onClick:function(){return g(e.id)},className:"py-3 px-3 border-b-2 font-medium text-sm text-center whitespace-nowrap flex-shrink-0 min-w-[120px] sm:flex-1 ".concat(d===e.id?"border-green-500 text-green-600 bg-green-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50")},e.label)}))),J().createElement("div",{className:"whcc-modal-scroll max-h-80 overflow-auto"},J().createElement("table",{className:"min-w-full table-fixed"},J().createElement("thead",{className:"bg-gray-50 sticky top-0"},J().createElement("tr",null,J().createElement("th",{className:"w-12 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},J().createElement("input",{type:"checkbox",className:"rounded border-gray-300",checked:q,onChange:function(e){return t=e.target.checked,void b(function(e){return ci(ci({},e),{},n({},d,t?A.map(function(e){return e.id}):[]))});var t},ref:function(e){e&&(e.indeterminate=H&&!q)},"aria-label":(0,de.__)("Select all products","nggallery")})),J().createElement("th",{className:"w-[65%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:function(){return G("name")}},J().createElement("div",{className:"flex items-center space-x-1"},J().createElement("span",null,(0,de.__)("Product","nggallery")),"name"===(null==x?void 0:x.key)&&J().createElement("span",null,"asc"===x.direction?"":""))),J().createElement("th",{className:"w-[17.5%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:function(){return G("cost")}},J().createElement("div",{className:"flex items-center space-x-1"},J().createElement("span",null,(0,de.__)("Cost","nggallery")),"cost"===(null==x?void 0:x.key)&&J().createElement("span",null,"asc"===x.direction?"":""))),J().createElement("th",{className:"w-[17.5%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:function(){return G("estimatedCost")}},J().createElement("div",{className:"flex items-center space-x-1"},J().createElement("span",null,(0,de.__)("Estimated Cost","nggallery")),"estimatedCost"===(null==x?void 0:x.key)&&J().createElement("span",null,"asc"===x.direction?"":""))))),J().createElement("tbody",{className:"bg-white"},O?J().createElement("tr",null,J().createElement("td",{colSpan:4,className:"px-4 py-8"},J().createElement(ar,{size:"md",color:"green",text:(0,de.__)("Loading products...","nggallery")}))):0===U.length?J().createElement("tr",null,J().createElement("td",{colSpan:4,className:"px-4 py-8 text-center text-gray-500"},(0,de.__)("No products available for this category","nggallery"))):U.map(function(e){return J().createElement("tr",{key:e.id,className:"border-b hover:bg-gray-50"},J().createElement("td",{className:"w-12 px-4 py-3"},J().createElement("input",{type:"checkbox",className:"rounded border-gray-300",checked:B.includes(e.id),onChange:function(){return t=e.id,void b(function(e){var r=e[d]||[],a=r.includes(t)?r.filter(function(e){return e!==t}):[].concat(zr(r),[t]);return ci(ci({},e),{},n({},d,a))});var t},"aria-label":"Select ".concat(e.name)})),J().createElement("td",{className:"w-[65%] px-4 py-3 text-sm text-gray-900"},e.name),J().createElement("td",{className:"w-[17.5%] px-4 py-3 text-sm text-gray-900"},ui(e.cost,e.cost_raw,"$")),J().createElement("td",{className:"w-[17.5%] px-4 py-3 text-sm text-gray-900"},ui(e.estimatedCost,e.estimated_raw,I)))}))))),J().createElement("div",{className:"px-6 py-4 flex justify-end space-x-3"},J().createElement("button",{onClick:l,disabled:T.isPending,className:"px-4 py-2 text-sm font-medium text-green-700 bg-white border border-green-600 rounded-md shadow-sm hover:bg-green-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed"},(0,de.__)("Cancel","nggallery")),J().createElement("button",{onClick:F,disabled:0===M()||T.isPending,className:"px-4 py-2 text-sm font-semibold text-white bg-green-600 border border-transparent rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed"},T.isPending?J().createElement("span",{className:"flex items-center"},J().createElement(ar,{size:"sm",color:"gray",className:"mr-2 !border-white",centerInContainer:!1}),(0,de.__)("Adding...","nggallery")):(0,de.__)("Add Product","nggallery")))))),C&&J().createElement("div",{className:"fixed inset-0 z-[60] overflow-y-auto"},J().createElement("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},J().createElement("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"}),J().createElement("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},""),J().createElement("div",{className:"relative inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},J().createElement("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},J().createElement("div",{className:"sm:flex sm:items-start"},J().createElement("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 sm:mx-0 sm:h-10 sm:w-10"},J().createElement("svg",{className:"h-6 w-6 text-yellow-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true"},J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.502 0L4.732 8.5C3.962 10.333 4.924 12 6.464 12H20.5"}))),J().createElement("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},J().createElement("h3",{className:"text-lg leading-6 font-medium text-gray-900",id:"modal-title"},(0,de.__)("Canvas Product Warning","nggallery")),J().createElement("div",{className:"mt-2"},J().createElement("p",{className:"text-sm text-gray-500"},(0,de.__)("You are adding a Canvas to a pricelist. Please be aware that when printing a Canvas, the edges of the photo (between 1 to 3 inches) will wrap around the side of the product.","nggallery")))))),J().createElement("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},J().createElement("button",{type:"button",onClick:Er(Nr().mark(function e(){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return N(!1),e.next=3,z();case 3:case"end":return e.stop()}},e)})),className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 sm:ml-3 sm:w-auto sm:text-sm"},(0,de.__)("Continue","nggallery")),J().createElement("button",{type:"button",onClick:function(){return N(!1)},className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},(0,de.__)("Cancel","nggallery"))))))):J().createElement("div",{className:"fixed inset-0 z-50 overflow-y-auto",role:"dialog","aria-modal":"true"},J().createElement("div",{className:"fixed inset-0 bg-black bg-opacity-30 transition-opacity duration-300 ease-in-out",onClick:l}),J().createElement("div",{className:"relative flex min-h-screen items-center justify-center p-4"},J().createElement("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-2xl transition-all duration-300 ease-in-out p-8"},J().createElement("div",{className:"text-center"},J().createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},(0,de.__)("No WHCC Products Available","nggallery")),J().createElement("p",{className:"text-sm text-gray-500 mb-4"},(0,de.__)("No WHCC product categories are currently available.","nggallery")),J().createElement("button",{onClick:l,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},(0,de.__)("Close","nggallery")))))):(console.error("WHCCPrintsModal: tabs is undefined, returning early"),null):null},manualSizesOrders:function(e){var t=e.isOpen,r=e.onClose,a=e.pricelistId,l=e.onBack,i=e.onSuccess,o=hr((0,Z.useState)({productName:"",price:"",category:"prints"}),2),s=o[0],c=o[1],u=hr((0,Z.useState)(!1),2),m=u[0],d=u[1],g=hr((0,Z.useState)({productName:"",price:""}),2),p=g[0],f=g[1],y=ea().showError,h=$a(),_=function(e){return{prints:"ngg_category_prints",canvas:"ngg_category_canvas",mounted_prints:"ngg_category_mounted_prints",metal_prints:"metal_prints",acrylic_prints:"acrylic_prints",wood_prints:"wood_prints",bamboo_panels:"bamboo_panels"}[e]||e},b=[{value:"prints",label:(0,de.__)("Prints","nggallery")},{value:"canvas",label:(0,de.__)("Canvas","nggallery")},{value:"mounted_prints",label:(0,de.__)("Mounted Prints","nggallery")},{value:"metal_prints",label:(0,de.__)("Metal Prints","nggallery")},{value:"acrylic_prints",label:(0,de.__)("Acrylic Prints","nggallery")},{value:"wood_prints",label:(0,de.__)("Wood Prints","nggallery")},{value:"bamboo_panels",label:(0,de.__)("Bamboo Panels","nggallery")}],v=function(e,t){switch(e){case"productName":return t.trim()?"":(0,de.__)("Product name is required","nggallery");case"price":return t?parseFloat(t)<0?(0,de.__)("Please enter a valid price","nggallery"):"":(0,de.__)("Price is required","nggallery");default:return""}},x=function(e,t){c(function(r){return Jl(Jl({},r),{},n({},e,t))}),p[e]&&f(function(t){return Jl(Jl({},t),{},n({},e,""))})},w=function(){var e=Er(Nr().mark(function e(){var t,n;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={productName:v("productName",s.productName),price:v("price",s.price)},f(t),!Object.values(t).some(function(e){return e})){e.next=4;break}return e.abrupt("return");case 4:d(!0);try{n={id:-1e6*Math.random(),pricelist_id:a,title:s.productName,cost:0,price:parseFloat(s.price),source:"manual",category:_(s.category),sortorder:0,source_data:{manual_entry:!0,created_at:(new Date).toISOString(),catalog_id:null,product_id:null}},i&&i([n]),r()}catch(e){y((0,de.__)("Failed to add product to pricelist","nggallery")),console.error("Error creating manual pricelist item:",e)}finally{d(!1)}case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return J().createElement("div",{className:"relative"},J().createElement(xr,{isOpen:t,onClose:function(){}},J().createElement("div",{className:"absolute top-0 left-0 right-0 z-10 bg-white border-b"},J().createElement("div",{className:"flex items-center justify-between p-4"},J().createElement("div",{className:"flex items-center gap-3"},J().createElement("button",{onClick:function(){null==l||l()},className:"flex items-center text-gray-600 hover:text-gray-800"},J().createElement(Vn,{className:"w-4 h-4"})),J().createElement("h2",{className:"text-lg font-medium text-gray-900"},(0,de.__)("Manual Sizes & Orders","nggallery"))),J().createElement("button",{onClick:r,className:"text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2","aria-label":"Close modal"},J().createElement("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))))),J().createElement("div",{className:"p-4"},J().createElement("div",{className:"space-y-6"},J().createElement("div",null,J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},(0,de.__)("New Product Name","nggallery")),J().createElement("input",{type:"text",value:s.productName,onChange:function(e){return x("productName",e.target.value)},placeholder:(0,de.__)('8x10" Canvas or 4x6" Glossy',"nggallery"),className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(p.productName?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300")}),p.productName&&J().createElement("p",{className:"mt-1 text-sm text-red-600"},p.productName)),J().createElement("div",null,J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},(0,de.__)("Price","nggallery")),J().createElement("div",{className:"relative"},J().createElement("span",{className:"absolute ".concat(nl(h)," top-1/2 transform -translate-y-1/2 text-gray-500 text-sm")},h),J().createElement("input",{type:"number",min:"0",step:"1",value:s.price,onChange:function(e){return x("price",e.target.value)},onBlur:function(){if(s.price){var e=parseFloat(s.price);isNaN(e)||c(function(t){return Jl(Jl({},t),{},{price:e.toFixed(2)})})}},placeholder:(0,de.__)("0.00","nggallery"),className:"w-full ".concat(tl(h).left," ").concat(tl(h).right," py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ").concat(p.price?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300")})),p.price&&J().createElement("p",{className:"mt-1 text-sm text-red-600"},p.price)),J().createElement("div",{className:"w-full"},J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},(0,de.__)("Category","nggallery")),J().createElement("div",{className:"w-full"},J().createElement("select",{value:s.category,onChange:function(e){return x("category",e.target.value)},className:"w-full block px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",style:{width:"100%",minWidth:"100%",maxWidth:"100%"}},b.map(function(e){return J().createElement("option",{key:e.value,value:e.value},e.label)})))),J().createElement("div",{className:"flex items-center justify-end gap-3 mt-8"},J().createElement("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"},(0,de.__)("Cancel","nggallery")),J().createElement("button",{type:"button",onClick:w,disabled:m,className:"px-4 py-2 text-sm font-medium text-white bg-green-500 border border-transparent rounded-md shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed"},m?(0,de.__)("Adding...","nggallery"):(0,de.__)("Add Product","nggallery")))))))},digitalDownloads:function(e){var t=e.isOpen,r=e.onClose,a=e.pricelistId,l=e.onBack,i=e.onSuccess,o=hr((0,Z.useState)({productName:"",price:"",maxDimension:""}),2),s=o[0],c=o[1],u=hr((0,Z.useState)(!1),2),m=u[0],d=u[1],g=hr((0,Z.useState)({productName:"",price:"",maxDimension:""}),2),p=g[0],f=g[1],y=ea().showError,h=$a(),_=function(e,t){switch(e){case"productName":return t.trim()?"":(0,de.__)("Product name is required","nggallery");case"price":return t?parseFloat(t)<0?(0,de.__)("Please enter a valid price","nggallery"):"":(0,de.__)("Price is required","nggallery");case"maxDimension":return t&&(isNaN(parseInt(t))||parseInt(t)<0)?(0,de.__)("Please enter a valid maximum dimension","nggallery"):"";default:return""}},b=function(e,t){c(function(r){return Nl(Nl({},r),{},n({},e,t))}),p[e]&&f(function(t){return Nl(Nl({},t),{},n({},e,""))})},v=function(){var e=Er(Nr().mark(function e(){var t,n,l;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={productName:_("productName",s.productName),price:_("price",s.price),maxDimension:_("maxDimension",s.maxDimension)},f(t),!Object.values(t).some(function(e){return e})){e.next=4;break}return e.abrupt("return");case 4:n=s.maxDimension?parseInt(s.maxDimension):0,d(!0);try{l={id:-1e6*Math.random(),pricelist_id:a,title:s.productName,cost:0,price:parseFloat(s.price),source:"ngg_digital_downloads",category:"ngg_category_digital_downloads",resolution:n,sortorder:0,source_data:{resolution_type:"custom",max_dimension:n,digital_download:!0,catalog_id:null,product_id:null}},i&&i([l]),r()}catch(e){y((0,de.__)("Failed to add digital download product to pricelist","nggallery")),console.error("Error creating digital download pricelist item:",e)}finally{d(!1)}case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return J().createElement("div",{className:"relative"},J().createElement(xr,{isOpen:t,onClose:function(){}},J().createElement("div",{className:"absolute top-0 left-0 right-0 z-10 bg-white border-b"},J().createElement("div",{className:"flex items-center justify-between p-4"},J().createElement("div",{className:"flex items-center gap-3"},J().createElement("button",{onClick:function(){null==l||l()},className:"flex items-center text-gray-600 hover:text-gray-800"},J().createElement(Vn,{className:"w-4 h-4"})),J().createElement("h2",{className:"text-lg font-medium text-gray-900"},(0,de.__)("Digital Downloads","nggallery"))),J().createElement("button",{onClick:r,className:"text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2","aria-label":"Close modal"},J().createElement("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))))),J().createElement("div",{className:"p-4"},J().createElement("div",{className:"space-y-6"},J().createElement("div",null,J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},(0,de.__)("New Product Name","nggallery")),J().createElement("input",{type:"text",value:s.productName,onChange:function(e){return b("productName",e.target.value)},placeholder:(0,de.__)("Low, Medium, or High Resolution","nggallery"),className:"w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(p.productName?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300")}),p.productName&&J().createElement("p",{className:"mt-1 text-sm text-red-600"},p.productName)),J().createElement("div",null,J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},(0,de.__)("Price","nggallery")),J().createElement("div",{className:"relative"},J().createElement("span",{className:"absolute ".concat(nl(h)," top-1/2 transform -translate-y-1/2 text-gray-500 text-sm")},h),J().createElement("input",{type:"number",min:"0",step:"1",value:s.price,onChange:function(e){return b("price",e.target.value)},onBlur:function(){if(s.price){var e=parseFloat(s.price);isNaN(e)||c(function(t){return Nl(Nl({},t),{},{price:e.toFixed(2)})})}},placeholder:(0,de.__)("0.00","nggallery"),className:"w-full ".concat(tl(h).left," ").concat(tl(h).right," py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ").concat(p.price?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300")})),p.price&&J().createElement("p",{className:"mt-1 text-sm text-red-600"},p.price)),J().createElement("div",null,J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},(0,de.__)("Longest Image Dimension","nggallery")),J().createElement("div",{className:"relative"},J().createElement("input",{type:"number",min:"0",value:s.maxDimension,onChange:function(e){return b("maxDimension",e.target.value)},placeholder:(0,de.__)("Enter 0 for maximum","nggallery"),className:"w-full pl-3 pr-8 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(p.maxDimension?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300")}),J().createElement("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm"},"px")),p.maxDimension&&J().createElement("p",{className:"mt-1 text-sm text-red-600"},p.maxDimension)),J().createElement("div",{className:"flex items-center justify-end gap-3 mt-8"},J().createElement("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"},(0,de.__)("Cancel","nggallery")),J().createElement("button",{type:"button",onClick:v,disabled:m,className:"px-4 py-2 text-sm font-medium text-white bg-green-500 border border-transparent rounded-md shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed"},m?(0,de.__)("Adding...","nggallery"):(0,de.__)("Add Product","nggallery")))))))},bulkMarkup:function(e){var t=e.isOpen,r=e.onClose,a=e.pricelistId,l=e.currentSettings,i=e.onSuccess,o=hr((0,Z.useState)({markupPercent:300,rounding:"zero"}),2),s=o[0],c=o[1],u=Ba(a).data;(0,Z.useEffect)(function(){if(t){var e=l||(null==u?void 0:u.settings),n=(null==e?void 0:e.bulk_markup_amount)||300,r=(null==e?void 0:e.bulk_markup_rounding)||"zero";c({markupPercent:Number(n),rounding:r})}},[t,l,u]);var m=function(e,t){c(function(r){return Ga(Ga({},r),{},n({},e,t))})};return J().createElement(xr,{isOpen:t,onClose:r,title:(0,de.__)("Apply Markup to All Products","nggallery")},J().createElement("form",{onSubmit:function(e){e.preventDefault();var t="string"==typeof s.markupPercent?parseInt(s.markupPercent):s.markupPercent;!a||isNaN(t)||t<0||""===s.markupPercent||(null==i||i({markupPercent:t,rounding:s.rounding}),r())},className:"space-y-4"},J().createElement("div",null,J().createElement("label",{htmlFor:"markup-percent",className:"block text-sm font-medium text-gray-700 mb-1"},(0,de.__)("Markup Percent","nggallery")),J().createElement("input",{id:"markup-percent",type:"number",min:"0",max:"10000",step:"1",value:s.markupPercent,onChange:function(e){return m("markupPercent",""===e.target.value?"":parseInt(e.target.value)||0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"400",required:!0})),J().createElement("div",null,J().createElement("label",{htmlFor:"rounding",className:"block text-sm font-medium text-gray-700 mb-1"},(0,de.__)("Round prices up to","nggallery")),J().createElement("select",{id:"rounding",value:s.rounding,onChange:function(e){return m("rounding",e.target.value)},className:"w-full block px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",style:{width:"100%",minWidth:"100%",maxWidth:"100%"}},[{value:"zero",label:".00"},{value:"cent",label:".99"},{value:"none",label:"No Rounding"}].map(function(e){return J().createElement("option",{key:e.value,value:e.value},e.label)}))),J().createElement("div",{className:"flex items-center justify-end gap-3 mt-8"},J().createElement("button",{type:"button",onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"},(0,de.__)("Cancel","nggallery")),J().createElement("button",{type:"submit",disabled:""===s.markupPercent||"number"==typeof s.markupPercent&&s.markupPercent<0,className:"px-4 py-2 text-sm font-medium text-white bg-green-500 border border-transparent rounded-md shadow-sm hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed"},(0,de.__)("Apply to All","nggallery")))))}};const gi=function(){var e=(0,me.useDispatch)(tr),t=(0,me.useSelect)(function(e){return e(tr).getActiveModal()},[]);if(!t)return null;var n=t.type,r=t.props,a=di[n];if(!a)return null;var l=null==r?void 0:r.onClose;return J().createElement(a,ge({},r,{isOpen:!0,onClose:function(){if(l?l():e.setActiveModal(null),"imageUploader"===n)try{var t,r,a=document.querySelector("#toplevel_page_imagely");if(!a)return;var i=a.querySelector('ul.wp-submenu-wrap li a[href*="create_gallery=1"].current');if(!i)return;i.classList.remove("current"),null===(t=i.parentElement)||void 0===t||t.classList.remove("current");var o=a.querySelector('ul.wp-submenu-wrap li a[href*="page=imagely"]:not([href*="create_gallery"])');null==o||o.classList.add("current"),null==o||null===(r=o.parentElement)||void 0===r||r.classList.add("current")}catch(e){}}}))},pi=function(e){var t,n,r,a,l=e.notification,i=e.onDismiss,o=e.showDismissButton,s=void 0===o||o;return J().createElement("div",{className:"p-3 sm:p-4 hover:bg-gray-50"},J().createElement("div",{className:"flex items-start space-x-2 sm:space-x-3"},J().createElement("div",{className:"flex-shrink-0 mt-1 text-gray-400"},function(e){switch(e){case"info":return J().createElement(Ut,{className:"w-5 h-5"});case"percent":return J().createElement(Wt,{className:"w-5 h-5"});case"check":return J().createElement(Vt,{className:"w-5 h-5"});default:return J().createElement(Kt,{className:"w-5 h-5"})}}(l.icon)),J().createElement("div",{className:"flex-1 min-w-0"},J().createElement("h4",{className:"text-xs sm:text-sm font-medium text-gray-900 mb-1"},l.title),J().createElement("p",{className:"text-xs sm:text-sm text-gray-700 mb-2 sm:mb-3"},(r=l.content,(a=document.createElement("div")).innerHTML=r,a.textContent||a.innerText||"")),J().createElement("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-3"},J().createElement("div",{className:"flex flex-wrap gap-2"},(null===(t=l.btns)||void 0===t?void 0:t.main)&&J().createElement("a",{href:l.btns.main.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-2 sm:px-3 py-1 border border-transparent text-xs font-medium rounded text-white bg-black hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"},l.btns.main.text),(null===(n=l.btns)||void 0===n?void 0:n.alt)&&J().createElement("a",{href:l.btns.alt.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-2 sm:px-3 py-1 border border-gray-300 text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"},l.btns.alt.text)),s&&J().createElement("button",{onClick:function(){i(l.id)},className:"text-xs text-gray-500 hover:text-gray-700 self-start sm:self-center"},(0,de.__)("Dismiss","nggallery"))))))},fi=function(){var e=(0,me.useDispatch)(),t=hr((0,Z.useState)(!1),2),n=t[0],r=t[1],a=(0,me.useSelect)(function(e){var t,n,r=e(tr).getInboxState();return{isOpen:(null==r?void 0:r.isOpen)||!1,activeNotifications:(null==r?void 0:r.active)||[],dismissedNotifications:(null==r?void 0:r.dismissed)||[],activeCounts:(null==r||null===(t=r.counts)||void 0===t?void 0:t.active)||0,dismissedCounts:(null==r||null===(n=r.counts)||void 0===n?void 0:n.dismissed)||0,loading:(null==r?void 0:r.loading)||!1,error:(null==r?void 0:r.error)||null}},[]),l=a.isOpen,i=a.activeNotifications,o=a.dismissedNotifications,s=a.activeCounts,c=a.dismissedCounts,u=a.loading,m=a.error;(0,Z.useEffect)(function(){var e,t;e=s,(t=document.querySelector(".ngg-menu-notification-indicator"))&&(e>0?(t.textContent=e.toString(),t.style.display=""):t.style.display="none")},[s]);var d=function(){e(tr).closeInboxPanel()},g=function(t){e(tr).dismissInboxNotification(t)};if(J().useEffect(function(){var e=function(e){"Escape"===e.key&&l&&d()};if(l)return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}},[l]),!l)return null;var p=n?o:i,f=n?c:s;return J().createElement(J().Fragment,null,J().createElement("div",{className:"fixed inset-0 bg-black bg-opacity-30 z-40",onClick:function(e){e.target===e.currentTarget&&d()}}),J().createElement("div",{className:"fixed top-10 md:top-6 right-0 bottom-0 w-full max-w-xs sm:w-80 md:w-96 lg:w-[28rem] xl:w-[32rem] 2xl:w-[36rem] bg-white shadow-lg border-l border-gray-200 z-50 flex flex-col"},J().createElement("div",{className:"bg-gray-100 border-b border-gray-200 p-3 sm:p-4 flex items-start sm:items-center justify-between"},J().createElement("div",{className:"flex-1 min-w-0 pr-2"},n?J().createElement("h3",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate"},(0,de.__)("Notifications","nggallery")," (",f,")"):J().createElement("h3",{className:"text-sm sm:text-base md:text-lg font-semibold text-gray-900 truncate"},(0,de.__)("New Notifications","nggallery")," (",f,")"),J().createElement("button",{onClick:function(){r(!n)},className:"text-xs sm:text-sm text-blue-600 hover:text-blue-700 mt-1 block"},n?(0,de.__)("Active Notifications","nggallery"):(0,de.__)("Dismissed Notifications","nggallery"))),J().createElement("button",{onClick:d,className:"p-1 sm:p-2 hover:bg-gray-200 rounded-full flex-shrink-0","aria-label":(0,de.__)("Close notifications","nggallery")},J().createElement(zt,{className:"w-5 h-5 sm:w-6 sm:h-6"}))),J().createElement("div",{className:"flex-1 overflow-y-auto"},u?J().createElement("div",{className:"flex items-center justify-center h-32"},J().createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})):m?J().createElement("div",{className:"p-3 sm:p-4 text-red-600 text-sm sm:text-base"},(0,de.__)("Error loading notifications:","nggallery")," ",m):0===p.length?J().createElement("div",{className:"p-3 sm:p-4 text-gray-500 text-center text-sm sm:text-base"},n?(0,de.__)("No dismissed notifications","nggallery"):(0,de.__)("No new notifications","nggallery")):J().createElement("div",{className:"divide-y divide-gray-200"},p.map(function(e){return J().createElement(pi,{key:e.id,notification:e,onDismiss:g,showDismissButton:!n})}))),!n&&s>0&&J().createElement("div",{className:"border-t border-gray-200 p-3 sm:p-4"},J().createElement("button",{onClick:function(){e(tr).dismissAllInboxNotifications()},className:"text-blue-600 hover:text-blue-700 text-xs sm:text-sm font-medium"},(0,de.__)("Dismiss all","nggallery")))))},yi=function(){var e,t=ea(),n=t.showSuccess,r=t.showError,a=hr((0,Z.useState)({}),2),l=a[0],i=a[1],o=hr((0,Z.useState)(!0),2),s=o[0],c=o[1],u=hr((0,Z.useState)(new Set),2),m=u[0],d=u[1],g=[{name:(0,de.__)("OptinMonster","nggallery"),description:(0,de.__)("Instantly grow your email list with powerful exit-intent technology. Convert abandoning visitors into subscribers and customers.","nggallery"),icon:"plugin-om.png",url:"https://optinmonster.com/?utm_source=imagelylite&utm_medium=link&utm_campaign=About%20Imagely",basename:"optinmonster/optin-monster-wp-api.php",downloadUrl:"https://downloads.wordpress.org/plugin/optinmonster.zip"},{name:(0,de.__)("MonsterInsights","nggallery"),description:(0,de.__)("The leading WordPress analytics plugin that shows you how people find and use your website, so you can make data driven decisions to grow your business. Properly set up Google Analytics without writing code.","nggallery"),icon:"plugin-mi.png",url:"https://monsterinsights.com/?utm_source=imagelylite&utm_medium=link&utm_campaign=About%20Imagely",basename:"google-analytics-for-wordpress/googleanalytics.php",downloadUrl:"https://downloads.wordpress.org/plugin/google-analytics-for-wordpress.zip"},{name:(0,de.__)("WP Mail SMTP","nggallery"),description:(0,de.__)("Improve your WordPress email deliverability and make sure that your website emails reach user's inbox with the #1 SMTP plugin for WordPress. Over 3 million websites use it to fix WordPress email issues.","nggallery"),icon:"plugin-smtp.png",url:"https://wpmailsmtp.com/?utm_source=imagelylite&utm_medium=link&utm_campaign=About%20Imagely",basename:"wp-mail-smtp/wp_mail_smtp.php",downloadUrl:"https://downloads.wordpress.org/plugin/wp-mail-smtp.zip"},{name:(0,de.__)("AIOSEO","nggallery"),description:(0,de.__)("The original WordPress SEO plugin and toolkit that improves your website's search rankings. Comes with all the SEO features like Local SEO, WooCommerce SEO, sitemaps, SEO optimizer, schema, and more.","nggallery"),icon:"plugin-aioseo.png",url:"https://aioseo.com/?utm_source=imagelylite&utm_medium=link&utm_campaign=About%20Imagely",basename:"all-in-one-seo-pack/all_in_one_seo_pack.php",downloadUrl:"https://downloads.wordpress.org/plugin/all-in-one-seo-pack.zip"},{name:(0,de.__)("SeedProd","nggallery"),description:(0,de.__)("The fastest drag & drop landing page builder for WordPress. Create custom landing pages without writing code, connect them with your CRM, collect subscribers, and grow your audience. Trusted by 1 million sites.","nggallery"),icon:"plugin-seedprod.png",url:"https://www.seedprod.com/?utm_source=imagelylite&utm_medium=link&utm_campaign=About%20Imagely",basename:"coming-soon/coming-soon.php",downloadUrl:"https://downloads.wordpress.org/plugin/coming-soon.zip"},{name:(0,de.__)("RafflePress","nggallery"),description:(0,de.__)("Turn your website visitors into brand ambassadors! Easily grow your email list, website traffic, and social media followers with the most powerful giveaways & contests plugin for WordPress.","nggallery"),icon:"plugin-rp.png",url:"https://rafflepress.com/?utm_source=imagelylite&utm_medium=link&utm_campaign=About%20Imagely",basename:"rafflepress/rafflepress.php",downloadUrl:"https://downloads.wordpress.org/plugin/rafflepress.zip"},{name:(0,de.__)("PushEngage","nggallery"),description:(0,de.__)("Connect with your visitors after they leave your website with the leading web push notification software. Over 10,000+ businesses worldwide use PushEngage to send 15 billion notifications each month.","nggallery"),icon:"plugin-pushengage.png",url:"https://pushengage.com/?utm_source=imagelylite&utm_medium=link&utm_campaign=About%20Imagely",basename:"pushengage/main.php",downloadUrl:"https://downloads.wordpress.org/plugin/pushengage.zip"},{name:(0,de.__)("Smash Balloon","nggallery"),description:(0,de.__)("Easily display social media content from Instagram, Facebook, YouTube, Twitter, and more on your WordPress site without writing any code. Trusted by 1 million websites.","nggallery"),icon:"plugin-sb-instagram.png",url:"https://smashballoon.com/?utm_source=imagelylite&utm_medium=link&utm_campaign=About%20Imagely",basename:"instagram-feed/instagram-feed.php",downloadUrl:"https://downloads.wordpress.org/plugin/instagram-feed.zip"},{name:(0,de.__)("TrustPulse","nggallery"),description:(0,de.__)("Boost your sales and conversions by up to 15% with real-time social proof notifications. TrustPulse helps you show live user activity and purchases to help convince other users to purchase.","nggallery"),icon:"plugin-trustpulse.png",url:"https://trustpulse.com/?utm_source=imagelylite&utm_medium=link&utm_campaign=About%20Imagely",basename:"trustpulse-api/trustpulse.php",downloadUrl:"https://downloads.wordpress.org/plugin/trustpulse-api.zip"},{name:(0,de.__)("SearchWP","nggallery"),description:(0,de.__)("The most advanced WordPress search plugin. Customize your WordPress search algorithm, reorder search results, track search metrics, and everything you need to leverage search to grow your business.","nggallery"),icon:"plugin-searchwp.png",url:"https://searchwp.com/?utm_source=imagelylite&utm_medium=link&utm_campaign=About%20Imagely",isExternal:!0},{name:(0,de.__)("AffiliateWP","nggallery"),description:(0,de.__)("The #1 affiliate management plugin for WordPress. Easily create an affiliate program for your eCommerce store or membership site within minutes and start growing your sales with the power of referral marketing.","nggallery"),icon:"plugin-affwp.png",url:"https://affiliatewp.com/?utm_source=imagelylite&utm_medium=link&utm_campaign=About%20Imagely",isExternal:!0},{name:(0,de.__)("WP Simple Pay","nggallery"),description:(0,de.__)("The #1 Stripe payments plugin for WordPress. Start accepting one-time and recurring payments on your WordPress site without setting up a shopping cart. No code required.","nggallery"),icon:"plugin-wp-simple-pay.png",url:"https://wpsimplepay.com/?utm_source=imagelylite&utm_medium=link&utm_campaign=About%20Imagely",basename:"stripe/stripe-checkout.php",downloadUrl:"https://downloads.wordpress.org/plugin/stripe.zip"},{name:(0,de.__)("Easy Digital Downloads","nggallery"),description:(0,de.__)("The best WordPress eCommerce plugin for selling digital downloads. Start selling eBooks, software, music, digital art, and more within minutes. Accept payments, manage subscriptions, advanced access control, and more.","nggallery"),icon:"plugin-edd.png",url:"https://easydigitaldownloads.com/?utm_source=imagelylite&utm_medium=link&utm_campaign=About%20Imagely",basename:"easy-digital-downloads/easy-digital-downloads.php",downloadUrl:"https://downloads.wordpress.org/plugin/easy-digital-downloads.zip"},{name:(0,de.__)("Sugar Calendar","nggallery"),description:(0,de.__)("A simple & powerful event calendar plugin for WordPress that comes with all the event management features including payments, scheduling, timezones, ticketing, recurring events, and more.","nggallery"),icon:"plugin-sugarcalendar.png",url:"https://sugarcalendar.com/?utm_source=imagelylite&utm_medium=link&utm_campaign=About%20Imagely",basename:"sugar-calendar-lite/sugar-calendar-lite.php",downloadUrl:"https://downloads.wordpress.org/plugin/sugar-calendar-lite.zip"},{name:(0,de.__)("WP Charitable","nggallery"),description:(0,de.__)("Top-rated WordPress donation and fundraising plugin. Over 10,000+ non-profit organizations and website owners use Charitable to create fundraising campaigns and raise more money online.","nggallery"),icon:"plugin-charitable.png",url:"https://wpcharitable.com/?utm_source=imagelylite&utm_medium=link&utm_campaign=About%20Imagely",basename:"charitable/charitable.php",downloadUrl:"https://downloads.wordpress.org/plugin/charitable.zip"},{name:(0,de.__)("WPCode","nggallery"),description:(0,de.__)("Future proof your WordPress customizations with the most popular code snippet management plugin for WordPress. Trusted by over 1,500,000+ websites for easily adding code to WordPress right from the admin area.","nggallery"),icon:"plugin-wpcode.png",url:"https://wpcode.com/?utm_source=imagelylite&utm_medium=link&utm_campaign=About%20Imagely",basename:"insert-headers-and-footers/ihaf.php",downloadUrl:"https://downloads.wordpress.org/plugin/insert-headers-and-footers.zip"},{name:(0,de.__)("Duplicator","nggallery"),description:(0,de.__)("Leading WordPress backup & site migration plugin. Over 1,500,000+ smart website owners use Duplicator to make reliable and secure WordPress backups to protect their websites. It also makes website migration really easy.","nggallery"),icon:"plugin-duplicator.png",url:"https://duplicator.com/?utm_source=imagelylite&utm_medium=link&utm_campaign=About%20Imagely",basename:"duplicator/duplicator.php",downloadUrl:"https://downloads.wordpress.org/plugin/duplicator.zip"},{name:(0,de.__)("Soliloquy","nggallery"),description:(0,de.__)("The best WordPress slider plugin. Drag & Drop responsive slider builder that helps you create a beautiful image slideshows with just a few clicks.","nggallery"),icon:"soliloquy.png",url:"https://soliloquywp.com/?utm_source=imagelylite&utm_medium=link&utm_campaign=About%20Imagely",basename:"soliloquy-lite/soliloquy-lite.php",downloadUrl:"https://downloads.wordpress.org/plugin/soliloquy-lite.zip"}];(0,Z.useEffect)(function(){p()},[]);var p=function(){var e=Er(Nr().mark(function e(){var t;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c(!0),e.next=4,Fr()({path:"/imagely/v1/plugins/status"});case 4:t=e.sent,i(t),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching plugin statuses:",e.t0);case 11:return e.prev=11,c(!1),e.finish(11);case 14:case"end":return e.stop()}},e,null,[[0,8,11,14]])}));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Er(Nr().mark(function e(t){var a,l,i;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.downloadUrl&&t.basename){e.next=2;break}return e.abrupt("return");case 2:return a=t.basename,d(function(e){return new Set(e).add(a)}),e.prev=4,e.next=7,Fr()({path:"/imagely/v1/plugins/install",method:"POST",data:{download_url:t.downloadUrl,basename:t.basename}});case 7:return e.next=9,p();case 9:n((0,de.__)("Plugin installed successfully!","nggallery")),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(4),l=(0,de.__)("Unknown error","nggallery"),e.t0.message?l=e.t0.message:e.t0.code?l=e.t0.code:"string"==typeof e.t0&&(l=e.t0),r((0,de.__)("Failed to install plugin: ","nggallery")+l);case 17:return e.prev=17,(i=t.basename)&&d(function(e){var t=new Set(e);return t.delete(i),t}),e.finish(17);case 21:case"end":return e.stop()}},e,null,[[4,12,17,21]])}));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Er(Nr().mark(function e(t){var a,l;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.basename){e.next=3;break}return e.abrupt("return");case 3:return d(function(e){return new Set(e).add(a)}),e.prev=4,e.next=7,Fr()({path:"/imagely/v1/plugins/activate",method:"POST",data:{basename:a}});case 7:return e.next=9,p();case 9:n((0,de.__)("Plugin activated successfully!","nggallery")),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),l=e.t0.message||(0,de.__)("Unknown error","nggallery"),r((0,de.__)("Failed to activate plugin: ","nggallery")+l);case 16:return e.prev=16,d(function(e){var t=new Set(e);return t.delete(a),t}),e.finish(16);case 19:case"end":return e.stop()}},e,null,[[4,12,16,19]])}));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Er(Nr().mark(function e(t){var a,l;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.basename){e.next=3;break}return e.abrupt("return");case 3:return d(function(e){return new Set(e).add(a)}),e.prev=4,e.next=7,Fr()({path:"/imagely/v1/plugins/deactivate",method:"POST",data:{basename:a}});case 7:return e.next=9,p();case 9:n((0,de.__)("Plugin deactivated successfully!","nggallery")),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),l=e.t0.message||(0,de.__)("Unknown error","nggallery"),r((0,de.__)("Failed to deactivate plugin: ","nggallery")+l);case 16:return e.prev=16,a&&d(function(e){var t=new Set(e);return t.delete(a),t}),e.finish(16);case 19:case"end":return e.stop()}},e,null,[[4,12,16,19]])}));return function(t){return e.apply(this,arguments)}}(),_=function(e){return!e.basename||e.isExternal?null:l[e.basename]};return J().createElement("div",{className:"max-w-7xl mx-auto"},J().createElement("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden mb-6"},J().createElement("div",{className:"grid md:grid-cols-2 gap-8 p-8"},J().createElement("div",{className:"space-y-4"},J().createElement("h1",{className:"text-3xl font-bold text-gray-900"},(0,de.__)("About NextGEN Gallery","nggallery")),J().createElement("h3",{className:"text-xl text-gray-700"},(0,de.__)("Hello and welcome to NextGEN Gallery, the most beginner-friendly WordPress Gallery Plugin. At NextGEN Gallery, we build software that helps you create beautiful galleries in minutes.","nggallery")),J().createElement("p",{className:"text-gray-600"},(0,de.__)("Over the years, we found that most WordPress gallery plugins were bloated, buggy, slow, and very hard to use. So, we started with a simple goal: build a WordPress gallery system that's both easy and powerful.","nggallery")),J().createElement("p",{className:"text-gray-600"},(0,de.__)("Our goal is to provide the easiest way to create beautiful galleries.","nggallery")),J().createElement("p",{className:"text-gray-600"},(0,de.__)("NextGEN Gallery is brought to you by the same team that's behind the largest WordPress resource site, WPBeginner, the most popular lead-generation software, OptinMonster, the best WordPress analytics plugin, MonsterInsights, and more!","nggallery")),J().createElement("p",{className:"text-gray-600 font-medium"},(0,de.__)("Yup, we know a thing or two about building awesome products that customers love.","nggallery"))),J().createElement("div",{className:"flex items-center justify-center"},J().createElement("img",{src:"".concat(null===(e=window.imagelyApp)||void 0===e?void 0:e.plugin_url,"assets/images/about/team.jpg"),alt:(0,de.__)("Team","nggallery"),className:"rounded-lg shadow-md w-full max-w-md"})))),J().createElement("div",{className:"mb-6"},J().createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},g.map(function(e,t){var n;return J().createElement("div",{key:t,className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow"},J().createElement("div",{className:"p-6"},J().createElement("div",{className:"flex items-start space-x-4 mb-4"},J().createElement("img",{src:"".concat(null===(n=window.imagelyApp)||void 0===n?void 0:n.plugin_url,"assets/images/about/").concat(e.icon),alt:e.name,className:"w-16 h-16 rounded-lg flex-shrink-0"}),J().createElement("div",{className:"flex-1 min-w-0"},J().createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-2"},e.name),function(e){var t=_(e);return!t||e.isExternal?null:t.active?J().createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},(0,de.__)("Active","nggallery")):t.installed?J().createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800"},(0,de.__)("Inactive","nggallery")):J().createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},(0,de.__)("Not Installed","nggallery"))}(e))),J().createElement("p",{className:"text-sm text-gray-600 mb-4 line-clamp-4"},e.description),J().createElement("div",{className:"flex gap-2"},function(e){var t=_(e),n=function(e){return!!e.basename&&m.has(e.basename)}(e);return e.isExternal||!e.basename?J().createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"inline-block px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700 transition-colors"},(0,de.__)("Learn More","nggallery")):s?J().createElement("button",{disabled:!0,className:"inline-block px-4 py-2 bg-gray-300 text-gray-500 text-sm font-medium rounded-md cursor-not-allowed"},(0,de.__)("Loading...","nggallery")):null!=t&&t.active?J().createElement("button",{onClick:function(){return h(e)},disabled:n,className:"inline-block px-4 py-2 text-sm font-medium rounded-md transition-colors ".concat(n?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gray-600 text-white hover:bg-gray-700")},n?(0,de.__)("Processing...","nggallery"):(0,de.__)("Deactivate","nggallery")):null!=t&&t.installed?J().createElement("button",{onClick:function(){return y(e)},disabled:n,className:"inline-block px-4 py-2 text-sm font-medium rounded-md transition-colors ".concat(n?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700")},n?(0,de.__)("Processing...","nggallery"):(0,de.__)("Activate","nggallery")):J().createElement("button",{onClick:function(){return f(e)},disabled:n,className:"inline-block px-4 py-2 text-sm font-medium rounded-md transition-colors ".concat(n?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700")},n?(0,de.__)("Installing...","nggallery"):(0,de.__)("Install Plugin","nggallery"))}(e))))}))))};var hi=[{id:"images",label:(0,de.__)("Images","nggallery"),icon:J().createElement(Dn,{className:"h-5 w-5"}),description:(0,de.__)("Add, Edit, Remove","nggallery")},{id:"customize",label:(0,de.__)("Customize","nggallery"),icon:J().createElement(In,{className:"h-5 w-5"}),description:(0,de.__)("Layout & Settings","nggallery")},{id:"settings",label:(0,de.__)("Settings","nggallery"),icon:J().createElement(jn,{className:"h-5 w-5"}),description:(0,de.__)("Review & Configure","nggallery")}],_i=[{id:"photocrati-nextgen_basic_imagebrowser",name:(0,de.__)("ImageBrowser","nggallery"),icon:J().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",viewBox:"0 0 120 98",fill:"currentColor"},J().createElement("rect",{x:"10",y:"12",width:"100",height:"52",fill:"currentColor"}),J().createElement("circle",{cx:"55",cy:"75",r:"3",fill:"currentColor"}),J().createElement("circle",{cx:"65",cy:"75",r:"3",fill:"currentColor"}),J().createElement("rect",{x:"40",y:"83",width:"40",height:"3",rx:"1.5",fill:"currentColor"})),isPro:!1},{id:"photocrati-nextgen_basic_tagcloud",name:(0,de.__)("TagCloud","nggallery"),icon:J().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",viewBox:"0 0 120 98",fill:"currentColor"},J().createElement("rect",{x:"17",y:"16",width:"31",height:"6",rx:"2",fill:"currentColor"}),J().createElement("rect",{x:"85",y:"10",width:"15",height:"6",rx:"2",fill:"currentColor"}),J().createElement("rect",{x:"54",y:"25",width:"25",height:"6",rx:"2",fill:"currentColor"}),J().createElement("rect",{x:"87",y:"31",width:"25",height:"6",rx:"2",fill:"currentColor"}),J().createElement("rect",{x:"64",y:"53",width:"30",height:"6",rx:"2",fill:"currentColor"}),J().createElement("rect",{x:"8",y:"60",width:"18",height:"6",rx:"2",fill:"currentColor"}),J().createElement("rect",{x:"37",y:"69",width:"38",height:"6",rx:"2",fill:"currentColor"}),J().createElement("rect",{x:"91",y:"67",width:"18",height:"6",rx:"2",fill:"currentColor"}),J().createElement("rect",{x:"16",y:"82",width:"32",height:"6",rx:"2",fill:"currentColor"}),J().createElement("rect",{x:"14",y:"41",width:"53",height:"6",rx:"2",fill:"currentColor"})),isPro:!1},{id:"photocrati-nextgen_basic_thumbnails",name:(0,de.__)("Thumbnails","nggallery"),icon:J().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",viewBox:"0 0 120 98"},J().createElement("rect",{x:"8",y:"12",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"44",y:"12",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"80",y:"12",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"8",y:"38",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"44",y:"38",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"80",y:"38",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"8",y:"64",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"44",y:"64",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"80",y:"64",width:"32",height:"22",fill:"currentColor"})),isPro:!1},{id:"photocrati-nextgen_basic_slideshow",name:(0,de.__)("Slideshow","nggallery"),icon:J().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",viewBox:"0 0 120 98",fill:"currentColor"},J().createElement("rect",{x:"8",y:"18",width:"104",height:"62",fill:"currentColor"}),J().createElement("path",{d:"M55.0034 61V37L71.0034 48.3333L55.0034 61Z",fill:"white",fillOpacity:"0.5"})),isPro:!1},{id:"photocrati-nextgen_pro_film",name:(0,de.__)("Film","nggallery"),icon:J().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",viewBox:"0 0 120 98",fill:"currentColor"},J().createElement("rect",{x:"8",y:"12",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"44",y:"12",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"80",y:"12",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"8",y:"38",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"44",y:"38",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"80",y:"38",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"8",y:"64",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"44",y:"64",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"80",y:"64",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"15",y:"14",width:"18",height:"18",fill:"white",fillOpacity:"0.5"}),J().createElement("rect",{x:"51",y:"40",width:"18",height:"18",fill:"white",fillOpacity:"0.5"}),J().createElement("rect",{x:"15",y:"66",width:"18",height:"18",fill:"white",fillOpacity:"0.5"}),J().createElement("rect",{x:"87",y:"66",width:"18",height:"18",fill:"white",fillOpacity:"0.5"}),J().createElement("rect",{x:"10",y:"42",width:"28",height:"14",fill:"white",fillOpacity:"0.5"}),J().createElement("rect",{x:"82",y:"42",width:"28",height:"14",fill:"white",fillOpacity:"0.5"}),J().createElement("rect",{x:"46",y:"68",width:"28",height:"14",fill:"white",fillOpacity:"0.5"}),J().createElement("rect",{x:"87",y:"14",width:"18",height:"18",fill:"white",fillOpacity:"0.5"}),J().createElement("rect",{x:"46",y:"16",width:"28",height:"14",fill:"white",fillOpacity:"0.5"})),isPro:!0},{id:"photocrati-nextgen_pro_mosaic",name:(0,de.__)("Mosaic","nggallery"),icon:J().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",viewBox:"0 0 120 98",fill:"currentColor"},J().createElement("rect",{x:"8",y:"12",width:"64",height:"16",fill:"currentColor"}),J().createElement("rect",{x:"74",y:"12",width:"38",height:"16",fill:"currentColor"}),J().createElement("rect",{x:"8",y:"30",width:"36",height:"16",fill:"currentColor"}),J().createElement("rect",{x:"46",y:"30",width:"66",height:"16",fill:"currentColor"}),J().createElement("rect",{x:"8",y:"48",width:"50",height:"16",fill:"currentColor"}),J().createElement("rect",{x:"8",y:"66",width:"38",height:"20",fill:"currentColor"}),J().createElement("rect",{x:"48",y:"66",width:"18",height:"20",fill:"currentColor"}),J().createElement("rect",{x:"60",y:"48",width:"20",height:"16",fill:"currentColor"}),J().createElement("rect",{x:"82",y:"48",width:"30",height:"16",fill:"currentColor"}),J().createElement("rect",{x:"68",y:"66",width:"44",height:"20",fill:"currentColor"})),isPro:!0},{id:"photocrati-nextgen_pro_thumbnail_grid",name:(0,de.__)("Thumbnail Grid","nggallery"),icon:J().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",viewBox:"0 0 120 98",fill:"currentColor"},J().createElement("rect",{x:"8",y:"12",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"44",y:"12",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"80",y:"12",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"8",y:"38",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"44",y:"38",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"80",y:"38",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"8",y:"64",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"44",y:"64",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"80",y:"64",width:"32",height:"22",fill:"currentColor"})),isPro:!0},{id:"photocrati-nextgen_pro_blog_gallery",name:(0,de.__)("Blog Style","nggallery"),icon:J().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",viewBox:"0 0 120 98",fill:"currentColor"},J().createElement("rect",{x:"8",y:"12",width:"104",height:"52",fill:"currentColor"}),J().createElement("rect",{x:"8",y:"68",width:"104",height:"18",fill:"currentColor"})),isPro:!0},{id:"photocrati-nextgen_pro_imagebrowser",name:(0,de.__)("Pro ImageBrowser","nggallery"),icon:J().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",viewBox:"0 0 120 98",fill:"currentColor"},J().createElement("rect",{x:"10",y:"12",width:"100",height:"52",fill:"currentColor"}),J().createElement("circle",{cx:"55",cy:"75",r:"3",fill:"currentColor"}),J().createElement("circle",{cx:"65",cy:"75",r:"3",fill:"currentColor"}),J().createElement("rect",{x:"40",y:"83",width:"40",height:"3",rx:"1.5",fill:"currentColor"})),isPro:!0},{id:"photocrati-nextgen_pro_sidescroll",name:(0,de.__)("Sidescroll","nggallery"),icon:J().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",viewBox:"0 0 120 98",fill:"currentColor"},J().createElement("rect",{x:"8",y:"12",width:"104",height:"60",fill:"currentColor"}),J().createElement("rect",{x:"8",y:"78",width:"104",height:"8",fill:"currentColor"})),isPro:!0},{id:"photocrati-nextgen_pro_tile",name:(0,de.__)("Tile","nggallery"),icon:J().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",viewBox:"0 0 120 98",fill:"currentColor"},J().createElement("rect",{x:"8",y:"10",width:"33",height:"13",fill:"currentColor"}),J().createElement("rect",{x:"44",y:"10",width:"30",height:"8",fill:"currentColor"}),J().createElement("rect",{x:"8",y:"27",width:"33",height:"13",fill:"currentColor"}),J().createElement("rect",{x:"8",y:"44",width:"33",height:"44",fill:"currentColor"}),J().createElement("rect",{x:"44",y:"22",width:"30",height:"26",fill:"currentColor"}),J().createElement("rect",{x:"77",y:"10",width:"35",height:"38",fill:"currentColor"}),J().createElement("rect",{x:"44",y:"72",width:"30",height:"16",fill:"currentColor"}),J().createElement("rect",{x:"77",y:"72",width:"35",height:"16",fill:"currentColor"}),J().createElement("rect",{x:"44",y:"52",width:"68",height:"16",fill:"currentColor"})),isPro:!0},{id:"photocrati-nextgen_pro_masonry",name:(0,de.__)("Masonry","nggallery"),icon:J().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",viewBox:"0 0 120 98",fill:"currentColor"},J().createElement("rect",{x:"8",y:"12",width:"32",height:"31",fill:"currentColor"}),J().createElement("rect",{x:"44",y:"12",width:"32",height:"15",fill:"currentColor"}),J().createElement("rect",{x:"8",y:"47",width:"32",height:"24",fill:"currentColor"}),J().createElement("rect",{x:"80",y:"12",width:"32",height:"34",fill:"currentColor"}),J().createElement("rect",{x:"44",y:"52",width:"32",height:"26",fill:"currentColor"}),J().createElement("rect",{x:"44",y:"31",width:"32",height:"17",fill:"currentColor"}),J().createElement("rect",{x:"80",y:"72",width:"32",height:"14",fill:"currentColor"}),J().createElement("rect",{x:"80",y:"50",width:"32",height:"18",fill:"currentColor"})),isPro:!0},{id:"imagely-pro-search",name:(0,de.__)("Search","nggallery"),icon:J().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",viewBox:"0 0 120 98",fill:"currentColor"},J().createElement("rect",{x:"16",y:"44",width:"60",height:"10",fill:"currentColor"}),J().createElement("rect",{x:"82",y:"44",width:"22",height:"10",fill:"currentColor"})),isPro:!0},{id:"photocrati-nextgen_pro_horizontal_filmstrip",name:(0,de.__)("Horizontal Filmstrip","nggallery"),icon:J().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",viewBox:"0 0 120 98",fill:"currentColor"},J().createElement("rect",{x:"8",y:"12",width:"104",height:"60",fill:"currentColor"}),J().createElement("rect",{x:"8",y:"78",width:"104",height:"8",fill:"currentColor"})),isPro:!0},{id:"photocrati-nextgen_pro_slideshow",name:(0,de.__)("Pro Slideshow","nggallery"),icon:J().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",viewBox:"0 0 120 98",fill:"currentColor"},J().createElement("rect",{x:"8",y:"18",width:"104",height:"62",fill:"currentColor"}),J().createElement("path",{d:"M55.0034 61V37L71.0034 48.3333L55.0034 61Z",fill:"white",fillOpacity:"0.5"})),isPro:!0}];const bi=function(e){var t=e.activeTab,n=e.onTabChange,r=function(e){return hi.findIndex(function(t){return t.id===e})};return React.createElement("div",{className:"px-4 sm:px-6 lg:px-8"},React.createElement("div",{className:"flex flex-col sm:flex-row w-full h-auto sm:h-[70px] relative rounded-lg border border-gray-200 overflow-hidden"},hi.map(function(e,a){var l,i=(l=e.id,t===l),o=function(e){var n=r(t);return r(e)<n}(e.id),s=a===hi.length-1,c=String(a+1).padStart(2,"0");return React.createElement("div",{key:e.id,className:"relative flex-1",style:{zIndex:hi.length-a}},React.createElement("button",{onClick:function(){return n(e.id)},className:"mobile-step-button relative w-full h-full flex items-center px-4 sm:px-6 lg:px-8 py-4 sm:py-5 transition-all duration-300 border-b sm:border-b-0 sm:border-r border-gray-100 last:border-b-0 sm:last:border-r-0 ".concat(i?"text-green-800 bg-green-100":o?"text-gray-700 hover:text-green-700 bg-gray-50":"text-gray-500 hover:text-gray-700 bg-white hover:bg-gray-50"),style:{clipPath:s?"polygon(0 0, 100% 0, 100% 100%, 0 100%, 12px 50%)":0===a?"polygon(0 0, calc(100% - 12px) 0, 100% 50%, calc(100% - 12px) 100%, 0 100%)":"polygon(0 0, calc(100% - 12px) 0, 100% 50%, calc(100% - 12px) 100%, 0 100%, 12px 50%)",marginLeft:0===a?"":"-".concat(11*a,"px"),width:s?"calc( 100% + ".concat(11*a*2,"px )"):""}},React.createElement("div",{className:"flex items-center space-x-2 sm:space-x-3 w-full"},React.createElement("div",{className:"w-6 h-6 sm:w-8 sm:h-8 rounded-full flex items-center justify-center text-xs sm:text-sm font-bold transition-all duration-300 flex-shrink-0 ".concat(i?"bg-white text-green-700 border border-green-700":"text-gray-400 border border-gray-200")},o&&!i?React.createElement(Ft,{className:"w-3 h-3 sm:w-4 sm:h-4"}):c),React.createElement("div",{className:"flex flex-col items-start min-w-0 flex-1"},React.createElement("div",{className:"text-xs sm:text-sm font-semibold truncate w-full text-left"},e.label),React.createElement("div",{className:"text-xs opacity-75 text-left"},e.description)))))})))},vi=function(e){var t=e.children,n=e.currentTab,r=e.onTabChange,a=e.error,l=e.isLoading,i=void 0!==l&&l,o=e.containerClassName,s=void 0===o?"min-h-screen":o,c=e.contentClassName,u=void 0===c?"mx-auto max-w-screen-2xl p-6":c,m=e.hideHeader,d=void 0!==m&&m,g=e.headerComponent,p=function(){if(g){if("function"==typeof g&&0===g.length)return g();var e=g;return J().createElement(e,{activeTab:n,onTabChange:r})}return J().createElement(bi,{activeTab:n,onTabChange:r})};return i?J().createElement("div",{className:s},!d&&p(),J().createElement("div",{className:u},J().createElement("div",{className:"flex items-center justify-center py-8"},J().createElement("div",{className:"text-gray-500"},(0,de.__)("Loading...","nggallery"))))):J().createElement("div",{className:s},p(),J().createElement("div",{className:u},a&&J().createElement("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-md p-4"},J().createElement("div",{className:"flex"},J().createElement("div",{className:"flex-shrink-0"},J().createElement(Qt,{className:"h-5 w-5 text-red-400"})),J().createElement("div",{className:"ml-3"},J().createElement("h3",{className:"text-sm font-medium text-red-800"},(0,de.__)("Error","nggallery")),J().createElement("div",{className:"mt-2 text-sm text-red-700"},J().createElement("p",null,a))))),t))};var xi=function(){var e;return"lite"!==((null===(e=window.imagelyApp)||void 0===e?void 0:e.proTypeInstalled)||"lite")},wi=function(){var e,t=null===(e=window.imagelyApp)||void 0===e?void 0:e.licenseData;return!!t&&!0===t.is_valid},Ei=function(){return!xi()||wi()},Ci=function(){return!xi()||wi()};const Ni=function(e){var t=e.onNext,n=e.onCancel,r=e.nextButtonText,a=void 0===r?(0,de.__)("Next step","nggallery"):r,l=e.showNextButton,i=void 0===l||l,o=e.showCancelButton,s=void 0===o||o,c=e.isFirstTab,u=void 0===c||c,m=na(),d=(null==m?void 0:m.isEmbed)||!1,g=hr((0,Z.useState)(160),2),p=g[0],f=g[1];return(0,Z.useEffect)(function(){if(!d){var e=function(){var e=document.body,t=window.innerWidth;t<=782?f(0):t<=960||e.classList.contains("folded")?f(36):f(160)};e(),window.addEventListener("resize",e);var t=new MutationObserver(e);return t.observe(document.body,{attributes:!0,attributeFilter:["class"]}),function(){window.removeEventListener("resize",e),t.disconnect()}}f(0)},[d]),J().createElement("div",{className:"fixed bottom-0 right-0 bg-white border-t border-gray-200 z-10",style:{left:"".concat(p,"px"),maxWidth:"calc(100vw - ".concat(p,"px)")}},J().createElement("div",{className:"px-2 sm:px-4 py-3 sm:px-6"},J().createElement("div",{className:"flex justify-end items-center space-x-1 sm:space-x-3"},s&&J().createElement("button",{onClick:n,className:"px-2 sm:px-4 py-2 text-xs sm:text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},u?(0,de.__)("Cancel","nggallery"):(0,de.__)("Back","nggallery")),i&&J().createElement("button",{onClick:t,className:"px-2 sm:px-4 py-2 text-xs sm:text-sm font-medium text-white bg-green-500 border border-green-500 rounded-md hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors"},a))))},ki=function(e){var t=e.title,n=e.children,r=e.className,a=void 0===r?"bg-white rounded-lg":r;return J().createElement("div",{className:"".concat(a)},J().createElement("div",{className:"w-full py-3 px-4"},J().createElement("h3",{className:"text-base font-medium text-gray-900"},t)),J().createElement("div",{className:"px-4 pb-4"},J().createElement("div",{className:"pt-4"},n)))},Si=window.wp.element;var Oi=function(e){var t=e.type,n=e.item,r=e.itemId,a=e.includeEcommerce,l=void 0!==a&&a,i=e.cacheKey;return(0,Si.useMemo)(function(){var e,a,o,s;if(!n)return(null===(s=window.imagelyApp)||void 0===s?void 0:s.home_url)||window.location.origin;var c=new URLSearchParams;if(c.append("ngg-preview","1"),c.append("nonce_preview",(null===(e=window.imagelyApp)||void 0===e?void 0:e.nonce_preview)||""),n.display_type&&c.append("display_type",n.display_type),"gallery"===t?(n.gid&&c.append("gallery_ids",String(n.gid)),l&&("1"===n.is_ecommerce_enabled||1===n.is_ecommerce_enabled||!0===n.is_ecommerce_enabled)&&c.append("is_ecommerce_enabled","1")):"album"===t&&(c.append("src","albums"),r&&c.append("ids",String(r)),i&&c.append("_cache",i)),n.display_type&&null!==(a=n.display_type_settings)&&void 0!==a&&a[n.display_type]){var u=n.display_type_settings[n.display_type];Object.entries(u).forEach(function(e){var t=hr(e,2),n=t[0],r=t[1];if(null!=r){var a="boolean"==typeof r?r?"1":"0":String(r);c.append(n,a)}})}var m=(null===(o=window.imagelyApp)||void 0===o?void 0:o.home_url)||window.location.origin;return"".concat(m,"?").concat(c.toString())},[t,null==n?void 0:n.display_type,null==n?void 0:n.display_type_settings,"gallery"===t?null==n?void 0:n.gid:r,l&&"gallery"===t?null==n?void 0:n.is_ecommerce_enabled:void 0,i])};function Pi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Ti(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pi(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pi(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Di=function(e){return e?{title:e.title||"",description:e.galdesc||"",display_type:e.display_type||"",display_type_settings:e.display_type_settings||{},settings:{gallery_display_type:e.display_type,gallery_override_global_settings:!1},imageSettings:{sortBy:"sortorder",sortOrder:"asc",selectedImages:[],searchQuery:""},isDirty:!1,lastSaved:new Date,dirtyFields:new Set}:{title:"",description:"",display_type:"",display_type_settings:{},settings:{},imageSettings:{sortBy:"sortorder",sortOrder:"asc",selectedImages:[],searchQuery:""},isDirty:!1,lastSaved:null,dirtyFields:new Set}},Ii=function(e,t){switch(t.type){case"INIT_FROM_GALLERY":case"RESET_TO_SAVED":return Di(t.payload);case"UPDATE_FIELD":var r=t.payload,a=r.path,l=function(e,t,n){for(var r=t.split("."),a=Ti({},e),l=a,i=0;i<r.length-1;i++){var o=r[i];l[o]=l[o]?Ti({},l[o]):{},l=l[o]}return l[r[r.length-1]]=n,a}(e,a,r.value),i=new Set(e.dirtyFields);return i.add(a),Ti(Ti({},l),{},{isDirty:!0,dirtyFields:i});case"UPDATE_FIELDS":var o=new Set(e.dirtyFields);return Object.keys(t.payload).forEach(function(e){return o.add(e)}),Ti(Ti(Ti({},e),t.payload),{},{isDirty:!0,dirtyFields:o});case"UPDATE_DISPLAY_TYPE_SETTINGS":var s=t.payload,c=s.displayType,u=s.settings,m=Ti(Ti({},e.display_type_settings),{},n({},c,Ti(Ti({},e.display_type_settings[c]),u))),d=new Set(e.dirtyFields);return d.add("display_type_settings.".concat(c)),Ti(Ti({},e),{},{display_type_settings:m,isDirty:!0,dirtyFields:d});case"UPDATE_GALLERY_SETTINGS":var g=new Set(e.dirtyFields);return Object.keys(t.payload).forEach(function(e){return g.add("settings.".concat(e))}),Ti(Ti({},e),{},{settings:Ti(Ti({},e.settings),t.payload),isDirty:!0,dirtyFields:g});case"UPDATE_IMAGE_SETTINGS":return Ti(Ti({},e),{},{imageSettings:Ti(Ti({},e.imageSettings),t.payload)});case"MARK_CLEAN":return Ti(Ti({},e),{},{isDirty:!1,lastSaved:new Date,dirtyFields:new Set});default:return e}},ji=(0,Z.createContext)(null),Ai=function(e){var t=e.children,n=e.initialGallery,r=void 0===n?null:n,a=hr((0,Z.useReducer)(Ii,null,function(){return Di(r)}),2),l=a[0],i=a[1],o=(0,Z.useRef)(new Map);(0,Z.useEffect)(function(){r&&r.gid&&!l.lastSaved&&i({type:"INIT_FROM_GALLERY",payload:r})},[r,l.lastSaved]);var s=(0,Z.useCallback)(function(e,t){i({type:"UPDATE_FIELD",payload:{path:e,value:t}})},[]),c=(0,Z.useCallback)(function(e){i({type:"UPDATE_FIELDS",payload:e})},[]),u=(0,Z.useCallback)(function(e,t){i({type:"UPDATE_DISPLAY_TYPE_SETTINGS",payload:{displayType:e,settings:t}})},[]),m=(0,Z.useCallback)(function(e){i({type:"UPDATE_GALLERY_SETTINGS",payload:e})},[]),d=(0,Z.useCallback)(function(e){i({type:"UPDATE_IMAGE_SETTINGS",payload:e})},[]),g=(0,Z.useCallback)(function(e){i({type:"INIT_FROM_GALLERY",payload:e})},[]),p=(0,Z.useCallback)(function(){i({type:"MARK_CLEAN"})},[]),f=(0,Z.useCallback)(function(e){i({type:"RESET_TO_SAVED",payload:e})},[]),y=(0,Z.useCallback)(function(){return Array.from(l.dirtyFields)},[l.dirtyFields]),h=(0,Z.useCallback)(function(e){var t=e||l.display_type;return l.display_type_settings[t]||{}},[l.display_type_settings,l.display_type]),_=(0,Z.useCallback)(function(){return h()},[h]),b=(0,Z.useCallback)(function(e,t){o.current.set(e,t)},[]),v=(0,Z.useCallback)(function(e){o.current.delete(e)},[]),x=(0,Z.useCallback)(function(){o.current.forEach(function(e){try{e()}catch(e){console.error("Error flushing pending save:",e)}})},[]),w=(0,Z.useMemo)(function(){return{state:l,updateField:s,updateFields:c,updateDisplayTypeSettings:u,updateGallerySettings:m,updateImageSettings:d,initFromGallery:g,markClean:p,resetToSaved:f,getDirtyFields:y,getDisplayTypeSettings:h,getCurrentDisplayTypeSettings:_,registerFlushCallback:b,unregisterFlushCallback:v,flushAllPendingSaves:x}},[l,s,c,u,m,d,g,p,f,y,h,_,b,v,x]);return J().createElement(ji.Provider,{value:w},t)},Li=function(){var e=(0,Z.useContext)(ji);if(!e)throw new Error("useGalleryForm must be used within a GalleryFormProvider. This indicates a component structure issue that should be fixed.");return e};const Mi=function(e){var t=e.text,n=e.children,r=e.placement,a=void 0===r?"top":r,l={top:"bottom-full left-1/2 -translate-x-1/2 mb-2",right:"left-full top-1/2 -translate-y-1/2 ml-2",bottom:"top-full left-1/2 -translate-x-1/2 mt-2",left:"right-full top-1/2 -translate-y-1/2 mr-2"}[a],i={top:"top-full left-1/2 -translate-x-1/2 -mt-2",right:"left-0 top-1/2 -translate-y-1/2 -ml-2",bottom:"-top-2 left-1/2 -translate-x-1/2",left:"right-0 top-1/2 -translate-y-1/2 -mr-2"}[a],o={top:"border-8 border-transparent border-t-gray-900",right:"border-8 border-transparent border-r-gray-900",bottom:"border-8 border-transparent border-b-gray-900",left:"border-8 border-transparent border-l-gray-900"}[a];return J().createElement("div",{className:"relative inline-block group"},n,J().createElement("div",{className:"absolute invisible group-hover:visible opacity-0 group-hover:opacity-100 ".concat(l," px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg w-max max-w-xs z-50 whitespace-nowrap")},t,J().createElement("div",{className:"absolute ".concat(i)},J().createElement("div",{className:o}))))},Ri=function(e){var t=e.url,n=e.mode,r=e.title,a=e.className,l=void 0===a?"":a,i=e.containerClassName,o=void 0===i?"":i,s=function(e){var t="desktop"===e?.5:.8;return{containerStyle:{transform:"scale(".concat(t,")"),transformOrigin:"top left",width:"".concat(100/t,"%"),height:"".concat(100/t,"%"),overflow:"hidden"},iframeStyle:{width:"100%",height:"100%"}}}(n),c=s.containerStyle,u=s.iframeStyle;return J().createElement("div",{className:"w-full h-full ".concat(o),style:c},J().createElement("iframe",{src:t,className:"w-full h-full ".concat(l),title:r||"Scaled iframe content",style:u}))},Fi=function(e){var t=e.previewMode,n=e.onPreviewModeChange,r=e.url,a=e.title,l=e.height,i=hr((0,Z.useState)(0),2),o=i[0],s=i[1],c=(0,Z.useRef)(""),u=(0,Z.useMemo)(function(){return c.current!==r&&(c.current=r,s(function(e){return e+1})),"preview-".concat(o)},[r,o]);return J().createElement(J().Fragment,null,J().createElement("div",{className:"flex justify-between items-center mb-4"},J().createElement("h2",{className:"text-md font-medium"},a||(0,de.__)("Preview","nggallery")),J().createElement("div",{className:"flex items-center space-x-2"},J().createElement(Mi,{text:(0,de.__)("Desktop Preview","nggallery"),placement:"bottom"},J().createElement("button",{onClick:function(){return n("desktop")},className:"p-2 rounded ".concat("desktop"===t?"bg-gray-100":"hover:bg-gray-50")},J().createElement(zn,{className:"w-5 h-5"}))),J().createElement(Mi,{text:(0,de.__)("Mobile Preview","nggallery"),placement:"bottom"},J().createElement("button",{onClick:function(){return n("mobile")},className:"p-2 rounded ".concat("mobile"===t?"bg-gray-100":"hover:bg-gray-50")},J().createElement(Bn,{className:"w-5 h-5"}))),J().createElement(Mi,{text:(0,de.__)("Reload Preview","nggallery"),placement:"bottom"},J().createElement("button",{onClick:function(){s(function(e){return e+1})},className:"p-0 text-green-600 hover:text-green-700"},J().createElement(Hn,{className:"w-4 h-4"}))))),J().createElement("div",{className:"border rounded-lg overflow-hidden bg-gray-50 mx-auto transition-all duration-300 ".concat("mobile"===t?"max-w-sm":"w-full"),style:{height:"number"==typeof l?"".concat(l,"px"):l||"500px"}},J().createElement(Ri,{key:u,url:r,mode:t,title:a||(0,de.__)("Preview","nggallery")})))};var zi=["photocrati-nextgen_basic_slideshow","photocrati-nextgen_basic_thumbnails","photocrati-nextgen_basic_imagebrowser","photocrati-nextgen_basic_tagcloud"],Bi=[].concat(zi,["photocrati-nextgen_pro_film","photocrati-nextgen_pro_mosaic"]);const qi=function(){var e=ri();return J().createElement("div",{className:"flex items-center justify-center h-full p-8"},J().createElement("div",{className:"text-center max-w-md"},J().createElement("div",{className:"flex items-center justify-center w-10 h-10 mx-auto mb-4"},J().createElement(Xn,{className:"w-12 h-12"})),J().createElement("h3",{className:"text-xl font-semibold text-gray-800 mb-4"},(0,de.__)("This layout is a Pro Feature","nggallery")),J().createElement("p",{className:"text-gray-600 text-center mb-0"},(0,de.__)("We're sorry, using this layout is not available on your plan.","nggallery")),J().createElement("p",{className:"text-gray-600 text-center mb-6"},(0,de.__)("Please upgrade to the Pro plan to unlock this and all our awesome features.","nggallery")),J().createElement("div",{className:"relative mb-8 flex justify-center items-center"},J().createElement(Yn,{className:"absolute -left-0 -top-4 w-12 h-12 flex-shrink-0"}),J().createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center justify-center bg-green-500 text-white text-center text-lg py-3 px-6 rounded-lg font-medium hover:bg-green-600 transition-colors"},(0,de.__)("Upgrade to Pro","nggallery"),J().createElement(Kn,{className:"w-4 h-4 ml-2 flex-shrink-0"}))),J().createElement("div",{className:"bg-[#F0FDE6] border border-green-100 px-6 py-4 rounded-lg"},J().createElement("div",{className:"flex items-center justify-center"},J().createElement(Zn,{className:"w-8 h-8 mr-2 flex-shrink-0"}),J().createElement("p",{className:"text-gray-700 text-sm text-left"},(0,de.__)("Imagely lite users get","nggallery")," ",J().createElement("strong",{className:"text-green-600"},(0,de.__)("50% off","nggallery"))," ",(0,de.__)("the regular price, automatically applied at checkout!","nggallery"))))))};function Hi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}const Gi=function(e){var t,r=e.prefix,a=e.value,l=e.name,i=void 0===l?"template":l,o=e.onChange,s=e.label,c=e.help,u=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Hi(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hi(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},(null===(t=window.imagelyApp)||void 0===t||null===(t=t.legacyTemplates)||void 0===t?void 0:t[r])||{default:(0,de.__)("Default","nggallery")});return a&&!u[a]&&(u[a]=a),J().createElement(ml,{id:"legacy-template-".concat(r),name:i,value:a||"default",onChange:o,label:null!=s?s:(0,de.__)("Legacy Template","nggallery"),help:null!=c?c:(0,de.__)('Use a legacy PHP template for custom rendering. Templates are loaded from your theme\'s "nggallery" folder.',"nggallery")},Object.entries(u).map(function(e){var t=hr(e,2),n=t[0],r=t[1];return J().createElement("option",{key:n,value:n},r)}))};var Ui=[{value:"bounce",label:(0,de.__)("Bounce","nggallery")},{value:"headShake",label:(0,de.__)("Headshake","nggallery")},{value:"jackInTheBox",label:(0,de.__)("Jack in the box","nggallery")},{value:"jello",label:(0,de.__)("Jello","nggallery")},{value:"rollIn",label:(0,de.__)("Roll in","nggallery")},{value:"rubberBand",label:(0,de.__)("Rubberband","nggallery")},{value:"shakeX",label:(0,de.__)("Shake X","nggallery")},{value:"shakeY",label:(0,de.__)("Shake Y","nggallery")},{value:"swing",label:(0,de.__)("Swing","nggallery")},{value:"tada",label:(0,de.__)("Tada","nggallery")},{value:"wobble",label:(0,de.__)("Wobble","nggallery")},{value:"heartBeat",label:(0,de.__)("Heartbeat","nggallery")},{value:"backInDown",label:(0,de.__)("Back in down","nggallery")},{value:"backInLeft",label:(0,de.__)("Back in left","nggallery")},{value:"backInRight",label:(0,de.__)("Back in right","nggallery")},{value:"backInUp",label:(0,de.__)("Back in up","nggallery")},{value:"bounceIn",label:(0,de.__)("Bounce in","nggallery")},{value:"bounceInDown",label:(0,de.__)("Bounce in down","nggallery")},{value:"bounceInLeft",label:(0,de.__)("Bounce in left","nggallery")},{value:"bounceInRight",label:(0,de.__)("Bounce in right","nggallery")},{value:"bounceInUp",label:(0,de.__)("Bounce in up","nggallery")},{value:"fadeIn",label:(0,de.__)("Fade in","nggallery")},{value:"fadeInDown",label:(0,de.__)("Fade in down","nggallery")},{value:"fadeInDownBig",label:(0,de.__)("Fade in down big","nggallery")},{value:"fadeInLeft",label:(0,de.__)("Fade in left","nggallery")},{value:"fadeInLeftBig",label:(0,de.__)("Fade in left big","nggallery")},{value:"fadeInRight",label:(0,de.__)("Fade in right","nggallery")},{value:"fadeInRightBig",label:(0,de.__)("Fade in right big","nggallery")},{value:"fadeInUp",label:(0,de.__)("Fade in up","nggallery")},{value:"fadeInUpBig",label:(0,de.__)("Fade in up big","nggallery")},{value:"fadeInTopLeft",label:(0,de.__)("Fade in top left","nggallery")},{value:"fadeInTopRight",label:(0,de.__)("Fade in top right","nggallery")},{value:"fadeInBottomLeft",label:(0,de.__)("Fade in bottom left","nggallery")},{value:"fadeInBottomRight",label:(0,de.__)("Fade in bottom right","nggallery")},{value:"flip",label:(0,de.__)("Flip","nggallery")},{value:"flipInX",label:(0,de.__)("Flip in X","nggallery")},{value:"flipInY",label:(0,de.__)("Flip in Y","nggallery")},{value:"lightSpeedInRight",label:(0,de.__)("Lightspeed in right","nggallery")},{value:"lightSpeedInLeft",label:(0,de.__)("Lightspeed in left","nggallery")},{value:"rotateIn",label:(0,de.__)("Rotate in","nggallery")},{value:"rotateInDownLeft",label:(0,de.__)("Rotate in down left","nggallery")},{value:"rotateInDownRight",label:(0,de.__)("Rotate in down right","nggallery")},{value:"rotateInUpLeft",label:(0,de.__)("Rotate in up left","nggallery")},{value:"rotateInUpRight",label:(0,de.__)("Rotate in up right","nggallery")},{value:"zoomIn",label:(0,de.__)("Zoom in","nggallery")},{value:"zoomInDown",label:(0,de.__)("Zoom in down","nggallery")},{value:"zoomInLeft",label:(0,de.__)("Zoom in left","nggallery")},{value:"zoomInRight",label:(0,de.__)("Zoom in right","nggallery")},{value:"zoomInUp",label:(0,de.__)("Zoom in up","nggallery")},{value:"slideInDown",label:(0,de.__)("Slide in down","nggallery")},{value:"slideInLeft",label:(0,de.__)("Slide in left","nggallery")},{value:"slideInRight",label:(0,de.__)("Slide in right","nggallery")},{value:"slideInUp",label:(0,de.__)("Slide in up","nggallery")}],Wi=function(e){var t,n,r=e.formState,a=e.handleInputChange,l=e.hidePagination,i=void 0!==l&&l,o=(0,me.useDispatch)(tr);return"pro"===nr?J().createElement(J().Fragment,null,J().createElement(Ml,{id:"animate_images_enable",name:"animate_images_enable",checked:r.animate_images_enable,onChange:a,label:(0,de.__)("Animate Images","nggallery")}),Ca(r.animate_images_enable)&&J().createElement("div",{className:"ml-6 space-y-4"},J().createElement(ml,{id:"animate_images_style",name:"animate_images_style",value:null!==(t=r.animate_images_style)&&void 0!==t?t:"wobble",onChange:a,label:(0,de.__)("Animation Type","nggallery")},Ui.map(function(e){return J().createElement("option",{key:e.value,value:e.value},e.label)})),J().createElement(dl,{type:"number",name:"animate_images_duration",value:r.animate_images_duration,onChange:a,label:(0,de.__)("Duration (ms)","nggallery")}),J().createElement(dl,{type:"number",name:"animate_images_delay",value:r.animate_images_delay,onChange:a,label:(0,de.__)("Delay (ms)","nggallery")})),i?null:J().createElement(J().Fragment,null,J().createElement(Ml,{id:"animate_pagination_enable",name:"animate_pagination_enable",checked:r.animate_pagination_enable,onChange:a,label:(0,de.__)("Animate Pagination","nggallery")}),Ca(r.animate_pagination_enable)&&J().createElement("div",{className:"ml-6 space-y-4"},J().createElement(ml,{id:"animate_pagination_style",name:"animate_pagination_style",value:null!==(n=r.animate_pagination_style)&&void 0!==n?n:"flipInX",onChange:a,label:(0,de.__)("Animation Type","nggallery")},Ui.map(function(e){return J().createElement("option",{key:e.value,value:e.value},e.label)})),J().createElement(dl,{type:"number",name:"animate_pagination_duration",value:r.animate_pagination_duration,onChange:a,label:(0,de.__)("Duration (ms)","nggallery")}),J().createElement(dl,{type:"number",name:"animate_pagination_delay",value:r.animate_pagination_delay,onChange:a,label:(0,de.__)("Delay (ms)","nggallery")})))):J().createElement("div",{className:"relative"},J().createElement("div",{className:"opacity-50 pointer-events-none"},J().createElement(Ml,{id:"animate_images_enable",name:"animate_images_enable",checked:!1,onChange:function(){},label:(0,de.__)("Animate Images","nggallery")})),J().createElement("div",{className:"absolute inset-0 cursor-pointer",onClick:function(){o.setActiveModal("upgrade",{feature:"animations features"})},title:(0,de.__)("Requires NextGEN Gallery Pro","nggallery")}))},Vi=function(e){var t=e.formState,n=e.handleInputChange;return J().createElement(J().Fragment,null,J().createElement(ul,{htmlFor:"maximum_dimensions",help:(0,de.__)("Certain themes may allow images to flow over their container if this setting is too large","nggallery")},(0,de.__)("Maximum dimensions","nggallery")),J().createElement("div",{className:"flex gap-2 items-center"},J().createElement("span",null,"w"),J().createElement(dl,{type:"number",name:"gallery_width",value:t.gallery_width,onChange:n}),J().createElement("span",null,"/"),J().createElement(dl,{type:"number",name:"gallery_height",value:t.gallery_height,onChange:n}),J().createElement("span",null,"h")),J().createElement(Ml,{id:"autoplay",name:"autoplay",checked:t.autoplay,onChange:n,label:(0,de.__)("Autoplay","nggallery")}),J().createElement(Ml,{id:"pauseonhover",name:"pauseonhover",checked:t.pauseonhover,onChange:n,label:(0,de.__)("Pause on Hover","nggallery")}),J().createElement(Ml,{id:"arrows",name:"arrows",checked:t.arrows,onChange:n,label:(0,de.__)("Show Arrows","nggallery")}),J().createElement(ml,{id:"transition_style",name:"transition_style",value:t.transition_style,onChange:n,label:(0,de.__)("Transition Style","nggallery")},J().createElement("option",{value:"fade"},(0,de.__)("Fade","nggallery")),J().createElement("option",{value:"slide"},(0,de.__)("Slide","nggallery"))),J().createElement(dl,{type:"number",name:"interval",value:t.interval,onChange:n,label:(0,de.__)("Interval","nggallery")}),J().createElement(dl,{type:"number",name:"transition_speed",value:t.transition_speed,onChange:n,label:(0,de.__)("Transition Speed","nggallery")}),J().createElement(Ml,{id:"show_thumbnail_link",name:"show_thumbnail_link",checked:t.show_thumbnail_link,onChange:n,label:(0,de.__)("Show thumbnail link","nggallery")}),Ca(t.show_thumbnail_link)&&J().createElement("div",{className:"ml-6 space-y-4"},J().createElement(dl,{type:"text",name:"thumbnail_link_text",value:t.thumbnail_link_text,onChange:n,label:(0,de.__)("Thumbnail link text","nggallery")})),J().createElement(Gi,{prefix:"gallery",value:t.template,onChange:n}),J().createElement(Wi,{formState:t,handleInputChange:n,hidePagination:!0}))},Ki=function(e){var t=e.formState,n=e.handleInputChange;return J().createElement(Ml,{id:"ajax_pagination",name:"ajax_pagination",checked:t.ajax_pagination,onChange:n,label:(0,de.__)("Enable AJAX pagination","nggallery"),help:(0,de.__)("Browse images without reloading the page.","nggallery")})},Qi=function(e){var t=e.formState,n=e.handleInputChange;return J().createElement(ml,{id:"ngg_triggers_display",name:"ngg_triggers_display",value:t.ngg_triggers_display,onChange:n,label:(0,de.__)("Display Triggers","nggallery")},J().createElement("option",{value:"never"},(0,de.__)("Never","nggallery")),J().createElement("option",{value:"always"},(0,de.__)("Always","nggallery")),J().createElement("option",{value:"exclude_mobile"},(0,de.__)("Exclude Mobile","nggallery")))},Xi=function(e){var t=e.formState,n=e.handleInputChange;return J().createElement(J().Fragment,null,J().createElement(Ml,{id:"override_thumbnail_settings",name:"override_thumbnail_settings",checked:t.override_thumbnail_settings,onChange:n,label:(0,de.__)("Override thumbnail settings","nggallery"),help:(0,de.__)("This does not affect existing thumbnails; overriding the thumbnail settings will create an additional set of thumbnails. To change the size of existing thumbnails please visit 'Manage Galleries' and choose 'Create new thumbnails' for all images in the gallery.","nggallery")}),Ca(t.override_thumbnail_settings)&&J().createElement("div",{className:"ml-6 space-y-4"},J().createElement(ul,{htmlFor:"thumbnail_dimensions",help:(0,de.__)("These are maximum values","nggallery")},(0,de.__)("Thumbnail dimensions","nggallery")),J().createElement("div",{className:"flex gap-4"},J().createElement(dl,{type:"number",name:"thumbnail_width",value:t.thumbnail_width,onChange:n}),J().createElement(dl,{type:"number",name:"thumbnail_height",value:t.thumbnail_height,onChange:n})),J().createElement(Ml,{id:"thumbnail_crop",name:"thumbnail_crop",checked:t.thumbnail_crop,onChange:n,label:(0,de.__)("Thumbnail crop","nggallery")})),J().createElement(dl,{type:"number",name:"images_per_page",value:t.images_per_page,onChange:n,label:(0,de.__)("Images per page","nggallery")}))},Yi=function(e){var t=e.formState,n=e.handleInputChange,r=(0,me.useDispatch)(tr);return"pro"===nr?J().createElement(Ml,{id:"ngg_proofing_display",name:"ngg_proofing_display",checked:t.ngg_proofing_display,onChange:n,label:(0,de.__)("Enable proofing","nggallery"),help:(0,de.__)("Trigger buttons or hover captions need to be enabled for proofing to work","nggallery")}):J().createElement("div",{className:"relative"},J().createElement("div",{className:"opacity-50 pointer-events-none"},J().createElement(Ml,{id:"ngg_proofing_display",name:"ngg_proofing_display",checked:!1,onChange:function(){},label:(0,de.__)("Enable proofing","nggallery"),help:(0,de.__)("Trigger buttons or hover captions need to be enabled for proofing to work","nggallery")})),J().createElement("div",{className:"absolute inset-0 cursor-pointer",onClick:function(){r.setActiveModal("upgrade",{feature:"proofing features"})},title:(0,de.__)("Requires NextGEN Gallery Pro","nggallery")}))},Zi=function(e){var t=e.formState,n=e.handleInputChange;return J().createElement(J().Fragment,null,J().createElement(Xi,{formState:t,handleInputChange:n}),J().createElement(dl,{type:"number",name:"number_of_columns",value:t.number_of_columns,onChange:n,label:(0,de.__)("Number of columns to display","nggallery"),help:(0,de.__)("An empty or zero in this field will use a responsive layout","nggallery")}),J().createElement(Ml,{id:"show_all_in_lightbox",name:"show_all_in_lightbox",checked:t.show_all_in_lightbox,onChange:n,label:(0,de.__)("Add hidden images","nggallery"),help:(0,de.__)("If pagination is used this option will show all images in the modal window (Thickbox, Lightbox etc.) This increases page load.","nggallery")}),J().createElement(Ml,{id:"use_imagebrowser_effect",name:"use_imagebrowser_effect",checked:t.use_imagebrowser_effect,onChange:n,label:(0,de.__)("Use imagebrowser effect","nggallery"),help:(0,de.__)("When active each image in the gallery will link to an imagebrowser display and lightbox effects will not be applied.","nggallery")}),J().createElement(Ml,{id:"show_slideshow_link",name:"show_slideshow_link",checked:t.show_slideshow_link,onChange:n,label:(0,de.__)("Show slideshow link","nggallery")}),Ca(t.show_slideshow_link)&&J().createElement("div",{className:"ml-6 space-y-4"},J().createElement(dl,{type:"text",name:"slideshow_link_text",value:t.slideshow_link_text,onChange:n,label:(0,de.__)("Slideshow link text","nggallery")})),J().createElement("input",{type:"hidden",name:"display_view",value:"default"}),J().createElement(Gi,{prefix:"gallery",value:t.template,onChange:n}),J().createElement(Yi,{formState:t,handleInputChange:n}),J().createElement(Wi,{formState:t,handleInputChange:n}),J().createElement(Qi,{formState:t,handleInputChange:n}),J().createElement(Ki,{formState:t,handleInputChange:n}))};const Ji=window.wp.components;var $i=function(e){var t=e.color,n=e.onChange,r=e.label,a=void 0===r?(0,de.__)("Select Color","nggallery"):r,l=e.className,i=void 0===l?"":l,o=e.enableAlpha,s=void 0!==o&&o,c=e.copyFormat,u=void 0===c?"hex":c,m=hr((0,Z.useState)(!1),2),d=m[0],g=m[1],p=(0,Z.useRef)(null),f=(0,Z.useRef)(null),y=hr((0,Z.useState)(null),2),h=y[0],_=y[1],b=il(ol,d),v=(0,Z.useCallback)(function(){g(!1)},[]),x=vr(v,d);return(0,Z.useLayoutEffect)(function(){if(d&&p.current&&f.current){var e=p.current.getBoundingClientRect(),t=f.current.getBoundingClientRect(),n=ol().getBoundingClientRect(),r=e.bottom-b.offsetY+8,a=e.left+e.width/2-t.width/2-b.offsetX;if(r+t.height>n.height-8){var l=e.top-b.offsetY-t.height-8;l>=8&&(r=l)}var i=n.width-8;a<8&&(a=8),a+t.width>i&&(a=i-t.width),a<0&&(a=8),_({top:r,left:a})}},[d,t,b]),(0,Z.useEffect)(function(){var e=function(e){"Escape"===e.key&&d&&g(!1)};return d&&document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[d]),J().createElement("div",{className:"space-y-2 ".concat(i)},J().createElement("div",{className:"flex items-center space-x-2"},J().createElement("button",{ref:p,type:"button",onClick:function(){return g(!d)},className:"inline-flex items-center px-3 py-2 border border-input-border shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"},J().createElement("span",{className:"w-4 h-4 mr-2 rounded-sm border border-input-border",style:{backgroundColor:t}}),a),J().createElement("span",{className:"text-sm text-gray-500"},t)),d&&ll().createPortal(J().createElement("div",{ref:function(e){x.current=e,f.current=e},style:{position:"absolute",top:h?"".concat(h.top,"px"):"-9999px",left:h?"".concat(h.left,"px"):"-9999px",opacity:h?1:0,zIndex:9999},className:"bg-white rounded-lg shadow-xl border border-input-border p-3"},J().createElement(Ji.ColorPicker,{color:t,onChange:n,enableAlpha:s,copyFormat:u}),J().createElement("div",{className:"mt-3 flex justify-end"},J().createElement("button",{type:"button",onClick:function(){n("")},className:"text-sm text-red-500 hover:text-red-700 cursor-pointer bg-transparent border-none"},(0,de.__)("Clear","nggallery")))),ol()))},eo=function(e){var t=e.formState,n=e.handleInputChange;return J().createElement(J().Fragment,null,J().createElement(Ml,{id:"captions_enabled",name:"captions_enabled",checked:t.captions_enabled,onChange:n,label:(0,de.__)("Enable caption overlay","nggallery")}),Ca(t.captions_enabled)&&J().createElement("div",{className:"ml-6 space-y-4"},J().createElement(Ml,{id:"captions_display_sharing",name:"captions_display_sharing",checked:t.captions_display_sharing,onChange:n,label:(0,de.__)("Display share icons","nggallery")}),J().createElement(Ml,{id:"captions_display_title",name:"captions_display_title",checked:t.captions_display_title,onChange:n,label:(0,de.__)("Display image title","nggallery")}),J().createElement(Ml,{id:"captions_display_description",name:"captions_display_description",checked:t.captions_display_description,onChange:n,label:(0,de.__)("Display image description","nggallery")}),J().createElement(ml,{id:"captions_animation",name:"captions_animation",value:t.captions_animation,onChange:n,label:(0,de.__)("Animation type","nggallery")},J().createElement("option",{value:"fade"},(0,de.__)("Fade in","nggallery")),J().createElement("option",{value:"slideup"},(0,de.__)("Slide up","nggallery")),J().createElement("option",{value:"slidedown"},(0,de.__)("Slide down","nggallery")),J().createElement("option",{value:"slideleft"},(0,de.__)("Slide left","nggallery")),J().createElement("option",{value:"titlebar"},(0,de.__)("Titlebar","nggallery")),J().createElement("option",{value:"plain"},(0,de.__)("Plain","nggallery")))))},to=function(e){var t=e.formState,n=e.handleInputChange;return J().createElement(J().Fragment,null,J().createElement(Xi,{formState:t,handleInputChange:n}),J().createElement(dl,{type:"number",name:"number_of_columns",value:t.number_of_columns,onChange:n,label:(0,de.__)("Number of columns to display","nggallery"),help:(0,de.__)("An empty or zero in this field will use a responsive layout","nggallery")}),J().createElement(dl,{type:"number",name:"border_size",value:t.border_size,onChange:n,label:(0,de.__)("Border size","nggallery")}),J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},(0,de.__)("Border color","nggallery")),J().createElement($i,{color:t.border_color,onChange:function(e){return n({target:{name:"border_color",value:e}})}}),J().createElement(dl,{type:"number",name:"spacing",value:t.spacing,onChange:n,label:(0,de.__)("Spacing","nggallery")}),J().createElement(ml,{id:"display_type_view",name:"display_type_view",value:t.display_type_view,onChange:n,label:(0,de.__)("Select View","nggallery")},J().createElement("option",{value:"default"},(0,de.__)("Default","nggallery")),J().createElement("option",{value:"pro-thumbnail-border-template.php"},(0,de.__)("pro-thumbnail-border-template.php","nggallery")),J().createElement("option",{value:"pro-thumbnail-caption-template.php"},(0,de.__)("pro-thumbnail-caption-template.php","nggallery")),J().createElement("option",{value:"pro-thumbnail-caption2-template.php"},(0,de.__)("pro-thumbnail-caption2-template.php","nggallery"))),J().createElement(eo,{formState:t,handleInputChange:n}),J().createElement(Wi,{formState:t,handleInputChange:n}),J().createElement(Qi,{formState:t,handleInputChange:n}))},no=function(e){var t=e.formState,n=e.handleInputChange;return J().createElement(J().Fragment,null,J().createElement("input",{type:"hidden",name:"display_view",value:"default_view"}),J().createElement(Gi,{prefix:"imagebrowser",value:t.template,onChange:n}),J().createElement(Wi,{formState:t,handleInputChange:n}),J().createElement(Ki,{formState:t,handleInputChange:n}))},ro=function(e){var t=e.formState,n=e.handleInputChange,r=_i.map(function(e){return{value:e.id,label:e.name}});return J().createElement("div",{className:"space-y-4"},J().createElement("h3",{className:"text-sm font-medium text-gray-900"},(0,de.__)("Gallery Display Settings","nggallery")),J().createElement(ml,{id:"gallery_display_type",name:"gallery_display_type",value:t.gallery_display_type||"",onChange:n,label:(0,de.__)("Display Type","nggallery")},r.map(function(e){return J().createElement("option",{key:e.value,value:e.value},e.label)})),J().createElement(Ml,{id:"gallery_override_global_settings",name:"gallery_override_global_settings",checked:t.gallery_override_global_settings||!1,onChange:n,label:(0,de.__)("Override Global Settings","nggallery")}),t.gallery_override_global_settings&&J().createElement("div",{className:"pl-4 border-l-2 border-gray-200 space-y-4"},J().createElement("p",{className:"text-sm text-gray-600"},(0,de.__)("Custom settings for this gallery will override the global display type settings.","nggallery"))))},ao=function(e){var t=e.formState,n=e.handleInputChange;return J().createElement(J().Fragment,null,J().createElement(dl,{type:"number",name:"number",value:t.number,onChange:n,label:(0,de.__)("Number of tags to display","nggallery"),help:(0,de.__)("Enter the maximum number of tags to display in the cloud","nggallery")}),J().createElement(ro,{formState:t,handleInputChange:n}),J().createElement(Wi,{formState:t,handleInputChange:n}))},lo=function(e){var t=e.formState,n=e.handleInputChange;return J().createElement(J().Fragment,null,J().createElement(Ml,{id:"override_image_settings",name:"override_image_settings",checked:t.override_image_settings,onChange:n,label:(0,de.__)("Override image settings","nggallery"),help:(0,de.__)("Overriding the image settings will create an additional set of images","nggallery")}),Ca(t.override_image_settings)&&J().createElement("div",{className:"ml-6 space-y-4"},J().createElement(ml,{id:"image_quality",name:"image_quality",value:t.image_quality,onChange:n,label:(0,de.__)("Image quality","nggallery")},Array.from({length:12},function(e,t){return 45+5*t}).map(function(e){return J().createElement("option",{key:e,value:e.toString()},e,"%")})),J().createElement(Ml,{id:"image_watermark",name:"image_watermark",checked:t.image_watermark,onChange:n,label:(0,de.__)("Image watermark","nggallery")})),J().createElement(dl,{type:"number",name:"image_display_size",value:t.image_display_size,onChange:n,label:(0,de.__)("Image display size","nggallery"),help:(0,de.__)("Measured in pixels","nggallery")}),J().createElement(dl,{type:"number",name:"image_max_height",value:t.image_max_height,onChange:n,label:(0,de.__)("Image maximum height","nggallery"),help:(0,de.__)("Measured in pixels. Empty or 0 will not impose a limit.","nggallery")}),J().createElement(dl,{type:"number",name:"image_spacing",value:t.image_spacing,onChange:n,label:(0,de.__)("Image spacing","nggallery"),help:(0,de.__)("Measured in pixels","nggallery")}),J().createElement(dl,{type:"number",name:"border_size",value:t.border_size,onChange:n,label:(0,de.__)("Border size","nggallery")}),J().createElement("div",{className:"mb-4"},J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},(0,de.__)("Border color","nggallery")),J().createElement($i,{color:t.border_color,onChange:function(e){n({target:{name:"border_color",value:e}})}})),J().createElement(ml,{id:"display_type_view",name:"display_type_view",value:t.display_type_view,onChange:n,label:(0,de.__)("Select View","nggallery")},J().createElement("option",{value:"default"},(0,de.__)("Default","nggallery"))),J().createElement(Ml,{id:"display_captions",name:"display_captions",checked:t.display_captions,onChange:n,label:(0,de.__)("Display captions","nggallery")}),Ca(t.display_captions)&&J().createElement("div",{className:"ml-6 space-y-4"},J().createElement(ml,{id:"caption_location",name:"caption_location",value:t.caption_location,onChange:n,label:(0,de.__)("Caption location","nggallery")},J().createElement("option",{value:"above"},(0,de.__)("Above","nggallery")),J().createElement("option",{value:"below"},(0,de.__)("Below","nggallery")))),J().createElement(eo,{formState:t,handleInputChange:n}),J().createElement(Yi,{formState:t,handleInputChange:n}),J().createElement(Wi,{formState:t,handleInputChange:n,hidePagination:!0}),J().createElement(Qi,{formState:t,handleInputChange:n}))},io=function(e){var t=e.formState,n=e.handleInputChange;return J().createElement(J().Fragment,null,J().createElement("input",{type:"hidden",name:"display_type_view",value:"default"}),J().createElement(Gi,{prefix:"imagebrowser",value:t.template,onChange:n}),J().createElement(Wi,{formState:t,handleInputChange:n}),J().createElement(Ki,{formState:t,handleInputChange:n}))},oo=function(e){var t=e.formState,n=e.handleInputChange;return J().createElement(J().Fragment,null,J().createElement(dl,{type:"number",name:"height",value:t.height,onChange:n,label:(0,de.__)("Gallery Height","nggallery")}),J().createElement(eo,{formState:t,handleInputChange:n}),J().createElement(Wi,{formState:t,handleInputChange:n,hidePagination:!0}))},so=function(e){var t=e.formState,n=e.handleInputChange,r=function(e,t){n({target:{name:t,value:e}})},a=function(e){return function(t){var r=""===t.target.value?"":String(parseInt(t.target.value,10)||0);n({target:{name:e,value:r}})}};return J().createElement(J().Fragment,null,J().createElement(Xi,{formState:t,handleInputChange:n}),J().createElement(dl,{type:"number",name:"image_spacing",value:t.image_spacing,onChange:n,label:(0,de.__)("Image spacing","nggallery")}),J().createElement(dl,{type:"number",name:"border_size",value:t.border_size,onChange:n,label:(0,de.__)("Border size","nggallery")}),J().createElement(dl,{type:"number",name:"frame_size",value:t.frame_size,onChange:n,label:(0,de.__)("Frame size","nggallery")}),J().createElement("div",{className:"mb-4"},J().createElement(ul,null,(0,de.__)("Border color","nggallery")),J().createElement($i,{color:t.border_color,onChange:function(e){return r(e,"border_color")}})),J().createElement("div",{className:"mb-4"},J().createElement(ul,null,(0,de.__)("Frame color","nggallery")),J().createElement($i,{color:t.frame_color,onChange:function(e){return r(e,"frame_color")}})),J().createElement(Ml,{id:"alttext_display",name:"alttext_display",checked:t.alttext_display,onChange:n,label:(0,de.__)("Display image title","nggallery")}),Ca(t.alttext_display)&&J().createElement("div",{className:"ml-6 space-y-4"},J().createElement("div",{className:"mb-4"},J().createElement(ul,null,(0,de.__)("Title font color","nggallery")),J().createElement($i,{color:t.alttext_font_color,onChange:function(e){return r(e,"alttext_font_color")}}),J().createElement("p",{className:"mt-1 text-sm text-gray-500"},(0,de.__)("An empty color setting will use your theme colors","nggallery"))),J().createElement(dl,{type:"number",name:"alttext_font_size",value:t.alttext_font_size,onChange:a("alttext_font_size"),label:(0,de.__)("Title font size","nggallery"),help:(0,de.__)("Measured in pixels. An empty or zero setting will use your theme font size","nggallery"),placeholder:(0,de.__)("# of pixels","nggallery"),min:0,max:200})),J().createElement(Ml,{id:"description_display",name:"description_display",checked:t.description_display,onChange:n,label:(0,de.__)("Display image description","nggallery")}),Ca(t.description_display)&&J().createElement("div",{className:"ml-6 space-y-4"},J().createElement("div",{className:"mb-4"},J().createElement(ul,{help:(0,de.__)("An empty color setting will use your theme colors","nggallery")},(0,de.__)("Description font color","nggallery")),J().createElement($i,{color:t.description_font_color,onChange:function(e){return r(e,"description_font_color")}})),J().createElement(dl,{type:"number",name:"description_font_size",value:t.description_font_size,onChange:a("description_font_size"),label:(0,de.__)("Description font size","nggallery"),help:(0,de.__)("Measured in pixels. An empty or zero setting will use your theme font size","nggallery"),placeholder:(0,de.__)("# of pixels","nggallery"),min:0,max:200})),J().createElement(eo,{formState:t,handleInputChange:n}),J().createElement(Yi,{formState:t,handleInputChange:n}),J().createElement(Qi,{formState:t,handleInputChange:n}))},co=function(e){var t=e.formState,n=e.handleInputChange;return J().createElement(J().Fragment,null,J().createElement(Ml,{id:"override_gallery_width",name:"override_gallery_width",checked:t.override_gallery_width,onChange:n,label:(0,de.__)("Override maximum gallery width","nggallery"),help:(0,de.__)("Gallery width is set to your theme's content width but this can be overridden to create smaller galleries. If your theme does not provide the $content_width feature the default will fallback to 2000px.","nggallery")}),Ca(t.override_gallery_width)&&J().createElement("div",{className:"ml-6 space-y-4"},J().createElement(dl,{type:"number",name:"maximum_gallery_width",value:t.maximum_gallery_width,onChange:n,label:(0,de.__)("Maximum gallery width","nggallery"),help:(0,de.__)("Measured in pixels","nggallery")})),J().createElement(eo,{formState:t,handleInputChange:n}),J().createElement(Wi,{formState:t,handleInputChange:n,hidePagination:!0}))},uo=function(e){var t=e.formState,n=e.handleInputChange;return J().createElement(J().Fragment,null,J().createElement(ml,{id:"justify_last_row",name:"justify_last_row",value:t.justify_last_row,onChange:n,label:(0,de.__)("Justify last row","nggallery"),help:(0,de.__)('When aligning the last row some images may appear cropped. Select "Do not justify" to allow the last row to appear flush but "unfinished". "Hide" will omit any images that can not be justified without cropping.',"nggallery")},J().createElement("option",{value:"justify"},(0,de.__)("Justify","nggallery")),J().createElement("option",{value:"nojustify"},(0,de.__)("Do not justify","nggallery")),J().createElement("option",{value:"hide"},(0,de.__)("Hide","nggallery"))),J().createElement(Ml,{id:"enable_lazy_loading",name:"enable_lazy_loading",checked:t.enable_lazy_loading,onChange:n,label:(0,de.__)('Enable "lazy" image loading',"nggallery")}),t.enable_lazy_loading&&J().createElement("div",{className:"ml-6 space-y-4"},J().createElement(dl,{type:"number",name:"images_to_load_on_scroll",value:t.images_to_load_on_scroll,onChange:n,label:(0,de.__)("Images to load when scrolling","nggallery")}),J().createElement(dl,{type:"number",name:"images_to_display_at_start",value:t.images_to_display_at_start,onChange:n,label:(0,de.__)("Images to display at start","nggallery")})),J().createElement(dl,{type:"number",name:"margins",value:t.margins,onChange:n,label:(0,de.__)("Margins","nggallery")}),J().createElement(dl,{type:"number",name:"row_height",value:t.row_height,onChange:n,label:(0,de.__)("Row height","nggallery")}),J().createElement(eo,{formState:t,handleInputChange:n}),J().createElement(Yi,{formState:t,handleInputChange:n}),J().createElement(Wi,{formState:t,handleInputChange:n}))},mo=function(e){var t=e.formState,n=e.handleInputChange;return J().createElement(J().Fragment,null,J().createElement(dl,{type:"number",name:"maximum_image_width",value:t.maximum_image_width,onChange:n,label:(0,de.__)("Maximum image width","nggallery"),help:(0,de.__)("Measured in pixels","nggallery")}),J().createElement(dl,{type:"number",name:"image_padding",value:t.image_padding,onChange:n,label:(0,de.__)("Image padding","nggallery"),help:(0,de.__)("Measured in pixels","nggallery")}),J().createElement(Ml,{id:"center_gallery",name:"center_gallery",checked:t.center_gallery,onChange:n,label:(0,de.__)("Center the gallery","nggallery")}),J().createElement(eo,{formState:t,handleInputChange:n}),J().createElement(Wi,{formState:t,handleInputChange:n,hidePagination:!0}),J().createElement(Qi,{formState:t,handleInputChange:n}))},go=function(e){var t=e.formState,n=e.handleInputChange;return J().createElement(J().Fragment,null,J().createElement(Ml,{id:"enable_tag_filter",name:"enable_tag_filter",checked:t.enable_tag_filter,onChange:n,label:(0,de.__)("Enable filtering results by tag","nggallery")}),J().createElement(Ml,{id:"search_alttext",name:"search_alttext",checked:t.search_alttext,onChange:n,label:(0,de.__)("Search image alttext","nggallery")}),J().createElement(Ml,{id:"search_description",name:"search_description",checked:t.search_description,onChange:n,label:(0,de.__)("Search image description","nggallery")}),J().createElement(Ml,{id:"search_tags",name:"search_tags",checked:t.search_tags,onChange:n,label:(0,de.__)("Search image tags","nggallery")}),J().createElement(ml,{id:"search_mode",name:"search_mode",value:t.search_mode,onChange:n,label:(0,de.__)("Database search mode","nggallery"),help:(0,de.__)("A natural language search treats the requested string as a phrase in text without any operators except for quotation marks. A boolean search uses special rules and operators such as the plus and minus symbols.","nggallery")},J().createElement("option",{value:"natural"},(0,de.__)("Natural language","nggallery")),J().createElement("option",{value:"boolean"},(0,de.__)("Boolean","nggallery"))),J().createElement(dl,{type:"number",name:"minimum_relevance",value:t.minimum_relevance,onChange:n,label:(0,de.__)("Minimum relevance","nggallery"),help:(0,de.__)("The database server assigns a relevance score to each possible image based on a number of factors with zero being not at all relevant. Users with smaller databases or images whose alttext or description only holds a few words will need a lower number here; possibly as low as 0.05. It is unlikely many users will need to raise this beyond one.","nggallery")}),J().createElement(dl,{type:"number",name:"limit",value:t.limit,onChange:n,label:(0,de.__)("Limit search results","nggallery"),help:(0,de.__)("Limit search results to this amount. A setting of zero means no limitations are applied","nggallery")}),J().createElement(Ml,{id:"order_by_relevance",name:"order_by_relevance",checked:t.order_by_relevance,onChange:n,label:(0,de.__)("Order by relevance first","nggallery"),help:(0,de.__)("When enabled search results will be ordered by their relevance first, then by the secondary order setting","nggallery")}),J().createElement(ml,{id:"order_by",name:"order_by",value:t.order_by,onChange:n,label:(0,de.__)("Order search results by","nggallery")},J().createElement("option",{value:"pid"},(0,de.__)("Image ID","nggallery")),J().createElement("option",{value:"galleryid"},(0,de.__)("Gallery ID","nggallery")),J().createElement("option",{value:"filename"},(0,de.__)("Image filename","nggallery"))),J().createElement(ml,{id:"order_direction",name:"order_direction",value:t.order_direction,onChange:n,label:(0,de.__)("Order direction of search results","nggallery")},J().createElement("option",{value:"ASC"},(0,de.__)("Ascending","nggallery")),J().createElement("option",{value:"DESC"},(0,de.__)("Descending","nggallery"))),J().createElement(ml,{id:"gallery_display_type",name:"gallery_display_type",value:t.gallery_display_type,onChange:n,label:(0,de.__)("Gallery display type","nggallery"),help:(0,de.__)("The display type used to render search results","nggallery")},J().createElement("option",{value:"photocrati-nextgen_basic_thumbnails"},(0,de.__)("Basic Thumbnails","nggallery")),J().createElement("option",{value:"photocrati-nextgen_basic_slideshow"},(0,de.__)("Basic Slideshow","nggallery")),J().createElement("option",{value:"photocrati-nextgen_basic_imagebrowser"},(0,de.__)("Basic ImageBrowser","nggallery")),J().createElement("option",{value:"photocrati-nextgen_pro_thumbnail_grid"},(0,de.__)("Pro Thumbnail Grid","nggallery")),J().createElement("option",{value:"photocrati-nextgen_pro_blog_gallery"},(0,de.__)("Pro Blog Gallery","nggallery")),J().createElement("option",{value:"photocrati-nextgen_pro_imagebrowser"},(0,de.__)("Pro ImageBrowser","nggallery")),J().createElement("option",{value:"photocrati-nextgen_pro_slideshow"},(0,de.__)("Pro Slideshow","nggallery"))))},po=function(e){var t=e.formState,n=e.handleInputChange;return J().createElement(J().Fragment,null,J().createElement(Ml,{id:"crop_images",name:"crop_images",checked:t.crop_images,onChange:n,label:(0,de.__)("Crop images","nggallery")}),J().createElement("div",{className:"ml-6 space-y-4"},t.crop_images&&J().createElement(Ml,{id:"pan_images",name:"pan_images",checked:t.pan_images,onChange:n,label:(0,de.__)("Pan images","nggallery")}),!t.crop_images&&J().createElement(J().Fragment,null,J().createElement(dl,{type:"number",name:"border_size",value:t.border_size,onChange:n,label:(0,de.__)("Border size","nggallery"),help:(0,de.__)('Borders will not be applied if "Crop Images" is enabled',"nggallery")}),J().createElement(ul,null,(0,de.__)("Border color","nggallery")),J().createElement($i,{color:t.border_color,onChange:function(e){n({target:{name:"border_color",value:e}})}}))),J().createElement(Ml,{id:"show_play_controls",name:"show_play_controls",checked:t.show_play_controls,onChange:n,label:(0,de.__)("Show play controls","nggallery")}),J().createElement(Ml,{id:"show_captions",name:"show_captions",checked:t.show_captions,onChange:n,label:(0,de.__)("Show captions","nggallery")}),Ca(t.show_captions)&&J().createElement("div",{className:"ml-4 space-y-4"},J().createElement(ml,{id:"caption_class",name:"caption_class",value:t.caption_class,onChange:n,label:(0,de.__)("Caption location","nggallery")},J().createElement("option",{value:"caption_above_stage"},(0,de.__)("Top","nggallery")),J().createElement("option",{value:"caption_below_stage"},(0,de.__)("Bottom","nggallery")),J().createElement("option",{value:"caption_overlay_top"},(0,de.__)("Top (Overlay)","nggallery")),J().createElement("option",{value:"caption_overlay_bottom"},(0,de.__)("Bottom (Overlay)","nggallery"))),J().createElement(dl,{type:"number",name:"caption_height",value:t.caption_height,onChange:n,label:(0,de.__)("Caption height","nggallery"),help:(0,de.__)("Measured in pixels","nggallery")})),J().createElement(ml,{id:"stage_aspect_ratio",name:"stage_aspect_ratio",value:t.stage_aspect_ratio,onChange:n,label:(0,de.__)("Stage aspect ratio","nggallery")},J().createElement("option",{value:"first_image"},(0,de.__)("First Image","nggallery")),J().createElement("option",{value:"image_average"},(0,de.__)("Average","nggallery")),J().createElement("option",{value:"1.5"},(0,de.__)("3:2 [1.5]","nggallery")),J().createElement("option",{value:"1.333"},(0,de.__)("4:3 [1.333]","nggallery")),J().createElement("option",{value:"1.777"},(0,de.__)("16:9 [1.777]","nggallery")),J().createElement("option",{value:"1.6"},(0,de.__)("16:10 [1.6]","nggallery")),J().createElement("option",{value:"1.85"},(0,de.__)("1.85:1 [1.85]","nggallery")),J().createElement("option",{value:"2.39"},(0,de.__)("2.39:1 [2.39]","nggallery")),J().createElement("option",{value:"1.81"},(0,de.__)("1.81:1 [1.81]","nggallery")),J().createElement("option",{value:"1"},(0,de.__)("1:1 (Square) [1]","nggallery"))),J().createElement(ul,null,(0,de.__)("Gallery width","nggallery")),J().createElement("div",{className:"flex items-end gap-2"},J().createElement(dl,{type:"number",name:"gallery_width",value:t.gallery_width,onChange:n}),J().createElement(ml,{id:"gallery_width_unit",name:"gallery_width_unit",value:t.gallery_width_unit,onChange:n},J().createElement("option",{value:"percent"},(0,de.__)("Percent","nggallery")),J().createElement("option",{value:"pixels"},(0,de.__)("Pixels","nggallery")))),J().createElement(ml,{id:"transition_effect",name:"transition_effect",value:t.transition_effect,onChange:n,label:(0,de.__)("Transition effect","nggallery")},J().createElement("option",{value:"fade"},(0,de.__)("Crossfade between images","nggallery")),J().createElement("option",{value:"flash"},(0,de.__)("Fades into background color between images","nggallery")),J().createElement("option",{value:"pulse"},(0,de.__)("Quickly move the image into the background color, then fade into the next image","nggallery")),J().createElement("option",{value:"slide"},(0,de.__)("Slide images depending on image position","nggallery")),J().createElement("option",{value:"fadeslide"},(0,de.__)("Fade between images and slide slightly at the same time","nggallery"))),J().createElement(dl,{type:"number",name:"transition_speed",value:t.transition_speed,onChange:n,label:(0,de.__)("Transition speed","nggallery"),help:(0,de.__)("Measured in seconds","nggallery")}),J().createElement(dl,{type:"number",name:"slideshow_speed",value:t.slideshow_speed,onChange:n,label:(0,de.__)("Slideshow speed","nggallery"),help:(0,de.__)("Measured in seconds","nggallery")}),J().createElement(Ml,{id:"override_thumbnail_settings",name:"override_thumbnail_settings",checked:t.override_thumbnail_settings,onChange:n,label:(0,de.__)("Override thumbnail settings","nggallery"),help:(0,de.__)("This does not affect existing thumbnails; overriding the thumbnail settings will create an additional set of thumbnails. To change the size of existing thumbnails please visit 'Manage Galleries' and choose 'Create new thumbnails' for all images in the gallery.","nggallery")}),t.override_thumbnail_settings&&J().createElement("div",{className:"ml-6 space-y-4"},J().createElement(ml,{id:"thumbnail_dimensions",name:"thumbnail_dimensions",value:t.thumbnail_dimensions,onChange:n,label:(0,de.__)("Thumbnail dimensions","nggallery"),help:(0,de.__)("These are maximum values","nggallery")},J().createElement("option",{value:"240x160"},"240x160"),J().createElement("option",{value:"custom"},(0,de.__)("Custom","nggallery"))),"custom"===t.thumbnail_dimensions&&J().createElement("div",{className:"flex gap-4"},J().createElement(dl,{type:"number",name:"thumbnail_width",value:t.thumbnail_width,onChange:n}),J().createElement(dl,{type:"number",name:"thumbnail_height",value:t.thumbnail_height,onChange:n}))),J().createElement(Qi,{formState:t,handleInputChange:n}))},fo=function(e){var t=e.formState,n=e.handleInputChange;return J().createElement(J().Fragment,null,J().createElement(Ml,{id:"crop_images",name:"crop_images",checked:t.crop_images,onChange:n,label:(0,de.__)("Crop images","nggallery")}),J().createElement("div",{className:"ml-6 space-y-4"},t.crop_images&&J().createElement(Ml,{id:"pan_images",name:"pan_images",checked:t.pan_images,onChange:n,label:(0,de.__)("Pan images","nggallery")}),!t.crop_images&&J().createElement(J().Fragment,null,J().createElement(dl,{type:"number",name:"border_size",value:t.border_size,onChange:n,label:(0,de.__)("Border size","nggallery"),help:(0,de.__)('Borders will not be applied if "Crop Images" is enabled',"nggallery")}),J().createElement(ul,null,(0,de.__)("Border color","nggallery")),J().createElement($i,{color:t.border_color,onChange:function(e){n({target:{name:"border_color",value:e}})}}))),J().createElement(Ml,{id:"show_play_controls",name:"show_play_controls",checked:t.show_play_controls,onChange:n,label:(0,de.__)("Show play controls","nggallery")}),J().createElement(Ml,{id:"show_captions",name:"show_captions",checked:t.show_captions,onChange:n,label:(0,de.__)("Show captions","nggallery")}),Ca(t.show_captions)&&J().createElement("div",{className:"ml-4 space-y-4"},J().createElement(ml,{id:"caption_class",name:"caption_class",value:t.caption_class,onChange:n,label:(0,de.__)("Caption location","nggallery")},J().createElement("option",{value:"caption_above_stage"},(0,de.__)("Top","nggallery")),J().createElement("option",{value:"caption_below_stage"},(0,de.__)("Bottom","nggallery")),J().createElement("option",{value:"caption_overlay_top"},(0,de.__)("Top (Overlay)","nggallery")),J().createElement("option",{value:"caption_overlay_bottom"},(0,de.__)("Bottom (Overlay)","nggallery"))),J().createElement(dl,{type:"number",name:"caption_height",value:t.caption_height,onChange:n,label:(0,de.__)("Caption height","nggallery"),help:(0,de.__)("Measured in pixels","nggallery")})),J().createElement(ml,{id:"stage_aspect_ratio",name:"stage_aspect_ratio",value:t.stage_aspect_ratio,onChange:n,label:(0,de.__)("Stage aspect ratio","nggallery")},J().createElement("option",{value:"first_image"},(0,de.__)("First Image","nggallery")),J().createElement("option",{value:"image_average"},(0,de.__)("Average","nggallery")),J().createElement("option",{value:"1.5"},(0,de.__)("3:2 [1.5]","nggallery")),J().createElement("option",{value:"1.333"},(0,de.__)("4:3 [1.333]","nggallery")),J().createElement("option",{value:"1.777"},(0,de.__)("16:9 [1.777]","nggallery")),J().createElement("option",{value:"1.6"},(0,de.__)("16:10 [1.6]","nggallery")),J().createElement("option",{value:"1.85"},(0,de.__)("1.85:1 [1.85]","nggallery")),J().createElement("option",{value:"2.39"},(0,de.__)("2.39:1 [2.39]","nggallery")),J().createElement("option",{value:"1.81"},(0,de.__)("1.81:1 [1.81]","nggallery")),J().createElement("option",{value:"1"},(0,de.__)("1:1 (Square) [1]","nggallery"))),J().createElement(ul,null,(0,de.__)("Gallery width","nggallery")),J().createElement("div",{className:"flex items-end gap-2"},J().createElement(dl,{type:"number",name:"gallery_width",value:t.gallery_width,onChange:n}),J().createElement(ml,{id:"gallery_width_unit",name:"gallery_width_unit",value:t.gallery_width_unit,onChange:n},J().createElement("option",{value:"percent"},(0,de.__)("Percent","nggallery")),J().createElement("option",{value:"pixels"},(0,de.__)("Pixels","nggallery")))),J().createElement(ml,{id:"transition_effect",name:"transition_effect",value:t.transition_effect,onChange:n,label:(0,de.__)("Transition effect","nggallery")},J().createElement("option",{value:"fade"},(0,de.__)("Crossfade between images","nggallery")),J().createElement("option",{value:"flash"},(0,de.__)("Fades into background color between images","nggallery")),J().createElement("option",{value:"pulse"},(0,de.__)("Quickly move the image into the background color, then fade into the next image","nggallery")),J().createElement("option",{value:"slide"},(0,de.__)("Slide images depending on image position","nggallery")),J().createElement("option",{value:"fadeslide"},(0,de.__)("Fade between images and slide slightly at the same time","nggallery"))),J().createElement(dl,{type:"number",name:"transition_speed",value:t.transition_speed,onChange:n,label:(0,de.__)("Transition speed","nggallery"),help:(0,de.__)("Measured in seconds","nggallery")}),J().createElement(dl,{type:"number",name:"slideshow_speed",value:t.slideshow_speed,onChange:n,label:(0,de.__)("Slideshow speed","nggallery"),help:(0,de.__)("Measured in seconds","nggallery")}),J().createElement(Ml,{id:"override_thumbnail_settings",name:"override_thumbnail_settings",checked:t.override_thumbnail_settings,onChange:n,label:(0,de.__)("Override thumbnail settings","nggallery"),help:(0,de.__)("This does not affect existing thumbnails; overriding the thumbnail settings will create an additional set of thumbnails. To change the size of existing thumbnails please visit 'Manage Galleries' and choose 'Create new thumbnails' for all images in the gallery.","nggallery")}),t.override_thumbnail_settings&&J().createElement("div",{className:"ml-6 space-y-4"},J().createElement(ml,{id:"thumbnail_dimensions",name:"thumbnail_dimensions",value:t.thumbnail_dimensions,onChange:n,label:(0,de.__)("Thumbnail dimensions","nggallery"),help:(0,de.__)("These are maximum values","nggallery")},J().createElement("option",{value:"240x160"},"240x160"),J().createElement("option",{value:"custom"},(0,de.__)("Custom","nggallery"))),"custom"===t.thumbnail_dimensions&&J().createElement("div",{className:"flex gap-4"},J().createElement(dl,{type:"number",name:"thumbnail_width",value:t.thumbnail_width,onChange:n}),J().createElement(dl,{type:"number",name:"thumbnail_height",value:t.thumbnail_height,onChange:n}))),J().createElement(Qi,{formState:t,handleInputChange:n}))};function yo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ho(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yo(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yo(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const _o=function(e){var t,r=e.gallery,a=e.previewMode,l=e.onPreviewModeChange,i=(0,me.useSelect)(function(e){return e(tr).getCurrentId()},[]),o=fa(i).data,s=(null===(t=window.imagelyApp)||void 0===t?void 0:t.proTypeInstalled)||"lite",c=(0,Z.useMemo)(function(){return function(e){switch(e){case"lite":default:return zi;case"starter":return Bi;case"pro":case"plus":return _i.map(function(e){return e.id})}}(s)},[s]),u=hr((0,Z.useState)(null),2),m=u[0],d=u[1],g=Oi({type:"gallery",item:o,includeEcommerce:!1}),p=(null==r?void 0:r.display_type)||"photocrati-nextgen_basic_thumbnails",f=Li(),y=f.getCurrentDisplayTypeSettings,h=f.updateDisplayTypeSettings,_=f.updateField,b=f.registerFlushCallback,v=f.unregisterFlushCallback,x=ha(),w=ea(),E=w.showSuccess,C=w.showError,N=(0,Z.useRef)(null),k=(0,Z.useRef)(null),S=(0,Z.useCallback)(function(){N.current&&(clearTimeout(N.current),N.current=null),k.current&&(k.current(),k.current=null)},[]);(0,Z.useEffect)(function(){return b("customizeTab",S),S(),function(){S(),v("customizeTab")}},[p,S,b,v]),(0,Z.useEffect)(function(){if(p&&r){var e=Sa(((null==r?void 0:r.display_type_settings)||{})[p]||{}),t=ho(ho({},(a={},["photocrati-nextgen_basic_imagebrowser","photocrati-nextgen_basic_singlepic","photocrati-nextgen_basic_thumbnails","photocrati-nextgen_basic_slideshow","photocrati-nextgen_basic_compact_album","photocrati-nextgen_basic_extended_album","photocrati-nextgen_pro_thumbnail_grid","photocrati-nextgen_pro_blog_gallery","photocrati-nextgen_pro_imagebrowser","photocrati-nextgen_pro_sidescroll","photocrati-nextgen_pro_film","photocrati-nextgen_pro_tile","photocrati-nextgen_pro_mosaic","photocrati-nextgen_pro_masonry","photocrati-nextgen_pro_grid_album","photocrati-nextgen_pro_list_album"].includes(n=p)&&(a.animate_images_duration="1500",a.animate_images_delay="250",a.animate_pagination_duration="1500",a.animate_pagination_delay="250"),"imagely-pro-search"===n&&(a.search_alttext=!0,a.search_description=!0,a.search_tags=!0,a.enable_tag_filter=!0,a.search_mode="natural",a.limit="0",a.order_by="pid",a.order_direction="ASC",a.order_by_relevance=!0,a.minimum_relevance="1",a.gallery_display_type="photocrati-nextgen_basic_thumbnails",a.use_lightbox_effect=!0),["photocrati-nextgen_pro_thumbnail_grid","photocrati-nextgen_pro_blog_gallery","photocrati-nextgen_pro_imagebrowser"].includes(n)&&(a.display_type_view="default"),"photocrati-nextgen_pro_mosaic"===n&&(a.images_to_load_on_scroll="15",a.images_to_display_at_start="15"),"photocrati-nextgen_pro_slideshow"===n&&(a.stage_aspect_ratio="1.5",a.gallery_width="100",a.gallery_width_unit="percent"),a)),e);h(p,t)}var n,a},[p,null==r?void 0:r.display_type_settings,r,h]);var O=function(){var e=Er(Nr().mark(function e(t){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:if(d(t),c.includes(t)){e.next=5;break}return e.abrupt("return");case 5:return _("display_type",t),e.prev=6,e.next=9,x.mutateAsync({id:r.gid,data:{display_type:t}});case 9:E((0,de.__)("Layout changed successfully!","nggallery")),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(6),C((0,de.__)("Failed to change layout. Please try again.","nggallery")),console.error("Error changing layout:",e.t0);case 16:case"end":return e.stop()}},e,null,[[6,12]])}));return function(t){return e.apply(this,arguments)}}(),P=(0,Z.useCallback)(function(){var e=Er(Nr().mark(function e(t,n,r){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.mutateAsync({id:t,data:{display_type:n,display_type_settings:r}});case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),C((0,de.__)("Failed to update display settings. Changes have been reverted.","nggallery")),console.error("Error updating display settings:",e.t0);case 9:case"end":return e.stop()}},e,null,[[0,5]])}));return function(t,n,r){return e.apply(this,arguments)}}(),[x,C]),T=(0,Z.useCallback)(function(e){var t=e.target,a=t.name,l=t.value,i=t.type,o="checkbox"===i?e.target.checked:l;if(p&&(h(p,n({},a,o)),r)){N.current&&clearTimeout(N.current);var s=p,c=r.gid,u=r.display_type_settings,m="checkbox"===i?Na(o):o,d=function(){var e=ho(ho({},u),{},n({},s,ho(ho({},(null==u?void 0:u[s])||{}),{},n({},a,m))));P(c,s,e)};k.current=d,N.current=window.setTimeout(function(){d(),k.current=null},1e3)}},[p,r,h,P]),D=y(),I=m&&!c.includes(m);return J().createElement("div",{className:"bg-white rounded-lg shadow lg:grid lg:grid-cols-2 lg:items-start"},J().createElement("div",{className:"px-6 py-6 lg:px-8 lg:py-8 border-b lg:border-b-0 lg:border-r"},J().createElement("div",{className:"space-y-4"},J().createElement("h1",{className:"text-lg font-medium"},(0,de.__)("Customize","nggallery")),J().createElement(ki,{title:(0,de.__)("Choose Layout","nggallery"),defaultExpanded:!0,className:"mb-4"},J().createElement("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-2 sm:gap-4"},_i.map(function(e){var t=c.includes(e.id),n=(m||p)===e.id;return J().createElement("div",{key:e.id,className:"flex flex-col items-center text-center"},J().createElement("div",{className:"relative p-1 border rounded-md cursor-pointer transition-all duration-200 w-full ".concat(n?"border-green-500":t?"border-gray-600 hover:border-green-500":"border-gray-200 hover:border-green-500"),onClick:function(){return O(e.id)}},J().createElement("div",{className:"flex items-center justify-center ".concat(n?"text-gray-600":"text-gray-200 hover:text-gray-600")},J().createElement("div",{className:"w-12 h-8 sm:w-16 sm:h-12 flex items-center justify-center"},e.icon))),J().createElement("h3",{className:"text-xs sm:text-xs font-medium mt-1 sm:mt-2 ".concat(t?"text-gray-300":"text-gray-400")},e.name))}))),D&&J().createElement("div",{className:I?"opacity-50 pointer-events-none":""},J().createElement(ki,{title:(0,de.__)("Customize Gallery Look","nggallery"),defaultExpanded:!0,className:"mb-4"},J().createElement("div",{className:"space-y-4"},"photocrati-nextgen_basic_slideshow"===p&&J().createElement(Vi,{formState:D,handleInputChange:T}),"photocrati-nextgen_basic_thumbnails"===p&&J().createElement(Zi,{formState:D,handleInputChange:T}),"photocrati-nextgen_pro_thumbnail_grid"===p&&J().createElement(to,{formState:D,handleInputChange:T}),"photocrati-nextgen_basic_imagebrowser"===p&&J().createElement(no,{formState:D,handleInputChange:T}),"photocrati-nextgen_basic_tagcloud"===p&&J().createElement(ao,{formState:D,handleInputChange:T}),"photocrati-nextgen_pro_blog_gallery"===p&&J().createElement(lo,{formState:D,handleInputChange:T}),"photocrati-nextgen_pro_imagebrowser"===p&&J().createElement(io,{formState:D,handleInputChange:T}),"photocrati-nextgen_pro_sidescroll"===p&&J().createElement(oo,{formState:D,handleInputChange:T}),"photocrati-nextgen_pro_film"===p&&J().createElement(so,{formState:D,handleInputChange:T}),"photocrati-nextgen_pro_tile"===p&&J().createElement(co,{formState:D,handleInputChange:T}),"photocrati-nextgen_pro_mosaic"===p&&J().createElement(uo,{formState:D,handleInputChange:T}),"photocrati-nextgen_pro_masonry"===p&&J().createElement(mo,{formState:D,handleInputChange:T}),"imagely-pro-search"===p&&J().createElement(go,{formState:D,handleInputChange:T}),"photocrati-nextgen_pro_horizontal_filmstrip"===p&&J().createElement(po,{formState:D,handleInputChange:T}),"photocrati-nextgen_pro_slideshow"===p&&J().createElement(fo,{formState:D,handleInputChange:T})))))),J().createElement("div",{className:"px-6 py-6 lg:px-8 lg:py-8 lg:sticky lg:top-8 lg:max-h-screen"},I?J().createElement(qi,null):J().createElement(Fi,{previewMode:a,onPreviewModeChange:l,url:g,title:(0,de.__)("Gallery Preview","nggallery")})))},bo="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function vo(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function xo(e){return"nodeType"in e}function wo(e){var t,n;return e?vo(e)?e:xo(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:window:window}function Eo(e){const{Document:t}=wo(e);return e instanceof t}function Co(e){return!vo(e)&&e instanceof wo(e).HTMLElement}function No(e){return e instanceof wo(e).SVGElement}function ko(e){return e?vo(e)?e.document:xo(e)?Eo(e)?e:Co(e)||No(e)?e.ownerDocument:document:document:document}const So=bo?Z.useLayoutEffect:Z.useEffect;function Oo(e){const t=(0,Z.useRef)(e);return So(()=>{t.current=e}),(0,Z.useCallback)(function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)},[])}function Po(e,t){void 0===t&&(t=[e]);const n=(0,Z.useRef)(e);return So(()=>{n.current!==e&&(n.current=e)},t),n}function To(e,t){const n=(0,Z.useRef)();return(0,Z.useMemo)(()=>{const t=e(n.current);return n.current=t,t},[...t])}function Do(e){const t=Oo(e),n=(0,Z.useRef)(null),r=(0,Z.useCallback)(e=>{e!==n.current&&(null==t||t(e,n.current)),n.current=e},[]);return[n,r]}function Io(e){const t=(0,Z.useRef)();return(0,Z.useEffect)(()=>{t.current=e},[e]),t.current}let jo={};function Ao(e,t){return(0,Z.useMemo)(()=>{if(t)return t;const n=null==jo[e]?0:jo[e]+1;return jo[e]=n,e+"-"+n},[e,t])}function Lo(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((t,n)=>{const r=Object.entries(n);for(const[n,a]of r){const r=t[n];null!=r&&(t[n]=r+e*a)}return t},{...t})}}const Mo=Lo(1),Ro=Lo(-1);function Fo(e){if(!e)return!1;const{KeyboardEvent:t}=wo(e.target);return t&&e instanceof t}function zo(e){if(function(e){if(!e)return!1;const{TouchEvent:t}=wo(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}const Bo=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Bo.Translate.toString(e),Bo.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),qo="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Ho(e){return e.matches(qo)?e:e.querySelector(qo)}const Go={display:"none"};function Uo(e){let{id:t,value:n}=e;return J().createElement("div",{id:t,style:Go},n)}function Wo(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;return J().createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":r,"aria-atomic":!0},n)}const Vo=(0,Z.createContext)(null),Ko={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},Qo={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Xo(e){let{announcements:t=Qo,container:n,hiddenTextDescribedById:r,screenReaderInstructions:a=Ko}=e;const{announce:l,announcement:i}=function(){const[e,t]=(0,Z.useState)("");return{announce:(0,Z.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),o=Ao("DndLiveRegion"),[s,c]=(0,Z.useState)(!1);if((0,Z.useEffect)(()=>{c(!0)},[]),function(e){const t=(0,Z.useContext)(Vo);(0,Z.useEffect)(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}((0,Z.useMemo)(()=>({onDragStart(e){let{active:n}=e;l(t.onDragStart({active:n}))},onDragMove(e){let{active:n,over:r}=e;t.onDragMove&&l(t.onDragMove({active:n,over:r}))},onDragOver(e){let{active:n,over:r}=e;l(t.onDragOver({active:n,over:r}))},onDragEnd(e){let{active:n,over:r}=e;l(t.onDragEnd({active:n,over:r}))},onDragCancel(e){let{active:n,over:r}=e;l(t.onDragCancel({active:n,over:r}))}}),[l,t])),!s)return null;const u=J().createElement(J().Fragment,null,J().createElement(Uo,{id:r,value:a.draggable}),J().createElement(Wo,{id:o,announcement:i}));return n?(0,al.createPortal)(u,n):u}var Yo;function Zo(){}function Jo(e,t){return(0,Z.useMemo)(()=>({sensor:e,options:null!=t?t:{}}),[e,t])}function $o(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,Z.useMemo)(()=>[...t].filter(e=>null!=e),[...t])}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(Yo||(Yo={}));const es=Object.freeze({x:0,y:0});function ts(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ns(e,t){const n=zo(e);return n?(n.x-t.left)/t.width*100+"% "+(n.y-t.top)/t.height*100+"%":"0 0"}function rs(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function as(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function ls(e){let{left:t,top:n,height:r,width:a}=e;return[{x:t,y:n},{x:t+a,y:n},{x:t,y:n+r},{x:t+a,y:n+r}]}function is(e,t){if(!e||0===e.length)return null;const[n]=e;return t?n[t]:n}function os(e,t,n){return void 0===t&&(t=e.left),void 0===n&&(n=e.top),{x:t+.5*e.width,y:n+.5*e.height}}const ss=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=os(t,t.left,t.top),l=[];for(const e of r){const{id:t}=e,r=n.get(t);if(r){const n=ts(os(r),a);l.push({id:t,data:{droppableContainer:e,value:n}})}}return l.sort(rs)};function cs(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),l=Math.min(t.top+t.height,e.top+e.height),i=a-r,o=l-n;if(r<a&&n<l){const n=t.width*t.height,r=e.width*e.height,a=i*o;return Number((a/(n+r-a)).toFixed(4))}return 0}const us=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=[];for(const e of r){const{id:r}=e,l=n.get(r);if(l){const n=cs(l,t);n>0&&a.push({id:r,data:{droppableContainer:e,value:n}})}}return a.sort(as)};function ms(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:es}function ds(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return r.reduce((t,n)=>({...t,top:t.top+e*n.y,bottom:t.bottom+e*n.y,left:t.left+e*n.x,right:t.right+e*n.x}),{...t})}}const gs=ds(1);function ps(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}const fs={ignoreTransform:!1};function ys(e,t){void 0===t&&(t=fs);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:r}=wo(e).getComputedStyle(e);t&&(n=function(e,t,n){const r=ps(t);if(!r)return e;const{scaleX:a,scaleY:l,x:i,y:o}=r,s=e.left-i-(1-a)*parseFloat(n),c=e.top-o-(1-l)*parseFloat(n.slice(n.indexOf(" ")+1)),u=a?e.width/a:e.width,m=l?e.height/l:e.height;return{width:u,height:m,top:c,right:s+u,bottom:c+m,left:s}}(n,t,r))}const{top:r,left:a,width:l,height:i,bottom:o,right:s}=n;return{top:r,left:a,width:l,height:i,bottom:o,right:s}}function hs(e){return ys(e,{ignoreTransform:!0})}function _s(e,t){const n=[];return e?function r(a){if(null!=t&&n.length>=t)return n;if(!a)return n;if(Eo(a)&&null!=a.scrollingElement&&!n.includes(a.scrollingElement))return n.push(a.scrollingElement),n;if(!Co(a)||No(a))return n;if(n.includes(a))return n;const l=wo(e).getComputedStyle(a);return a!==e&&function(e,t){void 0===t&&(t=wo(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(e=>{const r=t[e];return"string"==typeof r&&n.test(r)})}(a,l)&&n.push(a),function(e,t){return void 0===t&&(t=wo(e).getComputedStyle(e)),"fixed"===t.position}(a,l)?n:r(a.parentNode)}(e):n}function bs(e){const[t]=_s(e,1);return null!=t?t:null}function vs(e){return bo&&e?vo(e)?e:xo(e)?Eo(e)||e===ko(e).scrollingElement?window:Co(e)?e:null:null:null}function xs(e){return vo(e)?e.scrollX:e.scrollLeft}function ws(e){return vo(e)?e.scrollY:e.scrollTop}function Es(e){return{x:xs(e),y:ws(e)}}var Cs;function Ns(e){return!(!bo||!e)&&e===document.scrollingElement}function ks(e){const t={x:0,y:0},n=Ns(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(Cs||(Cs={}));const Ss={x:.2,y:.2};function Os(e,t,n,r,a){let{top:l,left:i,right:o,bottom:s}=n;void 0===r&&(r=10),void 0===a&&(a=Ss);const{isTop:c,isBottom:u,isLeft:m,isRight:d}=ks(e),g={x:0,y:0},p={x:0,y:0},f=t.height*a.y,y=t.width*a.x;return!c&&l<=t.top+f?(g.y=Cs.Backward,p.y=r*Math.abs((t.top+f-l)/f)):!u&&s>=t.bottom-f&&(g.y=Cs.Forward,p.y=r*Math.abs((t.bottom-f-s)/f)),!d&&o>=t.right-y?(g.x=Cs.Forward,p.x=r*Math.abs((t.right-y-o)/y)):!m&&i<=t.left+y&&(g.x=Cs.Backward,p.x=r*Math.abs((t.left+y-i)/y)),{direction:g,speed:p}}function Ps(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:n,right:r,bottom:a}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:a,width:e.clientWidth,height:e.clientHeight}}function Ts(e){return e.reduce((e,t)=>Mo(e,Es(t)),es)}function Ds(e,t){if(void 0===t&&(t=ys),!e)return;const{top:n,left:r,bottom:a,right:l}=t(e);bs(e)&&(a<=0||l<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Is=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+xs(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+ws(t),0)}]];class js{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=_s(t),r=Ts(n);this.rect={...e},this.width=e.width,this.height=e.height;for(const[e,t,a]of Is)for(const l of t)Object.defineProperty(this,l,{get:()=>{const t=a(n),i=r[e]-t;return this.rect[l]+i},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class As{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,n){var r;null==(r=this.target)||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function Ls(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return"number"==typeof t?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t&&r>t.y}var Ms,Rs;function Fs(e){e.preventDefault()}function zs(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(Ms||(Ms={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"}(Rs||(Rs={}));const Bs={start:[Rs.Space,Rs.Enter],cancel:[Rs.Esc],end:[Rs.Space,Rs.Enter,Rs.Tab]},qs=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case Rs.Right:return{...n,x:n.x+25};case Rs.Left:return{...n,x:n.x-25};case Rs.Down:return{...n,y:n.y+25};case Rs.Up:return{...n,y:n.y-25}}};class Hs{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new As(ko(t)),this.windowListeners=new As(wo(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Ms.Resize,this.handleCancel),this.windowListeners.add(Ms.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Ms.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&Ds(n),t(es)}handleKeyDown(e){if(Fo(e)){const{active:t,context:n,options:r}=this.props,{keyboardCodes:a=Bs,coordinateGetter:l=qs,scrollBehavior:i="smooth"}=r,{code:o}=e;if(a.end.includes(o))return void this.handleEnd(e);if(a.cancel.includes(o))return void this.handleCancel(e);const{collisionRect:s}=n.current,c=s?{x:s.left,y:s.top}:es;this.referenceCoordinates||(this.referenceCoordinates=c);const u=l(e,{active:t,context:n.current,currentCoordinates:c});if(u){const t=Ro(u,c),r={x:0,y:0},{scrollableAncestors:a}=n.current;for(const n of a){const a=e.code,{isTop:l,isRight:o,isLeft:s,isBottom:c,maxScroll:m,minScroll:d}=ks(n),g=Ps(n),p={x:Math.min(a===Rs.Right?g.right-g.width/2:g.right,Math.max(a===Rs.Right?g.left:g.left+g.width/2,u.x)),y:Math.min(a===Rs.Down?g.bottom-g.height/2:g.bottom,Math.max(a===Rs.Down?g.top:g.top+g.height/2,u.y))},f=a===Rs.Right&&!o||a===Rs.Left&&!s,y=a===Rs.Down&&!c||a===Rs.Up&&!l;if(f&&p.x!==u.x){const e=n.scrollLeft+t.x,l=a===Rs.Right&&e<=m.x||a===Rs.Left&&e>=d.x;if(l&&!t.y)return void n.scrollTo({left:e,behavior:i});r.x=l?n.scrollLeft-e:a===Rs.Right?n.scrollLeft-m.x:n.scrollLeft-d.x,r.x&&n.scrollBy({left:-r.x,behavior:i});break}if(y&&p.y!==u.y){const e=n.scrollTop+t.y,l=a===Rs.Down&&e<=m.y||a===Rs.Up&&e>=d.y;if(l&&!t.x)return void n.scrollTo({top:e,behavior:i});r.y=l?n.scrollTop-e:a===Rs.Down?n.scrollTop-m.y:n.scrollTop-d.y,r.y&&n.scrollBy({top:-r.y,behavior:i});break}}this.handleMove(e,Mo(Ro(u,this.referenceCoordinates),r))}}}handleMove(e,t){const{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function Gs(e){return Boolean(e&&"distance"in e)}function Us(e){return Boolean(e&&"delay"in e)}Hs.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Bs,onActivation:a}=t,{active:l}=n;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const t=l.activatorNode.current;return!(t&&e.target!==t||(e.preventDefault(),null==a||a({event:e.nativeEvent}),0))}return!1}}];class Ws{constructor(e,t,n){var r;void 0===n&&(n=function(e){const{EventTarget:t}=wo(e);return e instanceof t?e:ko(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:a}=e,{target:l}=a;this.props=e,this.events=t,this.document=ko(l),this.documentListeners=new As(this.document),this.listeners=new As(n),this.windowListeners=new As(wo(l)),this.initialCoordinates=null!=(r=zo(a))?r:es,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Ms.Resize,this.handleCancel),this.windowListeners.add(Ms.DragStart,Fs),this.windowListeners.add(Ms.VisibilityChange,this.handleCancel),this.windowListeners.add(Ms.ContextMenu,Fs),this.documentListeners.add(Ms.Keydown,this.handleKeydown),t){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Us(t))return this.timeoutId=setTimeout(this.handleStart,t.delay),void this.handlePending(t);if(Gs(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:n,onPending:r}=this.props;r(n,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Ms.Click,zs,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Ms.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:n,initialCoordinates:r,props:a}=this,{onMove:l,options:{activationConstraint:i}}=a;if(!r)return;const o=null!=(t=zo(e))?t:es,s=Ro(r,o);if(!n&&i){if(Gs(i)){if(null!=i.tolerance&&Ls(s,i.tolerance))return this.handleCancel();if(Ls(s,i.distance))return this.handleStart()}return Us(i)&&Ls(s,i.tolerance)?this.handleCancel():void this.handlePending(i,s)}e.cancelable&&e.preventDefault(),l(o)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===Rs.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const Vs={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Ks extends Ws{constructor(e){const{event:t}=e,n=ko(t.target);super(e,Vs,n)}}Ks.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!(!n.isPrimary||0!==n.button||(null==r||r({event:n}),0))}}];const Qs={move:{name:"mousemove"},end:{name:"mouseup"}};var Xs;!function(e){e[e.RightClick=2]="RightClick"}(Xs||(Xs={})),class extends Ws{constructor(e){super(e,Qs,ko(e.event.target))}}.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button!==Xs.RightClick&&(null==r||r({event:n}),!0)}}];const Ys={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};var Zs,Js;(class extends Ws{constructor(e){super(e,Ys)}static setup(){return window.addEventListener(Ys.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Ys.move.name,e)};function e(){}}}).activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:a}=n;return!(a.length>1||(null==r||r({event:n}),0))}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(Zs||(Zs={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(Js||(Js={}));const $s={x:{[Cs.Backward]:!1,[Cs.Forward]:!1},y:{[Cs.Backward]:!1,[Cs.Forward]:!1}};var ec,tc;!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(ec||(ec={})),function(e){e.Optimized="optimized"}(tc||(tc={}));const nc=new Map;function rc(e,t){return To(n=>e?n||("function"==typeof t?t(e):e):null,[t,e])}function ac(e){let{callback:t,disabled:n}=e;const r=Oo(t),a=(0,Z.useMemo)(()=>{if(n||"undefined"==typeof window||void 0===window.ResizeObserver)return;const{ResizeObserver:e}=window;return new e(r)},[n]);return(0,Z.useEffect)(()=>()=>null==a?void 0:a.disconnect(),[a]),a}function lc(e){return new js(ys(e),e)}function ic(e,t,n){void 0===t&&(t=lc);const[r,a]=(0,Z.useState)(null);function l(){a(r=>{if(!e)return null;var a;if(!1===e.isConnected)return null!=(a=null!=r?r:n)?a:null;const l=t(e);return JSON.stringify(r)===JSON.stringify(l)?r:l})}const i=function(e){let{callback:t,disabled:n}=e;const r=Oo(t),a=(0,Z.useMemo)(()=>{if(n||"undefined"==typeof window||void 0===window.MutationObserver)return;const{MutationObserver:e}=window;return new e(r)},[r,n]);return(0,Z.useEffect)(()=>()=>null==a?void 0:a.disconnect(),[a]),a}({callback(t){if(e)for(const n of t){const{type:t,target:r}=n;if("childList"===t&&r instanceof HTMLElement&&r.contains(e)){l();break}}}}),o=ac({callback:l});return So(()=>{l(),e?(null==o||o.observe(e),null==i||i.observe(document.body,{childList:!0,subtree:!0})):(null==o||o.disconnect(),null==i||i.disconnect())},[e]),r}const oc=[];function sc(e,t){void 0===t&&(t=[]);const n=(0,Z.useRef)(null);return(0,Z.useEffect)(()=>{n.current=null},t),(0,Z.useEffect)(()=>{const t=e!==es;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)},[e]),n.current?Ro(e,n.current):es}function cc(e){return(0,Z.useMemo)(()=>e?function(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}(e):null,[e])}const uc=[];function mc(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Co(t)?t:e}const dc=[{sensor:Ks,options:{}},{sensor:Hs,options:{}}],gc={current:{}},pc={draggable:{measure:hs},droppable:{measure:hs,strategy:ec.WhileDragging,frequency:tc.Optimized},dragOverlay:{measure:ys}};class fc extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}const yc={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new fc,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Zo},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:pc,measureDroppableContainers:Zo,windowRect:null,measuringScheduled:!1},hc={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Zo,draggableNodes:new Map,over:null,measureDroppableContainers:Zo},_c=(0,Z.createContext)(hc),bc=(0,Z.createContext)(yc);function vc(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new fc}}}function xc(e,t){switch(t.type){case Yo.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Yo.DragMove:return null==e.draggable.active?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Yo.DragEnd:case Yo.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Yo.RegisterDroppable:{const{element:n}=t,{id:r}=n,a=new fc(e.droppable.containers);return a.set(r,n),{...e,droppable:{...e.droppable,containers:a}}}case Yo.SetDroppableDisabled:{const{id:n,key:r,disabled:a}=t,l=e.droppable.containers.get(n);if(!l||r!==l.key)return e;const i=new fc(e.droppable.containers);return i.set(n,{...l,disabled:a}),{...e,droppable:{...e.droppable,containers:i}}}case Yo.UnregisterDroppable:{const{id:n,key:r}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const l=new fc(e.droppable.containers);return l.delete(n),{...e,droppable:{...e.droppable,containers:l}}}default:return e}}function wc(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:a}=(0,Z.useContext)(_c),l=Io(r),i=Io(null==n?void 0:n.id);return(0,Z.useEffect)(()=>{if(!t&&!r&&l&&null!=i){if(!Fo(l))return;if(document.activeElement===l.target)return;const e=a.get(i);if(!e)return;const{activatorNode:t,node:n}=e;if(!t.current&&!n.current)return;requestAnimationFrame(()=>{for(const e of[t.current,n.current]){if(!e)continue;const t=Ho(e);if(t){t.focus();break}}})}},[r,t,a,i,l]),null}function Ec(e,t){let{transform:n,...r}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...r}),n):n}const Cc=(0,Z.createContext)({...es,scaleX:1,scaleY:1});var Nc;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(Nc||(Nc={}));const kc=(0,Z.memo)(function(e){var t,n,r,a;let{id:l,accessibility:i,autoScroll:o=!0,children:s,sensors:c=dc,collisionDetection:u=us,measuring:m,modifiers:d,...g}=e;const p=(0,Z.useReducer)(xc,void 0,vc),[f,y]=p,[h,_]=function(){const[e]=(0,Z.useState)(()=>new Set),t=(0,Z.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]),n=(0,Z.useCallback)(t=>{let{type:n,event:r}=t;e.forEach(e=>{var t;return null==(t=e[n])?void 0:t.call(e,r)})},[e]);return[n,t]}(),[b,v]=(0,Z.useState)(Nc.Uninitialized),x=b===Nc.Initialized,{draggable:{active:w,nodes:E,translate:C},droppable:{containers:N}}=f,k=null!=w?E.get(w):null,S=(0,Z.useRef)({initial:null,translated:null}),O=(0,Z.useMemo)(()=>{var e;return null!=w?{id:w,data:null!=(e=null==k?void 0:k.data)?e:gc,rect:S}:null},[w,k]),P=(0,Z.useRef)(null),[T,D]=(0,Z.useState)(null),[I,j]=(0,Z.useState)(null),A=Po(g,Object.values(g)),L=Ao("DndDescribedBy",l),M=(0,Z.useMemo)(()=>N.getEnabled(),[N]),R=(F=m,(0,Z.useMemo)(()=>({draggable:{...pc.draggable,...null==F?void 0:F.draggable},droppable:{...pc.droppable,...null==F?void 0:F.droppable},dragOverlay:{...pc.dragOverlay,...null==F?void 0:F.dragOverlay}}),[null==F?void 0:F.draggable,null==F?void 0:F.droppable,null==F?void 0:F.dragOverlay]));var F;const{droppableRects:z,measureDroppableContainers:B,measuringScheduled:q}=function(e,t){let{dragging:n,dependencies:r,config:a}=t;const[l,i]=(0,Z.useState)(null),{frequency:o,measure:s,strategy:c}=a,u=(0,Z.useRef)(e),m=function(){switch(c){case ec.Always:return!1;case ec.BeforeDragging:return n;default:return!n}}(),d=Po(m),g=(0,Z.useCallback)(function(e){void 0===e&&(e=[]),d.current||i(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[d]),p=(0,Z.useRef)(null),f=To(t=>{if(m&&!n)return nc;if(!t||t===nc||u.current!==e||null!=l){const t=new Map;for(let n of e){if(!n)continue;if(l&&l.length>0&&!l.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}const e=n.node.current,r=e?new js(s(e),e):null;n.rect.current=r,r&&t.set(n.id,r)}return t}return t},[e,l,n,m,s]);return(0,Z.useEffect)(()=>{u.current=e},[e]),(0,Z.useEffect)(()=>{m||g()},[n,m]),(0,Z.useEffect)(()=>{l&&l.length>0&&i(null)},[JSON.stringify(l)]),(0,Z.useEffect)(()=>{m||"number"!=typeof o||null!==p.current||(p.current=setTimeout(()=>{g(),p.current=null},o))},[o,m,g,...r]),{droppableRects:f,measureDroppableContainers:g,measuringScheduled:null!=l}}(M,{dragging:x,dependencies:[C.x,C.y],config:R.droppable}),H=function(e,t){const n=null!=t?e.get(t):void 0,r=n?n.node.current:null;return To(e=>{var n;return null==t?null:null!=(n=null!=r?r:e)?n:null},[r,t])}(E,w),G=(0,Z.useMemo)(()=>I?zo(I):null,[I]),U=function(){const e=!1===(null==T?void 0:T.autoScrollEnabled),t="object"==typeof o?!1===o.enabled:!1===o,n=x&&!e&&!t;return"object"==typeof o?{...o,enabled:n}:{enabled:n}}(),W=function(e,t){return rc(e,t)}(H,R.draggable.measure);!function(e){let{activeNode:t,measure:n,initialRect:r,config:a=!0}=e;const l=(0,Z.useRef)(!1),{x:i,y:o}="boolean"==typeof a?{x:a,y:a}:a;So(()=>{if(!i&&!o||!t)return void(l.current=!1);if(l.current||!r)return;const e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;const a=ms(n(e),r);if(i||(a.x=0),o||(a.y=0),l.current=!0,Math.abs(a.x)>0||Math.abs(a.y)>0){const t=bs(e);t&&t.scrollBy({top:a.y,left:a.x})}},[t,i,o,r,n])}({activeNode:null!=w?E.get(w):null,config:U.layoutShiftCompensation,initialRect:W,measure:R.draggable.measure});const V=ic(H,R.draggable.measure,W),K=ic(H?H.parentElement:null),Q=(0,Z.useRef)({activatorEvent:null,active:null,activeNode:H,collisionRect:null,collisions:null,droppableRects:z,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:N,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),X=N.getNodeFor(null==(t=Q.current.over)?void 0:t.id),Y=function(e){let{measure:t}=e;const[n,r]=(0,Z.useState)(null),a=ac({callback:(0,Z.useCallback)(e=>{for(const{target:n}of e)if(Co(n)){r(e=>{const r=t(n);return e?{...e,width:r.width,height:r.height}:r});break}},[t])}),l=(0,Z.useCallback)(e=>{const n=mc(e);null==a||a.disconnect(),n&&(null==a||a.observe(n)),r(n?t(n):null)},[t,a]),[i,o]=Do(l);return(0,Z.useMemo)(()=>({nodeRef:i,rect:n,setRef:o}),[n,i,o])}({measure:R.dragOverlay.measure}),$=null!=(n=Y.nodeRef.current)?n:H,ee=x?null!=(r=Y.rect)?r:V:null,te=Boolean(Y.nodeRef.current&&Y.rect),ne=ms(re=te?null:V,rc(re));var re;const ae=cc($?wo($):null),le=function(e){const t=(0,Z.useRef)(e),n=To(n=>e?n&&n!==oc&&e&&t.current&&e.parentNode===t.current.parentNode?n:_s(e):oc,[e]);return(0,Z.useEffect)(()=>{t.current=e},[e]),n}(x?null!=X?X:H:null),ie=function(e,t){void 0===t&&(t=ys);const[n]=e,r=cc(n?wo(n):null),[a,l]=(0,Z.useState)(uc);function i(){l(()=>e.length?e.map(e=>Ns(e)?r:new js(t(e),e)):uc)}const o=ac({callback:i});return So(()=>{null==o||o.disconnect(),i(),e.forEach(e=>null==o?void 0:o.observe(e))},[e]),a}(le),oe=Ec(d,{transform:{x:C.x-ne.x,y:C.y-ne.y,scaleX:1,scaleY:1},activatorEvent:I,active:O,activeNodeRect:V,containerNodeRect:K,draggingNodeRect:ee,over:Q.current.over,overlayNodeRect:Y.rect,scrollableAncestors:le,scrollableAncestorRects:ie,windowRect:ae}),se=G?Mo(G,C):null,ce=function(e){const[t,n]=(0,Z.useState)(null),r=(0,Z.useRef)(e),a=(0,Z.useCallback)(e=>{const t=vs(e.target);t&&n(e=>e?(e.set(t,Es(t)),new Map(e)):null)},[]);return(0,Z.useEffect)(()=>{const t=r.current;if(e!==t){l(t);const i=e.map(e=>{const t=vs(e);return t?(t.addEventListener("scroll",a,{passive:!0}),[t,Es(t)]):null}).filter(e=>null!=e);n(i.length?new Map(i):null),r.current=e}return()=>{l(e),l(t)};function l(e){e.forEach(e=>{const t=vs(e);null==t||t.removeEventListener("scroll",a)})}},[a,e]),(0,Z.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>Mo(e,t),es):Ts(e):es,[e,t])}(le),ue=sc(ce),me=sc(ce,[V]),de=Mo(oe,ue),ge=ee?gs(ee,oe):null,pe=O&&ge?u({active:O,collisionRect:ge,droppableRects:z,droppableContainers:M,pointerCoordinates:se}):null,fe=is(pe,"id"),[ye,he]=(0,Z.useState)(null),_e=function(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}(te?oe:Mo(oe,me),null!=(a=null==ye?void 0:ye.rect)?a:null,V),be=(0,Z.useRef)(null),ve=(0,Z.useCallback)((e,t)=>{let{sensor:n,options:r}=t;if(null==P.current)return;const a=E.get(P.current);if(!a)return;const l=e.nativeEvent,i=new n({active:P.current,activeNode:a,event:l,options:r,context:Q,onAbort(e){if(!E.get(e))return;const{onDragAbort:t}=A.current,n={id:e};null==t||t(n),h({type:"onDragAbort",event:n})},onPending(e,t,n,r){if(!E.get(e))return;const{onDragPending:a}=A.current,l={id:e,constraint:t,initialCoordinates:n,offset:r};null==a||a(l),h({type:"onDragPending",event:l})},onStart(e){const t=P.current;if(null==t)return;const n=E.get(t);if(!n)return;const{onDragStart:r}=A.current,a={activatorEvent:l,active:{id:t,data:n.data,rect:S}};(0,al.unstable_batchedUpdates)(()=>{null==r||r(a),v(Nc.Initializing),y({type:Yo.DragStart,initialCoordinates:e,active:t}),h({type:"onDragStart",event:a}),D(be.current),j(l)})},onMove(e){y({type:Yo.DragMove,coordinates:e})},onEnd:o(Yo.DragEnd),onCancel:o(Yo.DragCancel)});function o(e){return async function(){const{active:t,collisions:n,over:r,scrollAdjustedTranslate:a}=Q.current;let i=null;if(t&&a){const{cancelDrop:o}=A.current;i={activatorEvent:l,active:t,collisions:n,delta:a,over:r},e===Yo.DragEnd&&"function"==typeof o&&await Promise.resolve(o(i))&&(e=Yo.DragCancel)}P.current=null,(0,al.unstable_batchedUpdates)(()=>{y({type:e}),v(Nc.Uninitialized),he(null),D(null),j(null),be.current=null;const t=e===Yo.DragEnd?"onDragEnd":"onDragCancel";if(i){const e=A.current[t];null==e||e(i),h({type:t,event:i})}})}}be.current=i},[E]),xe=(0,Z.useCallback)((e,t)=>(n,r)=>{const a=n.nativeEvent,l=E.get(r);if(null!==P.current||!l||a.dndKit||a.defaultPrevented)return;const i={active:l};!0===e(n,t.options,i)&&(a.dndKit={capturedBy:t.sensor},P.current=r,ve(n,t))},[E,ve]),we=function(e,t){return(0,Z.useMemo)(()=>e.reduce((e,n)=>{const{sensor:r}=n;return[...e,...r.activators.map(e=>({eventName:e.eventName,handler:t(e.handler,n)}))]},[]),[e,t])}(c,xe);!function(e){(0,Z.useEffect)(()=>{if(!bo)return;const t=e.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(const e of t)null==e||e()}},e.map(e=>{let{sensor:t}=e;return t}))}(c),So(()=>{V&&b===Nc.Initializing&&v(Nc.Initialized)},[V,b]),(0,Z.useEffect)(()=>{const{onDragMove:e}=A.current,{active:t,activatorEvent:n,collisions:r,over:a}=Q.current;if(!t||!n)return;const l={active:t,activatorEvent:n,collisions:r,delta:{x:de.x,y:de.y},over:a};(0,al.unstable_batchedUpdates)(()=>{null==e||e(l),h({type:"onDragMove",event:l})})},[de.x,de.y]),(0,Z.useEffect)(()=>{const{active:e,activatorEvent:t,collisions:n,droppableContainers:r,scrollAdjustedTranslate:a}=Q.current;if(!e||null==P.current||!t||!a)return;const{onDragOver:l}=A.current,i=r.get(fe),o=i&&i.rect.current?{id:i.id,rect:i.rect.current,data:i.data,disabled:i.disabled}:null,s={active:e,activatorEvent:t,collisions:n,delta:{x:a.x,y:a.y},over:o};(0,al.unstable_batchedUpdates)(()=>{he(o),null==l||l(s),h({type:"onDragOver",event:s})})},[fe]),So(()=>{Q.current={activatorEvent:I,active:O,activeNode:H,collisionRect:ge,collisions:pe,droppableRects:z,draggableNodes:E,draggingNode:$,draggingNodeRect:ee,droppableContainers:N,over:ye,scrollableAncestors:le,scrollAdjustedTranslate:de},S.current={initial:ee,translated:ge}},[O,H,pe,ge,E,$,ee,z,N,ye,le,de]),function(e){let{acceleration:t,activator:n=Zs.Pointer,canScroll:r,draggingRect:a,enabled:l,interval:i=5,order:o=Js.TreeOrder,pointerCoordinates:s,scrollableAncestors:c,scrollableAncestorRects:u,delta:m,threshold:d}=e;const g=function(e){let{delta:t,disabled:n}=e;const r=Io(t);return To(e=>{if(n||!r||!e)return $s;const a=Math.sign(t.x-r.x),l=Math.sign(t.y-r.y);return{x:{[Cs.Backward]:e.x[Cs.Backward]||-1===a,[Cs.Forward]:e.x[Cs.Forward]||1===a},y:{[Cs.Backward]:e.y[Cs.Backward]||-1===l,[Cs.Forward]:e.y[Cs.Forward]||1===l}}},[n,t,r])}({delta:m,disabled:!l}),[p,f]=function(){const e=(0,Z.useRef)(null);return[(0,Z.useCallback)((t,n)=>{e.current=setInterval(t,n)},[]),(0,Z.useCallback)(()=>{null!==e.current&&(clearInterval(e.current),e.current=null)},[])]}(),y=(0,Z.useRef)({x:0,y:0}),h=(0,Z.useRef)({x:0,y:0}),_=(0,Z.useMemo)(()=>{switch(n){case Zs.Pointer:return s?{top:s.y,bottom:s.y,left:s.x,right:s.x}:null;case Zs.DraggableRect:return a}},[n,a,s]),b=(0,Z.useRef)(null),v=(0,Z.useCallback)(()=>{const e=b.current;if(!e)return;const t=y.current.x*h.current.x,n=y.current.y*h.current.y;e.scrollBy(t,n)},[]),x=(0,Z.useMemo)(()=>o===Js.TreeOrder?[...c].reverse():c,[o,c]);(0,Z.useEffect)(()=>{if(l&&c.length&&_){for(const e of x){if(!1===(null==r?void 0:r(e)))continue;const n=c.indexOf(e),a=u[n];if(!a)continue;const{direction:l,speed:o}=Os(e,a,_,t,d);for(const e of["x","y"])g[e][l[e]]||(o[e]=0,l[e]=0);if(o.x>0||o.y>0)return f(),b.current=e,p(v,i),y.current=o,void(h.current=l)}y.current={x:0,y:0},h.current={x:0,y:0},f()}else f()},[t,v,r,f,l,i,JSON.stringify(_),JSON.stringify(g),p,c,x,u,JSON.stringify(d)])}({...U,delta:C,draggingRect:ge,pointerCoordinates:se,scrollableAncestors:le,scrollableAncestorRects:ie});const Ee=(0,Z.useMemo)(()=>({active:O,activeNode:H,activeNodeRect:V,activatorEvent:I,collisions:pe,containerNodeRect:K,dragOverlay:Y,draggableNodes:E,droppableContainers:N,droppableRects:z,over:ye,measureDroppableContainers:B,scrollableAncestors:le,scrollableAncestorRects:ie,measuringConfiguration:R,measuringScheduled:q,windowRect:ae}),[O,H,V,I,pe,K,Y,E,N,z,ye,B,le,ie,R,q,ae]),Ce=(0,Z.useMemo)(()=>({activatorEvent:I,activators:we,active:O,activeNodeRect:V,ariaDescribedById:{draggable:L},dispatch:y,draggableNodes:E,over:ye,measureDroppableContainers:B}),[I,we,O,V,y,L,E,ye,B]);return J().createElement(Vo.Provider,{value:_},J().createElement(_c.Provider,{value:Ce},J().createElement(bc.Provider,{value:Ee},J().createElement(Cc.Provider,{value:_e},s)),J().createElement(wc,{disabled:!1===(null==i?void 0:i.restoreFocus)})),J().createElement(Xo,{...i,hiddenTextDescribedById:L}))}),Sc=(0,Z.createContext)(null),Oc="button";function Pc(){return(0,Z.useContext)(bc)}const Tc={timeout:25};function Dc(e){let{animation:t,children:n}=e;const[r,a]=(0,Z.useState)(null),[l,i]=(0,Z.useState)(null),o=Io(n);return n||r||!o||a(o),So(()=>{if(!l)return;const e=null==r?void 0:r.key,n=null==r?void 0:r.props.id;null!=e&&null!=n?Promise.resolve(t(n,l)).then(()=>{a(null)}):a(null)},[t,r,l]),J().createElement(J().Fragment,null,n,r?(0,Z.cloneElement)(r,{ref:i}):null)}const Ic={x:0,y:0,scaleX:1,scaleY:1};function jc(e){let{children:t}=e;return J().createElement(_c.Provider,{value:hc},J().createElement(Cc.Provider,{value:Ic},t))}const Ac={position:"fixed",touchAction:"none"},Lc=e=>Fo(e)?"transform 250ms ease":void 0,Mc=(0,Z.forwardRef)((e,t)=>{let{as:n,activatorEvent:r,adjustScale:a,children:l,className:i,rect:o,style:s,transform:c,transition:u=Lc}=e;if(!o)return null;const m=a?c:{...c,scaleX:1,scaleY:1},d={...Ac,width:o.width,height:o.height,top:o.top,left:o.left,transform:Bo.Transform.toString(m),transformOrigin:a&&r?ns(r,o):void 0,transition:"function"==typeof u?u(r):u,...s};return J().createElement(n,{className:i,style:d,ref:t},l)}),Rc=e=>t=>{let{active:n,dragOverlay:r}=t;const a={},{styles:l,className:i}=e;if(null!=l&&l.active)for(const[e,t]of Object.entries(l.active))void 0!==t&&(a[e]=n.node.style.getPropertyValue(e),n.node.style.setProperty(e,t));if(null!=l&&l.dragOverlay)for(const[e,t]of Object.entries(l.dragOverlay))void 0!==t&&r.node.style.setProperty(e,t);return null!=i&&i.active&&n.node.classList.add(i.active),null!=i&&i.dragOverlay&&r.node.classList.add(i.dragOverlay),function(){for(const[e,t]of Object.entries(a))n.node.style.setProperty(e,t);null!=i&&i.active&&n.node.classList.remove(i.active)}},Fc={duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:t,final:n}}=e;return[{transform:Bo.Transform.toString(t)},{transform:Bo.Transform.toString(n)}]},sideEffects:Rc({styles:{active:{opacity:"0"}}})};let zc=0;function Bc(e){return(0,Z.useMemo)(()=>{if(null!=e)return zc++,zc},[e])}const qc=J().memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:a,transition:l,modifiers:i,wrapperElement:o="div",className:s,zIndex:c=999}=e;const{activatorEvent:u,active:m,activeNodeRect:d,containerNodeRect:g,draggableNodes:p,droppableContainers:f,dragOverlay:y,over:h,measuringConfiguration:_,scrollableAncestors:b,scrollableAncestorRects:v,windowRect:x}=Pc(),w=(0,Z.useContext)(Cc),E=Bc(null==m?void 0:m.id),C=Ec(i,{activatorEvent:u,active:m,activeNodeRect:d,containerNodeRect:g,draggingNodeRect:y.rect,over:h,overlayNodeRect:y.rect,scrollableAncestors:b,scrollableAncestorRects:v,transform:w,windowRect:x}),N=rc(d),k=function(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:a}=e;return Oo((e,l)=>{if(null===t)return;const i=n.get(e);if(!i)return;const o=i.node.current;if(!o)return;const s=mc(l);if(!s)return;const{transform:c}=wo(l).getComputedStyle(l),u=ps(c);if(!u)return;const m="function"==typeof t?t:function(e){const{duration:t,easing:n,sideEffects:r,keyframes:a}={...Fc,...e};return e=>{let{active:l,dragOverlay:i,transform:o,...s}=e;if(!t)return;const c=i.rect.left-l.rect.left,u=i.rect.top-l.rect.top,m={scaleX:1!==o.scaleX?l.rect.width*o.scaleX/i.rect.width:1,scaleY:1!==o.scaleY?l.rect.height*o.scaleY/i.rect.height:1},d={x:o.x-c,y:o.y-u,...m},g=a({...s,active:l,dragOverlay:i,transform:{initial:o,final:d}}),[p]=g,f=g[g.length-1];if(JSON.stringify(p)===JSON.stringify(f))return;const y=null==r?void 0:r({active:l,dragOverlay:i,...s}),h=i.node.animate(g,{duration:t,easing:n,fill:"forwards"});return new Promise(e=>{h.onfinish=()=>{null==y||y(),e()}})}}(t);return Ds(o,a.draggable.measure),m({active:{id:e,data:i.data,node:o,rect:a.draggable.measure(o)},draggableNodes:n,dragOverlay:{node:l,rect:a.dragOverlay.measure(s)},droppableContainers:r,measuringConfiguration:a,transform:u})})}({config:r,draggableNodes:p,droppableContainers:f,measuringConfiguration:_}),S=N?y.setRef:void 0;return J().createElement(jc,null,J().createElement(Dc,{animation:k},m&&E?J().createElement(Mc,{key:E,id:m.id,ref:S,as:o,activatorEvent:u,adjustScale:t,className:s,transition:l,rect:N,style:{zIndex:c,...a},transform:C},n):null))});function Hc(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function Gc(e,t){return e.reduce((e,n,r)=>{const a=t.get(n);return a&&(e[r]=a),e},Array(e.length))}function Uc(e){return null!==e&&e>=0}const Wc=e=>{let{rects:t,activeIndex:n,overIndex:r,index:a}=e;const l=Hc(t,r,n),i=t[a],o=l[a];return o&&i?{x:o.left-i.left,y:o.top-i.top,scaleX:o.width/i.width,scaleY:o.height/i.height}:null},Vc={scaleX:1,scaleY:1},Kc=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:a,rects:l,overIndex:i}=e;const o=null!=(t=l[n])?t:r;if(!o)return null;if(a===n){const e=l[i];return e?{x:0,y:n<i?e.top+e.height-(o.top+o.height):e.top-o.top,...Vc}:null}const s=function(e,t,n){const r=e[t],a=e[t-1],l=e[t+1];return r?n<t?a?r.top-(a.top+a.height):l?l.top-(r.top+r.height):0:l?l.top-(r.top+r.height):a?r.top-(a.top+a.height):0:0}(l,a,n);return a>n&&a<=i?{x:0,y:-o.height-s,...Vc}:a<n&&a>=i?{x:0,y:o.height+s,...Vc}:{x:0,y:0,...Vc}},Qc="Sortable",Xc=J().createContext({activeIndex:-1,containerId:Qc,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Wc,disabled:{draggable:!1,droppable:!1}});function Yc(e){let{children:t,id:n,items:r,strategy:a=Wc,disabled:l=!1}=e;const{active:i,dragOverlay:o,droppableRects:s,over:c,measureDroppableContainers:u}=Pc(),m=Ao(Qc,n),d=Boolean(null!==o.rect),g=(0,Z.useMemo)(()=>r.map(e=>"object"==typeof e&&"id"in e?e.id:e),[r]),p=null!=i,f=i?g.indexOf(i.id):-1,y=c?g.indexOf(c.id):-1,h=(0,Z.useRef)(g),_=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(g,h.current),b=-1!==y&&-1===f||_,v=function(e){return"boolean"==typeof e?{draggable:e,droppable:e}:e}(l);So(()=>{_&&p&&u(g)},[_,g,p,u]),(0,Z.useEffect)(()=>{h.current=g},[g]);const x=(0,Z.useMemo)(()=>({activeIndex:f,containerId:m,disabled:v,disableTransforms:b,items:g,overIndex:y,useDragOverlay:d,sortedRects:Gc(g,s),strategy:a}),[f,m,v.draggable,v.droppable,b,g,y,s,d,a]);return J().createElement(Xc.Provider,{value:x},t)}const Zc=e=>{let{id:t,items:n,activeIndex:r,overIndex:a}=e;return Hc(n,r,a).indexOf(t)},Jc=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:a,items:l,newIndex:i,previousItems:o,previousContainerId:s,transition:c}=e;return!(!c||!r||o!==l&&a===i||!n&&(i===a||t!==s))},$c={duration:200,easing:"ease"},eu="transform",tu=Bo.Transition.toString({property:eu,duration:0,easing:"linear"}),nu={roleDescription:"sortable"};function ru(e){let{animateLayoutChanges:t=Jc,attributes:n,disabled:r,data:a,getNewIndex:l=Zc,id:i,strategy:o,resizeObserverConfig:s,transition:c=$c}=e;const{items:u,containerId:m,activeIndex:d,disabled:g,disableTransforms:p,sortedRects:f,overIndex:y,useDragOverlay:h,strategy:_}=(0,Z.useContext)(Xc),b=function(e,t){var n,r;return"boolean"==typeof e?{draggable:e,droppable:!1}:{draggable:null!=(n=null==e?void 0:e.draggable)?n:t.draggable,droppable:null!=(r=null==e?void 0:e.droppable)?r:t.droppable}}(r,g),v=u.indexOf(i),x=(0,Z.useMemo)(()=>({sortable:{containerId:m,index:v,items:u},...a}),[m,a,v,u]),w=(0,Z.useMemo)(()=>u.slice(u.indexOf(i)),[u,i]),{rect:E,node:C,isOver:N,setNodeRef:k}=function(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:a}=e;const l=Ao("Droppable"),{active:i,dispatch:o,over:s,measureDroppableContainers:c}=(0,Z.useContext)(_c),u=(0,Z.useRef)({disabled:n}),m=(0,Z.useRef)(!1),d=(0,Z.useRef)(null),g=(0,Z.useRef)(null),{disabled:p,updateMeasurementsFor:f,timeout:y}={...Tc,...a},h=Po(null!=f?f:r),_=ac({callback:(0,Z.useCallback)(()=>{m.current?(null!=g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{c(Array.isArray(h.current)?h.current:[h.current]),g.current=null},y)):m.current=!0},[y]),disabled:p||!i}),b=(0,Z.useCallback)((e,t)=>{_&&(t&&(_.unobserve(t),m.current=!1),e&&_.observe(e))},[_]),[v,x]=Do(b),w=Po(t);return(0,Z.useEffect)(()=>{_&&v.current&&(_.disconnect(),m.current=!1,_.observe(v.current))},[v,_]),(0,Z.useEffect)(()=>(o({type:Yo.RegisterDroppable,element:{id:r,key:l,disabled:n,node:v,rect:d,data:w}}),()=>o({type:Yo.UnregisterDroppable,key:l,id:r})),[r]),(0,Z.useEffect)(()=>{n!==u.current.disabled&&(o({type:Yo.SetDroppableDisabled,id:r,key:l,disabled:n}),u.current.disabled=n)},[r,l,n,o]),{active:i,rect:d,isOver:(null==s?void 0:s.id)===r,node:v,over:s,setNodeRef:x}}({id:i,data:x,disabled:b.droppable,resizeObserverConfig:{updateMeasurementsFor:w,...s}}),{active:S,activatorEvent:O,activeNodeRect:P,attributes:T,setNodeRef:D,listeners:I,isDragging:j,over:A,setActivatorNodeRef:L,transform:M}=function(e){let{id:t,data:n,disabled:r=!1,attributes:a}=e;const l=Ao("Draggable"),{activators:i,activatorEvent:o,active:s,activeNodeRect:c,ariaDescribedById:u,draggableNodes:m,over:d}=(0,Z.useContext)(_c),{role:g=Oc,roleDescription:p="draggable",tabIndex:f=0}=null!=a?a:{},y=(null==s?void 0:s.id)===t,h=(0,Z.useContext)(y?Cc:Sc),[_,b]=Do(),[v,x]=Do(),w=function(e,t){return(0,Z.useMemo)(()=>e.reduce((e,n)=>{let{eventName:r,handler:a}=n;return e[r]=e=>{a(e,t)},e},{}),[e,t])}(i,t),E=Po(n);return So(()=>(m.set(t,{id:t,key:l,node:_,activatorNode:v,data:E}),()=>{const e=m.get(t);e&&e.key===l&&m.delete(t)}),[m,t]),{active:s,activatorEvent:o,activeNodeRect:c,attributes:(0,Z.useMemo)(()=>({role:g,tabIndex:f,"aria-disabled":r,"aria-pressed":!(!y||g!==Oc)||void 0,"aria-roledescription":p,"aria-describedby":u.draggable}),[r,g,f,y,p,u.draggable]),isDragging:y,listeners:r?void 0:w,node:_,over:d,setNodeRef:b,setActivatorNodeRef:x,transform:h}}({id:i,data:x,attributes:{...nu,...n},disabled:b.draggable}),R=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,Z.useMemo)(()=>e=>{t.forEach(t=>t(e))},t)}(k,D),F=Boolean(S),z=F&&!p&&Uc(d)&&Uc(y),B=!h&&j,q=B&&z?M:null,H=z?null!=q?q:(null!=o?o:_)({rects:f,activeNodeRect:P,activeIndex:d,overIndex:y,index:v}):null,G=Uc(d)&&Uc(y)?l({id:i,items:u,activeIndex:d,overIndex:y}):v,U=null==S?void 0:S.id,W=(0,Z.useRef)({activeId:U,items:u,newIndex:G,containerId:m}),V=u!==W.current.items,K=t({active:S,containerId:m,isDragging:j,isSorting:F,id:i,index:v,items:u,newIndex:W.current.newIndex,previousItems:W.current.items,previousContainerId:W.current.containerId,transition:c,wasDragging:null!=W.current.activeId}),Q=function(e){let{disabled:t,index:n,node:r,rect:a}=e;const[l,i]=(0,Z.useState)(null),o=(0,Z.useRef)(n);return So(()=>{if(!t&&n!==o.current&&r.current){const e=a.current;if(e){const t=ys(r.current,{ignoreTransform:!0}),n={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(n.x||n.y)&&i(n)}}n!==o.current&&(o.current=n)},[t,n,r,a]),(0,Z.useEffect)(()=>{l&&i(null)},[l]),l}({disabled:!K,index:v,node:C,rect:E});return(0,Z.useEffect)(()=>{F&&W.current.newIndex!==G&&(W.current.newIndex=G),m!==W.current.containerId&&(W.current.containerId=m),u!==W.current.items&&(W.current.items=u)},[F,G,m,u]),(0,Z.useEffect)(()=>{if(U===W.current.activeId)return;if(null!=U&&null==W.current.activeId)return void(W.current.activeId=U);const e=setTimeout(()=>{W.current.activeId=U},50);return()=>clearTimeout(e)},[U]),{active:S,activeIndex:d,attributes:T,data:x,rect:E,index:v,newIndex:G,items:u,isOver:N,isSorting:F,isDragging:j,listeners:I,node:C,overIndex:y,over:A,setNodeRef:R,setActivatorNodeRef:L,setDroppableNodeRef:k,setDraggableNodeRef:D,transform:null!=Q?Q:H,transition:Q||V&&W.current.newIndex===v?tu:B&&!Fo(O)||!c?void 0:F||K?Bo.Transition.toString({...c,property:eu}):void 0}}function au(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&"object"==typeof t.sortable&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const lu=[Rs.Down,Rs.Right,Rs.Up,Rs.Left],iu=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:a,droppableContainers:l,over:i,scrollableAncestors:o}}=t;if(lu.includes(e.code)){if(e.preventDefault(),!n||!r)return;const t=[];l.getEnabled().forEach(n=>{if(!n||null!=n&&n.disabled)return;const l=a.get(n.id);if(l)switch(e.code){case Rs.Down:r.top<l.top&&t.push(n);break;case Rs.Up:r.top>l.top&&t.push(n);break;case Rs.Left:r.left>l.left&&t.push(n);break;case Rs.Right:r.left<l.left&&t.push(n)}});const u=(e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const a=ls(t),l=[];for(const e of r){const{id:t}=e,r=n.get(t);if(r){const n=ls(r),i=a.reduce((e,t,r)=>e+ts(n[r],t),0),o=Number((i/4).toFixed(4));l.push({id:t,data:{droppableContainer:e,value:o}})}}return l.sort(rs)})({active:n,collisionRect:r,droppableRects:a,droppableContainers:t,pointerCoordinates:null});let m=is(u,"id");if(m===(null==i?void 0:i.id)&&u.length>1&&(m=u[1].id),null!=m){const e=l.get(n.id),t=l.get(m),i=t?a.get(t.id):null,u=null==t?void 0:t.node.current;if(u&&i&&e&&t){const n=_s(u).some((e,t)=>o[t]!==e),a=ou(e,t),l=(c=t,!(!au(s=e)||!au(c))&&!!ou(s,c)&&s.data.current.sortable.index<c.data.current.sortable.index),m=n||!a?{x:0,y:0}:{x:l?r.width-i.width:0,y:l?r.height-i.height:0},d={x:i.left,y:i.top};return m.x&&m.y?d:Ro(d,m)}}}var s,c};function ou(e,t){return!(!au(e)||!au(t))&&e.data.current.sortable.containerId===t.data.current.sortable.containerId}var su=function(e){var t=e.isOpen,n=e.onClose,r=e.onToggle,a=e.trigger,l=e.children,i=e.className,o=void 0===i?"":i,s=e.activeClasses,c=void 0===s?"":s,u=vr(function(){t&&n()},t),m=(0,Z.useRef)(null),d=(0,Z.useRef)(null),g=hr((0,Z.useState)(null),2),p=g[0],f=g[1],y=il(ol,t);(0,Z.useLayoutEffect)(function(){if(t&&m.current&&d.current){var e=m.current.getBoundingClientRect(),n=d.current.getBoundingClientRect(),r=ol().getBoundingClientRect(),a=e.bottom-y.offsetY+5,l=e.right-n.width-y.offsetX;if(a+n.height>r.height-8){var i=e.top-y.offsetY-n.height-5;i>=8&&(a=i)}var o=r.width-8;l<8&&(l=8),l+n.width>o&&(l=o-n.width),l<0&&(l=8),f({top:a,left:l})}},[t,l,y]);var h=J().cloneElement(a,{onClick:function(){r()},className:t&&c?c:a.props.className});return J().createElement("div",{className:"relative",ref:m},h,t&&ll().createPortal(J().createElement("div",{ref:function(e){u.current=e,d.current=e},style:{position:"absolute",top:p?"".concat(p.top,"px"):"0",left:p?"".concat(p.left,"px"):"0",opacity:p?1:0,zIndex:9999},className:"bg-white rounded-md shadow-lg border border-gray-200 overflow-hidden ".concat(o)},l),ol()))},cu=function(){var e=uu();return null!==e&&e.enabled&&e.license_valid},uu=function(){var e=window.imagelyApp;return(null==e?void 0:e.enviraCdnConfig)||null},mu=function(e){var t;return!(null===(t=e.meta_data)||void 0===t||!t._envira_cdn_id)},du=function(){var e=window.wpApiSettings;if(null!=e&&e.nonce)return e.nonce;var t=window.imagelyApp;return(null==t?void 0:t.nonce)||null},gu=function(){var e=window.imagelyApp;return(null==e?void 0:e.restURL)||"/wp-json/"};const pu=function(e){var t=e.isOpen,n=e.onClose,r=e.image;if(!r)return null;var a=r.meta_data||{},l=function(e){return null==e||""===e?"N/A":"boolean"==typeof e?e?"Yes":"No":String(e)},i=[{tag:"Image ID",value:r.pid},{tag:"Image Width",value:a.width},{tag:"Image Height",value:a.height},{tag:"md5",value:a.md5}],o=[{tag:"Orientation",value:a.Orientation},{tag:"Camera",value:a.camera},{tag:"Aperture",value:a.aperture},{tag:"Focal Length",value:a.focal_length},{tag:"ISO",value:a.iso},{tag:"Shutter Speed",value:a.shutter_speed},{tag:"Flash",value:a.flash},{tag:"Created",value:a.created_timestamp?new Date(1e3*a.created_timestamp).toLocaleString():null}].filter(function(e){return null!==e.value&&void 0!==e.value&&""!==e.value&&!1!==e.value});return J().createElement(xr,{isOpen:t,onClose:n,title:(0,de.__)("Show meta data","nggallery")},J().createElement("div",{className:"space-y-6"},J().createElement("div",null,J().createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4"},(0,de.__)("Meta Data","nggallery")),J().createElement("div",{className:"bg-gray-50 rounded-lg overflow-hidden"},J().createElement("table",{className:"min-w-full"},J().createElement("thead",{className:"bg-gray-100"},J().createElement("tr",null,J().createElement("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 w-1/3"},(0,de.__)("Tag","nggallery")),J().createElement("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700"},(0,de.__)("Value","nggallery")))),J().createElement("tbody",{className:"divide-y divide-gray-200 bg-white"},i.map(function(e,t){return J().createElement("tr",{key:t,className:"bg-white"},J().createElement("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium"},e.tag),J().createElement("td",{className:"px-4 py-3 text-sm text-gray-700"},l(e.value)))}))))),o.length>0&&J().createElement("div",null,J().createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4"},(0,de.__)("EXIF Data","nggallery")),J().createElement("div",{className:"bg-gray-50 rounded-lg overflow-hidden"},J().createElement("table",{className:"min-w-full"},J().createElement("thead",{className:"bg-gray-100"},J().createElement("tr",null,J().createElement("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700 w-1/3"},(0,de.__)("Tag","nggallery")),J().createElement("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-700"},(0,de.__)("Value","nggallery")))),J().createElement("tbody",{className:"divide-y divide-gray-200 bg-white"},o.map(function(e,t){return J().createElement("tr",{key:t,className:"bg-white"},J().createElement("td",{className:"px-4 py-3 text-sm text-gray-900 font-medium"},e.tag),J().createElement("td",{className:"px-4 py-3 text-sm text-gray-700"},l(e.value)))}))))),0===o.length&&J().createElement("div",null,J().createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4"},(0,de.__)("EXIF Data","nggallery")),J().createElement("div",{className:"bg-gray-50 rounded-lg p-4"},J().createElement("p",{className:"text-sm text-gray-600 text-center"},(0,de.__)("No EXIF data available for this image.","nggallery"))))))};function fu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function yu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fu(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fu(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var hu=function(){return J().createElement("div",{className:"absolute inset-0 bg-white bg-opacity-60 flex items-center justify-center z-20"},J().createElement(an,{className:"animate-spin h-8 w-8 -mt-[48px] text-green-500"}))},_u=(0,Z.memo)(function(e){var t,n=e.image,r=e.gallery,a=e.isSelected,l=e.onSelect,i=e.onDelete,o=e.onRecover,s=e.onGenerateThumbnail,c=e.isProcessing,u=e.onToggleVisibility,m=hr((0,Z.useState)(!1),2),d=m[0],g=m[1],p=hr((0,Z.useState)(!1),2),f=p[0],y=p[1],h=hr((0,Z.useState)(!1),2),_=h[0],b=h[1],v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:768,t=hr((0,Z.useState)(!1),2),n=t[0],r=t[1];return(0,Z.useEffect)(function(){var t=function(){r(window.innerWidth<e)};return t(),window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}},[e]),n}(),x=(0,me.useDispatch)(tr),w=te(),E=fa((null==r?void 0:r.gid)||null).data,C=function(){var e,t,n=te();return Mr({mutationFn:(t=Er(Nr().mark(function e(t){var n,r;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.galleryId,r=t.imageId,e.next=3,Fr()({path:"/imagely/v1/galleries/".concat(n),method:"PUT",headers:ia(),data:{previewpic:r}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),onMutate:(e=Er(Nr().mark(function e(t){var r,a,l;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.galleryId,a=t.imageId,e.next=3,n.cancelQueries({queryKey:ga(r)});case 3:return(l=n.getQueryData(ga(r)))&&n.setQueryData(ga(r),da(da({},l),{},{previewpic:a})),e.abrupt("return",{previousGallery:l});case 6:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),onError:function(e,t,r){var a=t.galleryId;null!=r&&r.previousGallery&&n.setQueryData(ga(a),r.previousGallery)},onSettled:function(e,t,r){var a=r.galleryId;n.invalidateQueries({queryKey:ga(a)}),n.invalidateQueries({queryKey:["galleries"]})}})}(),N=ea(),k=N.showSuccess,S=N.showError,O=(0,Z.useCallback)(function(){var e=function(e){var t,n=null===(t=e.meta_data)||void 0===t?void 0:t._envira_cdn_id;return n?"https://images.envira-cdn.com/cdn-cgi/imagedelivery/Fcmm2_rOlMVEVM7KyY_2rw/".concat(n,"/w=original"):null}(n);e&&window.open(e,"_blank"),g(!1)},[n]),P=(0,Z.useCallback)(Er(Nr().mark(function e(){var t,a,l,i,o,s;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=n.meta_data)&&void 0!==t&&t._envira_cdn_id){e.next=2;break}return e.abrupt("return");case 2:if(a=du(),l=gu(),a){e.next=8;break}return S((0,de.__)("Authentication error","nggallery")),g(!1),e.abrupt("return");case 8:return g(!1),e.prev=9,e.next=12,fetch("".concat(l,"envira-cdn/v1/ngg-remove-image/").concat(n.pid),{method:"DELETE",headers:{"X-WP-Nonce":a}});case 12:if((i=e.sent).ok){e.next=20;break}return e.next=16,i.json().catch(function(){return{}});case 16:return o=e.sent,console.error("CDN removal error:",o),S((0,de.__)("Failed to remove image from CDN","nggallery")),e.abrupt("return");case 20:return e.next=22,i.json();case 22:if(!(s=e.sent).success){e.next=30;break}if(k((0,de.__)("Image removed from CDN successfully","nggallery")),null==r||!r.gid){e.next=28;break}return e.next=28,w.invalidateQueries({queryKey:["gallery",r.gid,"images"]});case 28:e.next=31;break;case 30:S(s.message||(0,de.__)("Failed to remove image from CDN","nggallery"));case 31:e.next=37;break;case 33:e.prev=33,e.t0=e.catch(9),console.error("CDN removal error:",e.t0),S((0,de.__)("Error removing image from CDN","nggallery"));case 37:case"end":return e.stop()}},e,null,[[9,33]])})),[n,null==r?void 0:r.gid,w,k,S]),T=ru({id:(null==n?void 0:n.pid)||0,transition:{duration:150,easing:"cubic-bezier(0.25, 1, 0.5, 1)"}}),D=T.attributes,I=T.listeners,j=T.setNodeRef,A=T.transform,L=T.transition,M=T.isDragging;if(!n||null==n||!n.pid||"number"!=typeof n.pid)return null;if(null==n||!n.filename||null==r||!r.path)return null;var R={transform:Bo.Transform.toString(A),transition:L,opacity:M?.5:1,touchAction:"none",willChange:"transform, opacity",pointerEvents:c?"none":void 0},F=function(){var e=Er(Nr().mark(function e(){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(n.pid);case 2:g(!1);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),z=v||f||a,B=function(){var e=Er(Nr().mark(function e(){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.mutateAsync({galleryId:r.gid,imageId:n.pid});case 3:k((0,de.__)("Gallery thumbnail updated successfully","nggallery")),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Error setting gallery thumbnail:",e.t0),S((0,de.__)("Failed to update gallery thumbnail","nggallery"));case 10:g(!1);case 11:case"end":return e.stop()}},e,null,[[0,6]])}));return function(){return e.apply(this,arguments)}}(),q=(null===(t=E||r)||void 0===t?void 0:t.previewpic)===n.pid;return J().createElement("div",{className:"relative w-full sm:w-full md:w-[130px] ".concat(c?"opacity-50":"")},J().createElement("div",{ref:j,style:R,className:"relative bg-white rounded-lg will-change-transform ".concat(M?"z-10 shadow-xl ring-2 ring-green-500":""),"data-testid":"sortable-image-".concat(n.pid),onMouseEnter:function(){return y(!0)},onMouseLeave:function(){v||(y(!1),g(!1))},onTouchStart:function(){y(!0)}},c&&J().createElement(hu,null),J().createElement("div",{className:"absolute top-2 left-2 z-20"},J().createElement("input",{title:(0,de.__)("Select image","nggallery"),type:"checkbox",checked:a,onChange:function(){return l(n.pid)},onClick:function(e){return e.stopPropagation()},className:"rounded border-gray-300 ".concat(c?"cursor-not-allowed":"cursor-pointer"," w-5 h-5 md:w-4 md:h-4 text-green-600 focus:ring-green-500 focus:ring-2"),disabled:c})),J().createElement("div",{className:"absolute top-2 right-2 z-20 ".concat(c?"cursor-not-allowed":"cursor-pointer")},J().createElement(su,{isOpen:d,onClose:function(){g(!1)},onToggle:function(){g(!d)},trigger:J().createElement("button",{title:(0,de.__)("Actions","nggallery"),className:"bg-transparent p-2 md:p-1 hover:bg-opacity-80 focus:outline-none ".concat(c?"cursor-not-allowed":"cursor-pointer"),onClick:function(e){e.stopPropagation(),e.preventDefault(),g(!d)},disabled:c},J().createElement("svg",{className:"w-6 h-6 md:w-5 md:h-5 text-white hover:text-gray-300",viewBox:"0 0 20 20",fill:"currentColor"},J().createElement("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})))},J().createElement("div",{className:"py-1"},J().createElement("button",{onClick:function(){x.setActiveModal("editImage",{image:n}),g(!1),y(!1)},className:"block w-full text-left px-4 py-1.5 text-sm text-gray-700 hover:bg-gray-100 ".concat(c?"cursor-not-allowed":"cursor-pointer"),disabled:c},(0,de.__)("Edit Details","nggallery")),J().createElement("button",{onClick:function(){x.setActiveModal("imageView",{image:{filename:n.filename,alttext:n.alttext,galleryPath:(null==r?void 0:r.path)||"",pid:n.pid,galleryid:n.galleryid,image_url:n.image_url}}),g(!1),y(!1)},className:"block w-full text-left px-4 py-1.5 text-sm text-gray-700 hover:bg-gray-100 ".concat(c?"cursor-not-allowed":"cursor-pointer"),disabled:c},(0,de.__)("Edit Image","nggallery")),J().createElement("button",{onClick:function(){b(!0),g(!1),y(!1)},className:"block w-full text-left px-4 py-1.5 text-sm text-gray-700 hover:bg-gray-100 ".concat(c?"cursor-not-allowed":"cursor-pointer"),disabled:c},(0,de.__)("View Meta","nggallery")),J().createElement("button",{onClick:function(){i(n),g(!1)},className:"block w-full text-left px-4 py-1.5 text-sm text-red-600 hover:bg-gray-100 ".concat(c?"cursor-not-allowed":"cursor-pointer"),disabled:c},(0,de.__)("Delete Image","nggallery")),J().createElement("button",{onClick:F,className:"block w-full text-left px-4 py-1.5 text-sm text-gray-700 hover:bg-gray-100 ".concat(c?"cursor-not-allowed":"cursor-pointer"),disabled:c},(0,de.__)("Recover from Backup","nggallery")),J().createElement("button",{onClick:function(){s(n.pid),g(!1)},className:"block w-full text-left px-4 py-1.5 text-sm text-gray-700 hover:bg-gray-100 ".concat(c?"cursor-not-allowed":"cursor-pointer"),disabled:c},(0,de.__)("Generate Thumbnail","nggallery")),J().createElement("button",{onClick:B,className:"block w-full text-left px-4 py-1.5 text-sm text-gray-700 hover:bg-gray-100  ".concat(c||q?"cursor-not-allowed":"cursor-pointer"),disabled:c||q},q?(0,de.__)("Current Preview Thumbnail","nggallery"):(0,de.__)("Set as Preview Thumbnail","nggallery")),J().createElement("button",{onClick:function(e){e.stopPropagation(),u(n,!n.exclude),g(!1),y(!1)},className:"block w-full text-left px-4 py-1.5 text-sm ".concat(n.exclude?"text-blue-600":"text-gray-700"," hover:bg-gray-100 ").concat(c?"cursor-not-allowed":"cursor-pointer"),disabled:c},n.exclude?(0,de.__)("Show Image","nggallery"):(0,de.__)("Hide Image","nggallery")),cu()&&mu(n)&&J().createElement(J().Fragment,null,J().createElement("button",{onClick:O,className:"block w-full text-left px-4 py-1.5 text-sm text-blue-600 hover:bg-gray-100 cursor-pointer"},(0,de.__)("View CDN URL","nggallery")),J().createElement("button",{onClick:P,className:"block w-full text-left px-4 py-1.5 text-sm text-orange-600 hover:bg-gray-100 cursor-pointer"},(0,de.__)("Remove from CDN","nggallery")))))),J().createElement("div",{className:"overflow-hidden rounded-lg bg-gray-100 flex items-center justify-center relative cursor-pointer w-full h-[100px] sm:h-[120px] md:w-[130px] md:h-[90px]",onClick:function(e){e.stopPropagation(),x.setActiveModal("galleryImageView",{image:{filename:n.filename,alttext:n.alttext,galleryPath:(null==r?void 0:r.path)||"",pid:n.pid},galleryId:null==r?void 0:r.gid})}},J().createElement("img",{src:"".concat(n.thumb_url||"").concat(n.reloadKey?"?t=".concat(n.reloadKey):""),alt:n.alttext||"",className:"w-full h-full object-cover cursor-pointer ".concat(n.exclude?"opacity-50 grayscale":""),loading:"lazy",draggable:!1}),n.exclude&&J().createElement("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-30"},J().createElement("div",{className:"bg-gray-600 text-white text-xs px-2 py-1 rounded font-medium shadow-lg"},(0,de.__)("Hidden","nggallery"))),z&&J().createElement("div",{className:"absolute inset-0 bg-black bg-opacity-60 flex items-center justify-center z-10 transition-opacity"})),J().createElement("div",{className:"mt-2 px-1"},J().createElement("div",{className:"flex items-center justify-between"},J().createElement("p",{className:"text-sm text-gray-900 truncate flex-1 mr-2",title:n.alttext||n.filename},n.alttext||n.filename),J().createElement("button",ge({},c?{}:yu(yu({},D),I),{className:"flex-shrink-0 text-gray-100 p-1 rounded hover:bg-gray-100 ".concat(c?"cursor-not-allowed opacity-50":"cursor-move"),disabled:c,title:(0,de.__)("Drag to reorder","nggallery")}),J().createElement(Gt,{className:"text-gray-500"}))),n.tags&&n.tags.length>0&&J().createElement("div",{className:"mt-1 flex flex-nowrap gap-1 overflow-hidden"},function(){for(var e=0,t=[],r=0;r<n.tags.length;r++){var a=n.tags[r],l=a.length+2;if(e+l>15)break;t.push(a),e+=l}var i=n.tags.length-t.length;return J().createElement(J().Fragment,null,t.map(function(e,t){return J().createElement("span",{key:t,className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-700 flex-shrink-0",title:e},e)}),i>0&&J().createElement("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-700 flex-shrink-0"},"+",i))}()))),J().createElement(pu,{isOpen:_,onClose:function(){return b(!1)},image:n}))});_u.displayName="SortableImage";const bu=_u;function vu(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return xu(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xu(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){o=!0,l=e},f:function(){try{i||null==n.return||n.return()}finally{if(o)throw l}}}}function xu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function wu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Eu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wu(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wu(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Cu=function(e){var t=e.onClick;return J().createElement("div",{className:"relative w-full"},J().createElement("div",{className:"relative bg-gray-100 rounded-lg border-2 border-dashed border-gray-300 hover:border-gray-400 cursor-pointer transition-colors w-full h-[90px] sm:h-[100px] md:w-[130px] md:h-[90px]",onClick:t},J().createElement("div",{className:"absolute inset-0 flex flex-col items-center justify-center"},J().createElement(Bt,{className:"w-6 h-6 sm:w-8 sm:h-8 text-gray-400 mb-1 sm:mb-2"}),J().createElement("span",{className:"text-xs sm:text-sm text-gray-500 font-medium"},"Add Images"))))};const Nu=function(e){var t=e.gallery,n=e.error,r=(0,me.useDispatch)(tr),a=Li(),l=a.state,i=a.updateImageSettings,o=zl(),s=o.navigateTo,c=o.currentId,u=ea(),m=u.showSuccess,d=u.showError,g=(null==t?void 0:t.gid)||c,p=te(),f=function(){var e,t=te();return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var n;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.images,e.next=3,Fr()({path:"/imagely/v1/images/bulk",method:"PUT",headers:ia(),data:{images:n}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),onSettled:function(){t.invalidateQueries({queryKey:["gallery"]})}})}(),y=ha(),h=hl(),_=wa(),b=Ea(),v=function(){var e,t=te();return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var n;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=oa("create-thumbnail"),e.next=3,n(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),onSuccess:function(){t.invalidateQueries({queryKey:["images"]}),t.invalidateQueries({queryKey:["gallery"]})}})}(),x=function(){var e,t=te();return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var n;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=oa("set-watermark"),e.next=3,n(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),onSuccess:function(){t.invalidateQueries({queryKey:["images"]}),t.invalidateQueries({queryKey:["gallery"]})}})}(),w=function(){var e,t=te();return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var n;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=sa("bulk-import-metadata"),e.next=3,n({image_ids:t});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),onSuccess:function(){t.invalidateQueries({queryKey:["images"]}),t.invalidateQueries({queryKey:["gallery"]})}})}(),E=function(){var e,t=te();return Mr({mutationFn:(e=Er(Nr().mark(function e(t){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fr()({path:"/imagely/v1/galleries/".concat(t,"/scan-folder"),method:"POST",headers:ia()});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),onSuccess:function(e,n){t.invalidateQueries({queryKey:pa(n)}),t.invalidateQueries({queryKey:ga(n)}),t.invalidateQueries({queryKey:["galleries"]})}})}(),C=hr((0,Z.useState)([]),2),N=C[0],k=C[1],S=hr((0,Z.useState)(null),2),O=S[0],P=S[1],T=hr((0,Z.useState)(!1),2),D=T[0],I=T[1],j=hr((0,Z.useState)(!1),2),A=j[0],L=j[1],M=hr((0,Z.useState)(new Set),2),R=M[0],F=M[1],z=hr((0,Z.useState)(!1),2),B=z[0],q=z[1],H=new Set(l.imageSettings.selectedImages||[]),G=function(e){try{i({selectedImages:Array.from(e)})}catch(e){console.error("Error updating image settings:",e)}},U=$o(Jo(Ks,{activationConstraint:{distance:8,delay:100,tolerance:10}}),Jo(Hs,{coordinateGetter:iu})),W=fa(null!=g?g:0),V=W.data,K=W.isLoading,Q=W.error,X=W.isError,Y=_a(null!=g?g:0),$=Y.data,ee=void 0===$?[]:$,ne=Y.isLoading,re=Y.error,ae=(0,Z.useRef)(!1);(0,Z.useEffect)(function(){Q&&g&&!ae.current&&(ae.current=!0,d((0,de.__)("Gallery not found.","nggallery")),s("imagely-galleries","galleries"))},[Q,g,d,s]),(0,Z.useEffect)(function(){X&&g&&!Q&&!ae.current&&(ae.current=!0,d((0,de.__)("Gallery not found.","nggallery")),s("imagely-galleries","galleries"))},[X,g,Q,d,s]);var le=V||t;(0,Z.useEffect)(function(){ee.length>0&&k(ee)},[ee]);var ie=(0,Z.useCallback)(function(e){var t=e.active,n=e.over;P(null),n&&t.id!==n.id&&(k(function(e){var r=e.findIndex(function(e){return e.pid===t.id}),a=e.findIndex(function(e){return e.pid===n.id}),l=Hc(e,r,a).map(function(e,t){return Eu(Eu({},e),{},{sortorder:t+1})});return requestAnimationFrame(function(){f.mutate({images:l.map(function(e){return{id:e.pid,sortorder:e.sortorder}})})}),l}),window.navigator.vibrate&&window.navigator.vibrate([50,50,50]))},[f]),oe=(0,Z.useMemo)(function(){return N.map(function(e){return e.pid})},[N]),se=function(e){if(t){i({sortBy:e,sortOrder:"asc"});var n=zr(ee);"invert"===e?n.reverse():n.sort(function(t,n){switch(e){case"pid":return t.pid-n.pid;case"filename":return t.filename.localeCompare(n.filename);case"alttext":return t.alttext.localeCompare(n.alttext);case"imagedate":return new Date(n.imagedate).getTime()-new Date(t.imagedate).getTime();default:return 0}});var r=n.map(function(e,t){return Eu(Eu({},e),{},{sortorder:t+1})});k(r),f.mutate({images:r.map(function(e){return{id:e.pid,sortorder:e.sortorder}})})}},ce=function(e){var t=new Set(H);t.has(e)?t.delete(e):t.add(e),G(t)},ue=function(e){var t;r.setActiveModal("deleteImages",{images:[e],onClose:function(){return r.setActiveModal(null)},onConfirm:(t=Er(Nr().mark(function t(){return Nr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return k(function(t){return t.filter(function(t){return t.pid!==e.pid})}),t.next=3,r.deleteItem("images",e.pid);case 3:r.setActiveModal(null);case 4:case"end":return t.stop()}},t)})),function(){return t.apply(this,arguments)})})},ge=function(){var e=Er(Nr().mark(function e(t){var n,a,l;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return F(function(e){return new Set(e).add(t)}),e.prev=1,e.next=4,b.mutateAsync(t);case 4:if(n=Date.now(),g&&p.setQueryData(["gallery",g,"images"],function(e){return e?e.map(function(e){return e.pid===t?Eu(Eu({},e),{},{reloadKey:n}):e}):e}),!le||le.previewpic!==t){e.next=19;break}return e.prev=7,l="".concat((null===(a=le.previewpic_url)||void 0===a?void 0:a.split("?")[0])||"","?t=").concat(n),e.next=11,y.mutateAsync({id:le.gid,data:{previewpic_url:l}});case 11:m((0,de.__)("Gallery thumbnail updated after image recovery!","nggallery")),r.fetchItems("galleries"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(7),d((0,de.__)("Failed to update gallery thumbnail.","nggallery")),console.error("Error updating gallery thumbnail",e.t0);case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(1),console.error("Error recovering image",e.t1);case 24:return e.prev=24,F(function(e){var n=new Set(e);return n.delete(t),n}),e.finish(24);case 27:case"end":return e.stop()}},e,null,[[1,21,24,27],[7,15]])}));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=Er(Nr().mark(function e(t){var n,a,l;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return F(function(e){return new Set(e).add(t)}),e.prev=1,e.next=4,v.mutateAsync(t);case 4:if(n=Date.now(),g&&p.setQueryData(["gallery",g,"images"],function(e){return e?e.map(function(e){return e.pid===t?Eu(Eu({},e),{},{reloadKey:n}):e}):e}),!le||le.previewpic!==t){e.next=19;break}return e.prev=7,l="".concat((null===(a=le.previewpic_url)||void 0===a?void 0:a.split("?")[0])||"","?t=").concat(n),e.next=11,y.mutateAsync({id:le.gid,data:{previewpic_url:l}});case 11:m((0,de.__)("Gallery thumbnail updated after thumbnail generation!","nggallery")),r.fetchItems("galleries"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(7),d((0,de.__)("Failed to update gallery thumbnail.","nggallery")),console.error("Error updating gallery thumbnail",e.t0);case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(1),console.error("Error generating thumbnail",e.t1);case 24:return e.prev=24,F(function(e){var n=new Set(e);return n.delete(t),n}),e.finish(24);case 27:case"end":return e.stop()}},e,null,[[1,21,24,27],[7,15]])}));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=Er(Nr().mark(function e(t,n){var r,a,l;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return F(function(e){return new Set(e).add(t)}),e.prev=1,e.next=4,_.mutateAsync({pid:t,rotation:n});case 4:if(r=Date.now(),g&&p.setQueryData(["gallery",g,"images"],function(e){return e?e.map(function(e){return e.pid===t?Eu(Eu({},e),{},{reloadKey:r}):e}):e}),!le||le.previewpic!==t){e.next=18;break}return e.prev=7,l="".concat((null===(a=le.previewpic_url)||void 0===a?void 0:a.split("?")[0])||"","?t=").concat(r),e.next=11,y.mutateAsync({id:le.gid,data:{previewpic_url:l}});case 11:m((0,de.__)("Gallery thumbnail updated after image rotation!","nggallery")),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(7),d((0,de.__)("Failed to update gallery thumbnail.","nggallery")),console.error("Error updating gallery thumbnail",e.t0);case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(1),console.error("Error rotating image",e.t1);case 23:return e.prev=23,F(function(e){var n=new Set(e);return n.delete(t),n}),e.finish(23);case 26:case"end":return e.stop()}},e,null,[[1,20,23,26],[7,14]])}));return function(t,n){return e.apply(this,arguments)}}(),ye=function(){var e=Er(Nr().mark(function e(){var t,n,r,a;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=N.filter(function(e){return H.has(e.pid)}),F(function(e){var n=new Set(e);return t.forEach(function(e){return n.add(e.pid)}),n}),n=vu(t),e.prev=3,n.s();case 5:if((r=n.n()).done){e.next=11;break}return a=r.value,e.next=9,ge(a.pid);case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),n.e(e.t0);case 16:return e.prev=16,n.f(),e.finish(16);case 19:L(!1),G(new Set);case 21:case"end":return e.stop()}},e,null,[[3,13,16,19]])}));return function(){return e.apply(this,arguments)}}(),he=function(){var e=Er(Nr().mark(function e(){var t,n,r,a,l,i,o,s,c;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=N.filter(function(e){return H.has(e.pid)}),0!==(n=t.filter(function(e){return mu(e)})).length){e.next=6;break}return d((0,de.__)("No selected images are on CDN","nggallery")),L(!1),e.abrupt("return");case 6:if(r=du(),a=gu(),r){e.next=12;break}return d((0,de.__)("Authentication error","nggallery")),L(!1),e.abrupt("return");case 12:F(function(e){var t=new Set(e);return n.forEach(function(e){return t.add(e.pid)}),t}),L(!1),l=0,i=0,o=vu(n),e.prev=17,c=Nr().mark(function e(){var t,n;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.value,e.prev=1,e.next=4,fetch("".concat(a,"envira-cdn/v1/ngg-remove-image/").concat(t.pid),{method:"DELETE",headers:{"X-WP-Nonce":r}});case 4:if(!(n=e.sent).ok){e.next=12;break}return e.next=8,n.json();case 8:e.sent.success?l++:i++,e.next=13;break;case 12:i++;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),console.error("CDN removal error:",e.t0),i++;case 19:return e.prev=19,F(function(e){var n=new Set(e);return n.delete(t.pid),n}),e.finish(19);case 22:case"end":return e.stop()}},e,null,[[1,15,19,22]])}),o.s();case 20:if((s=o.n()).done){e.next=24;break}return e.delegateYield(c(),"t0",22);case 22:e.next=20;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(17),o.e(e.t1);case 29:return e.prev=29,o.f(),e.finish(29);case 32:if(l>0&&0===i?m((0,de.__)("Successfully removed ".concat(l," image(s) from CDN"),"nggallery")):l>0&&i>0?m((0,de.__)("Removed ".concat(l," image(s) from CDN. ").concat(i," failed."),"nggallery")):d((0,de.__)("Failed to remove images from CDN","nggallery")),!g){e.next=36;break}return e.next=36,p.invalidateQueries({queryKey:["gallery",g,"images"]});case 36:G(new Set);case 37:case"end":return e.stop()}},e,null,[[17,26,29,32]])}));return function(){return e.apply(this,arguments)}}(),_e=function(){var e=Er(Nr().mark(function e(t){var n,r,a,l;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=N.filter(function(e){return H.has(e.pid)}),F(function(e){var t=new Set(e);return n.forEach(function(e){return t.add(e.pid)}),t}),r=vu(n),e.prev=3,r.s();case 5:if((a=r.n()).done){e.next=11;break}return l=a.value,e.next=9,fe(l.pid,t);case 9:e.next=5;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),r.e(e.t0);case 16:return e.prev=16,r.f(),e.finish(16);case 19:L(!1),G(new Set);case 21:case"end":return e.stop()}},e,null,[[3,13,16,19]])}));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Er(Nr().mark(function e(){var t,n,r,a;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=N.filter(function(e){return H.has(e.pid)}),F(function(e){var n=new Set(e);return t.forEach(function(e){return n.add(e.pid)}),n}),n=vu(t),e.prev=3,a=Nr().mark(function e(){var t,n;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.value,n=Date.now(),e.prev=2,e.next=5,x.mutateAsync(t.pid);case 5:g&&p.setQueryData(["gallery",g,"images"],function(e){return e?e.map(function(e){return e.pid===t.pid?Eu(Eu({},e),{},{reloadKey:n}):e}):e}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.error("Error setting watermark",e.t0);case 11:case"end":return e.stop()}},e,null,[[2,8]])}),n.s();case 6:if((r=n.n()).done){e.next=10;break}return e.delegateYield(a(),"t0",8);case 8:e.next=6;break;case 10:e.next=15;break;case 12:e.prev=12,e.t1=e.catch(3),n.e(e.t1);case 15:return e.prev=15,n.f(),e.finish(15);case 18:L(!1),G(new Set),F(function(e){var n=new Set(e);return t.forEach(function(e){return n.delete(e.pid)}),n});case 21:case"end":return e.stop()}},e,null,[[3,12,15,18]])}));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=Er(Nr().mark(function e(){var t,n;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=N.filter(function(e){return H.has(e.pid)}),n=t.map(function(e){return e.pid}),r.setActiveModal("bulkResize",{imageIds:n,galleryId:g,onConfirm:function(){G(new Set)}});case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),xe=function(){var e=Er(Nr().mark(function e(){var t,n,a;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=N.filter(function(e){return H.has(e.pid)}),n=t.map(function(e){return e.pid}),F(function(e){var n=new Set(e);return t.forEach(function(e){return n.add(e.pid)}),n}),e.prev=3,e.next=6,w.mutateAsync(n);case 6:(a=e.sent).success_count>0&&r.showNotice("success","Successfully imported metadata for ".concat(a.success_count," of ").concat(a.processed," images")),a.failure_count>0&&r.showNotice("warning","Failed to import metadata for ".concat(a.failure_count," images")),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),console.error("Error bulk importing metadata:",e.t0),r.showNotice("error","Failed to import metadata for selected images");case 15:return e.prev=15,F(function(e){var n=new Set(e);return t.forEach(function(e){return n.delete(e.pid)}),n}),L(!1),G(new Set),e.finish(15);case 20:case"end":return e.stop()}},e,null,[[3,11,15,20]])}));return function(){return e.apply(this,arguments)}}(),we=function(){var e=Er(Nr().mark(function e(t,n){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.mutateAsync({imageId:t.pid,data:{exclude:n}});case 3:k(function(e){return e.map(function(e){return e.pid===t.pid?Eu(Eu({},e),{},{exclude:n}):e})}),m((0,de.__)("Image visibility updated successfully!","nggallery")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),d((0,de.__)("Failed to update image visibility","nggallery"));case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t,n){return e.apply(this,arguments)}}(),Ee=function(){var e=Er(Nr().mark(function e(){var t;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=2;break}return e.abrupt("return");case 2:return q(!0),e.prev=3,e.next=6,E.mutateAsync(g);case 6:(t=e.sent).images_added>0?m(t.message):r.showNotice("info",t.message),t.errors&&t.errors.length>0&&t.errors.forEach(function(e){d(e)}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),d((null===e.t0||void 0===e.t0?void 0:e.t0.message)||(0,de.__)("Failed to scan folder for new images.","nggallery"));case 14:return e.prev=14,q(!1),e.finish(14);case 17:case"end":return e.stop()}},e,null,[[3,11,14,17]])}));return function(){return e.apply(this,arguments)}}();if(n)return J().createElement("div",{className:"text-red-600"},(0,de.__)("Error:","nggallery")," ",n);if(re)return J().createElement("div",{className:"text-red-600"},(0,de.__)("Error loading images:","nggallery")," ",re.message);var Ce=O?N.find(function(e){return e.pid===O}):null,Ne=((null==le?void 0:le.title)||"").replace(/<\/?[^>]+(>|$)/g,""),ke=((null==le?void 0:le.galdesc)||"").replace(/<\/?[^>]+(>|$)/g,""),Se=ke.length>100?ke.slice(0,100)+"...":ke,Oe=Ne.length>50?Ne.slice(0,50)+"...":Ne;return J().createElement("div",{className:""},J().createElement("div",{className:"p-6 lg:p-8 space-y-6"},J().createElement("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-0"},J().createElement("div",{className:"flex items-center space-x-3 sm:space-x-4 ".concat(K?"opacity-50":"")},J().createElement("img",{src:null!=le&&le.previewpic_url?null==le?void 0:le.previewpic_url:Bl({text:"NO IMAGE"}),alt:Oe,className:"w-10 h-10 sm:w-12 sm:h-12 object-cover rounded flex-shrink-0"}),J().createElement("div",{className:"flex flex-col min-w-0 flex-1"},J().createElement("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-1 sm:space-y-0 sm:space-x-2"},J().createElement("h1",{className:"text-lg sm:text-xl font-semibold truncate"},Oe," (",N.length,")"),J().createElement("button",{className:"px-2 py-1 bg-gray-100 rounded hover:bg-gray-200 text-xs sm:text-sm flex items-center self-start sm:self-auto",onClick:function(){return r.setActiveModal("galleryEdit",{galleryId:null==le?void 0:le.gid})}},J().createElement("svg",{width:"8",height:"8",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"mr-1 sm:w-2.5 sm:h-2.5"},J().createElement("path",{d:"M7.5 0.500151C7.63132 0.368829 7.78722 0.264659 7.9588 0.193588C8.13038 0.122517 8.31428 0.0859375 8.5 0.0859375C8.68572 0.0859375 8.86962 0.122517 9.0412 0.193588C9.21278 0.264659 9.36868 0.36883 9.5 0.500151C9.63132 0.631473 9.73549 0.787375 9.80656 0.958955C9.87763 1.13054 9.91421 1.31443 9.91421 1.50015C9.91421 1.68587 9.87763 1.86977 9.80656 2.04135C9.73549 2.21293 9.63132 2.36883 9.5 2.50015L2.75 9.25015L0 10.0002L0.75 7.25015L7.5 0.500151Z",fill:"currentColor"})),(0,de.__)("Edit Details","nggallery"))),Se&&J().createElement("p",{className:"text-gray-500 text-xs sm:text-sm"},Se)))),J().createElement("hr",null),J().createElement("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-0"},J().createElement("div",{className:"flex items-center space-x-2"},N.length>0&&J().createElement("input",{type:"checkbox",checked:H.size===N.length,onChange:function(e){return t=e.target.checked,void G(t?new Set(N.map(function(e){return e.pid})):new Set);var t},className:"rounded border-gray-300"}),J().createElement("h2",{className:"text-base sm:text-lg font-medium"},(0,de.__)("All Images","nggallery"))),J().createElement("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-4"},H.size>0&&J().createElement(su,{isOpen:A,onClose:function(){return L(!1)},onToggle:function(){return L(!A)},trigger:J().createElement("button",{className:"appearance-none bg-white border rounded px-3 sm:px-4 py-2 pr-6 sm:pr-8 flex items-center justify-center space-x-2 text-sm sm:text-base w-full sm:w-auto"},J().createElement("span",null,(0,de.__)("Bulk Actions","nggallery")),J().createElement("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",viewBox:"0 0 20 20",fill:"currentColor"},J().createElement("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})))},J().createElement("div",{className:"py-1"},J().createElement("button",{onClick:function(){be(),L(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},(0,de.__)("Set Watermark","nggallery")),J().createElement("button",{onClick:function(){var e,t;t=N.filter(function(e){return H.has(e.pid)}),r.setActiveModal("deleteImages",{images:t,onClose:function(){return r.setActiveModal(null)},onConfirm:(e=Er(Nr().mark(function e(){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k(function(e){return e.filter(function(e){return!H.has(e.pid)})}),G(new Set),e.next=4,Promise.all(t.map(function(e){return r.deleteItem("images",e.pid)}));case 4:r.setActiveModal(null);case 5:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})}),L(!1)},className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100"},(0,de.__)("Delete Selected","nggallery")),J().createElement("button",{onClick:function(){ye(),L(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},(0,de.__)("Recover Selected","nggallery")),J().createElement("button",{onClick:function(){var e;e=N.filter(function(e){return H.has(e.pid)}).map(function(e){return e.pid}),r.setActiveModal("bulkGenerateThumbnails",{imageIds:e,galleryId:g,onConfirm:function(){G(new Set)}}),L(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},(0,de.__)("Generate Thumbnails","nggallery")),J().createElement("button",{onClick:function(){_e("cw"),L(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},(0,de.__)("Rotate Clockwise","nggallery")),J().createElement("button",{onClick:function(){_e("ccw"),L(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},(0,de.__)("Rotate Counter-Clockwise","nggallery")),J().createElement("button",{onClick:function(){ve(),L(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},(0,de.__)("Resize Selected","nggallery")),J().createElement("button",{onClick:function(){xe(),L(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},(0,de.__)("Import Metadata","nggallery")),J().createElement("button",{onClick:function(){var e;e=N.filter(function(e){return H.has(e.pid)}).map(function(e){return e.pid}),r.setActiveModal("gallerySelect",{imageIds:e,operation:"copy",excludeGalleryId:null==t?void 0:t.gid,onConfirm:function(){G(new Set)}}),L(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},(0,de.__)("Copy to...","nggallery")),J().createElement("button",{onClick:function(){var e;e=N.filter(function(e){return H.has(e.pid)}).map(function(e){return e.pid}),r.setActiveModal("gallerySelect",{imageIds:e,operation:"move",excludeGalleryId:null==t?void 0:t.gid,onConfirm:function(){k(function(e){return e.filter(function(e){return!H.has(e.pid)})}),G(new Set)}}),L(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},(0,de.__)("Move to...","nggallery")),J().createElement("button",{onClick:function(){var e;e=N.filter(function(e){return H.has(e.pid)}).map(function(e){return e.pid}),r.setActiveModal("tags",{imageIds:e,onConfirm:function(){G(new Set)}}),L(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},(0,de.__)("Edit Tags","nggallery")),cu()&&N.some(function(e){return H.has(e.pid)&&mu(e)})&&J().createElement("button",{onClick:function(){he(),L(!1)},className:"block w-full text-left px-4 py-2 text-sm text-orange-600 hover:bg-gray-100"},(0,de.__)("Remove from CDN","nggallery")))),J().createElement(su,{isOpen:D,onClose:function(){return I(!1)},onToggle:function(){return I(!D)},trigger:J().createElement("button",{className:"appearance-none bg-white border rounded px-3 sm:px-4 py-2 pr-6 sm:pr-8 flex items-center justify-center space-x-2 text-sm sm:text-base w-full sm:w-auto"},J().createElement("span",null,(0,de.__)("Sort Images","nggallery")),J().createElement("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",viewBox:"0 0 20 20",fill:"currentColor"},J().createElement("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})))},J().createElement("div",{className:"py-2"},J().createElement("button",{onClick:function(){se("pid"),I(!1)},className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left"},(0,de.__)("Sort by ID","nggallery")),J().createElement("button",{onClick:function(){se("filename"),I(!1)},className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left"},(0,de.__)("Sort by Filename","nggallery")),J().createElement("button",{onClick:function(){se("alttext"),I(!1)},className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left"},(0,de.__)("Sort by Alt Text","nggallery")),J().createElement("button",{onClick:function(){se("imagedate"),I(!1)},className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left"},(0,de.__)("Sort by Date","nggallery")),J().createElement("hr",{className:"my-2"}),J().createElement("button",{onClick:function(){se("invert"),I(!1)},className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left"},(0,de.__)("Invert Order","nggallery")))),g&&J().createElement("button",{onClick:Ee,disabled:B,className:"appearance-none bg-white border rounded px-3 sm:px-4 py-2 flex items-center justify-center space-x-2 text-sm sm:text-base w-full sm:w-auto hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",title:(0,de.__)("Scan the gallery folder for new images added via FTP or file manager","nggallery")},J().createElement(rn,{className:"w-4 h-4"}),J().createElement("span",null,B?(0,de.__)("Scanning...","nggallery"):(0,de.__)("Scan Folder","nggallery"))))),J().createElement("div",{className:"relative ".concat(ne?"opacity-50":"")},J().createElement(kc,{sensors:U,collisionDetection:ss,onDragStart:function(e){P(e.active.id),window.navigator.vibrate&&window.navigator.vibrate(50)},onDragEnd:ie,measuring:{droppable:{strategy:ec.Always}}},J().createElement(Yc,{items:oe,strategy:Wc},J().createElement(J().Fragment,null,J().createElement("div",{className:"grid gap-4 sm:gap-6 grid-cols-2 sm:grid-cols-3 md:grid-cols-[repeat(auto-fill,_130px)]"},J().createElement(Cu,{onClick:function(){return r.setActiveModal("imageUploader",{galleryId:null==le?void 0:le.gid})}}),N.map(function(e){return J().createElement(bu,{key:"".concat(e.pid,"-").concat(e.reloadKey||""),image:e,gallery:le,isSelected:H.has(e.pid),onSelect:ce,onDelete:ue,onRecover:ge,onGenerateThumbnail:pe,isProcessing:R.has(e.pid),onToggleVisibility:we})})))),J().createElement(qc,null,Ce&&J().createElement("div",{className:"transform scale-105 opacity-90 pointer-events-none"},J().createElement(bu,{image:Ce,gallery:le,isSelected:H.has(Ce.pid),onSelect:ce,onDelete:ue,onRecover:ge,onGenerateThumbnail:pe,isProcessing:R.has(Ce.pid),onToggleVisibility:we})))))))};function ku(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Su(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ku(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ku(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const Ou=function(e){var t,r,a,l=e.gallery,i=e.previewMode,o=e.onPreviewModeChange,s=Li(),c=s.updateField,u=s.registerFlushCallback,m=s.unregisterFlushCallback,d=ha(),g=ea(),p=g.showSuccess,f=g.showError,y=(0,me.useDispatch)(tr),h=Da().data,_=Ia(),b=hr((0,Z.useState)({title:(null==l?void 0:l.title)||"",description:(null==l?void 0:l.galdesc)||"",is_ecommerce_enabled:"1"===(null==l?void 0:l.is_ecommerce_enabled),pricelist_id:(null==l||null===(t=l.pricelist_id)||void 0===t?void 0:t.toString())||"0",pageid:(null==l||null===(r=l.pageid)||void 0===r?void 0:r.toString())||""}),2),v=b[0],x=b[1],w=(0,Z.useRef)(null),E=(0,Z.useRef)(null),C=(0,Z.useCallback)(function(){w.current&&(clearTimeout(w.current),w.current=null),E.current&&(E.current(),E.current=null)},[]),N=qa({enabled:"pro"===nr}),k=N.data,S=N.isLoading,O=hr((0,Z.useState)([]),2),P=O[0],T=O[1],D=hr((0,Z.useState)(!0),2),I=D[0],j=D[1],A=hr((0,Z.useState)([]),2),L=A[0],M=A[1],R=hr((0,Z.useState)({open:!1,title:"",isCreating:!1}),2),F=R[0],z=R[1];(0,Z.useEffect)(function(){if(l){var e,t,n,r=(null===(e=l.extras_post_meta)||void 0===e?void 0:e.pricelist_id)||(null===(t=l.pricelist_id)||void 0===t?void 0:t.toString())||"0",a="1"===String(l.is_ecommerce_enabled);if(a&&("0"===r||!r)){var i,o=null==k||null===(i=k.pricelists)||void 0===i?void 0:i[0];o&&(r=o.id.toString())}x({title:l.title||"",description:l.galdesc||"",is_ecommerce_enabled:a,pricelist_id:r,pageid:(null===(n=l.pageid)||void 0===n?void 0:n.toString())||""})}},[null==l?void 0:l.gid,k]),(0,Z.useEffect)(function(){return u("settingsTab",C),function(){C(),m("settingsTab")}},[C,u,m]),(0,Z.useEffect)(function(){var e=!0,t=function(){var t=Er(Nr().mark(function t(){var n;return Nr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Fr()({path:"/wp/v2/pages?per_page=-1&status=publish"});case 3:n=t.sent,e&&T(n),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Error fetching pages:",t.t0),e&&T([]);case 11:return t.prev=11,e&&j(!1),t.finish(11);case 14:case"end":return t.stop()}},t,null,[[0,7,11,14]])}));return function(){return t.apply(this,arguments)}}();return t(),function(){e=!1}},[]);var B=(0,Z.useCallback)(function(){var e=Er(Nr().mark(function e(t,n){var r,a,l,i,o,s,c,u,m,d;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l=null===(r=window.imagelyApp)||void 0===r?void 0:r.nonce,e.next=4,Fr()({path:"/wp/v2/pages/".concat(t,"?context=edit"),method:"GET",headers:{"X-WP-Nonce":l}});case 4:if(i=e.sent,o=(null===(a=i.content)||void 0===a?void 0:a.raw)||"",s=new RegExp("\\[imagely[^\\]]*id=[\"']?".concat(n,"[\"']?[^\\]]*\\]"),"i"),c=new RegExp("\\[ngg[^\\]]*id=[\"']?".concat(n,"[\"']?[^\\]]*\\]"),"i"),!s.test(o)&&!c.test(o)){e.next=10;break}return e.abrupt("return");case 10:return u='[imagely id="'.concat(n,'"]'),m=""===o.trim()?u:"".concat(o,"\n\n").concat(u),e.next=14,Fr()({path:"/wp/v2/pages/".concat(t),method:"POST",headers:{"X-WP-Nonce":l,"Content-Type":"application/json"},data:{content:m}});case 14:e.next=21;break;case 16:e.prev=16,e.t0=e.catch(0),console.error("Error inserting gallery into page:",e.t0),d=(null===e.t0||void 0===e.t0?void 0:e.t0.message)||(0,de.__)("Unknown error occurred","nggallery"),f((0,de.__)("Failed to insert gallery shortcode into page: ","nggallery")+d);case 21:case"end":return e.stop()}},e,null,[[0,16]])}));return function(t,n){return e.apply(this,arguments)}}(),[f]),q=(0,Z.useCallback)(function(){var e=Er(Nr().mark(function e(t,n,r){var a,i;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=35;break}if(e.prev=1,a={},"title"!==t){e.next=7;break}a.title=n,e.next=26;break;case 7:if("description"!==t){e.next=11;break}a.galdesc=n,e.next=26;break;case 11:if("is_ecommerce_enabled"!==t){e.next=16;break}a.is_ecommerce_enabled=n?"1":"0",n&&(a.pricelist_id=parseInt(r.pricelist_id,10)),e.next=26;break;case 16:if("pricelist_id"!==t){e.next=20;break}a.pricelist_id=parseInt(n,10),e.next=26;break;case 20:if("pageid"!==t){e.next=26;break}if(a.pageid=n?parseInt(n,10):null,!n||""===n){e.next=26;break}return i=parseInt(n,10),e.next=26,B(i,l.gid);case 26:return e.next=28,d.mutateAsync({id:l.gid,data:a});case 28:p((0,de.__)("Settings updated successfully!","nggallery")),e.next=35;break;case 31:e.prev=31,e.t0=e.catch(1),console.error("Error updating settings:",e.t0),f((0,de.__)("Failed to update settings. Please try again.","nggallery"));case 35:case"end":return e.stop()}},e,null,[[1,31]])}));return function(t,n,r){return e.apply(this,arguments)}}(),[l,d,p,f]),H=function(e){var t=e.target,r=t.name,a=t.value,l="checkbox"===t.type?e.target.checked:a;if("pageid"!==r||"__create__"!==a){var i=Su(Su({},v),{},n({},r,l));if("is_ecommerce_enabled"===r&&l&&("0"===v.pricelist_id||!v.pricelist_id)){var o,s=null==k||null===(o=k.pricelists)||void 0===o?void 0:o[0];s&&(i.pricelist_id=s.id.toString())}x(i),c(r,l),"is_ecommerce_enabled"===r&&i.pricelist_id!==v.pricelist_id&&c("pricelist_id",i.pricelist_id),w.current&&clearTimeout(w.current);var u=function(){q(r,l,i)};E.current=u,w.current=window.setTimeout(function(){u(),E.current=null},1e3)}else G()},G=function(){z({open:!0,title:"".concat((null==l?void 0:l.title)||"Gallery"," Page"),isCreating:!1})},U=function(){var e=Er(Nr().mark(function e(){var t,n,r,a,l,i;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(F.title.trim()){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,z(function(e){return Su(Su({},e),{},{isCreating:!0})}),n=null===(t=window.imagelyApp)||void 0===t?void 0:t.nonce,e.next=7,Fr()({path:"/wp/v2/pages",method:"POST",headers:{"X-WP-Nonce":n,"Content-Type":"application/json"},data:{title:F.title,content:"",status:"publish"}});case 7:r=e.sent,(a=String((null==r?void 0:r.id)||""))&&(l=Su(Su({},v),{},{pageid:a}),x(l),c("pageid",a),i=null!=r&&r.title&&r.title.rendered?r.title.rendered:F.title,M(function(e){return[{id:Number(a),title:{rendered:i}}].concat(zr(e))}),q("pageid",a,l),p((0,de.__)("Page created and linked successfully!","nggallery"))),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),console.error("Error creating page:",e.t0),f((0,de.__)("Failed to create page. Please try again.","nggallery"));case 16:return e.prev=16,z({open:!1,title:"",isCreating:!1}),e.finish(16);case 19:case"end":return e.stop()}},e,null,[[2,12,16,19]])}));return function(){return e.apply(this,arguments)}}(),W=(0,Z.useMemo)(function(){return[].concat(zr(L),zr(P)).reduce(function(e,t){return e.find(function(e){return e.id===t.id})||e.push(t),e},[]).map(function(e){var t;return{value:String(e.id),label:(null===(t=e.title)||void 0===t?void 0:t.rendered)||"Page #".concat(e.id)}})},[P,L]),V=(0,Z.useMemo)(function(){var e=(null==k?void 0:k.pricelists)||[],t=[];return t.push({value:"0",label:(0,de.__)("None","nggallery")}),Array.isArray(e)&&e.length>0&&e.forEach(function(e){t.push({value:e.id.toString(),label:e.title})}),t},[k]),K="pro"===nr||"plus"===nr,Q="pro"===(null===(a=window.imagelyApp)||void 0===a?void 0:a.proTypeInstalled),X=[].concat(zr(K?[{value:"photocrati-nextgen_pro_lightbox",label:(0,de.__)("Pro Lightbox","nggallery")}]:[]),[{value:"simplelightbox",label:(0,de.__)("Simplelightbox","nggallery")},{value:"fancybox",label:(0,de.__)("Fancybox","nggallery")},{value:"thickbox",label:(0,de.__)("Thickbox","nggallery")},{value:"shutter",label:(0,de.__)("Shutter","nggallery")},{value:"shutter2",label:(0,de.__)("Shutter Reloaded","nggallery")},{value:"custom_lightbox",label:(0,de.__)("Custom Lightbox","nggallery")},{value:"none",label:(0,de.__)("None","nggallery")}]),Y=(0,Z.useCallback)(function(){var e=Er(Nr().mark(function e(t){var n;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.value,e.prev=1,e.next=4,_.mutateAsync({thumbEffect:n});case 4:p((0,de.__)("Lightbox setting updated successfully!","nggallery")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("Error updating lightbox setting:",e.t0),f((0,de.__)("Failed to update lightbox setting. Please try again.","nggallery"));case 11:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),[_,p,f]),$=(0,me.useSelect)(function(e){return e(tr).getCurrentId()},[]),ee=fa($).data,te=Oi({type:"gallery",item:ee,includeEcommerce:v.is_ecommerce_enabled});return J().createElement(J().Fragment,null,J().createElement("div",{className:"bg-white rounded-lg shadow lg:grid lg:grid-cols-2 lg:items-start"},J().createElement("div",{className:"px-6 py-6 lg:px-8 lg:py-8 border-b lg:border-b-0 lg:border-r"},J().createElement("h1",{className:"text-lg font-medium"},(0,de.__)("Settings","nggallery")),J().createElement("div",{className:"space-y-4 mt-6"},J().createElement(dl,{type:"text",name:"title",value:v.title,onChange:H,label:(0,de.__)("Gallery Title","nggallery"),placeholder:(0,de.__)("Enter gallery title","nggallery")}),J().createElement("div",null,J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},(0,de.__)("Gallery Description","nggallery")),J().createElement("textarea",{name:"description",value:v.description,onChange:H,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:3,placeholder:(0,de.__)("Enter gallery description","nggallery")})),J().createElement(ml,{id:"pageid",name:"pageid",value:v.pageid,onChange:H,label:(0,de.__)("Link to page:","nggallery"),help:(0,de.__)("Select a page to link this gallery to, or create a new page with the gallery content","nggallery")},I?J().createElement("option",{value:""},(0,de.__)("Loading pages...","nggallery")):J().createElement(J().Fragment,null,J().createElement("option",{value:""},(0,de.__)("Not linked","nggallery")),J().createElement("option",{value:"__create__",className:"text-green-600"},(0,de.__)("Create new page","nggallery")),W.map(function(e){return J().createElement("option",{key:e.value,value:e.value},e.label)}))),J().createElement("div",null,J().createElement("h3",{className:"text-sm font-medium text-gray-900 mb-4"},(0,de.__)("eCommerce Settings","nggallery")),Q?J().createElement("div",{className:"space-y-4"},J().createElement(Ml,{id:"is_ecommerce_enabled",name:"is_ecommerce_enabled",checked:v.is_ecommerce_enabled,onChange:H,label:(0,de.__)("Enable eCommerce","nggallery"),help:(0,de.__)("Enable eCommerce functionality for this gallery","nggallery")}),v.is_ecommerce_enabled&&J().createElement("div",{className:"pl-4 border-l-2 border-gray-200"},J().createElement(ml,{id:"pricelist_id",name:"pricelist_id",value:v.pricelist_id,onChange:H,label:(0,de.__)("Pricelist","nggallery"),help:(0,de.__)("Select a pricelist for this gallery","nggallery")},S?J().createElement("option",{value:"0",disabled:!0},(0,de.__)("Loading...","nggallery")):V.map(function(e){return J().createElement("option",{key:e.value,value:e.value},e.label)})))):J().createElement("div",{className:"relative"},J().createElement("div",{className:"opacity-50 pointer-events-none"},J().createElement(Ml,{id:"is_ecommerce_enabled",name:"is_ecommerce_enabled",checked:!1,onChange:function(){},label:(0,de.__)("Enable eCommerce","nggallery"),help:(0,de.__)("Enable eCommerce functionality for this gallery","nggallery")})),J().createElement("div",{className:"absolute inset-0 cursor-pointer",onClick:function(){Q||y.setActiveModal("upgrade",{feature:"eCommerce features"})},title:(0,de.__)("Requires NextGEN Gallery Pro","nggallery")}))),J().createElement("div",{className:"space-y-4"},J().createElement(ml,{id:"thumbEffect",name:"thumbEffect",value:(null==h?void 0:h.thumbEffect)||"",onChange:Y,label:(0,de.__)("Lightbox Library","nggallery"),help:(0,de.__)("What lightbox would you like to use?","nggallery")},X.map(function(e){return J().createElement("option",{key:e.value,value:e.value},e.label)})),J().createElement("div",{className:"bg-info-bg border border-info-border rounded-md p-3"},J().createElement("div",{className:"flex items-start"},J().createElement("div",{className:"flex-shrink-0"},J().createElement(Fn,{className:"h-4 w-4 text-gray-400 mt-0.5"})),J().createElement("div",{className:"ml-2"},J().createElement("p",{className:"text-xs text-gray-700"},(0,de.__)("This lightbox setting affects all galleries on your site, not just this one. To configure additional lightbox options, visit the Settings page.","nggallery")))))))),J().createElement("div",{className:"px-6 py-6 lg:px-8 lg:py-8 lg:sticky lg:top-8 lg:max-h-screen"},J().createElement(Fi,{previewMode:i,onPreviewModeChange:o,url:te,title:(0,de.__)("Gallery Preview","nggallery")}))),J().createElement(xr,{isOpen:F.open,onClose:function(){return z({open:!1,title:"",isCreating:!1})},title:(0,de.__)("Create New Page","nggallery")},J().createElement("div",{className:"space-y-4"},J().createElement(dl,{type:"text",id:"new_page_title",name:"new_page_title",value:F.title,onChange:function(e){return z(function(t){return Su(Su({},t),{},{title:e.target.value})})},label:(0,de.__)("Page Title","nggallery"),placeholder:(0,de.__)("Enter page title...","nggallery")}),J().createElement("div",{className:"bg-info-bg border border-info-border rounded-md p-3"},J().createElement("div",{className:"flex items-start"},J().createElement("div",{className:"py-0.5 flex-shrink-0"},J().createElement(Fn,{className:"h-4 w-4 text-gray-500 mt-0.5"})),J().createElement("div",{className:"py-1 ml-2"},J().createElement("p",{className:"text-xs text-gray-500"},(0,de.__)("A new page will be created with the gallery added immediately.","nggallery"))))),J().createElement("div",{className:"flex gap-2 justify-end"},J().createElement("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",onClick:function(){return z({open:!1,title:"",isCreating:!1})},disabled:F.isCreating},(0,de.__)("Cancel","nggallery")),J().createElement("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-white bg-green-500 border border-transparent rounded-md hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center",onClick:U,disabled:F.isCreating||!F.title.trim()},F.isCreating?(0,de.__)("Creating...","nggallery"):(0,de.__)("Create Page","nggallery"))))))},Pu=function(e){var t=e.onCreateNewGallery;return J().createElement("div",{className:"bg-white rounded-lg shadow p-8 text-center"},J().createElement("div",{className:"space-y-4"},J().createElement("button",{onClick:t,className:"px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors inline-flex items-center"},J().createElement("span",{className:"mr-2"},"+"),(0,de.__)("Create New Gallery","nggallery"))))},Tu=function(e){var t=e.currentTab,n=e.selectedGalleryId,r=e.gallery,a=e.error,l=e.previewMode,i=e.onPreviewModeChange,o=e.onCreateNewGallery;if(!n)return J().createElement(Pu,{onCreateNewGallery:o});var s={previewMode:l,onPreviewModeChange:i};switch(t){case"images":return J().createElement(Nu,{gallery:r,error:a});case"customize":return J().createElement(_o,ge({gallery:r},s));case"settings":return J().createElement(Ou,ge({gallery:r},s));default:return J().createElement("div",{className:"bg-white rounded-lg shadow p-8 text-center text-gray-500"},(0,de.__)("Please select a tab to continue.","nggallery"))}};var Du=function(e){var t=e.currentTab,n=e.setCurrentTab,r=e.error,a=e.selectedGalleryId,l=e.gallery,i=e.previewMode,o=e.handlePreviewModeChange,s=e.handleCreateNewGallery,c=e.handleNext,u=e.handleCancel,m=e.nextButtonText,d=e.navigateTo,g=e.isFirstTab,p=e.pageTitle,f=e.isEmbed,y=Li().flushAllPendingSaves;return J().createElement("div",{className:"px-4 md:px-6 lg:px-8 py-4 md:py-6 pb-24"},!f&&J().createElement("div",{className:"mb-6 flex items-center gap-3"},J().createElement("button",{onClick:function(){return d("imagely","galleryList")},className:"flex items-center justify-center w-8 h-8 rounded-md hover:bg-gray-100 transition-colors"},J().createElement(qn,{className:"w-5 h-5"})),J().createElement("h1",{className:"text-2xl font-semibold text-gray-900"},p)),J().createElement("div",{className:"bg-white shadow rounded-md pt-4 md:pt-6 lg:pt-8"},J().createElement(vi,{currentTab:t,onTabChange:n,error:r,containerClassName:"",contentClassName:""},J().createElement(Tu,{currentTab:t,selectedGalleryId:(null==a?void 0:a.toString())||null,gallery:l||null,error:r,previewMode:i,onPreviewModeChange:o,onCreateNewGallery:s}))),a&&J().createElement(Ni,{onNext:function(){y(),c()},onCancel:u,nextButtonText:m,isFirstTab:g}))};const Iu=function(){var e=hr((0,Z.useState)("desktop"),2),t=e[0],n=e[1],r=(0,me.useDispatch)(tr),a=na(),l=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).onComplete,t=(0,me.useSelect)(function(e){var t=e(tr);return{currentTab:t.getCurrentTab(),selectedGalleryId:t.getCurrentId()}},[]),n=t.currentTab,r=t.selectedGalleryId,a=(0,me.useDispatch)(tr),l=fa(r),i=l.data,o=l.error,s=l.isLoading;(0,Z.useEffect)(function(){o&&r&&(403===(null==o?void 0:o.status)||"gallery_forbidden"===(null==o?void 0:o.code))&&(a.showNotice("error",(0,de.__)("You do not have permission to access this gallery","nggallery")),a.navigateTo("imagely","galleryList"))},[o,r,a]);var c=(0,Z.useMemo)(function(){return hi.map(function(e){return e.id})},[]),u=(0,Z.useMemo)(function(){return c.indexOf(n)},[c,n]),m=0===u,d=u===c.length-1,g=(0,Z.useCallback)(function(e){c.includes(e)&&a.setCurrentTab(e)},[a.setCurrentTab,c]),p=(0,Z.useCallback)(function(e,t,n){a.navigateTo(e,t,n)},[a.navigateTo]),f=(0,Z.useCallback)(function(){d?e&&e():g(c[u+1])},[d,u,c,g,e]),y=(0,Z.useCallback)(function(){m||g(c[u-1])},[m,u,c,g]),h=(0,Z.useCallback)(function(e){g(e)},[g]);return(0,Z.useEffect)(function(){c.includes(n)||g("images")},[n,g,c]),(0,Z.useEffect)(function(){var e=new URLSearchParams(window.location.search).get("id");if(!r&&!e){if(!Ei())return void a.setActiveModal("licenseRequired",{action:"create new galleries"});a.setActiveModal("imageUploader",{})}},[r,a.setActiveModal]),{currentTab:n,currentTabIndex:u,gallery:i,error:(null==o?void 0:o.message)||null,selectedGalleryId:r,isFirstTab:m,isLastTab:d,isLoading:s,setCurrentTab:g,goToNextTab:f,goToPreviousTab:y,goToTab:h,navigateTo:p,tabIds:c}}({onComplete:function(){r.showNotice("success",(0,de.__)("Gallery created successfully","nextgen-gallery"))},enableTabValidation:!1}),i=l.currentTab,o=l.gallery,s=l.error,c=l.selectedGalleryId,u=l.setCurrentTab,m=l.isLoading,d=l.goToNextTab,g=l.goToPreviousTab,p=l.isFirstTab,f=l.isLastTab,y=l.navigateTo,h=(0,me.useSelect)(function(e){return{currentId:e(tr).getCurrentId()}},[]).currentId;if(m&&c)return J().createElement(ar,{size:"xl",text:"Loading gallery..."});var _=h?(0,de.__)("Edit Gallery","nextgen-gallery"):(0,de.__)("Add New Gallery","nextgen-gallery");return J().createElement(Ai,{initialGallery:o},J().createElement(Du,{currentTab:i,setCurrentTab:u,error:s,selectedGalleryId:c,gallery:null!=o?o:null,previewMode:t,handlePreviewModeChange:function(e){n(e)},handleCreateNewGallery:function(){Ei()?r.setActiveModal("imageUploader",{}):r.setActiveModal("licenseRequired",{action:"create new galleries"})},handleNext:function(){var e=Number(c||(null==o?void 0:o.gid)||(null==o?void 0:o.id));if(f){if(a.isEmbed&&a.onInsertGallery){if(Number.isFinite(e)&&e>0)try{a.onInsertGallery(e)}catch(e){console.error("Failed to insert gallery:",e)}return}var t=c||(null==o?void 0:o.gid)||(null==o?void 0:o.id),n=(null==o?void 0:o.name)||"",l=(null==o?void 0:o.pageid)||null;r.setActiveModal("gallerySuccess",{galleryId:t,galleryName:n,pageId:l})}else d()},handleCancel:function(){if(p)if(a.isEmbed&&a.onClose)try{a.onClose()}catch(e){console.error("Failed to close embed:",e)}else r.navigateTo("imagely","galleryList");else g()},nextButtonText:f?(0,de.__)("Update","nggallery"):(0,de.__)("Next step","nggallery"),navigateTo:y,isFirstTab:p,pageTitle:_,isEmbed:a.isEmbed}))},ju=function(e){var t=e.value,n=e.onChange,r=e.onSearch,a=e.placeholder,l=e.dropdownItems,i=hr((0,Z.useState)(!1),2),o=i[0],s=i[1],c=function(){return s(!o)};return J().createElement("div",{className:"relative w-full sm:w-64"},l&&J().createElement(su,{isOpen:o,onClose:function(){return s(!1)},onToggle:c,trigger:J().createElement("button",{type:"button",className:"h-full px-3 flex items-center border-r border-input-border",onClick:c},J().createElement(Rt,{className:"h-4 w-4"})),className:"absolute left-0 top-full mt-1 bg-white border border-input-border rounded-md shadow-lg z-50"},l),J().createElement("span",{className:"pointer-events-none absolute inset-y-0 left-3 flex items-center text-gray-400"},J().createElement($t,{className:"w-5 h-5"})),J().createElement("input",{type:"text",value:t,onChange:function(e){return n(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&r&&r()},placeholder:a||(0,de.__)("Search"),className:"w-full border border-input-border rounded-md pl-10 pr-3 py-2 text-sm text-gray-700 placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500"}))};function Au(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Lu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Au(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Au(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const Mu=function(e){var t=e.title,r=e.searchTerm,a=e.setSearchTerm,l=e.onSearch,i=e.visibleColumns,o=e.setVisibleColumns,s=e.selectedItems,c=e.items,u=e.columns,m=e.searchPlaceholder,d=e.onDelete,g=e.onSetWatermark,p=e.onCreateThumbnails,f=e.onResizeImages,y=e.onImportMetadata,h=e.onRecoverFromBackup,_=hr((0,Z.useState)(!1),2),b=_[0],v=_[1],x=hr((0,Z.useState)(!1),2),w=x[0],E=x[1];(0,Z.useEffect)(function(){0===s.size&&v(!1)},[s.size]);var C,N=function(){v(!1)};return J().createElement("div",{className:"bg-white rounded-t-lg shadow-sm p-3 sm:p-4"},J().createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},t&&J().createElement("div",{className:"flex-shrink-0"},J().createElement("h2",{className:"text-lg font-semibold text-gray-900"},t)),J().createElement("div",{className:"flex items-center gap-2 sm:gap-3 flex-wrap sm:ml-auto"},s.size>0&&J().createElement(su,{isOpen:b,onClose:function(){return v(!1)},onToggle:function(){return v(!b)},trigger:(C=(0,de.__)("Bulk Edit"),J().createElement("button",{type:"button",className:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 px-3 sm:px-4 py-2 h-9 sm:h-10 rounded-md text-xs sm:text-sm font-medium flex items-center gap-1 sm:gap-2"},J().createElement("span",{className:"hidden sm:inline"},C),J().createElement("span",{className:"sm:hidden"},C.split(" ")[0]),J().createElement(Rt,{className:"h-3 w-3 sm:h-4 sm:w-4"}))),activeClasses:"border border-gray-300 bg-gray-50 text-gray-700 px-4 py-2 h-10 rounded-md text-sm font-medium flex items-center gap-2"},J().createElement("div",{className:"py-1"},J().createElement("button",{className:"block w-full text-left px-4 py-2 text-sm text-red-700 hover:bg-red-100",onClick:function(){N();var e=c.filter(function(e){return s.has(e.id)});d(e)}},(0,de.__)("Delete Selected","nggallery")),g&&J().createElement("button",{className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:function(){N();var e=c.filter(function(e){return s.has(e.id)});g&&g(e)}},(0,de.__)("Set Watermark","nggallery")),p&&J().createElement("button",{className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:function(){N();var e=c.filter(function(e){return s.has(e.id)});p&&p(e)}},(0,de.__)("Create New Thumbnails","nggallery")),f&&J().createElement("button",{className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:function(){N();var e=c.filter(function(e){return s.has(e.id)});f&&f(e)}},(0,de.__)("Resize Images","nggallery")),y&&J().createElement("button",{className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:function(){N();var e=c.filter(function(e){return s.has(e.id)});y&&y(e)}},(0,de.__)("Import Metadata","nggallery")),h&&J().createElement("button",{className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:function(){N();var e=c.filter(function(e){return s.has(e.id)});h&&h(e)}},(0,de.__)("Recover from Backup","nggallery")))),J().createElement(ju,{value:r,onChange:a,onSearch:l,placeholder:(0,de.__)(m)}),J().createElement(su,{isOpen:w,onClose:function(){return E(!1)},onToggle:function(){return E(!w)},trigger:J().createElement("button",{type:"button",className:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 px-3 sm:px-4 py-2 h-9 sm:h-10 rounded-md text-xs sm:text-sm font-medium flex items-center gap-1 sm:gap-2"},J().createElement(Jt,{width:"16",height:"18",viewBox:"0 0 18 20",className:"sm:w-[18px] sm:h-[20px]"})),activeClasses:"border border-gray-300 bg-gray-50 text-gray-700 px-4 py-2 h-10 rounded-md text-sm font-medium flex items-center gap-2"},J().createElement("div",{className:"py-1"},u.filter(function(e){return!e.locked}).map(function(e){var t=e.key,r=e.label;return J().createElement("button",{key:t,className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:function(){var e;e=t,o(function(t){return Lu(Lu({},t),{},n({},e,!t[e]))})}},J().createElement("div",{className:"flex items-center justify-center w-5 h-5 mr-2"},i[t]&&J().createElement(Ft,{className:"h-5 w-5 text-green-500"})),r)}))))))},Ru=function(e){var t=e.currentPage,n=e.totalPages,r=e.perPage,a=e.total,l=e.onPageChange,i=e.itemLabel,o=void 0===i?"Items":i,s=e.showItemCount,c=void 0===s||s,u=hr((0,Z.useState)(""),2),m=u[0],d=u[1],g=hr((0,Z.useState)(!1),2),p=g[0],f=g[1];(0,Z.useEffect)(function(){d("")},[t]);var y=function(){var e=parseInt(m,10);e>=1&&e<=n&&(l(e),d(""),f(!1))},h=Array.from({length:n},function(e,t){return t+1}).filter(function(e){return 1===e||e===n||Math.abs(e-t)<=1});return J().createElement("div",{className:"flex justify-between items-center mt-4 px-2 gap-4 flex-wrap"},c&&a>0&&J().createElement("div",{className:"text-sm text-gray-600"},(t-1)*r+1,"-",Math.min(t*r,a)," of ",a," ",o),n>1&&J().createElement("div",{className:"flex gap-2 items-center flex-wrap"},J().createElement("button",{type:"button",className:"p-2 border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 rounded-md disabled:opacity-50 disabled:cursor-not-allowed",onClick:function(){return l(t-1)},disabled:1===t,title:(0,de.__)("Previous page","nggallery")},J().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5"},J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5L8.25 12l7.5-7.5"}))),h.map(function(e,n,r){return n>0&&e-r[n-1]>1?J().createElement(J().Fragment,{key:"ellipsis-".concat(e)},J().createElement("span",{className:"px-2 py-1 text-gray-500"},"..."),J().createElement("button",{type:"button",className:"min-w-[40px] px-3 py-2 border border-gray-300 bg-white rounded-md text-sm font-medium transition-colors ".concat(t===e?"bg-blue-50 text-blue-600 border-blue-300 cursor-default":"text-gray-700 hover:bg-gray-50 cursor-pointer"),onClick:function(){return t!==e&&l(e)}},e)):J().createElement("button",{type:"button",key:e,className:"min-w-[40px] px-3 py-2 border border-gray-300 bg-white rounded-md text-sm font-medium transition-colors ".concat(t===e?"bg-blue-50 text-blue-600 border-blue-300 cursor-default":"text-gray-700 hover:bg-gray-50 cursor-pointer"),onClick:function(){return t!==e&&l(e)}},e)}),J().createElement("button",{type:"button",className:"p-2 border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 rounded-md disabled:opacity-50 disabled:cursor-not-allowed",onClick:function(){return l(t+1)},disabled:t===n,title:(0,de.__)("Next page","nggallery")},J().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5"},J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"}))),n>5&&J().createElement("div",{className:"flex items-center gap-2 ml-2 pl-2 border-l border-gray-300"},p?J().createElement("div",{className:"flex items-center gap-2"},J().createElement("input",{type:"number",min:"1",max:n,value:m,onChange:function(e){return d(e.target.value)},onKeyDown:function(e){"Enter"===e.key?y():"Escape"===e.key&&(d(""),f(!1))},placeholder:(0,de.__)("Page","nggallery"),className:"w-20 px-2 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",autoFocus:!0}),J().createElement("button",{type:"button",className:"px-3 py-1 text-sm bg-blue-600 text-white hover:bg-blue-700 rounded-md disabled:opacity-50 disabled:cursor-not-allowed",onClick:y,disabled:!m||parseInt(m,10)<1||parseInt(m,10)>n},(0,de.__)("Go","nggallery")),J().createElement("button",{type:"button",className:"px-2 py-1 text-sm text-gray-600 hover:text-gray-800",onClick:function(){d(""),f(!1)},title:(0,de.__)("Cancel","nggallery")},J().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4"},J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})))):J().createElement("button",{type:"button",className:"px-3 py-2 text-sm border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 rounded-md whitespace-nowrap",onClick:function(){return f(!0)},title:(0,de.__)("Jump to a specific page","nggallery")},(0,de.__)("Go to page","nggallery")))))};function Fu(e,t){var n=hr((0,Z.useState)(e),2),r=n[0],a=n[1];return(0,Z.useEffect)(function(){var n=setTimeout(function(){a(e)},t);return function(){clearTimeout(n)}},[e,t]),r}var zu=[{key:"id",label:(0,de.__)("ID"),filterable:!0,visibleByDefault:!0,sortType:"backend",locked:!0},{key:"albumTitle",label:(0,de.__)("Album Title"),filterable:!0,visibleByDefault:!0,sortType:"backend",locked:!0},{key:"thumbnail",label:(0,de.__)("Thumbnail"),filterable:!1,visibleByDefault:!0,sortType:!1,locked:!0},{key:"shortcode",label:(0,de.__)("Shortcode"),filterable:!1,visibleByDefault:!0,sortType:!1,locked:!0},{key:"count",label:(0,de.__)("Galleries"),filterable:!0,visibleByDefault:!0,sortType:!1},{key:"created",label:(0,de.__)("Created Date"),filterable:!0,visibleByDefault:!1,sortType:"backend"},{key:"modified",label:(0,de.__)("Modified Date"),filterable:!0,visibleByDefault:!1,sortType:"backend"},{key:"displayType",label:(0,de.__)("Display Type"),filterable:!0,visibleByDefault:!1,sortType:"backend"}],Bu=Object.fromEntries(zu.map(function(e){return[e.key,e.visibleByDefault]}));const qu=function(e){var t=e.onNext,n=e.onCancel,r=e.nextButtonText,a=void 0===r?(0,de.__)("Next step","nggallery"):r,l=e.showNextButton,i=void 0===l||l,o=e.showCancelButton,s=void 0===o||o,c=e.isFirstTab,u=void 0===c||c,m=na(),d=(null==m?void 0:m.isEmbed)||!1,g=hr((0,Z.useState)(160),2),p=g[0],f=g[1];return(0,Z.useEffect)(function(){if(!d){var e=function(){var e=document.body,t=window.innerWidth;t<=782?f(0):t<=960||e.classList.contains("folded")?f(36):f(160)};e(),window.addEventListener("resize",e);var t=new MutationObserver(e);return t.observe(document.body,{attributes:!0,attributeFilter:["class"]}),function(){window.removeEventListener("resize",e),t.disconnect()}}f(0)},[d]),J().createElement("div",{className:"fixed bottom-0 right-0 bg-white border-t border-gray-200 z-10",style:{left:"".concat(p,"px")}},J().createElement("div",{className:"px-4 py-3 sm:px-6"},J().createElement("div",{className:"flex justify-end items-center space-x-3"},s&&J().createElement("button",{onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},u?(0,de.__)("Cancel","nggallery"):(0,de.__)("Back","nggallery")),i&&J().createElement("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-white bg-green-500 border border-green-500 rounded-md hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors"},a))))};var Hu=[{id:"galleries",label:(0,de.__)("Galleries","nggallery"),description:(0,de.__)("Select & Organize","nggallery")},{id:"settings",label:(0,de.__)("Settings","nggallery"),description:(0,de.__)("Album Display","nggallery")}];const Gu=function(e){var t=e.activeTab,n=e.onTabChange,r=function(e){return Hu.findIndex(function(t){return t.id===e})};return J().createElement("div",{className:"px-4 sm:px-6 lg:px-8"},J().createElement("div",{className:"flex flex-col sm:flex-row w-full h-auto sm:h-[70px] relative rounded-lg border border-gray-200 overflow-hidden"},Hu.map(function(e,a){var l,i=(l=e.id,t===l),o=function(e){var n=r(t);return r(e)<n}(e.id),s=a===Hu.length-1,c=String(a+1).padStart(2,"0");return J().createElement("div",{key:e.id,className:"relative flex-1",style:{zIndex:Hu.length-a}},J().createElement("button",{onClick:function(){return n(e.id)},className:"mobile-step-button relative w-full h-full flex items-center px-4 sm:px-6 lg:px-8 py-4 sm:py-5 transition-all duration-300 border-b sm:border-b-0 sm:border-r border-gray-100 last:border-b-0 sm:last:border-r-0 ".concat(i?"text-green-800 bg-green-100":o?"text-gray-700 hover:text-green-700 bg-gray-50":"text-gray-500 hover:text-gray-700 bg-white hover:bg-gray-50"),style:{clipPath:s?"polygon(0 0, 100% 0, 100% 100%, 0 100%, 12px 50%)":0===a?"polygon(0 0, calc(100% - 12px) 0, 100% 50%, calc(100% - 12px) 100%, 0 100%)":"polygon(0 0, calc(100% - 12px) 0, 100% 50%, calc(100% - 12px) 100%, 0 100%, 12px 50%)",marginLeft:0===a?"":"-".concat(11*a,"px"),width:s?"calc( 100% + ".concat(11*a*2,"px )"):""}},J().createElement("div",{className:"flex items-center space-x-2 sm:space-x-3 w-full"},J().createElement("div",{className:"w-6 h-6 sm:w-8 sm:h-8 rounded-full flex items-center justify-center text-xs sm:text-sm font-bold transition-all duration-300 flex-shrink-0 ".concat(i?"bg-white text-green-700 border border-green-700":"text-gray-400 border border-gray-200")},o&&!i?J().createElement(Ft,{className:"w-3 h-3 sm:w-4 sm:h-4"}):c),J().createElement("div",{className:"flex flex-col items-start min-w-0 flex-1"},J().createElement("div",{className:"text-xs sm:text-sm font-semibold truncate w-full text-left"},e.label),J().createElement("div",{className:"text-xs opacity-75 text-left"},e.description)))))})))};var Uu=function(){return Ar({queryKey:["wordpress-pages"],queryFn:(e=Er(Nr().mark(function e(){var t;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fr()({path:"/wp/v2/pages?per_page=100&status=publish",method:"GET"});case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),console.error("Failed to fetch WordPress pages:",e.t0),e.abrupt("return",[]);case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(){return e.apply(this,arguments)}),staleTime:3e5,gcTime:6e5});var e};function Wu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Vu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wu(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wu(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const Ku=function(e){var t,n=e.isOpen,r=e.onClose,a=e.onSave,l=e.initialData,i=hr((0,Z.useState)(l),2),o=i[0],s=i[1];(0,Z.useEffect)(function(){n&&s(l)},[n,l]);var c=Uu(),u=c.data,m=c.isLoading,d=(0,Z.useMemo)(function(){return u&&Array.isArray(u)?u.map(function(e){return{value:e.id.toString(),label:e.title.rendered||"Page ".concat(e.id)}}):[]},[u]);return J().createElement(xr,{isOpen:n,onClose:r,title:(0,de.__)("Edit Album","nggallery")},J().createElement("div",{className:"space-y-4"},J().createElement(dl,{type:"text",name:"name",value:o.name,onChange:function(e){return s(Vu(Vu({},o),{},{name:e.target.value}))},label:(0,de.__)("Album Name","nggallery"),placeholder:(0,de.__)("Enter album name...","nggallery")}),J().createElement(Ol,{name:"description",value:o.description,onChange:function(e){return s(Vu(Vu({},o),{},{description:e.target.value}))},label:(0,de.__)("Album Description","nggallery"),placeholder:(0,de.__)("Enter album description...","nggallery"),rows:3}),J().createElement(ml,{id:"pageid",name:"pageid",value:(null===(t=o.pageid)||void 0===t?void 0:t.toString())||"",onChange:function(e){return s(Vu(Vu({},o),{},{pageid:e.target.value?parseInt(e.target.value):null}))},label:(0,de.__)("Page Link to","nggallery")},m?J().createElement("option",{value:""},(0,de.__)("Loading pages...","nggallery")):J().createElement(J().Fragment,null,J().createElement("option",{value:""},(0,de.__)("Not linked","nggallery")),d.map(function(e){return J().createElement("option",{key:e.value,value:e.value},e.label)}))),J().createElement("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200"},J().createElement("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-500"},(0,de.__)("Cancel","nggallery")),J().createElement("button",{onClick:function(){a(o),r()},className:"px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700"},(0,de.__)("Save Changes","nggallery")))))};function Qu(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Xu(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xu(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){o=!0,l=e},f:function(){try{i||null==n.return||n.return()}finally{if(o)throw l}}}}function Xu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const Yu=function(e){var t=e.isOpen,n=e.onClose,r=e.onSelect,a=e.albumSortorder,l=e.currentImageId,i=hr((0,Z.useState)([]),2),o=i[0],s=i[1],c=hr((0,Z.useState)(!1),2),u=c[0],m=c[1],d=hr((0,Z.useState)(l),2),g=d[0],p=d[1];(0,Z.useEffect)(function(){p(l)},[l]),(0,Z.useEffect)(function(){t&&a.length>0&&f()},[t,a]);var f=function(){var e=Er(Nr().mark(function e(){var t,n,r,l,i,o;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),n=[],r=new Set,l=null===(t=window.imagelyApp)||void 0===t?void 0:t.nonce,i=function(){var e=Er(Nr().mark(function e(t){var a,o,s,c,u=arguments;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((a=u.length>1&&void 0!==u[1]?u[1]:0)>10)){e.next=3;break}return e.abrupt("return");case 3:o=Qu(t),e.prev=4,c=Nr().mark(function e(){var t,o,c,u,m,d,g;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof(t=s.value)||!t.startsWith("a")){e.next=21;break}if(o=parseInt(t.substring(1)),!r.has(o)){e.next=6;break}return e.abrupt("return",1);case 6:return r.add(o),e.prev=7,e.next=10,Fr()({path:"/imagely/v1/albums/".concat(o),method:"GET",headers:{"X-WP-Nonce":l}});case 10:if(null==(c=e.sent)||!c.sortorder||!Array.isArray(c.sortorder)){e.next=14;break}return e.next=14,i(c.sortorder,a+1);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(7),console.error("Failed to fetch nested album ".concat(o,":"),e.t0);case 19:e.next=44;break;case 21:return u=t,e.prev=22,e.next=25,Fr()({path:"/imagely/v1/images?gallery_id=".concat(u,"&per_page=-1"),method:"GET",headers:{"X-WP-Nonce":l}});case 25:return m=e.sent,d="Gallery ".concat(u),g=null,e.prev=28,e.next=31,Fr()({path:"/imagely/v1/galleries/".concat(u),method:"GET",headers:{"X-WP-Nonce":l}});case 31:g=e.sent,d=g.title||g.name||d,e.next=38;break;case 35:e.prev=35,e.t1=e.catch(28),console.warn("Failed to fetch gallery ".concat(u," info:"),e.t1);case 38:Array.isArray(m)&&m.length>0&&m.forEach(function(e){n.push({pid:e.pid,filename:e.filename||e.alttext||"Untitled",alttext:e.alttext,thumbUrl:e.thumb_url||"",galleryName:d})}),e.next=44;break;case 41:e.prev=41,e.t2=e.catch(22),console.error("Failed to fetch images for gallery ".concat(u,":"),e.t2);case 44:case"end":return e.stop()}},e,null,[[7,16],[22,41],[28,35]])}),o.s();case 7:if((s=o.n()).done){e.next=13;break}return e.delegateYield(c(),"t0",9);case 9:if(!e.t0){e.next=11;break}return e.abrupt("continue",11);case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(4),o.e(e.t1);case 18:return e.prev=18,o.f(),e.finish(18);case 21:case"end":return e.stop()}},e,null,[[4,15,18,21]])}));return function(t){return e.apply(this,arguments)}}(),e.next=7,i(a);case 7:o=Array.from(new Map(n.map(function(e){return[e.pid,e]})).values()),s(o),m(!1);case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return J().createElement(xr,{isOpen:t,onClose:n,title:(0,de.__)("Select Preview Image","nggallery")},J().createElement("div",{className:"space-y-4"},u?J().createElement("div",{className:"flex items-center justify-center py-12"},J().createElement("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"}),J().createElement("span",{className:"ml-3 text-gray-600"},(0,de.__)("Loading images...","nggallery"))):0===o.length?J().createElement("div",{className:"text-center py-12"},J().createElement("p",{className:"text-gray-500"},(0,de.__)("No images available in this album.","nggallery"))):J().createElement(J().Fragment,null,J().createElement("div",{className:"text-sm text-gray-600 mb-4"},(0,de.__)("Click an image to select it as the album preview.","nggallery")),J().createElement("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-3 max-h-[500px] overflow-y-auto"},o.map(function(e){return J().createElement("div",{key:e.pid,onClick:function(){return t=e.pid,void p(t);var t},className:"relative cursor-pointer rounded-lg overflow-hidden border-2 transition-all hover:shadow-lg ".concat(g===e.pid?"border-green-500 ring-2 ring-green-200":"border-gray-200 hover:border-gray-300")},J().createElement("div",{className:"aspect-square"},J().createElement("img",{src:e.thumbUrl,alt:e.filename,className:"w-full h-full object-cover",loading:"lazy"})),g===e.pid&&J().createElement("div",{className:"absolute inset-0 bg-green-500 bg-opacity-20 flex items-center justify-center"},J().createElement("svg",{className:"w-8 h-8 text-green-600",fill:"currentColor",viewBox:"0 0 20 20"},J().createElement("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"}))),J().createElement("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-60 text-white text-xs p-1 truncate"},e.filename))}))),J().createElement("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200"},J().createElement("button",{onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-500"},(0,de.__)("Cancel","nggallery")),J().createElement("button",{onClick:function(){g&&r(g),n()},disabled:!g,className:"px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700 disabled:bg-gray-300 disabled:cursor-not-allowed"},(0,de.__)("Set as Preview","nggallery")))))},Zu=function(e){var t=e.isOpen,n=e.onClose,r=e.excludeGalleryIds,a=void 0===r?[]:r,l=e.excludeAlbumIds,i=void 0===l?[]:l,o=e.onConfirm,s=hr((0,Z.useState)("galleries"),2),c=s[0],u=s[1],m=hr((0,Z.useState)(new Set),2),d=m[0],g=m[1],p=hr((0,Z.useState)(new Set),2),f=p[0],y=p[1],h=hr((0,Z.useState)(""),2),_=h[0],b=h[1],v=hr((0,Z.useState)(""),2),x=v[0],w=v[1],E=ya({get_all:!0}),C=E.data,N=E.isLoading,k=Zr({get_all:!0}),S=k.data,O=k.isLoading,P=ea(),T=(P.showSuccess,P.showError),D=(0,Z.useMemo)(function(){var e=((null==C?void 0:C.galleries)||[]).filter(function(e){return!a.includes(e.id)});return _?e.filter(function(e){return e.galleryTitle.toLowerCase().includes(_.toLowerCase())}):e},[null==C?void 0:C.galleries,a,_]),I=(0,Z.useMemo)(function(){var e=((null==S?void 0:S.albums)||[]).filter(function(e){return!i.includes(e.id)});return x?e.filter(function(e){return e.albumTitle.toLowerCase().includes(x.toLowerCase())}):e},[null==S?void 0:S.albums,i,x]),j=function(){g(new Set),y(new Set),b(""),w(""),n()};return J().createElement(xr,{isOpen:t,onClose:j,title:(0,de.__)("Add Items to Album","nggallery")},J().createElement("div",{className:"space-y-4"},J().createElement("div",{className:"flex border-b border-gray-200"},J().createElement("button",{onClick:function(){return u("galleries")},className:"flex-1 py-2 px-4 text-sm font-medium transition-colors ".concat("galleries"===c?"border-b-2 border-green-500 text-green-600":"text-gray-500 hover:text-gray-700")},(0,de.__)("Galleries","nggallery")," ",d.size>0&&"(".concat(d.size,")")),J().createElement("button",{onClick:function(){return u("albums")},className:"flex-1 py-2 px-4 text-sm font-medium transition-colors ".concat("albums"===c?"border-b-2 border-green-500 text-green-600":"text-gray-500 hover:text-gray-700")},(0,de.__)("Albums","nggallery")," ",f.size>0&&"(".concat(f.size,")"))),J().createElement("div",{className:"min-h-[400px]"},"galleries"===c?J().createElement(J().Fragment,null,J().createElement("div",{className:"mb-4"},J().createElement("input",{type:"text",placeholder:(0,de.__)("Search galleries...","nggallery"),value:_,onChange:function(e){return b(e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})),D.length>0&&J().createElement("div",{className:"mb-3 flex items-center justify-between"},J().createElement("span",{className:"text-sm text-gray-600"},(0,de.sprintf)((0,de.__)("%d galleries available","nggallery"),D.length)),J().createElement("button",{onClick:function(){d.size===D.length?g(new Set):g(new Set(D.map(function(e){return e.id})))},className:"text-sm text-green-600 hover:text-green-700 font-medium"},d.size===D.length?(0,de.__)("Deselect All","nggallery"):(0,de.__)("Select All","nggallery"))),N&&J().createElement("div",{className:"flex items-center justify-center py-12"},J().createElement(ar,null)),!N&&0===D.length&&J().createElement("div",{className:"text-center py-12"},J().createElement("p",{className:"text-gray-500"},_?(0,de.__)("No galleries found matching your search","nggallery"):(0,de.__)("No galleries available to add","nggallery"))),!N&&D.length>0&&J().createElement("div",{className:"border border-gray-200 rounded-lg p-4 max-h-96 overflow-y-auto"},J().createElement("div",{className:"grid grid-cols-2 gap-3"},D.map(function(e){return J().createElement("label",{key:e.id,className:"flex items-center p-3 border rounded-lg cursor-pointer transition-colors ".concat(d.has(e.id)?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300")},J().createElement("input",{type:"checkbox",checked:d.has(e.id),onChange:function(){return t=e.id,void g(function(e){var n=new Set(e);return n.has(t)?n.delete(t):n.add(t),n});var t},className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded mr-3"}),J().createElement("div",{className:"flex-1 min-w-0"},J().createElement("div",{className:"flex items-center space-x-3"},e.thumbnail?J().createElement("img",{src:e.thumbnail,alt:e.galleryTitle,className:"w-12 h-12 object-cover rounded"}):J().createElement("div",{className:"w-12 h-12 bg-gray-100 rounded flex items-center justify-center"},J().createElement("svg",{className:"h-6 w-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"}))),J().createElement("div",{className:"flex-1 min-w-0"},J().createElement("div",{className:"text-sm font-medium text-gray-900 truncate"},e.galleryTitle),J().createElement("div",{className:"text-xs text-gray-500"},(0,de.sprintf)((0,de.__)("%d images","nggallery"),parseInt(e.count)||0))))))})))):J().createElement(J().Fragment,null,J().createElement("div",{className:"mb-4"},J().createElement("input",{type:"text",placeholder:(0,de.__)("Search albums...","nggallery"),value:x,onChange:function(e){return w(e.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})),I.length>0&&J().createElement("div",{className:"mb-3 flex items-center justify-between"},J().createElement("span",{className:"text-sm text-gray-600"},(0,de.sprintf)((0,de.__)("%d albums available","nggallery"),I.length)),J().createElement("button",{onClick:function(){f.size===I.length?y(new Set):y(new Set(I.map(function(e){return e.id})))},className:"text-sm text-green-600 hover:text-green-700 font-medium"},f.size===I.length?(0,de.__)("Deselect All","nggallery"):(0,de.__)("Select All","nggallery"))),O&&J().createElement("div",{className:"flex items-center justify-center py-12"},J().createElement(ar,null)),!O&&0===I.length&&J().createElement("div",{className:"text-center py-12"},J().createElement("p",{className:"text-gray-500"},x?(0,de.__)("No albums found matching your search","nggallery"):(0,de.__)("No albums available to add","nggallery"))),!O&&I.length>0&&J().createElement("div",{className:"border border-gray-200 rounded-lg p-4 max-h-96 overflow-y-auto"},J().createElement("div",{className:"grid grid-cols-2 gap-3"},I.map(function(e){return J().createElement("label",{key:e.id,className:"flex items-center p-3 border-2 rounded-lg cursor-pointer transition-colors ".concat(f.has(e.id)?"border-purple-600 bg-purple-50":"border-purple-300 hover:border-purple-400")},J().createElement("input",{type:"checkbox",checked:f.has(e.id),onChange:function(){return t=e.id,void y(function(e){var n=new Set(e);return n.has(t)?n.delete(t):n.add(t),n});var t},className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded mr-3"}),J().createElement("div",{className:"flex-1 min-w-0"},J().createElement("div",{className:"flex items-center space-x-3"},e.thumbnail?J().createElement("img",{src:e.thumbnail,alt:e.albumTitle,className:"w-12 h-12 object-cover rounded"}):J().createElement("div",{className:"w-12 h-12 bg-gray-100 rounded flex items-center justify-center"},J().createElement("svg",{className:"h-6 w-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"}))),J().createElement("div",{className:"flex-1 min-w-0"},J().createElement("div",{className:"text-sm font-medium text-gray-900 truncate"},e.albumTitle),J().createElement("div",{className:"text-xs text-gray-500"},(0,de.sprintf)((0,de.__)("%d items","nggallery"),parseInt(e.count)||0))))))}))))),J().createElement("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200"},J().createElement("button",{onClick:j,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:text-gray-500"},(0,de.__)("Cancel","nggallery")),J().createElement("button",{onClick:function(){var e=Array.from(d),t=Array.from(f);0!==e.length||0!==t.length?(o&&o(e,t),g(new Set),y(new Set),b(""),w(""),n()):T((0,de.__)("Please select at least one item","nggallery"))},disabled:0===d.size&&0===f.size,className:"px-4 py-2 bg-green-500 text-white text-sm font-medium rounded-md hover:bg-green-600 disabled:bg-green-300 disabled:cursor-not-allowed"},(0,de.__)("Add Items","nggallery")," (",d.size+f.size,")"))))},Ju=function(e){var t=e.albumName,n=e.previewImageUrl,r=e.itemCount,a=e.onEditClick,l=e.onImageClick,i=t&&t.length>50?t.slice(0,50)+"...":t||(0,de.__)("Untitled Album","nggallery");return J().createElement("div",{className:"flex items-center space-x-3 sm:space-x-4 pb-6 border-b border-gray-200"},J().createElement("img",{src:n||Bl({text:"NO IMAGE"}),alt:i,onClick:l,className:"w-10 h-10 sm:w-12 sm:h-12 object-cover rounded flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity",title:(0,de.__)("Click to select preview image","nggallery")}),J().createElement("div",{className:"flex flex-col min-w-0 flex-1"},J().createElement("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-1 sm:space-y-0 sm:space-x-2"},J().createElement("h1",{className:"text-lg sm:text-xl font-semibold truncate"},i," (",r,")"),J().createElement("button",{className:"px-2 py-1 bg-gray-100 rounded hover:bg-gray-200 text-xs sm:text-sm flex items-center self-start sm:self-auto",onClick:a},J().createElement("svg",{width:"8",height:"8",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"mr-1 sm:w-2.5 sm:h-2.5"},J().createElement("path",{d:"M7.5 0.500151C7.63132 0.368829 7.78722 0.264659 7.9588 0.193588C8.13038 0.122517 8.31428 0.0859375 8.5 0.0859375C8.68572 0.0859375 8.86962 0.122517 9.0412 0.193588C9.21278 0.264659 9.36868 0.36883 9.5 0.500151C9.63132 0.631473 9.73549 0.787375 9.80656 0.958955C9.87763 1.13054 9.91421 1.31443 9.91421 1.50015C9.91421 1.68587 9.87763 1.86977 9.80656 2.04135C9.73549 2.21293 9.63132 2.36883 9.5 2.50015L2.75 9.25015L0 10.0002L0.75 7.25015L7.5 0.500151Z",fill:"currentColor"})),(0,de.__)("Edit Details","nggallery")))))};var $u=(0,Z.memo)(function(e){var t=e.item,n=e.isSelected,r=e.onSelect,a=hr((0,Z.useState)(!1),2),l=a[0],i=a[1],o=ru({id:(null==t?void 0:t.id)||0,transition:{duration:150,easing:"cubic-bezier(0.25, 1, 0.5, 1)"}}),s=o.attributes,c=o.listeners,u=o.setNodeRef,m=o.transform,d=o.transition,g=o.isDragging;if(!t||null==t||!t.id)return null;var p={transform:Bo.Transform.toString(m),transition:d,opacity:g?.5:1,touchAction:"none",willChange:"transform, opacity"},f=l||n,y="album"===t.type;return J().createElement("div",{className:"relative w-[160px]"},J().createElement("div",{ref:u,style:p,className:"relative bg-white rounded-lg will-change-transform ".concat(g?"z-10 shadow-xl ring-2 ring-blue-500":""," ").concat(n?"ring-2 ring-blue-500":""),"data-testid":"sortable-item-".concat(t.id),onMouseEnter:function(){return i(!0)},onMouseLeave:function(){return i(!1)}},J().createElement("div",{className:"absolute top-2 left-2 z-20"},J().createElement("input",{title:(0,de.__)("Select item","nggallery"),type:"checkbox",checked:n,onChange:function(e){e.stopPropagation(),r(t.id)},onClick:function(e){return e.stopPropagation()},className:"rounded border-gray-300 cursor-pointer"})),y&&J().createElement("div",{className:"absolute top-2 right-2 bg-purple-500 text-white px-2 py-1 rounded text-xs font-medium z-20"},(0,de.__)("Album","nggallery")),J().createElement("div",{className:"overflow-hidden rounded-lg bg-gray-100 flex items-center justify-center relative",style:{width:160,height:110}},t.thumbnail?J().createElement("img",{src:t.thumbnail,alt:t.title,className:"object-cover rounded-lg",loading:"lazy",width:160,height:110,draggable:!1,style:{width:160,height:110}}):J().createElement("div",{className:"flex flex-col items-center justify-center text-gray-400"},J().createElement(J().Fragment,null,J().createElement(Wn,{className:"w-8 h-8 mb-2"}),J().createElement("span",{className:"text-xs"},(0,de.__)("No Preview","nggallery")))),f&&J().createElement("div",{className:"absolute inset-0 bg-black bg-opacity-30 transition-opacity rounded-lg"})),J().createElement("div",{className:"p-3"},J().createElement("div",{className:"flex items-center justify-between"},J().createElement("div",{className:"flex-1 min-w-0"},J().createElement("p",{className:"text-sm font-medium text-gray-900 truncate",title:t.title},t.title),J().createElement("p",{className:"text-xs text-gray-500 mt-1"},t.count," ",y?(0,de.__)("items","nggallery"):(0,de.__)("images","nggallery"))),J().createElement("button",ge({},s,c,{className:"flex-shrink-0 text-gray-400 hover:text-gray-600 p-1 rounded cursor-move ml-2",title:(0,de.__)("Drag to reorder","nggallery")}),J().createElement(Gt,{className:"text-gray-500"}))))))});$u.displayName="SortableItem";const em=$u;function tm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function nm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tm(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tm(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var rm=(0,Z.createContext)(void 0),am="photocrati-nextgen_basic_compact_album",lm=function(e){if(!e)return am;if(e.startsWith("photocrati-")||e.startsWith("imagely-"))return e;switch(e){case"basic_compact_album":return"photocrati-nextgen_basic_compact_album";case"basic_extended_album":return"photocrati-nextgen_basic_extended_album";case"pro_grid_album":return"photocrati-nextgen_pro_grid_album";case"pro_list_album":return"photocrati-nextgen_pro_list_album";case"pro_search":return"imagely-pro-search";default:return am}},im=function(e){return"photocrati-nextgen_basic_compact_album"===e||"photocrati-nextgen_basic_extended_album"===e?{open_gallery_in_lightbox:!1,gallery_display_type:"photocrati-nextgen_basic_thumbnails",galleries_per_page:20,enable_breadcrumbs:!0,enable_descriptions:!1,display_view:"default",template:"default",override_thumbnail_settings:1,thumbnail_width:240,thumbnail_height:160,thumbnail_crop:1,animate_images_enable:!1,animate_images_style:"wobble",animate_images_duration:1500,animate_images_delay:250,animate_pagination_enable:!1,animate_pagination_style:"flipInX",animate_pagination_duration:1500,animate_pagination_delay:250,is_ecommerce_enabled:0}:{}},om=function(e,n){var r=im(e),a=n&&"object"===t(n)?n:{};return nm(nm({},r),a)},sm=function(e){var t=e.children,r=e.initialAlbum,a=hr((0,Z.useState)(r),2),l=a[0],i=a[1],o=hr((0,Z.useState)(!1),2),s=o[0],c=o[1],u=Jr(),m=hr((0,Z.useState)(function(){var e=lm(null==r?void 0:r.display_type),t=(null==r?void 0:r.display_type_settings)||{},a=nm(nm({},t),{},n({},e,om(e,t[e])));return r?{name:r.name||"",description:r.description||"",display_type:e,display_type_settings:a,sortorder:r.sortorder||[],preview_image_id:r.preview_image_id||null,pageid:r.pageid||null}:{name:"",description:"",display_type:e,display_type_settings:n({},e,im(e)),sortorder:[],preview_image_id:null,pageid:null}}),2),d=m[0],g=m[1];(0,Z.useEffect)(function(){if(r&&r!==l){var e=lm(r.display_type),t=r.display_type_settings||{},a=nm(nm({},t),{},n({},e,om(e,t[e])));if(i(r),s)return;g({name:r.name||"",description:r.description||"",display_type:e,display_type_settings:a,sortorder:r.sortorder||[],preview_image_id:r.preview_image_id||null,pageid:r.pageid||null})}},[r,l,s]);var p=(0,Z.useCallback)(function(e,t){g(function(r){return nm(nm({},r),{},n({},e,t))}),c(!0)},[]),f=(0,Z.useCallback)(function(e,t){g(function(r){return nm(nm({},r),{},{display_type_settings:nm(nm({},r.display_type_settings),{},n({},e,t))})}),c(!0)},[]),y=(0,Z.useCallback)(Er(Nr().mark(function e(){var t;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=l&&l.id&&s){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,u.mutateAsync({id:l.id,data:d});case 5:t=e.sent,i(t),c(!1),e.next=14;break;case 10:throw e.prev=10,e.t0=e.catch(2),console.error("Failed to save album:",e.t0),e.t0;case 14:case"end":return e.stop()}},e,null,[[2,10]])})),[null==l?void 0:l.id,d,s,u]),h=(0,Z.useCallback)(function(){if(l){var e=lm(l.display_type),t=l.display_type_settings||{},r=nm(nm({},t),{},n({},e,om(e,t[e])));g({name:l.name||"",description:l.description||"",display_type:e,display_type_settings:r,sortorder:l.sortorder||[],preview_image_id:l.preview_image_id||null,pageid:l.pageid||null}),c(!1)}},[l]),_={album:l,formData:d,isLoading:u.isPending,isDirty:s,updateField:p,updateDisplayTypeSetting:f,saveForm:y,resetForm:h};return J().createElement(rm.Provider,{value:_},t)},cm=function(){var e=(0,Z.useContext)(rm);if(void 0===e)throw new Error("useAlbumForm must be used within an AlbumFormProvider");return e};const um=function(e){var t=e.albumId,n=cm(),r=n.formData,a=n.updateField,l=ea().showSuccess,i=Jr(),o=Yr(t).data,s=hr((0,Z.useState)([]),2),c=s[0],u=s[1],m=hr((0,Z.useState)(new Set),2),d=m[0],g=m[1],p=hr((0,Z.useState)(null),2),f=p[0],y=p[1],h=hr((0,Z.useState)(!1),2),_=h[0],b=h[1],v=hr((0,Z.useState)(!1),2),x=v[0],w=v[1],E=hr((0,Z.useState)(!1),2),C=E[0],N=E[1],k=(0,Z.useRef)(!1),S=(0,Z.useRef)([]),O=ya({per_page:1e3}),P=O.data,T=O.isLoading,D=Zr({get_all:!0}),I=D.data,j=D.isLoading,A=(null==P?void 0:P.galleries)||[],L=(null==I?void 0:I.albums)||[],M=(0,Z.useMemo)(function(){if(T||j)return!0;if(r.sortorder&&r.sortorder.length>0){var e=A.length>0||!r.sortorder.some(function(e){return"number"==typeof e}),t=L.length>0||!r.sortorder.some(function(e){return"string"==typeof e&&e.startsWith("a")});if(!e||!t)return 0===c.length}return!1},[T,j,A.length,L.length,r.sortorder,c.length]),R=$o(Jo(Ks,{activationConstraint:{distance:8,delay:100,tolerance:10}}),Jo(Hs,{coordinateGetter:iu}));(0,Z.useEffect)(function(){if(!k.current)if((A.length>0||L.length>0)&&r.sortorder&&r.sortorder.length>0){var e=r.sortorder.map(function(e){if("string"==typeof e&&e.startsWith("a")){var t=parseInt(e.substring(1)),n=L.find(function(e){return e.id===t});if(n)return{id:e,type:"album",title:n.albumTitle,count:n.count.toString(),thumbnail:n.thumbnail,shortcode:n.shortcode,created:n.created,modified:n.modified,displayType:n.displayType}}else{var r=A.find(function(t){return t.id===e});if(r)return{id:r.id,type:"gallery",title:r.galleryTitle,count:r.count,thumbnail:r.thumbnail,shortcode:r.shortcode,eCommerce:r.eCommerce,is_private:r.is_private,created:r.created,modified:r.modified,displayType:r.displayType}}return null}).filter(Boolean);u(e)}else r.sortorder&&0===r.sortorder.length&&u([])},[A.length,L.length,r.sortorder]),(0,Z.useEffect)(function(){S.current=c},[c]);var F=(0,Z.useCallback)(function(e){var t=e.active,n=e.over;if(y(null),n&&t.id!==n.id){var r=S.current,l=r.findIndex(function(e){return e.id===t.id}),i=r.findIndex(function(e){return e.id===n.id}),o=Hc(r,l,i),s=o.map(function(e){return e.id});u(o),a("sortorder",s),window.navigator.vibrate&&window.navigator.vibrate([50,50,50])}setTimeout(function(){k.current=!1},100)},[a]),z=(0,Z.useCallback)(function(e){g(function(t){var n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},[]),B=(0,Z.useCallback)(function(e,t){var n=new Map(A.map(function(e){return[e.id,e]})),i=new Map(L.map(function(e){return[e.id,e]})),o=e.map(function(e){var t=n.get(e);return t?{id:t.id,type:"gallery",title:t.galleryTitle,count:t.count,thumbnail:t.thumbnail,shortcode:t.shortcode,eCommerce:t.eCommerce,is_private:t.is_private,created:t.created,modified:t.modified,displayType:t.displayType}:null}).filter(Boolean),s=t.map(function(e){var t=i.get(e);return t?{id:"a".concat(e),type:"album",title:t.albumTitle,count:t.count.toString(),thumbnail:t.thumbnail,shortcode:t.shortcode,created:t.created,modified:t.modified,displayType:t.displayType}:null}).filter(Boolean),c=[].concat(zr(o),zr(s));u(function(e){return[].concat(zr(e),zr(c))});var m=[].concat(zr(e),zr(t.map(function(e){return"a".concat(e)})));a("sortorder",[].concat(zr(r.sortorder),zr(m)));var d=e.length+t.length;l((0,de.sprintf)((0,de.__)("%d item(s) added to album!","nggallery"),d))},[A,L,r.sortorder,a,l]),q=(0,Z.useMemo)(function(){return c.map(function(e){return e.id})},[c]),H=f?c.find(function(e){return e.id===f}):null,G=(0,Z.useMemo)(function(){return c.filter(function(e){return"gallery"===e.type}).map(function(e){return e.id})},[c]),U=(0,Z.useMemo)(function(){return c.filter(function(e){return"album"===e.type}).map(function(e){return parseInt(e.id.substring(1))})},[c]),W=(0,Z.useMemo)(function(){return(null==o?void 0:o.previewpic_url)||null},[o]),V=(0,Z.useCallback)(function(e){a("name",e.name),a("description",e.description),a("pageid",e.pageid),l((0,de.__)("Album updated successfully!","nggallery"))},[a,l]),K=(0,Z.useCallback)(function(){var e=Er(Nr().mark(function e(n){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a("preview_image_id",n),e.prev=1,e.next=4,i.mutateAsync({id:t,data:{preview_image_id:n}});case 4:l((0,de.__)("Preview image updated!","nggallery")),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("Failed to update preview image:",e.t0);case 10:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t){return e.apply(this,arguments)}}(),[t,a,i,l]);return J().createElement("div",{className:"space-y-6 px-6 py-6 lg:px-8 lg:py-8"},J().createElement(Ju,{albumName:r.name||"",previewImageUrl:W,itemCount:c.length,onEditClick:function(){return w(!0)},onImageClick:function(){return N(!0)}}),J().createElement("div",null,J().createElement("div",{className:"flex items-center justify-between mb-4"},J().createElement("h4",{className:"text-sm font-medium text-gray-900"},(0,de.__)("Selected Items","nggallery")," (",c.length,")"),J().createElement("div",{className:"flex items-center space-x-2"},d.size>0&&J().createElement("button",{onClick:function(){var e,t=Array.from(d),n=(null===(e=r.sortorder)||void 0===e?void 0:e.filter(function(e){return!t.includes(e)}))||[];a("sortorder",n),u(function(e){return e.filter(function(e){return!t.includes(e.id)})}),g(new Set);var i=t.length;l(1===i?(0,de.__)("Item removed from album!","nggallery"):(0,de.sprintf)((0,de.__)("%d items removed from album!","nggallery"),i))},className:"px-3 py-1 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm"},(0,de.__)("Remove Selected","nggallery")," (",d.size,")"),c.length>1&&J().createElement("button",{onClick:function(){d.size===c.length?g(new Set):g(new Set(c.map(function(e){return e.id})))},className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 text-sm"},d.size===c.length?(0,de.__)("Deselect All","nggallery"):(0,de.__)("Select All","nggallery")))),M?J().createElement("div",{className:"p-12 flex justify-center"},J().createElement(ar,{size:"lg",text:(0,de.__)("Loading album content...","nggallery")})):c.length>0?J().createElement("div",null,J().createElement(kc,{sensors:R,collisionDetection:ss,onDragStart:function(e){k.current=!0,y(e.active.id),window.navigator.vibrate&&window.navigator.vibrate(50)},onDragEnd:F,measuring:{droppable:{strategy:ec.Always}}},J().createElement(Yc,{items:q,strategy:Wc},J().createElement("div",{className:"grid gap-6 grid-cols-[repeat(auto-fill,_160px)]"},J().createElement("div",{className:"w-40 h-32 border-2 border-dashed border-green-300 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:border-green-400 hover:bg-green-50 transition-colors group",onClick:function(){return b(!0)}},J().createElement("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mb-2 group-hover:bg-green-200 transition-colors"},J().createElement(Bt,{className:"w-5 h-5 text-green-500 group-hover:text-green-600"})),J().createElement("span",{className:"text-sm text-green-500 group-hover:text-green-600 font-medium"},(0,de.__)("Add Item","nggallery"))),c.map(function(e){return J().createElement(em,{key:e.id,item:e,isSelected:d.has(e.id),onSelect:z})}))),J().createElement(qc,null,H&&J().createElement("div",{className:"transform scale-105 opacity-90 pointer-events-none"},J().createElement(em,{item:H,isSelected:d.has(H.id),onSelect:z}))))):J().createElement("div",null,J().createElement("div",{className:"mb-4"},J().createElement("div",{className:"w-32 h-24 border-2 border-dashed border-green-300 rounded-lg flex flex-col items-center justify-center cursor-pointer hover:border-green-400 hover:bg-green-50 transition-colors group inline-flex",onClick:function(){return b(!0)}},J().createElement("div",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mb-1 group-hover:bg-green-200 transition-colors"},J().createElement(Bt,{className:"w-5 h-5 text-green-500 group-hover:text-green-600"})),J().createElement("span",{className:"text-sm text-green-500 group-hover:text-green-600 font-medium"},(0,de.__)("Add Item","nggallery")))),J().createElement("p",{className:"text-gray-500 text-sm"},(0,de.__)("No content in this album yet. Click the button above to add galleries or albums.","nggallery")))),J().createElement(Zu,{isOpen:_,onClose:function(){return b(!1)},excludeGalleryIds:G,excludeAlbumIds:[t].concat(zr(U)),onConfirm:B}),J().createElement(Ku,{isOpen:x,onClose:function(){return w(!1)},onSave:V,initialData:{name:r.name||"",description:r.description||"",pageid:r.pageid||null}}),J().createElement(Yu,{isOpen:C,onClose:function(){return N(!1)},onSelect:K,albumSortorder:r.sortorder||[],currentImageId:r.preview_image_id||null}))};function mm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function dm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mm(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mm(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function gm(){return Ar({queryKey:["display-types"],queryFn:(e=Er(Nr().mark(function e(){var t,n;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===(t=window.imagelyApp)||void 0===t?void 0:t.nonce,e.next=3,Fr()({path:"/imagely/v1/display-types",method:"GET",headers:{"X-WP-Nonce":n}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)}),staleTime:3e5,gcTime:6e5});var e}function pm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function fm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pm(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pm(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ym=[{id:"photocrati-nextgen_basic_compact_album",name:(0,de.__)("Compact Album","nggallery"),icon:J().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",viewBox:"0 0 120 98"},J().createElement("rect",{x:"8",y:"12",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"44",y:"12",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"80",y:"12",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"8",y:"38",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"44",y:"38",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"80",y:"38",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"8",y:"64",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"44",y:"64",width:"32",height:"22",fill:"currentColor"}),J().createElement("rect",{x:"80",y:"64",width:"32",height:"22",fill:"currentColor"}))},{id:"photocrati-nextgen_basic_extended_album",name:(0,de.__)("Extended Album","nggallery"),icon:J().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",viewBox:"0 0 120 98"},J().createElement("rect",{x:"8",y:"12",width:"104",height:"20",fill:"currentColor"}),J().createElement("rect",{x:"8",y:"38",width:"104",height:"20",fill:"currentColor"}),J().createElement("rect",{x:"8",y:"64",width:"104",height:"20",fill:"currentColor"}))},{id:"photocrati-nextgen_pro_grid_album",name:(0,de.__)("Grid Album","nggallery"),icon:J().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",viewBox:"0 0 120 98",fill:"currentColor"},J().createElement("rect",{x:"8",y:"12",width:"32",height:"22"}),J().createElement("rect",{x:"44",y:"12",width:"32",height:"22"}),J().createElement("rect",{x:"80",y:"12",width:"32",height:"22"}),J().createElement("rect",{x:"8",y:"38",width:"32",height:"22"}),J().createElement("rect",{x:"44",y:"38",width:"32",height:"22"}),J().createElement("rect",{x:"80",y:"38",width:"32",height:"22"}),J().createElement("rect",{x:"8",y:"64",width:"32",height:"22"}),J().createElement("rect",{x:"44",y:"64",width:"32",height:"22"}),J().createElement("rect",{x:"80",y:"64",width:"32",height:"22"}),J().createElement("circle",{cx:"14",cy:"18",r:"2",fill:"white"}),J().createElement("circle",{cx:"50",cy:"18",r:"2",fill:"white"}),J().createElement("circle",{cx:"86",cy:"18",r:"2",fill:"white"}))},{id:"photocrati-nextgen_pro_list_album",name:(0,de.__)("List Album","nggallery"),icon:J().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",viewBox:"0 0 120 98",fill:"currentColor"},J().createElement("rect",{x:"8",y:"16",width:"20",height:"15"}),J().createElement("rect",{x:"32",y:"16",width:"80",height:"4"}),J().createElement("rect",{x:"32",y:"23",width:"60",height:"3"}),J().createElement("rect",{x:"8",y:"41",width:"20",height:"15"}),J().createElement("rect",{x:"32",y:"41",width:"80",height:"4"}),J().createElement("rect",{x:"32",y:"48",width:"60",height:"3"}),J().createElement("rect",{x:"8",y:"66",width:"20",height:"15"}),J().createElement("rect",{x:"32",y:"66",width:"80",height:"4"}),J().createElement("rect",{x:"32",y:"73",width:"60",height:"3"}))},{id:"imagely-pro-search",name:(0,de.__)("Search","nggallery"),icon:J().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",viewBox:"0 0 120 98",fill:"currentColor"},J().createElement("rect",{x:"8",y:"12",width:"85",height:"6",rx:"3"}),J().createElement("circle",{cx:"102",cy:"15",r:"6"}),J().createElement("path",{d:"m104 17 6 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),J().createElement("rect",{x:"8",y:"28",width:"32",height:"22"}),J().createElement("rect",{x:"44",y:"28",width:"32",height:"22"}),J().createElement("rect",{x:"80",y:"28",width:"32",height:"22"}),J().createElement("rect",{x:"8",y:"54",width:"32",height:"22"}),J().createElement("rect",{x:"44",y:"54",width:"32",height:"22"}),J().createElement("rect",{x:"80",y:"54",width:"32",height:"22"}))}];const hm=function(e){var t,r=e.albumId,a=e.previewMode,l=e.onPreviewModeChange,i=cm(),o=i.formData,s=i.updateField,c=i.saveForm,u=i.isDirty,m=i.album,d=(0,me.useDispatch)(tr),g=hr((0,Z.useState)(null),2),p=g[0],f=g[1],y=(null===(t=window.imagelyApp)||void 0===t?void 0:t.proTypeInstalled)||"lite",h=function(e){var t=["photocrati-nextgen_basic_compact_album","photocrati-nextgen_basic_extended_album"],n=[].concat(t,["photocrati-nextgen_pro_grid_album","photocrati-nextgen_pro_list_album","imagely-pro-search"]);switch(e){case"pro":case"plus":return n;default:return t}}(y);(0,Z.useEffect)(function(){o.display_type||s("display_type","photocrati-nextgen_basic_compact_album")},[o.display_type,s]);var _=(0,Z.useCallback)(function(e){switch(e){case"photocrati-nextgen_basic_compact_album":return{open_gallery_in_lightbox:!1,gallery_display_type:"photocrati-nextgen_basic_thumbnails",galleries_per_page:20,enable_breadcrumbs:!0,enable_descriptions:!1,display_view:"default",template:"default",override_thumbnail_settings:1,thumbnail_width:240,thumbnail_height:160,thumbnail_crop:1,animate_images_enable:!1,animate_images_style:"wobble",animate_images_duration:1500,animate_images_delay:250,animate_pagination_enable:!1,animate_pagination_style:"flipInX",animate_pagination_duration:1500,animate_pagination_delay:250,is_ecommerce_enabled:0};case"photocrati-nextgen_basic_extended_album":return{open_gallery_in_lightbox:!1,gallery_display_type:"photocrati-nextgen_basic_thumbnails",galleries_per_page:20,enable_breadcrumbs:!0,enable_descriptions:!1,display_view:"default",template:"default",override_thumbnail_settings:1,thumbnail_width:300,thumbnail_height:200,thumbnail_crop:1,animate_images_enable:!1,animate_images_style:"wobble",animate_images_duration:1500,animate_images_delay:250,animate_pagination_enable:!1,animate_pagination_style:"flipInX",animate_pagination_duration:1500,animate_pagination_delay:250,is_ecommerce_enabled:0};case"photocrati-nextgen_pro_grid_album":return{gallery_display_type:"photocrati-nextgen_pro_thumbnail_grid",background_color:"#FFFFFF",border_color:"#CCCCCC",border_size:1,caption_color:"#333333",caption_size:13,display_type_view:"default",enable_breadcrumbs:!0,enable_descriptions:!1,padding:20,spacing:10,open_gallery_in_lightbox:0,override_thumbnail_settings:0,thumbnail_crop:1,thumbnail_height:160,thumbnail_quality:100,thumbnail_watermark:0,thumbnail_width:240,animate_images_enable:!1,animate_images_style:"wobble",animate_images_duration:1500,animate_images_delay:250,animate_pagination_enable:!1,animate_pagination_style:"flipInX",animate_pagination_duration:"1500",animate_pagination_delay:"250",is_ecommerce_enabled:0};case"photocrati-nextgen_pro_list_album":return{gallery_display_type:"photocrati-nextgen_pro_thumbnail_grid",background_color:"#FFFFFF",border_color:"#CCCCCC",border_size:1,caption_color:"#333333",caption_size:18,description_color:"#333333",description_size:13,display_type_view:"default",enable_breadcrumbs:!0,enable_descriptions:!1,padding:20,spacing:10,open_gallery_in_lightbox:0,override_thumbnail_settings:0,thumbnail_crop:1,thumbnail_height:160,thumbnail_quality:100,thumbnail_watermark:0,thumbnail_width:240,animate_images_enable:!1,animate_images_style:"wobble",animate_images_duration:1500,animate_images_delay:250,animate_pagination_enable:!1,animate_pagination_style:"flipInX",animate_pagination_duration:"1500",animate_pagination_delay:"250",is_ecommerce_enabled:0};case"imagely-pro-search":return{search_mode:"natural",enable_tag_filter:!0,search_alttext:!0,search_description:!0,search_tags:!0,limit:0,order_by:"pid",order_direction:"ASC",order_by_relevance:!0,minimum_relevance:1,gallery_display_type:"photocrati-nextgen_basic_thumbnails"};default:return{gallery_display_type:"photocrati-nextgen_basic_thumbnails",enable_breadcrumbs:!0,enable_descriptions:!1,use_lightbox_effect:!0}}},[]),b=gm(),v=(0,Z.useMemo)(function(){var e=b.data;return e?Object.values(e).filter(function(e){return Array.isArray(e.entity_types)&&e.entity_types.includes("image")}).filter(function(e){return"photocrati-nextgen_basic_singlepic"!==e.name}).map(function(e){return{value:e.name,label:(e.title||"").replace(/NextGEN\s*/gi,"").trim()}}):[]},[b.data]),x=(0,Z.useMemo)(function(){var e=b.data;return e?Object.values(e).filter(function(e){return Array.isArray(e.entity_types)&&e.entity_types.includes("image")}).map(function(e){return{value:e.name,label:(e.title||"").replace(/NextGEN\s*/gi,"").trim()}}):[]},[b.data]),w=(0,Z.useCallback)(Er(Nr().mark(function e(){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!u||!r){e.next=9;break}return e.prev=1,e.next=4,c();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error("Auto-save failed:",e.t0);case 9:case"end":return e.stop()}},e,null,[[1,6]])})),[u,r,c]);(0,Z.useEffect)(function(){if(u){var e=setTimeout(w,1e3);return function(){return clearTimeout(e)}}},[o,w,u]);var E=(0,Z.useMemo)(function(){return null!=m&&m.sortorder&&0!==m.sortorder.length?m.sortorder.join("-"):"empty"},[null==m?void 0:m.sortorder]),C=(0,Z.useMemo)(function(){var e;if(!m)return m;var t=m.display_type||"photocrati-nextgen_pro_grid_album",r=_(t),a=(null===(e=m.display_type_settings)||void 0===e?void 0:e[t])||{},l=fm(fm({},r),a);return fm(fm({},m),{},{display_type_settings:fm(fm({},m.display_type_settings),{},n({},t,l))})},[m,_]),N=Oi({type:"album",item:C,itemId:r,cacheKey:E}),k=function(e,t){var r,a=o.display_type,l=fm(fm({},o.display_type_settings),{},n({},a,fm(fm({},(null===(r=o.display_type_settings)||void 0===r?void 0:r[a])||{}),{},n({},e,t))));s("display_type_settings",l)},S=p&&!h.includes(p);return J().createElement("div",{className:"bg-white rounded-lg shadow lg:grid lg:grid-cols-2 lg:items-start"},J().createElement("div",{className:"px-4 py-4 border-b lg:border-b-0 lg:border-r"},J().createElement("div",{className:"space-y-4"},J().createElement("h1",{className:"text-lg font-medium"},(0,de.__)("Album Settings","nggallery")),J().createElement(ki,{title:(0,de.__)("Choose Layout","nggallery"),defaultExpanded:!0,className:"mb-4"},J().createElement("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-2 sm:gap-4"},ym.map(function(e){var t=h.includes(e.id),n=(p||o.display_type)===e.id;return J().createElement("div",{key:e.id,className:"flex flex-col items-center text-center"},J().createElement("div",{className:"relative p-1 border rounded-md cursor-pointer transition-all duration-200 w-full ".concat(n?"border-green-500":t?"border-gray-600 hover:border-green-500":"border-gray-200 hover:border-green-500"),onClick:function(){return t=e.id,f(t),void(h.includes(t)&&s("display_type",t));var t}},J().createElement("div",{className:"flex items-center justify-center ".concat(n?"text-gray-600":"text-gray-200 hover:text-gray-600")},J().createElement("div",{className:"w-12 h-8 sm:w-16 sm:h-12 flex items-center justify-center"},e.icon))),J().createElement("h3",{className:"text-xs font-medium mt-1 sm:mt-2 ".concat(t?"text-gray-300":"text-gray-400")},e.name))}))),J().createElement("div",{className:S?"opacity-50 pointer-events-none":""},J().createElement(ki,{title:(0,de.__)("Customize Album Look","nggallery"),defaultExpanded:!0,className:"mb-4"},function(){var e,t,n,r,a,l,i,s,c,u,m,g,p=(null===(e=o.display_type_settings)||void 0===e?void 0:e[o.display_type])||{};switch(o.display_type){case"photocrati-nextgen_basic_compact_album":case"photocrati-nextgen_basic_extended_album":default:return t=p,J().createElement("div",{className:"space-y-4"},"pro"===nr||"plus"===nr?J().createElement(Ml,{id:"open-gallery-in-pro-lightbox",name:"open_gallery_in_lightbox",checked:!!t.open_gallery_in_lightbox,onChange:function(e){return k("open_gallery_in_lightbox",e.target.checked)},label:(0,de.__)("Open gallery in Pro Lightbox","nggallery"),help:(0,de.__)("Open child galleries directly in Pro Lightbox instead of navigating.","nggallery")}):null,!t.open_gallery_in_lightbox&&J().createElement(ml,{id:"gallery-display-type",name:"gallery_display_type",value:t.gallery_display_type||"photocrati-nextgen_basic_thumbnails",onChange:function(e){return k("gallery_display_type",e.target.value)},label:(0,de.__)("Display galleries as","nggallery"),help:(0,de.__)("How would you like galleries to be displayed?","nggallery")},v.map(function(e){return J().createElement("option",{key:e.value,value:e.value},e.label)})),J().createElement(dl,{type:"number",name:"galleries_per_page",value:String(null!==(n=t.galleries_per_page)&&void 0!==n?n:20),onChange:function(e){return k("galleries_per_page",parseInt(e.target.value))},label:(0,de.__)("Items per page","nggallery"),help:(0,de.__)("Maximum number of galleries or sub-albums to appear on a single page","nggallery"),min:0,max:200}),J().createElement(Ml,{id:"enable-breadcrumbs",name:"enable_breadcrumbs",checked:!1!==t.enable_breadcrumbs,onChange:function(e){return k("enable_breadcrumbs",e.target.checked)},label:(0,de.__)("Enable breadcrumbs","nggallery")}),J().createElement("input",{type:"hidden",name:"display_view",value:"default"}),J().createElement(Gi,{prefix:"album",value:null!==(r=t.template)&&void 0!==r?r:"default",onChange:function(e){return k("template",e.target.value)}}),J().createElement(Ml,{id:"enable-descriptions",name:"enable_descriptions",checked:!!t.enable_descriptions,onChange:function(e){return k("enable_descriptions",e.target.checked)},label:(0,de.__)("Display descriptions","nggallery")}),J().createElement(Ml,{id:"override_thumbnail_settings",name:"override_thumbnail_settings",checked:!!t.override_thumbnail_settings,onChange:function(e){return k("override_thumbnail_settings",e.target.checked)},label:(0,de.__)("Override thumbnail settings","nggallery"),help:(0,de.__)("This does not affect existing thumbnails; overriding the thumbnail settings will create an additional set of thumbnails. To change the size of existing thumbnails please visit 'Manage Galleries' and choose 'Create new thumbnails' for all images in the gallery.","nggallery")}),t.override_thumbnail_settings?J().createElement("div",{className:"ml-6 space-y-4"},J().createElement(ul,{htmlFor:"thumbnail_dimensions",help:(0,de.__)("These are maximum values","nggallery")},(0,de.__)("Thumbnail dimensions","nggallery")),J().createElement("div",{className:"flex gap-4"},J().createElement(dl,{type:"number",name:"thumbnail_width",value:String(null!==(a=t.thumbnail_width)&&void 0!==a?a:240),onChange:function(e){return k("thumbnail_width",parseInt(e.target.value))}}),J().createElement(dl,{type:"number",name:"thumbnail_height",value:String(null!==(l=t.thumbnail_height)&&void 0!==l?l:160),onChange:function(e){return k("thumbnail_height",parseInt(e.target.value))}})),J().createElement(Ml,{id:"thumbnail_crop",name:"thumbnail_crop",checked:!!t.thumbnail_crop,onChange:function(e){return k("thumbnail_crop",e.target.checked)},label:(0,de.__)("Thumbnail crop","nggallery")})):null,J().createElement(Wi,{formState:{animate_images_enable:!!t.animate_images_enable,animate_images_style:null!==(i=t.animate_images_style)&&void 0!==i?i:"wobble",animate_images_duration:String(null!==(s=t.animate_images_duration)&&void 0!==s?s:1500),animate_images_delay:String(null!==(c=t.animate_images_delay)&&void 0!==c?c:250),animate_pagination_enable:!!t.animate_pagination_enable,animate_pagination_style:null!==(u=t.animate_pagination_style)&&void 0!==u?u:"flipInX",animate_pagination_duration:String(null!==(m=t.animate_pagination_duration)&&void 0!==m?m:1500),animate_pagination_delay:String(null!==(g=t.animate_pagination_delay)&&void 0!==g?g:250)},handleInputChange:function(e){var t,n=(e.target||{}).name,r=e.target&&"checked"in e.target?e.target.checked:null===(t=e.target)||void 0===t?void 0:t.value;/duration|delay/.test(n)&&(r=parseInt(r)),k(n,r)}}),"pro"===y?J().createElement(Ml,{id:"enable-ecommerce",name:"is_ecommerce_enabled",checked:!!t.is_ecommerce_enabled,onChange:function(e){return k("is_ecommerce_enabled",e.target.checked)},label:(0,de.__)("Enable eCommerce","nggallery")}):J().createElement("div",{className:"relative"},J().createElement("div",{className:"opacity-50 pointer-events-none"},J().createElement(Ml,{id:"enable-ecommerce",name:"is_ecommerce_enabled",checked:!1,onChange:function(){},label:(0,de.__)("Enable eCommerce","nggallery")})),J().createElement("div",{className:"absolute inset-0 cursor-pointer",onClick:function(){return d.setActiveModal("upgrade",{feature:"eCommerce features"})},title:(0,de.__)("Requires NextGEN Gallery Pro","nggallery")})));case"photocrati-nextgen_pro_grid_album":return function(e){var t,n,r,a,l,i,o,s,c,u,m,g,p,f,h,_;return J().createElement("div",{className:"space-y-4"},J().createElement(Ml,{id:"open_gallery_in_lightbox_grid",name:"open_gallery_in_lightbox",checked:!!e.open_gallery_in_lightbox,onChange:function(e){return k("open_gallery_in_lightbox",e.target.checked?1:0)},label:(0,de.__)("Open gallery in Pro Lightbox","nggallery"),help:(0,de.__)("Open child galleries directly in Pro Lightbox instead of navigating.","nggallery")}),!e.open_gallery_in_lightbox&&J().createElement(ml,{id:"gallery-display-type-grid",name:"gallery_display_type",value:e.gallery_display_type||(null===(t=v[0])||void 0===t?void 0:t.value)||"",onChange:function(e){return k("gallery_display_type",e.target.value)},label:(0,de.__)("Display galleries as","nggallery"),help:(0,de.__)("How would you like galleries to be displayed?","nggallery")},v.map(function(e){return J().createElement("option",{key:e.value,value:e.value},e.label)})),J().createElement("div",{className:"grid grid-cols-2 gap-4"},J().createElement(dl,{type:"number",name:"spacing",value:String(null!==(n=e.spacing)&&void 0!==n?n:10),onChange:function(e){return k("spacing",parseInt(e.target.value))},label:(0,de.__)("Spacing","nggallery"),min:0,max:50}),J().createElement(dl,{type:"number",name:"padding",value:String(null!==(r=e.padding)&&void 0!==r?r:20),onChange:function(e){return k("padding",parseInt(e.target.value))},label:(0,de.__)("Padding","nggallery"),min:0,max:100})),J().createElement(dl,{type:"number",name:"border_size",value:String(null!==(a=e.border_size)&&void 0!==a?a:1),onChange:function(e){return k("border_size",parseInt(e.target.value))},label:(0,de.__)("Border size","nggallery")}),J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},(0,de.__)("Border color","nggallery")),J().createElement($i,{color:null!==(l=e.border_color)&&void 0!==l?l:"#CCCCCC",onChange:function(e){return k("border_color",e)}}),J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},(0,de.__)("Background color","nggallery")),J().createElement($i,{color:null!==(i=e.background_color)&&void 0!==i?i:"#FFFFFF",onChange:function(e){return k("background_color",e)}}),J().createElement(dl,{type:"number",name:"caption_size",value:String(null!==(o=e.caption_size)&&void 0!==o?o:13),onChange:function(e){return k("caption_size",parseInt(e.target.value))},label:(0,de.__)("Caption size","nggallery")}),J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},(0,de.__)("Caption color","nggallery")),J().createElement($i,{color:null!==(s=e.caption_color)&&void 0!==s?s:"#333333",onChange:function(e){return k("caption_color",e)}}),J().createElement("input",{type:"hidden",name:"display_type_view",value:"default"}),J().createElement(Ml,{id:"override_thumbnail_settings_grid",name:"override_thumbnail_settings",checked:!!e.override_thumbnail_settings,onChange:function(e){return k("override_thumbnail_settings",e.target.checked?1:0)},label:(0,de.__)("Override thumbnail settings","nggallery"),help:(0,de.__)("This does not affect existing thumbnails; overriding the thumbnail settings will create an additional set of thumbnails.","nggallery")}),e.override_thumbnail_settings?J().createElement("div",{className:"ml-6 space-y-4"},J().createElement(ul,{htmlFor:"thumbnail_dimensions",help:(0,de.__)("These are maximum values","nggallery")},(0,de.__)("Thumbnail dimensions","nggallery")),J().createElement("div",{className:"flex gap-4"},J().createElement(dl,{type:"number",name:"thumbnail_width",value:String(null!==(c=e.thumbnail_width)&&void 0!==c?c:240),onChange:function(e){return k("thumbnail_width",parseInt(e.target.value))}}),J().createElement(dl,{type:"number",name:"thumbnail_height",value:String(null!==(u=e.thumbnail_height)&&void 0!==u?u:160),onChange:function(e){return k("thumbnail_height",parseInt(e.target.value))}})),J().createElement(Ml,{id:"thumbnail_crop_grid",name:"thumbnail_crop",checked:!!e.thumbnail_crop,onChange:function(e){return k("thumbnail_crop",e.target.checked?1:0)},label:(0,de.__)("Thumbnail crop","nggallery")})):null,J().createElement(Ml,{id:"enable_breadcrumbs_grid",name:"enable_breadcrumbs",checked:!1!==e.enable_breadcrumbs,onChange:function(e){return k("enable_breadcrumbs",e.target.checked)},label:(0,de.__)("Enable breadcrumbs","nggallery")}),"pro"===y?J().createElement(Ml,{id:"enable-ecommerce-grid",name:"is_ecommerce_enabled",checked:!!e.is_ecommerce_enabled,onChange:function(e){return k("is_ecommerce_enabled",e.target.checked?1:0)},label:(0,de.__)("Enable eCommerce","nggallery")}):J().createElement("div",{className:"relative"},J().createElement("div",{className:"opacity-50 pointer-events-none"},J().createElement(Ml,{id:"enable-ecommerce-grid",name:"is_ecommerce_enabled",checked:!1,onChange:function(){},label:(0,de.__)("Enable eCommerce","nggallery")})),J().createElement("div",{className:"absolute inset-0 cursor-pointer",onClick:function(){return d.setActiveModal("upgrade",{feature:"eCommerce features"})},title:(0,de.__)("Requires NextGEN Gallery Pro","nggallery")})),J().createElement(Wi,{formState:{animate_images_enable:!!e.animate_images_enable,animate_images_style:null!==(m=e.animate_images_style)&&void 0!==m?m:"wobble",animate_images_duration:String(null!==(g=e.animate_images_duration)&&void 0!==g?g:1500),animate_images_delay:String(null!==(p=e.animate_images_delay)&&void 0!==p?p:250),animate_pagination_enable:!!e.animate_pagination_enable,animate_pagination_style:null!==(f=e.animate_pagination_style)&&void 0!==f?f:"flipInX",animate_pagination_duration:String(null!==(h=e.animate_pagination_duration)&&void 0!==h?h:1500),animate_pagination_delay:String(null!==(_=e.animate_pagination_delay)&&void 0!==_?_:250)},handleInputChange:function(e){var t,n=(e.target||{}).name,r=e.target&&"checked"in e.target?e.target.checked:null===(t=e.target)||void 0===t?void 0:t.value;/duration|delay/.test(n)&&(r=parseInt(r)),k(n,r)},hidePagination:!0}))}(p);case"photocrati-nextgen_pro_list_album":return function(e){var t,n,r,a,l,i,o,s,c,u,m,g,p,f,h,_,b,x;return J().createElement("div",{className:"space-y-4"},J().createElement(Ml,{id:"open_gallery_in_lightbox_list",name:"open_gallery_in_lightbox",checked:!!e.open_gallery_in_lightbox,onChange:function(e){return k("open_gallery_in_lightbox",e.target.checked?1:0)},label:(0,de.__)("Open gallery in Pro Lightbox","nggallery"),help:(0,de.__)("Open child galleries directly in Pro Lightbox instead of navigating.","nggallery")}),!e.open_gallery_in_lightbox&&J().createElement(ml,{id:"gallery-display-type-list",name:"gallery_display_type",value:e.gallery_display_type||(null===(t=v[0])||void 0===t?void 0:t.value)||"",onChange:function(e){return k("gallery_display_type",e.target.value)},label:(0,de.__)("Display galleries as","nggallery"),help:(0,de.__)("How would you like galleries to be displayed?","nggallery")},v.map(function(e){return J().createElement("option",{key:e.value,value:e.value},e.label)})),J().createElement("div",{className:"grid grid-cols-2 gap-4"},J().createElement(dl,{type:"number",name:"spacing",value:String(null!==(n=e.spacing)&&void 0!==n?n:10),onChange:function(e){return k("spacing",parseInt(e.target.value))},label:(0,de.__)("Spacing","nggallery"),min:0,max:50}),J().createElement(dl,{type:"number",name:"padding",value:String(null!==(r=e.padding)&&void 0!==r?r:20),onChange:function(e){return k("padding",parseInt(e.target.value))},label:(0,de.__)("Padding","nggallery"),min:0,max:100})),J().createElement(dl,{type:"number",name:"border_size",value:String(null!==(a=e.border_size)&&void 0!==a?a:1),onChange:function(e){return k("border_size",parseInt(e.target.value))},label:(0,de.__)("Border size","nggallery")}),J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},(0,de.__)("Border color","nggallery")),J().createElement($i,{color:null!==(l=e.border_color)&&void 0!==l?l:"#CCCCCC",onChange:function(e){return k("border_color",e)}}),J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},(0,de.__)("Background color","nggallery")),J().createElement($i,{color:null!==(i=e.background_color)&&void 0!==i?i:"#FFFFFF",onChange:function(e){return k("background_color",e)}}),J().createElement("div",{className:"grid grid-cols-2 gap-4"},J().createElement(dl,{type:"number",name:"caption_size",value:String(null!==(o=e.caption_size)&&void 0!==o?o:18),onChange:function(e){return k("caption_size",parseInt(e.target.value))},label:(0,de.__)("Caption size","nggallery"),min:10,max:30}),J().createElement(dl,{type:"number",name:"description_size",value:String(null!==(s=e.description_size)&&void 0!==s?s:13),onChange:function(e){return k("description_size",parseInt(e.target.value))},label:(0,de.__)("Description size","nggallery"),min:10,max:24})),J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},(0,de.__)("Caption color","nggallery")),J().createElement($i,{color:null!==(c=e.caption_color)&&void 0!==c?c:"#333333",onChange:function(e){return k("caption_color",e)}}),J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},(0,de.__)("Description color","nggallery")),J().createElement($i,{color:null!==(u=e.description_color)&&void 0!==u?u:"#333333",onChange:function(e){return k("description_color",e)}}),J().createElement("input",{type:"hidden",name:"display_type_view",value:"default"}),J().createElement(Ml,{id:"override_thumbnail_settings_list",name:"override_thumbnail_settings",checked:!!e.override_thumbnail_settings,onChange:function(e){return k("override_thumbnail_settings",e.target.checked?1:0)},label:(0,de.__)("Override thumbnail settings","nggallery"),help:(0,de.__)("This does not affect existing thumbnails; overriding the thumbnail settings will create an additional set of thumbnails.","nggallery")}),e.override_thumbnail_settings?J().createElement("div",{className:"ml-6 space-y-4"},J().createElement(ul,{htmlFor:"thumbnail_dimensions_list",help:(0,de.__)("These are maximum values","nggallery")},(0,de.__)("Thumbnail dimensions","nggallery")),J().createElement("div",{className:"flex gap-4"},J().createElement(dl,{type:"number",name:"thumbnail_width",value:String(null!==(m=e.thumbnail_width)&&void 0!==m?m:240),onChange:function(e){return k("thumbnail_width",parseInt(e.target.value))}}),J().createElement(dl,{type:"number",name:"thumbnail_height",value:String(null!==(g=e.thumbnail_height)&&void 0!==g?g:160),onChange:function(e){return k("thumbnail_height",parseInt(e.target.value))}})),J().createElement(Ml,{id:"thumbnail_crop_list",name:"thumbnail_crop",checked:!!e.thumbnail_crop,onChange:function(e){return k("thumbnail_crop",e.target.checked?1:0)},label:(0,de.__)("Thumbnail crop","nggallery")})):null,J().createElement(Ml,{id:"enable_breadcrumbs_list",name:"enable_breadcrumbs",checked:!1!==e.enable_breadcrumbs,onChange:function(e){return k("enable_breadcrumbs",e.target.checked)},label:(0,de.__)("Enable breadcrumbs","nggallery")}),J().createElement(Ml,{id:"enable-descriptions-list",name:"enable_descriptions",checked:!!e.enable_descriptions,onChange:function(e){return k("enable_descriptions",e.target.checked)},label:(0,de.__)("Enable descriptions","nggallery")}),"pro"===y?J().createElement(Ml,{id:"enable-ecommerce-list",name:"is_ecommerce_enabled",checked:!!e.is_ecommerce_enabled,onChange:function(e){return k("is_ecommerce_enabled",e.target.checked?1:0)},label:(0,de.__)("Enable eCommerce","nggallery")}):J().createElement("div",{className:"relative"},J().createElement("div",{className:"opacity-50 pointer-events-none"},J().createElement(Ml,{id:"enable-ecommerce-list",name:"is_ecommerce_enabled",checked:!1,onChange:function(){},label:(0,de.__)("Enable eCommerce","nggallery")})),J().createElement("div",{className:"absolute inset-0 cursor-pointer",onClick:function(){return d.setActiveModal("upgrade",{feature:"eCommerce features"})},title:(0,de.__)("Requires NextGEN Gallery Pro","nggallery")})),J().createElement(Wi,{formState:{animate_images_enable:!!e.animate_images_enable,animate_images_style:null!==(p=e.animate_images_style)&&void 0!==p?p:"wobble",animate_images_duration:String(null!==(f=e.animate_images_duration)&&void 0!==f?f:1500),animate_images_delay:String(null!==(h=e.animate_images_delay)&&void 0!==h?h:250),animate_pagination_enable:!!e.animate_pagination_enable,animate_pagination_style:null!==(_=e.animate_pagination_style)&&void 0!==_?_:"flipInX",animate_pagination_duration:String(null!==(b=e.animate_pagination_duration)&&void 0!==b?b:1500),animate_pagination_delay:String(null!==(x=e.animate_pagination_delay)&&void 0!==x?x:250)},handleInputChange:function(e){var t,n=(e.target||{}).name,r=e.target&&"checked"in e.target?e.target.checked:null===(t=e.target)||void 0===t?void 0:t.value;/duration|delay/.test(n)&&(r=parseInt(r)),k(n,r)}}))}(p);case"imagely-pro-search":return function(e){var t,n,r;return J().createElement("div",{className:"space-y-4"},J().createElement(ml,{id:"search-gallery-display-type",name:"gallery_display_type",value:e.gallery_display_type||(null===(t=x[0])||void 0===t?void 0:t.value)||"",onChange:function(e){return k("gallery_display_type",e.target.value)},label:(0,de.__)("Display results as","nextgen-gallery-pro")},x.map(function(e){return J().createElement("option",{key:e.value,value:e.value},e.label)})),J().createElement(ml,{id:"search-mode",name:"search_mode",value:e.search_mode||"natural",onChange:function(e){return k("search_mode",e.target.value)},label:(0,de.__)("Database search mode","nextgen-gallery-pro")},J().createElement("option",{value:"natural"},(0,de.__)("Natural language","nextgen-gallery-pro")),J().createElement("option",{value:"boolean"},(0,de.__)("Boolean","nextgen-gallery-pro"))),J().createElement("div",{className:"grid grid-cols-2 gap-4"},J().createElement(dl,{type:"number",name:"limit",value:String(null!==(n=e.limit)&&void 0!==n?n:0),onChange:function(e){return k("limit",parseInt(e.target.value))},label:(0,de.__)("Limit search results","nextgen-gallery-pro"),help:(0,de.__)("Limit search results to this amount. A setting of zero means no limitations are applied","nextgen-gallery-pro"),min:0}),J().createElement(ml,{id:"order-by",name:"order_by",value:e.order_by||"pid",onChange:function(e){return k("order_by",e.target.value)},label:(0,de.__)("Order search results by","nextgen-gallery-pro")},J().createElement("option",{value:"pid"},(0,de.__)("Image ID","nextgen-gallery-pro")),J().createElement("option",{value:"galleryid"},(0,de.__)("Gallery ID","nextgen-gallery-pro")),J().createElement("option",{value:"filename"},(0,de.__)("Image filename","nextgen-gallery-pro")),J().createElement("option",{value:"imagedate"},(0,de.__)("Image date (EXIF or time of upload)","nextgen-gallery-pro")))),J().createElement("div",{className:"grid grid-cols-2 gap-4"},J().createElement(ml,{id:"order-direction",name:"order_direction",value:e.order_direction||"ASC",onChange:function(e){return k("order_direction",e.target.value)},label:(0,de.__)("Order direction of search results","nextgen-gallery-pro")},J().createElement("option",{value:"ASC"},(0,de.__)("Ascending","nextgen-gallery-pro")),J().createElement("option",{value:"DESC"},(0,de.__)("Descending","nextgen-gallery-pro"))),J().createElement(Ml,{id:"order-by-relevance",name:"order_by_relevance",checked:!1!==e.order_by_relevance,onChange:function(e){return k("order_by_relevance",e.target.checked)},label:(0,de.__)("Order by relevance first","nextgen-gallery-pro"),help:(0,de.__)("When enabled search results will be ordered by their relevance first, then by the secondary order setting","nextgen-gallery-pro")})),J().createElement(dl,{type:"number",name:"minimum_relevance",value:String(null!==(r=e.minimum_relevance)&&void 0!==r?r:1),onChange:function(e){return k("minimum_relevance",parseFloat(e.target.value))},label:(0,de.__)("Minimum relevance","nextgen-gallery-pro"),help:(0,de.__)("The database server assigns a relevance score to each possible image based on a number of factors with zero being not at all relevant. Users with smaller databases or images whose alttext or description only holds a few words will need a lower number here; possibly as low as 0.05. It is unlikely many users will need to raise this beyond one.","nextgen-gallery-pro"),min:0,max:10}),J().createElement(Ml,{id:"search-alttext",name:"search_alttext",checked:!1!==e.search_alttext,onChange:function(e){return k("search_alttext",e.target.checked)},label:(0,de.__)("Search image alttext","nextgen-gallery-pro")}),J().createElement(Ml,{id:"search-description",name:"search_description",checked:!1!==e.search_description,onChange:function(e){return k("search_description",e.target.checked)},label:(0,de.__)("Search image description","nextgen-gallery-pro")}),J().createElement(Ml,{id:"search-tags",name:"search_tags",checked:!1!==e.search_tags,onChange:function(e){return k("search_tags",e.target.checked)},label:(0,de.__)("Search image tags","nextgen-gallery-pro")}),J().createElement(Ml,{id:"enable-tag-filter",name:"enable_tag_filter",checked:!1!==e.enable_tag_filter,onChange:function(e){return k("enable_tag_filter",e.target.checked)},label:(0,de.__)("Enable filtering results by tag","nextgen-gallery-pro")}))}(p)}}())))),J().createElement("div",{className:"px-4 py-4 lg:sticky lg:top-6 lg:max-h-screen"},S?J().createElement(qi,null):J().createElement(Fi,{previewMode:a,onPreviewModeChange:l,url:N,title:(0,de.__)("Album Preview","nggallery")})))},_m=function(e){var t=e.currentTab,n=e.albumId,r=e.album,a=e.previewMode,l=e.onPreviewModeChange;switch(t){case"galleries":default:return J().createElement(um,{albumId:n,album:r});case"customize":case"settings":return J().createElement(hm,{albumId:n,album:r,previewMode:a,onPreviewModeChange:l})}};var bm=["galleries","settings"],vm=function(e){var t=e.currentTab,n=e.setCurrentTab,r=e.albumId,a=e.album,l=e.previewMode,i=e.handlePreviewModeChange,o=e.handleNext,s=e.handleCancel,c=e.nextButtonText,u=e.navigateTo,m=e.isFirstTab,d=e.isEmbed;return J().createElement("div",{className:"px-4 md:px-6 lg:px-8 py-4 md:py-6 pb-24"},!d&&J().createElement("div",{className:"mb-6 flex items-center gap-3"},J().createElement("button",{onClick:function(){return u("imagely-albums","general")},className:"flex items-center justify-center w-8 h-8 rounded-md hover:bg-gray-100 transition-colors"},J().createElement(qn,{className:"w-5 h-5"})),J().createElement("h1",{className:"text-2xl font-semibold text-gray-900"},(0,de.__)("Edit Album","nggallery"))),J().createElement("div",{className:"bg-white shadow rounded-md pt-4 md:pt-6 lg:pt-8"},J().createElement(vi,{currentTab:t,onTabChange:n,containerClassName:"",contentClassName:"",headerComponent:function(){return J().createElement(Gu,{activeTab:t,onTabChange:n})}},J().createElement(_m,{currentTab:t,albumId:r,album:a,previewMode:l,onPreviewModeChange:i}))),J().createElement(qu,{onNext:o,onCancel:s,nextButtonText:c,isFirstTab:m}))};const xm=function(e){var t=e.albumId,n=hr((0,Z.useState)("desktop"),2),r=n[0],a=n[1],l=(0,me.useDispatch)(tr),i=na();(0,Z.useEffect)(function(){t&&l&&l.setCurrentId(t)},[t,l]);var o=Yr(t),s=o.data,c=o.isLoading,u=o.error,m=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).onComplete,t=(0,me.useDispatch)(tr),n=(0,me.useSelect)(function(e){return{currentTab:e(tr).getCurrentTab()}},[]).currentTab,r=bm,a=r.indexOf(n),l=0===a,i=a===r.length-1,o=(0,Z.useCallback)(function(e){r.includes(e)&&t.setCurrentTab(e)},[t.setCurrentTab,r]),s=(0,Z.useCallback)(function(e,n,r){t.navigateTo(e,n,r)},[t.navigateTo]),c=(0,Z.useCallback)(function(){i?e&&e():o(r[a+1])},[i,a,r,o,e]),u=(0,Z.useCallback)(function(){l||o(r[a-1])},[l,a,r,o]),m=(0,Z.useCallback)(function(e){o(e)},[o]),d=(0,Z.useMemo)(function(){return r.includes(n)?n:"galleries"},[n,r]),g=J().useRef(n);return J().useEffect(function(){g.current===d||r.includes(n)||o(d),g.current=n},[d,n,o,r]),{currentTab:d,setCurrentTab:o,goToNextTab:c,goToPreviousTab:u,goToTab:m,isFirstTab:l,isLastTab:i,tabIds:r,currentTabIndex:a,navigateTo:s}}({onComplete:function(){l&&l.showNotice("success",(0,de.__)("Album updated successfully","nggallery"))},enableTabValidation:!1}),d=m.currentTab,g=m.setCurrentTab,p=m.goToNextTab,f=m.goToPreviousTab,y=m.isFirstTab,h=m.isLastTab,_=m.navigateTo;return c?J().createElement(ar,{size:"xl",text:"Loading album..."}):u||!s?J().createElement("div",{className:"p-6 min-h-screen"},J().createElement("div",{className:"bg-red-50 border border-red-200 rounded-md p-4"},J().createElement("div",{className:"flex"},J().createElement("div",{className:"flex-shrink-0"},J().createElement(Qt,{className:"h-5 w-5 text-red-400"})),J().createElement("div",{className:"ml-3"},J().createElement("h3",{className:"text-sm font-medium text-red-800"},(0,de.__)("Error loading album","nggallery")),J().createElement("div",{className:"mt-2 text-sm text-red-700"},u instanceof Error?u.message:(0,de.__)("Album not found","nggallery")))))):J().createElement(sm,{initialAlbum:s},J().createElement(vm,{currentTab:d,setCurrentTab:g,albumId:t,album:s,previewMode:r,handlePreviewModeChange:function(e){a(e)},handleNext:function(){if(h){if(i.isEmbed&&i.onInsertAlbum){try{i.onInsertAlbum(t)}catch(e){console.error("Failed to insert album:",e)}return}var e=(null==s?void 0:s.name)||"";l.setActiveModal("albumSuccess",{albumId:t,albumName:e})}else p()},handleCancel:function(){if(y)if(i.isEmbed&&i.onClose)try{i.onClose()}catch(e){console.error("Failed to close embed:",e)}else l.navigateTo("imagely-albums","general");else f()},nextButtonText:h?(0,de.__)("Update","nggallery"):(0,de.__)("Next step","nggallery"),navigateTo:_,isFirstTab:y,isEmbed:i.isEmbed}))},wm=function(){var e=(0,me.useDispatch)(tr),t=window.imagelyApp.assetsURL+"/images/HeaderImage.png",n=window.imagelyApp.assetsURL+"/images/HeaderArrow.png";return React.createElement("div",{className:"mb-8 bg-white rounded-lg shadow-sm p-4 sm:p-6 lg:p-8 flex flex-col lg:flex-row lg:justify-between lg:items-center relative overflow-hidden"},React.createElement("div",{className:"w-full lg:max-w-[50%] relative z-10 mb-6 lg:mb-0"},React.createElement("h1",{className:"text-2xl sm:text-3xl font-semibold mb-2 text-gray-900"},(0,de.__)("Welcome to Imagely")),React.createElement("p",{className:"text-sm sm:text-base text-gray-600 mb-4 sm:mb-6"},(0,de.__)("Let's get started by adding galleries to create your album")),React.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4"},React.createElement("button",{className:"bg-green-500 text-white hover:bg-green-600 px-4 sm:px-6 py-2.5 h-auto rounded-md text-sm font-medium w-full sm:w-auto transition-colors",onClick:function(){Ci()?e.setActiveModal("album"):e.setActiveModal("licenseRequired",{action:"create new albums"})}},(0,de.__)("Add a New Album")),React.createElement("div",{className:"hidden sm:block w-12 h-12 relative -top-5"},React.createElement("img",{src:n,alt:"Decorative arrow",className:"w-full h-full object-contain"})))),React.createElement("div",{className:"w-full lg:absolute lg:inset-y-0 lg:right-0 lg:w-1/2 lg:h-full flex items-center justify-center"},React.createElement("img",{src:t,alt:"Album illustration",className:"w-full h-48 sm:h-64 lg:h-full object-contain lg:relative lg:left-20"})))},Em=function(e){var t=e.isLoading,n=e.items,r=e.visibleColumns,a=e.selectedItems,l=e.onSelectAll,i=e.onSelectItem,o=e.columns,s=e.onSort,c=e.sortColumn,u=e.sortDirection,m=e.loadingContent,d=e.notFoundContent,g=e.dropdownContent,p=e.actionsHeaderLabel,f=e.actionCellRenderer,y=e.showSelection,h=!1!==(void 0===y||y),_=h&&n.length>0&&n.every(function(e){return a.has(e.id)}),b=hr((0,Z.useState)(null),2),v=b[0],x=b[1],w=hr((0,Z.useState)({column:c||null,direction:u||null}),2),E=w[0],C=w[1],N=J().createElement(ar,{size:"md",text:(0,de.__)("Loading items...","nggallery")}),k=J().createElement("div",{className:"p-4 text-center text-gray-500 text-sm"},(0,de.__)("No items found.")),S=o.filter(function(e){return r[e.key]}).length+(f||g?1:0)+(h?1:0);return J().createElement("div",{className:"bg-white rounded-b-lg shadow-sm"},J().createElement("div",{className:"overflow-x-auto"},J().createElement("table",{className:"w-full border-collapse min-w-[800px]"},J().createElement("thead",null,J().createElement("tr",{className:"border-b bg-gray-100"},h&&J().createElement("th",{className:"w-12 px-4 py-3 text-left"},J().createElement("input",{type:"checkbox",id:"select-all",name:"select-all",className:"rounded border-gray-300",checked:_,onChange:function(e){return l(e.target.checked)}})),o.map(function(e){var t,n,a=e.key,l=e.label,i=e.className;return r[a]&&J().createElement("th",{key:a,className:"px-4 py-3 text-left font-medium text-gray-600 text-sm cursor-pointer whitespace-nowrap ".concat(i||""),onClick:function(){return function(e){var t=o.find(function(t){return t.key===e});if(null!=t&&t.sortType){var n=null;return"backend"===t.sortType&&s?(n=E.column===e?"asc"===E.direction?"desc":"desc"===E.direction?null:"asc":"asc",C({column:n?e:null,direction:n}),s(e,n)):"frontend"===t.sortType&&(n=E.column===e?"asc"===E.direction?"desc":"desc"===E.direction?null:"asc":"asc",C({column:n?e:null,direction:n})),n}}(a)}},J().createElement("div",{className:"flex items-center"},(0,de.__)(l),(t=a,null!==(n=o.find(function(e){return e.key===t}))&&void 0!==n&&n.sortType?E.column!==t?J().createElement(Xt,{className:"w-4 h-4 ml-1 text-gray-400"}):"asc"===E.direction?J().createElement(Yt,{className:"w-4 h-4 ml-1 text-gray-900"}):J().createElement(Zt,{className:"w-4 h-4 ml-1 text-gray-900"}):null)))}),(f||g)&&J().createElement("th",{className:"w-20 px-4 py-3 text-left font-medium text-gray-600 text-sm whitespace-nowrap"},p?(0,de.__)(p):(0,de.__)("Actions")))),J().createElement("tbody",null,t?J().createElement("tr",null,J().createElement("td",{colSpan:S},m||N)):0===n.length?J().createElement("tr",null,J().createElement("td",{colSpan:S},d||k)):function(){if(!E.column||!E.direction||!Array.isArray(n))return n||[];var e=o.find(function(e){return e.key===E.column});return null!=e&&e.sortType&&"frontend"===e.sortType?zr(n).sort(function(e,t){var n=String(e[E.column]||"").toLowerCase(),r=String(t[E.column]||"").toLowerCase();return"asc"===E.direction?n.localeCompare(r):r.localeCompare(n)}):n||[]}().map(function(e){var t=!1!==e.canManage,n="border-b cursor-pointer ".concat(t?"hover:bg-gray-50":"opacity-50 hover:bg-gray-50/50");return J().createElement("tr",{key:e.id,className:n},h&&J().createElement("td",{className:"w-12 px-4 py-3"},J().createElement("input",{type:"checkbox",id:"item-".concat(e.id),name:"item-".concat(e.id),className:"rounded border-gray-300",checked:a.has(e.id),onChange:function(){return i(e.id)},disabled:!t})),o.map(function(t){var n=t.key,a=t.render,l=t.className;return r[n]&&J().createElement("td",{key:n,className:"px-4 py-3 whitespace-nowrap ".concat(l||"")},a?a(e):J().createElement("div",{className:"flex items-center gap-3"},J().createElement("span",{className:"font-medium text-gray-900 text-sm"},String(e[n]))))}),(f||g)&&J().createElement("td",{className:"w-20 px-4 py-3"},f?f(e):J().createElement(su,{isOpen:v===e.id,onClose:function(){return x(null)},onToggle:function(){return x(v===e.id?null:e.id)},trigger:J().createElement("button",{id:"quick-edit-".concat(e.id),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full",disabled:!t},J().createElement(Ht,{className:"w-5 h-5"}))},g?g(e):J().createElement("div",{className:"py-1"},J().createElement("button",{className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},(0,de.__)("Quick Edit")),J().createElement("button",{className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},(0,de.__)("Duplicate")),J().createElement("button",{className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},(0,de.__)("Add to Album")),J().createElement("button",{className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100"},(0,de.__)("Delete Item"))))))})))))};function Cm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Nm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cm(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cm(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const km=function(e){var t=e.isLoading,n=e.albums,r=e.visibleColumns,a=e.selectedAlbums,l=e.onSelectAll,i=e.onSelectAlbum,o=e.onSort,s=e.sortColumn,c=e.sortDirection,u=e.onDelete,m=e.onEdit,d=e.hasActiveSearch,g=void 0!==d&&d,p=(0,me.useDispatch)(tr),f=function(){var e=Er(Nr().mark(function e(t){var n;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(t);case 3:p.showNotice("success",(0,de.__)("Shortcode copied to clipboard!","nggallery")),e.next=14;break;case 6:e.prev=6,e.t0=e.catch(0),(n=document.createElement("textarea")).value=t,document.body.appendChild(n),n.select();try{document.execCommand("copy"),p.showNotice("success",(0,de.__)("Shortcode copied to clipboard!","nggallery"))}catch(e){p.showNotice("error",(0,de.__)("Failed to copy shortcode to clipboard","nggallery"))}document.body.removeChild(n);case 14:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),y=g?J().createElement("div",{className:"py-16"},J().createElement("div",{className:"flex flex-col items-center justify-center text-center text-gray-500"},J().createElement("p",{className:"text-sm mb-2"},(0,de.__)("No results found for your search.","nggallery")))):J().createElement("div",{className:"py-16"},J().createElement("div",{className:"flex flex-col items-center justify-center text-center text-gray-500"},J().createElement("div",{className:"mb-4"},J().createElement(Qn,{className:"w-16 h-16 opacity-60"})),J().createElement("p",{className:"text-sm mb-2"},(0,de.__)("No Albums so far!","nggallery")),J().createElement("button",{type:"button",className:"inline-flex items-center gap-1 text-green-500 hover:text-green-600 text-sm font-medium",onClick:function(){Ci()?p.setActiveModal("album"):p.setActiveModal("licenseRequired",{action:"create new albums"})}},(0,de.__)("Add New Album","nggallery"),J().createElement(Bt,{className:"w-4 h-4"}))));return J().createElement(Em,{isLoading:t,items:n,visibleColumns:r,selectedItems:a,onSelectAll:l,onSelectItem:i,columns:zu.map(function(e){return Nm(Nm({},e),{},{render:function(t){return function(e,t){switch(t){case"id":return J().createElement("span",{className:"text-gray-600 text-sm"},e.id);case"albumTitle":return J().createElement("button",{onClick:function(){return function(e){m(e)}(e)},className:"font-medium text-gray-900 text-sm hover:underline"},e.albumTitle);case"thumbnail":return e.thumbnail?J().createElement("img",{src:e.thumbnail,alt:e.albumTitle,className:"w-12 h-12 object-cover rounded-md border border-gray-200"}):J().createElement("div",{className:"w-12 h-12 bg-gray-200 rounded-md border border-gray-200 flex items-center justify-center"},J().createElement("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})));case"shortcode":return J().createElement("button",{onClick:function(){return f(e.shortcode)},className:"bg-gray-100 px-3 py-1 rounded text-sm font-mono text-gray-600 hover:bg-gray-200 transition-colors cursor-pointer border-none",title:(0,de.__)("Click to copy shortcode","nggallery")},e.shortcode);case"count":return J().createElement("span",{className:"text-gray-600 text-sm"},e.count);case"created":return J().createElement("span",{className:"text-gray-600 text-sm"},e.created);case"modified":return J().createElement("span",{className:"text-gray-600 text-sm"},e.modified);case"displayType":return J().createElement("span",{className:"text-gray-600 text-sm"},e.displayType.replace("photocrati-nextgen_","").replace("_"," "));default:return null}}(t,e.key)}})}),onSort:o,sortColumn:s,sortDirection:c,notFoundContent:y,actionsHeaderLabel:(0,de.__)("Actions","nggallery"),actionCellRenderer:function(e){return J().createElement("div",{className:"flex flex-col items-center text-gray-500"},J().createElement("button",{type:"button",className:"flex flex-col items-center text-red-600 hover:text-red-700",onClick:function(){return function(e){u([e])}(e)}},J().createElement(Un,{className:"w-4 h-4 mb-1"}),J().createElement("span",{className:"text-xs"},(0,de.__)("Delete","nggallery"))))}})};var Sm=function(){var e=hr((0,Z.useState)(""),2),t=e[0],n=e[1],r=Fu(t,300),a=hr((0,Z.useState)(Bu),2),l=a[0],i=a[1],o=hr((0,Z.useState)(new Set),2),s=o[0],c=o[1],u=hr((0,Z.useState)("modified"),2),m=u[0],d=u[1],g=hr((0,Z.useState)("desc"),2),p=g[0],f=g[1],y=hr((0,Z.useState)(1),2),h=y[0],_=y[1],b=Da().data,v=(null==b?void 0:b.admin_table_per_page)||20,x=J().useMemo(function(){return{page:h,per_page:v,search:r||void 0,sort:m||void 0,order:p||void 0}},[h,v,r,m,p]),w=Zr(x),E=w.data,C=w.isLoading,N=w.error,k=J().useMemo(function(){return(null==E?void 0:E.albums)||[]},[null==E?void 0:E.albums]),S=J().useMemo(function(){return(null==E?void 0:E.pagination)||{total:0,total_pages:1,per_page:v,current_page:1}},[null==E?void 0:E.pagination,v]),O=(0,me.useDispatch)(tr);(0,Z.useEffect)(function(){_(1)},[r]),(0,Z.useEffect)(function(){c(new Set)},[h,v,r,m,p]),(0,Z.useEffect)(function(){S.total_pages>0&&h>S.total_pages&&_(S.total_pages)},[S.total_pages,h]);var P=J().useCallback(function(e){_(e),window.scrollTo({top:0,behavior:"smooth"})},[]),T=function(e){O.setActiveModal("deleteAlbums",{albums:e,onClose:function(){return O.setActiveModal(null)},onConfirm:function(){c(new Set)}})};return N?J().createElement("div",{className:"p-6 min-h-screen"},J().createElement(wm,null),J().createElement("div",{className:"bg-red-50 border border-red-200 rounded-md p-4"},J().createElement("div",{className:"flex"},J().createElement("div",{className:"flex-shrink-0"},J().createElement(Qt,{className:"h-5 w-5 text-red-400"})),J().createElement("div",{className:"ml-3"},J().createElement("h3",{className:"text-sm font-medium text-red-800"},(0,de.__)("Error loading albums","nggallery")),J().createElement("div",{className:"mt-2 text-sm text-red-700"},N instanceof Error?N.message:(0,de.__)("An unexpected error occurred","nggallery")))))):J().createElement("div",{className:"p-6 min-h-screen"},J().createElement(wm,null),J().createElement(Mu,{title:(0,de.__)("Manage Albums","nggallery"),searchTerm:t,setSearchTerm:n,onSearch:function(){},visibleColumns:l,setVisibleColumns:i,selectedItems:s,items:k,columns:zr(zu),itemType:"album",searchPlaceholder:(0,de.__)("Search Albums","nggallery"),onDelete:T}),J().createElement(km,{isLoading:C,albums:k,visibleColumns:l,selectedAlbums:s,onSelectAll:function(e){c(e?new Set(k.map(function(e){return e.id})):new Set)},onSelectAlbum:function(e){var t=new Set(s);t.has(e)?t.delete(e):t.add(e),c(t)},onSort:function(e,t){d(t?{albumTitle:"name",created:"created",modified:"modified",id:"id",displayType:"display_type"}[e]||e:null),f(t),_(1)},sortColumn:m,sortDirection:p,onDelete:T,onEdit:function(e){O.setCurrentId(e.id),O.navigateTo("imagely-albums","galleries",e.id)},hasActiveSearch:!!r}),!C&&(S.total>0||r)&&J().createElement(Ru,{currentPage:h,totalPages:S.total_pages,perPage:S.per_page,total:S.total,onPageChange:P,itemLabel:r?(0,de.__)("Results","nggallery"):(0,de.__)("Items","nggallery"),showItemCount:!0}))};const Om=function(){var e=na(),t=(null==e?void 0:e.isEmbed)||!1,n=(0,me.useSelect)(function(e){return{currentId:e(tr).getCurrentId()}},[]).currentId;return n?J().createElement(xm,{albumId:n}):t?null:J().createElement(Sm,null)};function Pm(){var e,t=Da().data,n=Ar({queryKey:["printlabRequirements"],queryFn:(e=Er(Nr().mark(function e(){var t,n;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fr()({path:"/nggpro/v1/commerce/admin/check_commerce_requirements",method:"GET",headers:{"X-WP-Nonce":null===(t=window.imagelyApp)||void 0===t?void 0:t.nonce}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)}),staleTime:3e5,gcTime:6e5}),r=n.data;return{subTabStatus:(0,Z.useMemo)(function(){var e,n=t||{},a=["ecommerce_studio_name","ecommerce_studio_email","ecommerce_studio_street_address","ecommerce_studio_city","ecommerce_home_country","ecommerce_home_state","ecommerce_home_zip","ecommerce_currency"].every(function(e){var t=n[e];return!(null==t||""===String(t).trim())}),l=["ecommerce_email_notification_recipient","ecommerce_email_notification_subject","ecommerce_email_notification_body","ecommerce_email_receipt_subject","ecommerce_email_receipt_body"].every(function(e){var t=n[e];return!(null==t||""===String(t).trim())}),i={cheque:"1"===n.ecommerce_cheque_enable||1===n.ecommerce_cheque_enable||!0===n.ecommerce_cheque_enable,paypal:"1"===n.ecommerce_paypal_enable||1===n.ecommerce_paypal_enable||!0===n.ecommerce_paypal_enable,paypalStd:"1"===n.ecommerce_paypal_std_enable||1===n.ecommerce_paypal_std_enable||!0===n.ecommerce_paypal_std_enable,test:"1"===n.ecommerce_test_gateway_enable||1===n.ecommerce_test_gateway_enable||!0===n.ecommerce_test_gateway_enable,stripe:"1"===n.ecommerce_stripe_enable||1===n.ecommerce_stripe_enable||!0===n.ecommerce_stripe_enable,paypalCheckout:"1"===n.ecommerce_paypal_checkout_enable||1===n.ecommerce_paypal_checkout_enable||!0===n.ecommerce_paypal_checkout_enable,braintree:"1"===n.ecommerce_braintree_enable||1===n.ecommerce_braintree_enable||!0===n.ecommerce_braintree_enable},o=Object.values(i).some(Boolean),s=i.cheque&&!(n.ecommerce_cheque_instructions&&String(n.ecommerce_cheque_instructions).trim())||i.paypal&&(!n.ecommerce_paypal_email||!n.ecommerce_paypal_username||!n.ecommerce_paypal_password||!n.ecommerce_paypal_signature)||i.paypalStd&&!n.ecommerce_paypal_std_email||i.stripe&&(!n.ecommerce_stripe_key_public||!n.ecommerce_stripe_key_private)||i.paypalCheckout&&(!n.ecommerce_paypal_checkout_client_id||!n.ecommerce_paypal_checkout_client_secret)||i.braintree&&(!n.ecommerce_braintree_merchant_id||!n.ecommerce_braintree_public_key||!n.ecommerce_braintree_private_key),c=o&&!s,u=["ecommerce_page_checkout","ecommerce_page_thanks","ecommerce_page_cancel","ecommerce_page_digital_downloads","ecommerce_cart_menu_item","ecommerce_default_pricelist"].every(function(e){var t=n[e];return!(null==t||""===String(t).trim())}),m="warning";return Boolean(null==r||null===(e=r.status)||void 0===e?void 0:e.card_on_file)&&(m="complete"),{"studio-details":a?"complete":"incomplete","email-setup":l?"complete":"incomplete","payment-setup":c?"complete":"incomplete","page-setup":u?"complete":"incomplete","printlab-integration":m}},[t,r]),requirements:(null==r?void 0:r.status)||null}}var Tm=[{id:"general",label:(0,de.__)("General Info","nggallery"),icon:J().createElement(bn,{className:"h-5 w-5"}),subTabs:[{id:"studio-details",label:(0,de.__)("Studio Details","nggallery")},{id:"email-setup",label:(0,de.__)("Email Setup","nggallery")},{id:"payment-setup",label:(0,de.__)("Payment Setup","nggallery")},{id:"page-setup",label:(0,de.__)("Page Setup","nggallery")},{id:"printlab-integration",label:(0,de.__)("PrintLab Integration","nggallery")}]},{id:"orders",label:(0,de.__)("Orders","nggallery"),icon:J().createElement(vn,{className:"h-5 w-5"})},{id:"proofing",label:(0,de.__)("Proofing","nggallery"),icon:J().createElement(xn,{className:"h-5 w-5"})},{id:"pricelists",label:(0,de.__)("Pricelists","nggallery"),icon:J().createElement(wn,{className:"h-5 w-5"})},{id:"coupons",label:(0,de.__)("Coupons","nggallery"),icon:J().createElement(En,{className:"h-5 w-5"})},{id:"other-options",label:(0,de.__)("Other Options","nggallery"),icon:J().createElement(Cn,{className:"h-5 w-5"})}];const Dm=function(e){var t=e.activeTab,n=e.activeSubTab,r=e.onSubTabChange,a=Tm.find(function(e){return e.id===t}),l=Pm().subTabStatus;return null!=a&&a.subTabs&&0!==a.subTabs.length?J().createElement("div",{className:"mb-6"},J().createElement("h1",{className:"text-2xl font-semibold text-gray-900 mb-6"},(0,de.__)("E-commerce Store Setup","nggallery")),J().createElement("nav",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-8 border-b border-gray-200 overflow-x-auto"},a.subTabs.map(function(e){var t=n===e.id,a=l[e.id],i="complete"===a?"bg-green-500":"warning"===a?"bg-yellow-400":"bg-red-500";return J().createElement("button",{key:e.id,onClick:function(){return r(e.id)},className:"flex items-center space-x-2 pb-4 border-b-2 transition-colors p-4 whitespace-nowrap ".concat(t?"border-green-500 text-green-600 bg-gray-100":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-100")},J().createElement("span",{className:"text-sm font-medium ".concat(t?"text-green-600":"text-gray-600")},e.label),J().createElement("div",{className:"w-4 h-4 rounded-full flex items-center justify-center ".concat(i)},J().createElement(Ft,{className:"w-2.5 h-2.5 text-white"})))}))):null},Im=function(){var e,t,n,r=(0,me.useDispatch)(tr),a=hr((0,Z.useState)("all"),2),l=a[0],i=a[1],o=hr((0,Z.useState)({customer:!0,timesUsed:!0,date:!0,status:!0}),1)[0],s=hr((0,Z.useState)(new Set),2),c=s[0],u=s[1],m=hr((0,Z.useState)(""),2),d=m[0],g=m[1],p=Fu(d,300),f=hr((0,Z.useState)("date"),2),y=f[0],h=f[1],_=hr((0,Z.useState)("desc"),2),b=_[0],v=_[1],x=hr((0,Z.useState)(1),2),w=x[0],E=x[1],C=Da().data,N=(null==C?void 0:C.admin_table_per_page)||20,k=hr((0,Z.useState)(!1),2),S=k[0],O=k[1],P=hr((0,Z.useState)("select"),2),T=P[0],D=P[1],I=(e={page:w,per_page:N,search:p,sort:b&&y?{customer:"coupon_code",timesUsed:"times_used",date:"date",status:"status"}[y]||"date":void 0,order:b||void 0,status:l,period:T},n=new URLSearchParams,null!=e&&e.page&&n.append("page",String(e.page)),null!=e&&e.per_page&&n.append("per_page",String(e.per_page)),null!=e&&e.search&&n.append("search",e.search),null!=e&&e.sort&&n.append("sort",e.sort),null!=e&&e.order&&n.append("order",e.order),null!=e&&e.status&&n.append("status",e.status),null!=e&&e.period&&n.append("period",e.period),Ar({queryKey:Qa(e||{}),queryFn:(t=Er(Nr().mark(function e(){var t,r,a,l,i,o,s;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=null===(t=window.imagelyApp)||void 0===t?void 0:t.nonce,a="/imagely/v1/coupons".concat(n.toString()?"?".concat(n.toString()):""),e.next=4,Fr()({path:a,method:"GET",headers:{"X-WP-Nonce":r}});case 4:if(l=e.sent,!Array.isArray(l)){e.next=8;break}return i=l.map(Va),e.abrupt("return",{coupons:i,pagination:{total:i.length,total_pages:1,per_page:i.length,current_page:1}});case 8:return o=((null==l?void 0:l.coupons)||[]).map(function(e){return e&&(e.coupon_code||e.coupon_for)?Ka(e):Va(e)}),s=(null==l?void 0:l.pagination)||{total:o.length,total_pages:1,per_page:o.length,current_page:1},e.abrupt("return",{coupons:o,pagination:s});case 11:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),staleTime:3e4,gcTime:6e5,retry:0,throwOnError:!1,refetchOnWindowFocus:!0,refetchOnMount:!1,placeholderData:function(e){return e}})),j=I.data,A=I.isLoading;(0,Z.useEffect)(function(){E(1)},[p]),(0,Z.useEffect)(function(){u(new Set),q("bulk"),F(!1)},[p,l,T,y,b]);var L=function(e){var t=new Date,n=e.start_date?new Date(e.start_date):null,r=e.end_date?new Date(e.end_date):null;return r&&r<t?"Completed":n&&n>t?"Upcoming":"Ongoing"},M=hr((0,Z.useState)(!1),2),R=M[0],F=M[1],z=hr((0,Z.useState)("bulk"),2),B=z[0],q=z[1],H=function(e){if(!e)return"";var t=new Date(e),n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),l=t.getHours(),i=String(t.getMinutes()).padStart(2,"0"),o=l>=12?"pm":"am";return 0==(l%=12)&&(l=12),"".concat(n,"-").concat(r,"-").concat(a,", ").concat(l,":").concat(i).concat(o)},G=(0,Z.useMemo)(function(){return((null==j?void 0:j.coupons)||[]).filter(function(e){var t=L(e);return!!("all"===l||"current"===l&&"Ongoing"===t||"upcoming"===l&&"Upcoming"===t||"completed"===l&&"Completed"===t)&&!!function(e){var t=e.start_date||e.date;if(!t)return!0;var n=new Date(t),r=new Date,a=r.getMonth(),l=r.getFullYear();if("select"===T)return!0;if("this_month"===T)return n.getMonth()===a&&n.getFullYear()===l;if("last_month"===T){var i=new Date(l,a-1,1);return n.getMonth()===i.getMonth()&&n.getFullYear()===i.getFullYear()}return"this_year"!==T||n.getFullYear()===l}(e)}).map(function(e){return{id:e.id,customer:"".concat(e.coupon_code,"\n").concat(e.coupon_for),timesUsed:"number"==typeof e.times_used?e.times_used:0,date:H(e.date),status:e.status||L(e)}})},[j,l,T]),U=(0,Z.useMemo)(function(){return[{key:"customer",label:(0,de.__)("Coupon Name","nggallery"),sortType:"backend",render:function(e){var t=hr(String(e.customer).split("\n"),2),n=t[0],a=t[1];return J().createElement("div",{className:"flex items-start gap-3"},J().createElement("div",null,J().createElement("button",{type:"button",className:"text-gray-900 text-sm font-medium hover:underline",onClick:function(){r.setActiveModal("couponDetails",{data:{id:e.id,couponFor:a,couponCode:n,discountType:"percentage",discountValue:"",startDate:"",endDate:"",usageLimit:""}})}},n),J().createElement("div",{className:"text-gray-500 text-xs"},(0,de.__)("For","nggallery")," ",J().createElement("span",{className:"text-gray-700"},a))))}},{key:"timesUsed",label:(0,de.__)("Times Used","nggallery"),sortType:"backend",render:function(e){return J().createElement("span",{className:"text-sm text-gray-700"},e.timesUsed)}},{key:"date",label:(0,de.__)("Date","nggallery"),sortType:"backend",render:function(e){return J().createElement("span",{className:"text-sm text-gray-700"},e.date)}},{key:"status",label:(0,de.__)("Status","nggallery"),sortType:"backend",render:function(e){return J().createElement("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ".concat("Ongoing"===e.status?"bg-blue-100 text-blue-700":"Upcoming"===e.status?"bg-amber-100 text-amber-800":"bg-green-100 text-green-700")},e.status)}}]},[]);return J().createElement("div",{className:"bg-white rounded-lg shadow-sm"},J().createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4"},J().createElement("div",{className:"flex flex-wrap gap-2"},J().createElement("button",{className:"px-3 py-1.5 rounded-full text-sm font-medium ".concat("all"===l?"bg-gray-900 text-white":"text-gray-700 hover:text-gray-900"),onClick:function(){i("all"),E(1)}},(0,de.__)("All","nggallery")),J().createElement("button",{className:"px-3 py-1.5 rounded-full text-sm font-medium ".concat("current"===l?"bg-gray-900 text-white":"text-gray-700 hover:text-gray-900"),onClick:function(){i("current"),E(1)}},(0,de.__)("Current","nggallery")),J().createElement("button",{className:"px-3 py-1.5 rounded-full text-sm font-medium ".concat("upcoming"===l?"bg-gray-900 text-white":"text-gray-700 hover:text-gray-900"),onClick:function(){i("upcoming"),E(1)}},(0,de.__)("Upcoming","nggallery")),J().createElement("button",{className:"px-3 py-1.5 rounded-full text-sm font-medium ".concat("completed"===l?"bg-gray-900 text-white":"text-gray-700 hover:text-gray-900"),onClick:function(){i("completed"),E(1)}},(0,de.__)("Completed","nggallery"))),J().createElement("button",{type:"button",className:"inline-flex items-center gap-2 rounded-md bg-green-500 text-white px-4 py-2 text-sm font-medium hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500 w-full sm:w-auto justify-center sm:justify-start",onClick:function(){return r.setActiveModal("couponForm",{onSuccess:function(){}})}},(0,de.__)("Add New Coupon","nggallery"),J().createElement("span",{className:"inline-flex items-center justify-center w-5 h-5 rounded-full border border-white"},J().createElement(Bt,{className:"w-4 h-4"})))),J().createElement("div",{className:"flex flex-col sm:flex-row gap-3 sm:items-center sm:justify-between mb-4"},J().createElement("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3"},c.size>0&&J().createElement(su,{isOpen:R,onClose:function(){return F(!1)},onToggle:function(){return F(!R)},activeClasses:"relative w-full sm:min-w-[190px] border border-gray-300 bg-gray-50 text-gray-700 px-4 py-2 h-10 rounded-md text-sm font-medium flex items-center justify-between",trigger:J().createElement("button",{type:"button",className:"relative w-full sm:min-w-[190px] border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 px-4 py-2 h-10 rounded-md text-sm font-medium flex items-center justify-between"},J().createElement("span",null,(0,de.__)("Bulk Actions","nggallery")),J().createElement(Rt,{className:"w-4 h-4 text-gray-400"}))},J().createElement("div",{className:"w-48 py-1"},[{key:"delete",label:(0,de.__)("Delete Selected","nggallery")}].map(function(e){return J().createElement("button",{key:e.key,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 ".concat(B===e.key?"text-gray-900":"text-gray-700"),onClick:Er(Nr().mark(function t(){var n,a;return Nr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:q(e.key),F(!1),"delete"===e.key&&c.size>0&&(n=Array.from(c),a=n.map(function(e){var t=G.find(function(t){return t.id===e}),n=hr(String((null==t?void 0:t.customer)||"").split("\n"),2),r=n[0],a=n[1];return{id:e,title:a||"",code:r||""}}),r.setActiveModal("deleteCoupons",{couponIds:n,items:a,title:(0,de.__)("Delete Coupons","nggallery"),onConfirm:function(){var e=Er(Nr().mark(function e(){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:u(new Set);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}));case 3:case"end":return t.stop()}},t)}))},e.label)}))),J().createElement(su,{isOpen:S,onClose:function(){return O(!1)},onToggle:function(){return O(!S)},activeClasses:"relative w-full sm:min-w-[180px] border border-gray-300 bg-gray-50 text-gray-700 px-4 h-10 rounded-md text-sm font-medium flex items-center justify-between",trigger:J().createElement("button",{type:"button",className:"relative w-full sm:min-w-[180px] border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 px-4 h-10 rounded-md text-sm font-medium flex items-center justify-between"},J().createElement("span",{className:"flex items-center"},J().createElement(Gn,{className:"w-4 h-4 text-gray-400 mr-2"}),J().createElement("span",null,"select"===T&&(0,de.__)("All Dates","nggallery"),"this_month"===T&&(0,de.__)("This Month","nggallery"),"last_month"===T&&(0,de.__)("Last Month","nggallery"),"this_year"===T&&(0,de.__)("This Year","nggallery"))),J().createElement(Rt,{className:"w-4 h-4 text-gray-400"}))},J().createElement("div",{className:"w-56 py-1"},[{key:"select",label:(0,de.__)("All Dates","nggallery")},{key:"this_month",label:(0,de.__)("This Month","nggallery")},{key:"last_month",label:(0,de.__)("Last Month","nggallery")},{key:"this_year",label:(0,de.__)("This Year","nggallery")}].map(function(e){return J().createElement("button",{key:e.key,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 ".concat(T===e.key?"text-gray-900":"text-gray-700"),onClick:function(){D(e.key),O(!1),E(1)}},e.label)})))),J().createElement("div",{className:"w-full sm:w-auto"},J().createElement("div",{className:"relative"},J().createElement("span",{className:"pointer-events-none absolute inset-y-0 left-3 flex items-center text-gray-400"},J().createElement($t,{className:"w-5 h-5"})),J().createElement("input",{type:"text",placeholder:(0,de.__)("Search Coupons","nggallery"),className:"w-full sm:w-72 border border-gray-300 rounded-md pl-10 pr-3 py-2 text-sm text-gray-700 placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",value:d,onChange:function(e){return g(e.target.value)}})))),J().createElement(Em,{isLoading:A,items:G,visibleColumns:o,selectedItems:c,onSelectAll:function(e){e?u(new Set(G.map(function(e){return e.id}))):(u(new Set),q("bulk"),F(!1))},onSelectItem:function(e){var t=new Set(c);t.has(e)?t.delete(e):t.add(e),u(t),0===t.size&&(q("bulk"),F(!1))},columns:U,onSort:function(e,t){h(t?e:null),v(t),E(1)},sortColumn:y,sortDirection:b,actionsHeaderLabel:(0,de.__)("Action","nggallery"),actionCellRenderer:function(e){var t=hr(String(e.customer).split("\n"),2),n=t[0],a=t[1];return J().createElement("div",{className:"flex flex-col items-center text-gray-500"},J().createElement("button",{type:"button",className:"flex flex-col items-center text-red-600 hover:text-red-700",onClick:function(){var t;r.setActiveModal("deleteCoupons",{couponIds:[e.id],items:[{id:e.id,title:a,code:n}],title:(0,de.__)("Delete Coupon","nggallery"),onConfirm:(t=Er(Nr().mark(function e(){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:u(new Set);case 1:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)})})}},J().createElement(Un,{className:"w-4 h-4 mb-1"}),J().createElement("span",{className:"text-xs"},(0,de.__)("Delete","nggallery"))))},notFoundContent:J().createElement("div",{className:"py-16"},J().createElement("div",{className:"flex flex-col items-center justify-center text-center text-gray-500"},J().createElement("div",{className:"mb-4"},J().createElement(Qn,{className:"w-16 h-16 opacity-60"})),J().createElement("p",{className:"text-sm mb-2"},(0,de.__)("No Coupons so far!","nggallery")),J().createElement("button",{type:"button",className:"inline-flex items-center gap-1 text-green-500 hover:text-green-600 text-sm font-medium",onClick:function(){return r.setActiveModal("couponForm",{onSuccess:function(){}})}},(0,de.__)("Add New Coupon","nggallery"),J().createElement(Bt,{className:"w-4 h-4"}))))}),(null==j?void 0:j.pagination)&&j.pagination.total_pages>1&&J().createElement("div",{className:"border-t"},J().createElement(Ru,{currentPage:w,totalPages:j.pagination.total_pages,perPage:j.pagination.per_page,total:j.pagination.total,onPageChange:E,itemLabel:(0,de.__)("Coupons","nggallery"),showItemCount:!0})))};var jm=function(e){var t=e.settings,n=e.tabId,r=e.mutation,a=e.getMutationParams,l=e.debounceDelay,i=void 0===l?1e3:l,o=ea(),s=o.showSuccess,c=o.showError,u=o.showInfo,m=o.clearNotifications,d=Fu(t,i),g=(0,Z.useRef)(null),p=(0,Z.useRef)(!1);return(0,Z.useEffect)(function(){t&&!g.current&&(g.current=structuredClone(t),p.current=!1)},[t,n]),(0,Z.useEffect)(function(){if(d&&p.current&&g.current&&JSON.stringify(d)!==JSON.stringify(g.current)&&!r.isPending){u((0,de.__)("Saving changes...","nggallery"));var e=a(d,n);r.mutate(e,{onSuccess:function(){g.current=structuredClone(d),m(),s((0,de.__)("Settings saved automatically","nggallery"))},onError:function(){c((0,de.__)("Failed to save settings automatically","nggallery"))}})}},[d,n,r,a,s,c,u,m]),{markUserInteraction:(0,Z.useCallback)(function(){p.current=!0},[]),hasUnsavedChanges:p.current&&g.current&&JSON.stringify(d)!==JSON.stringify(g.current)}};function Am(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Lm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Am(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Am(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const Mm=function(){var e=Da(),t=e.data,r=e.isLoading,a=Ia(),l=te(),i=ea(),o=i.showSuccess,s=i.showError,c=(0,Z.useMemo)(function(){var e,n;return t?{ecommerce_enable_email_notification:Boolean(null===(e=t.ecommerce_enable_email_notification)||void 0===e||e),ecommerce_email_notification_recipient:t.ecommerce_email_notification_recipient||"",ecommerce_email_notification_subject:t.ecommerce_email_notification_subject||(0,de.__)("New Purchase!","nggallery"),ecommerce_email_notification_body:t.ecommerce_email_notification_body||(0,de.__)("You received a payment of %%total_amount%% from %%customer_name%% (%%email%%). For more details, visit: %%order_details_page%%\n\n%%gateway_admin_note%%\n\nHere is a comma separated list of the image file names. You can copy and\npaste this in your favorite image management software to quickly search for\nand find all selected images.\n\nFiles: %%file_list%%","nggallery"),ecommerce_enable_email_receipt:Boolean(null===(n=t.ecommerce_enable_email_receipt)||void 0===n||n),ecommerce_email_receipt_subject:t.ecommerce_email_receipt_subject||(0,de.__)("Thank you for your purchase!","nggallery"),ecommerce_email_receipt_body:t.ecommerce_email_receipt_body||(0,de.__)("Thank you for your order, %%customer_name%%.\n\nYou ordered %%item_count%% items, and have been billed a total of %%total_amount%%.\n\nTo review your order, please go to %%order_details_page%%.\n\nThanks for shopping at %%site_url%%!","nggallery")}:null},[t]),u=hr((0,Z.useState)(null),2),m=u[0],d=u[1];(0,Z.useEffect)(function(){c&&!m&&d(c)},[c,m]);var g=jm({settings:m,tabId:"ecommerce-email-setup",mutation:{mutate:function(e,t){a.mutate(e,Lm(Lm({},t),{},{onSuccess:function(){for(var e,n,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];null==t||null===(e=(n=t).onSuccess)||void 0===e||e.call.apply(e,[n].concat(a)),l.invalidateQueries({queryKey:["printlabRequirements"]})}}))},isPending:a.isPending},getMutationParams:function(e){return e||{}},debounceDelay:1e3}),p=g.markUserInteraction;if(r||!m)return J().createElement(ar,{size:"md",text:(0,de.__)("Loading settings...","nggallery")});var f=function(e,t){d(function(r){return r?Lm(Lm({},r),{},n({},e,t)):r}),p()},y=(0,de.__)("Wrap placeholders in %%param%%. Accepted placeholders: customer_name, email, total_amount, item_count, shipping_street_address, shipping_city, shipping_state, shipping_zip, shipping_country, order_id, hash, order_details_page, admin_email, blog_name, blog_description, blog_url, site_url, home_url, and file_list","nggallery"),h=(0,de.__)("Wrap placeholders in %%param%%. Accepted placeholders: customer_name, email, total_amount, item_count, shipping_street_address, shipping_city, shipping_state, shipping_zip, shipping_country, order_id, hash, order_details_page, admin_email, blog_name, blog_description, blog_url, site_url, and home_url","nggallery"),_=function(){var e=Er(Nr().mark(function e(t){var n,r;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="%%".concat(t,"%%"),e.prev=1,e.next=4,navigator.clipboard.writeText(n);case 4:o((0,de.__)("Placeholder copied to clipboard!","nggallery")),e.next=15;break;case 7:e.prev=7,e.t0=e.catch(1),(r=document.createElement("textarea")).value=n,document.body.appendChild(r),r.select();try{document.execCommand("copy"),o((0,de.__)("Placeholder copied to clipboard!","nggallery"))}catch(e){s((0,de.__)("Failed to copy placeholder","nggallery"))}document.body.removeChild(r);case 15:case"end":return e.stop()}},e,null,[[1,7]])}));return function(t){return e.apply(this,arguments)}}();return J().createElement("div",{className:"bg-white rounded-lg shadow-sm p-6"},J().createElement("div",{className:"mb-6"},J().createElement("h2",{className:"text-xl font-semibold text-gray-900 mb-2"},(0,de.__)("Email Setup","nggallery")),J().createElement("p",{className:"text-gray-600 text-sm"},(0,de.__)("Configure email notifications and templates for your eCommerce orders.","nggallery"))),J().createElement("div",{className:"mb-8"},J().createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4"},(0,de.__)("Order Notification (Admin)","nggallery")),J().createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},J().createElement("div",{className:"md:col-span-2"},J().createElement(Ml,{id:"ecommerce_enable_email_notification",name:"ecommerce_enable_email_notification",checked:Boolean(m.ecommerce_enable_email_notification),onChange:function(e){return f("ecommerce_enable_email_notification",e.target.checked)},label:(0,de.__)("Enable order notification e-mail","nggallery"),help:(0,de.__)("Send an e-mail notification to the admin when an order is placed.","nggallery")})),J().createElement("div",null,J().createElement(dl,{type:"text",id:"ecommerce_email_notification_recipient",name:"ecommerce_email_notification_recipient",value:m.ecommerce_email_notification_recipient,onChange:function(e){return f("ecommerce_email_notification_recipient",e.target.value)},label:(0,de.__)("Order notification e-mail recipient:","nggallery"),placeholder:(0,de.__)("john@example.com","nggallery")})),J().createElement("div",null,J().createElement(dl,{type:"text",id:"ecommerce_email_notification_subject",name:"ecommerce_email_notification_subject",value:m.ecommerce_email_notification_subject,onChange:function(e){return f("ecommerce_email_notification_subject",e.target.value)},label:(0,de.__)("Order notification e-mail subject:","nggallery"),placeholder:(0,de.__)("Subject","nggallery")})),J().createElement("div",{className:"md:col-span-2"},J().createElement(Ol,{id:"ecommerce_email_notification_body",name:"ecommerce_email_notification_body",value:m.ecommerce_email_notification_body,onChange:function(e){return f("ecommerce_email_notification_body",e.target.value)},label:(0,de.__)("Order notification e-mail content:","nggallery"),help:y,rows:8}),J().createElement("div",{className:"mt-2 flex flex-wrap gap-2 items-center"},J().createElement("span",{className:"text-xs text-gray-500"},(0,de.__)("Placeholders:","nggallery")),["customer_name","email","total_amount","item_count","shipping_street_address","shipping_city","shipping_state","shipping_zip","shipping_country","order_id","hash","order_details_page","admin_email","blog_name","blog_description","blog_url","site_url","home_url","file_list"].map(function(e){return J().createElement("button",{key:e,type:"button",onClick:function(){return _(e)},className:"bg-gray-100 px-2.5 py-1 rounded text-xs font-mono text-gray-600 hover:bg-gray-200 transition-colors cursor-pointer border-none",title:(0,de.__)("Click to copy","nggallery")},"%%".concat(e,"%%"))}))))),J().createElement("div",null,J().createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4"},(0,de.__)("Customer Receipt","nggallery")),J().createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},J().createElement("div",{className:"md:col-span-2"},J().createElement(Ml,{id:"ecommerce_enable_email_receipt",name:"ecommerce_enable_email_receipt",checked:Boolean(m.ecommerce_enable_email_receipt),onChange:function(e){return f("ecommerce_enable_email_receipt",e.target.checked)},label:(0,de.__)("Send e-mail receipt to customer?","nggallery"),help:(0,de.__)("If enabled a receipt will be sent to the customer after successful checkout","nggallery")})),J().createElement("div",null,J().createElement(dl,{type:"text",id:"ecommerce_email_receipt_subject",name:"ecommerce_email_receipt_subject",value:m.ecommerce_email_receipt_subject,onChange:function(e){return f("ecommerce_email_receipt_subject",e.target.value)},label:(0,de.__)("E-mail subject:","nggallery"),placeholder:(0,de.__)("Subject","nggallery")})),J().createElement("div",{className:"md:col-span-2"},J().createElement(Ol,{id:"ecommerce_email_receipt_body",name:"ecommerce_email_receipt_body",value:m.ecommerce_email_receipt_body,onChange:function(e){return f("ecommerce_email_receipt_body",e.target.value)},label:(0,de.__)("E-mail content:","nggallery"),help:h,rows:8}),J().createElement("div",{className:"mt-2 flex flex-wrap gap-2 items-center"},J().createElement("span",{className:"text-xs text-gray-500"},(0,de.__)("Placeholders:","nggallery")),["customer_name","email","total_amount","item_count","shipping_street_address","shipping_city","shipping_state","shipping_zip","shipping_country","order_id","hash","order_details_page","admin_email","blog_name","blog_description","blog_url","site_url","home_url"].map(function(e){return J().createElement("button",{key:e,type:"button",onClick:function(){return _(e)},className:"bg-gray-100 px-2.5 py-1 rounded text-xs font-mono text-gray-600 hover:bg-gray-200 transition-colors cursor-pointer border-none",title:(0,de.__)("Click to copy","nggallery")},"%%".concat(e,"%%"))}))))))};function Rm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Fm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rm(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rm(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const zm=function(){var e,t=Da(),r=t.data,a=t.isLoading,l=Ia(),i=te(),o=qa({enabled:"pro"===nr}),s=o.data,c=o.isLoading,u=function(){var e=hr((0,Z.useState)([]),2),t=e[0],n=e[1],r=hr((0,Z.useState)(!0),2),a=r[0],l=r[1];return(0,Z.useEffect)(function(){var e=!0,t=function(){var t=Er(Nr().mark(function t(){var r;return Nr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Fr()({path:"/wp/v2/pages?per_page=100&status=publish"});case 3:r=t.sent,e&&n(r),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e&&n([]);case 10:return t.prev=10,e&&l(!1),t.finish(10);case 13:case"end":return t.stop()}},t,null,[[0,7,10,13]])}));return function(){return t.apply(this,arguments)}}();return t(),function(){e=!1}},[]),{pages:t,loading:a}}(),m=u.pages,d=u.loading,g=hr((0,Z.useState)([]),2),p=g[0],f=g[1],y=ea(),h=y.showSuccess,_=y.showError,b=(0,Z.useMemo)(function(){if(!r)return null;var e=r;return{ecommerce_page_checkout:String(e.ecommerce_page_checkout||""),ecommerce_page_thanks:String(e.ecommerce_page_thanks||""),ecommerce_page_cancel:String(e.ecommerce_page_cancel||""),ecommerce_page_digital_downloads:String(e.ecommerce_page_digital_downloads||""),ecommerce_cart_menu_item:String(e.ecommerce_cart_menu_item||"none"),ecommerce_default_pricelist:null===e.ecommerce_default_pricelist||void 0===e.ecommerce_default_pricelist?null:String(e.ecommerce_default_pricelist)}},[r]),v=hr((0,Z.useState)(null),2),x=v[0],w=v[1],E=hr((0,Z.useState)({open:!1,field:null,title:"",isCreating:!1}),2),C=E[0],N=E[1];(0,Z.useEffect)(function(){b&&!x&&w(b)},[b,x]);var k=jm({settings:x,tabId:"ecommerce-page-setup",mutation:{mutate:function(e,t){l.mutate(e,Fm(Fm({},t),{},{onSuccess:function(){for(var e,n,r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];null==t||null===(e=(n=t).onSuccess)||void 0===e||e.call.apply(e,[n].concat(a)),i.invalidateQueries({queryKey:["printlabRequirements"]})}}))},isPending:l.isPending},getMutationParams:function(e){return e||{}},debounceDelay:1e3}),S=k.markUserInteraction,O=function(e,t){w(function(r){return r?Fm(Fm({},r),{},n({},e,t)):r}),S()},P={ecommerce_page_checkout:{defaultTitle:(0,de.__)("Shopping Cart","nggallery"),content:"[ngg_pro_checkout]"},ecommerce_page_thanks:{defaultTitle:(0,de.__)("Thanks","nggallery"),content:"[ngg_pro_order_details]"},ecommerce_page_cancel:{defaultTitle:(0,de.__)("Order Cancelled","nggallery"),content:(0,de.__)("Your order was cancelled","nggallery")},ecommerce_page_digital_downloads:{defaultTitle:(0,de.__)("Digital Downloads","nggallery"),content:"[ngg_pro_digital_downloads]"},ecommerce_cart_menu_item:void 0,ecommerce_default_pricelist:void 0},T=function(e){var t=P[e];t&&N({open:!0,field:e,title:t.defaultTitle,isCreating:!1})},D=function(){var e=Er(Nr().mark(function e(){var t,r,a,l,i,o;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(C.field){e.next=2;break}return e.abrupt("return");case 2:if(t=P[C.field]){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,N(function(e){return Fm(Fm({},e),{},{isCreating:!0})}),a=null===(r=window.imagelyApp)||void 0===r?void 0:r.nonce,e.next=10,Fr()({path:"/wp/v2/pages",method:"POST",headers:{"X-WP-Nonce":a,"Content-Type":"application/json"},data:{title:C.title||t.defaultTitle,content:t.content,status:"publish"}});case 10:l=e.sent,(i=String((null==l?void 0:l.id)||""))&&(w(function(e){return e?Fm(Fm({},e),{},n({},C.field,i)):e}),S(),h((0,de.__)("Page created and selected.","nggallery")),o=null!=l&&l.title&&l.title.rendered?l.title.rendered:C.title||"",f(function(e){return[{id:Number(i),title:{rendered:o}}].concat(zr(e))})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),_((0,de.__)("Failed to create page","nggallery"));case 18:return e.prev=18,N({open:!1,field:null,title:"",isCreating:!1}),e.finish(18);case 21:case"end":return e.stop()}},e,null,[[5,15,18,21]])}));return function(){return e.apply(this,arguments)}}();if(a||!x)return J().createElement(ar,{size:"md",text:(0,de.__)("Loading settings...","nggallery")});var I=[].concat(zr(p),zr(m)).reduce(function(e,t){return e.find(function(e){return e.id===t.id})||e.push(t),e},[]).map(function(e){var t;return{value:String(e.id),label:(null===(t=e.title)||void 0===t?void 0:t.rendered)||"#".concat(e.id)}}),j=[{value:"none",label:(0,de.__)("None","nggallery")},{value:"text",label:(0,de.__)("Text","nggallery")},{value:"icon",label:(0,de.__)("Icon","nggallery")}],A=((null==s?void 0:s.pricelists)||[]).map(function(e){return{value:String(e.id),label:e.title}});return J().createElement(J().Fragment,null,J().createElement("div",{className:"bg-white rounded-lg shadow-sm p-6"},J().createElement("div",{className:"mb-6"},J().createElement("h2",{className:"text-xl font-semibold text-gray-900 mb-2"},(0,de.__)("Page Setup","nggallery")),J().createElement("p",{className:"text-gray-600 text-sm"},(0,de.__)("Configure cart, checkout, and other eCommerce page settings.","nggallery"))),J().createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},J().createElement("div",null,J().createElement(ml,{id:"ecommerce_page_checkout",name:"ecommerce_page_checkout",value:x.ecommerce_page_checkout,onChange:function(e){var t=e.target.value;"__create__"!==t?O("ecommerce_page_checkout",t):T("ecommerce_page_checkout")},label:(0,de.__)("Checkout page","nggallery"),help:(0,de.__)('This page requires the [ngg_pro_checkout] shortcode, which will be automatically added if not already present. Selecting "Create new" will create a new page that will appear in your Primary Menu unless you\'ve customized your menu settings.',"nggallery")},d?J().createElement("option",{value:""},(0,de.__)("Loading...","nggallery")):J().createElement(J().Fragment,null,J().createElement("option",{value:""},(0,de.__)("Select page","nggallery")),J().createElement("option",{value:"__create__",className:"text-green-600"},(0,de.__)("Create new","nggallery")),I.map(function(e){return J().createElement("option",{key:e.value,value:e.value},e.label)})))),J().createElement("div",null,J().createElement(ml,{id:"ecommerce_page_thanks",name:"ecommerce_page_thanks",value:x.ecommerce_page_thanks,onChange:function(e){var t=e.target.value;"__create__"!==t?O("ecommerce_page_thanks",t):T("ecommerce_page_thanks")},label:(0,de.__)("Thank-you page","nggallery"),help:(0,de.__)('This page should have the [ngg_pro_order_details] shortcode, which will be automatically added if not already present. Selecting "Create new" will create a new page that will appear in your Primary Menu unless you\'ve customized your menu settings.',"nggallery")},d?J().createElement("option",{value:""},(0,de.__)("Loading...","nggallery")):J().createElement(J().Fragment,null,J().createElement("option",{value:""},(0,de.__)("Select page","nggallery")),J().createElement("option",{value:"__create__",className:"text-green-600"},(0,de.__)("Create new","nggallery")),I.map(function(e){return J().createElement("option",{key:e.value,value:e.value},e.label)})))),J().createElement("div",null,J().createElement(ml,{id:"ecommerce_page_cancel",name:"ecommerce_page_cancel",value:x.ecommerce_page_cancel,onChange:function(e){var t=e.target.value;"__create__"!==t?O("ecommerce_page_cancel",t):T("ecommerce_page_cancel")},label:(0,de.__)("Cancel page","nggallery"),help:(0,de.__)('Selecting "Create new" will create a new page that will appear in your Primary Menu unless you\'ve customized your menu settings.',"nggallery")},d?J().createElement("option",{value:""},(0,de.__)("Loading...","nggallery")):J().createElement(J().Fragment,null,J().createElement("option",{value:""},(0,de.__)("Select page","nggallery")),J().createElement("option",{value:"__create__",className:"text-green-600"},(0,de.__)("Create new","nggallery")),I.map(function(e){return J().createElement("option",{key:e.value,value:e.value},e.label)})))),J().createElement("div",null,J().createElement(ml,{id:"ecommerce_page_digital_downloads",name:"ecommerce_page_digital_downloads",value:x.ecommerce_page_digital_downloads,onChange:function(e){var t=e.target.value;"__create__"!==t?O("ecommerce_page_digital_downloads",t):T("ecommerce_page_digital_downloads")},label:(0,de.__)("Digital downloads page","nggallery"),help:(0,de.__)('This page requires the [ngg_pro_digital_downloads] shortcode, which will be automatically added if not already present. Selecting "Create new" will create a new page that will appear in your Primary Menu unless you\'ve customized your menu settings.',"nggallery")},d?J().createElement("option",{value:""},(0,de.__)("Loading...","nggallery")):J().createElement(J().Fragment,null,J().createElement("option",{value:""},(0,de.__)("Select page","nggallery")),J().createElement("option",{value:"__create__",className:"text-green-600"},(0,de.__)("Create new","nggallery")),I.map(function(e){return J().createElement("option",{key:e.value,value:e.value},e.label)})))),J().createElement("div",null,J().createElement(ml,{id:"ecommerce_cart_menu_item",name:"ecommerce_cart_menu_item",value:x.ecommerce_cart_menu_item,onChange:function(e){return O("ecommerce_cart_menu_item",e.target.value)},label:(0,de.__)("Cart menu icon","nggallery"),help:(0,de.__)("Determines the appearance of the Checkout page selected above when shown as an entry inside a menu. When a setting other than None is selected, the checkout page will be added to the first navigation menu registered by your theme.","nggallery")},j.map(function(e){return J().createElement("option",{key:e.value,value:e.value},e.label)}))),J().createElement("div",null,J().createElement(ml,{id:"ecommerce_default_pricelist",name:"ecommerce_default_pricelist",value:String(null!==(e=x.ecommerce_default_pricelist)&&void 0!==e?e:""),onChange:function(e){return O("ecommerce_default_pricelist",e.target.value)},label:(0,de.__)("Default pricelist","nggallery"),help:(0,de.__)("New galleries will be assigned this pricelist","nggallery")},c?J().createElement("option",{value:""},(0,de.__)("Loading...","nggallery")):J().createElement(J().Fragment,null,J().createElement("option",{value:""},(0,de.__)("None","nggallery")),A.map(function(e){return J().createElement("option",{key:e.value,value:e.value},e.label)})))))),J().createElement(xr,{isOpen:C.open,onClose:function(){return N({open:!1,field:null,title:"",isCreating:!1})},title:(0,de.__)("Create Page","nggallery")},J().createElement("div",{className:"space-y-4"},J().createElement(dl,{type:"text",id:"new_page_title",name:"new_page_title",value:C.title,onChange:function(e){return N(function(t){return Fm(Fm({},t),{},{title:e.target.value})})},label:(0,de.__)("Title","nggallery")}),J().createElement("div",{className:"flex gap-2 justify-end"},J().createElement("button",{type:"button",className:"px-4 py-2 text-sm rounded bg-gray-100 hover:bg-gray-200",onClick:function(){return N({open:!1,field:null,title:"",isCreating:!1})},disabled:C.isCreating},(0,de.__)("Cancel","nggallery")),J().createElement("button",{type:"button",className:"px-4 py-2 text-sm rounded bg-green-600 text-white hover:bg-green-700 disabled:opacity-60",onClick:D,disabled:C.isCreating||!C.title.trim()},C.isCreating?(0,de.__)("Creating...","nggallery"):(0,de.__)("Create","nggallery"))))))};function Bm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function qm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bm(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bm(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const Hm=function(){var e=Da(),t=e.data,r=e.isLoading,a=Ia(),l=te(),i=ea().showError,o=(0,Z.useMemo)(function(){var e,n,r,a,l,i,o,s,c,u,m,d,g;if(!t)return null;var p=t;return{ecommerce_cheque_enable:Ca(null!==(e=p.ecommerce_cheque_enable)&&void 0!==e&&e),ecommerce_cheque_instructions:p.ecommerce_cheque_instructions||(0,de.__)("<p>Thanks very much for your purchase! We'll be in touch shortly via email to confirm your order and to provide details on payment.</p>","nggallery"),ecommerce_paypal_enable:Ca(null!==(n=p.ecommerce_paypal_enable)&&void 0!==n&&n),ecommerce_paypal_sandbox:Ca(null===(r=p.ecommerce_paypal_sandbox)||void 0===r||r),ecommerce_paypal_email:p.ecommerce_paypal_email||"",ecommerce_paypal_username:p.ecommerce_paypal_username||"",ecommerce_paypal_password:p.ecommerce_paypal_password||"",ecommerce_paypal_signature:p.ecommerce_paypal_signature||"",ecommerce_paypal_std_enable:Ca(null!==(a=p.ecommerce_paypal_std_enable)&&void 0!==a&&a),ecommerce_paypal_std_sandbox:Ca(null===(l=p.ecommerce_paypal_std_sandbox)||void 0===l||l),ecommerce_paypal_std_email:p.ecommerce_paypal_std_email||"",ecommerce_test_gateway_enable:Ca(null!==(i=p.ecommerce_test_gateway_enable)&&void 0!==i&&i),ecommerce_stripe_enable:Ca(null!==(o=p.ecommerce_stripe_enable)&&void 0!==o&&o),ecommerce_stripe_key_public:p.ecommerce_stripe_key_public||"",ecommerce_stripe_key_private:p.ecommerce_stripe_key_private||"",ecommerce_paypal_checkout_enable:Ca(null!==(s=p.ecommerce_paypal_checkout_enable)&&void 0!==s&&s),ecommerce_paypal_checkout_sandbox:Ca(null===(c=p.ecommerce_paypal_checkout_sandbox)||void 0===c||c),ecommerce_paypal_checkout_client_id:p.ecommerce_paypal_checkout_client_id||"",ecommerce_paypal_checkout_client_secret:p.ecommerce_paypal_checkout_client_secret||"",ecommerce_braintree_enable:Ca(null!==(u=p.ecommerce_braintree_enable)&&void 0!==u&&u),ecommerce_braintree_sandbox:Ca(null===(m=p.ecommerce_braintree_sandbox)||void 0===m||m),ecommerce_braintree_merchant_id:p.ecommerce_braintree_merchant_id||"",ecommerce_braintree_public_key:p.ecommerce_braintree_public_key||"",ecommerce_braintree_private_key:p.ecommerce_braintree_private_key||"",ecommerce_braintree_enable_paypal:Ca(null!==(d=p.ecommerce_braintree_enable_paypal)&&void 0!==d&&d),ecommerce_braintree_pass_client_data:Ca(null!==(g=p.ecommerce_braintree_pass_client_data)&&void 0!==g&&g)}},[t]),s=hr((0,Z.useState)(null),2),c=s[0],u=s[1];(0,Z.useEffect)(function(){o&&!c&&u(o)},[o,c]);var m,d,g=jm({settings:c,tabId:"ecommerce-payment-setup",mutation:{mutate:function(e,t){a.mutate(e,qm(qm({},t),{},{onSuccess:function(){for(var e,n,r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];null==t||null===(e=(n=t).onSuccess)||void 0===e||e.call.apply(e,[n].concat(a)),l.invalidateQueries({queryKey:["printlabRequirements"]})}}))},isPending:a.isPending},getMutationParams:function(e){return e||{}},debounceDelay:1e3}),p=g.markUserInteraction,f=function(e,t){u(function(r){return r?qm(qm({},r),{},n({},e,t)):r}),p()},y=(0,Z.useMemo)(function(){if(!c)return{};var e,t,n,r,a,l,i,o,s,u,m,d,g,p={};return c.ecommerce_cheque_enable&&(null!==(e=c.ecommerce_cheque_instructions)&&void 0!==e&&e.trim()||(p.ecommerce_cheque_instructions=(0,de.__)("Instructions are required when Checks are enabled.","nggallery"))),c.ecommerce_paypal_enable&&(null!==(t=c.ecommerce_paypal_email)&&void 0!==t&&t.trim()||(p.ecommerce_paypal_email=(0,de.__)("Email is required.","nggallery")),null!==(n=c.ecommerce_paypal_username)&&void 0!==n&&n.trim()||(p.ecommerce_paypal_username=(0,de.__)("API Username is required.","nggallery")),null!==(r=c.ecommerce_paypal_password)&&void 0!==r&&r.trim()||(p.ecommerce_paypal_password=(0,de.__)("API Password is required.","nggallery")),null!==(a=c.ecommerce_paypal_signature)&&void 0!==a&&a.trim()||(p.ecommerce_paypal_signature=(0,de.__)("API Signature is required.","nggallery"))),c.ecommerce_paypal_std_enable&&(null!==(l=c.ecommerce_paypal_std_email)&&void 0!==l&&l.trim()||(p.ecommerce_paypal_std_email=(0,de.__)("Email is required.","nggallery"))),c.ecommerce_stripe_enable&&(null!==(i=c.ecommerce_stripe_key_public)&&void 0!==i&&i.trim()||(p.ecommerce_stripe_key_public=(0,de.__)("Public key is required.","nggallery")),null!==(o=c.ecommerce_stripe_key_private)&&void 0!==o&&o.trim()||(p.ecommerce_stripe_key_private=(0,de.__)("Private key is required.","nggallery"))),c.ecommerce_paypal_checkout_enable&&(null!==(s=c.ecommerce_paypal_checkout_client_id)&&void 0!==s&&s.trim()||(p.ecommerce_paypal_checkout_client_id=(0,de.__)("Client ID is required.","nggallery")),null!==(u=c.ecommerce_paypal_checkout_client_secret)&&void 0!==u&&u.trim()||(p.ecommerce_paypal_checkout_client_secret=(0,de.__)("Client secret is required.","nggallery"))),c.ecommerce_braintree_enable&&(null!==(m=c.ecommerce_braintree_merchant_id)&&void 0!==m&&m.trim()||(p.ecommerce_braintree_merchant_id=(0,de.__)("Merchant ID is required.","nggallery")),null!==(d=c.ecommerce_braintree_public_key)&&void 0!==d&&d.trim()||(p.ecommerce_braintree_public_key=(0,de.__)("Public key is required.","nggallery")),null!==(g=c.ecommerce_braintree_private_key)&&void 0!==g&&g.trim()||(p.ecommerce_braintree_private_key=(0,de.__)("Private key is required.","nggallery"))),p},[c]);return(0,Z.useEffect)(function(){c&&Object.keys(y).length>0&&i((0,de.__)("Some payment gateway fields are missing or invalid. Please review the highlighted fields.","nggallery"))},[Object.keys(y).join("|")]),r||!c?J().createElement(ar,{size:"md",text:(0,de.__)("Loading settings...","nggallery")}):J().createElement("div",{className:"bg-white rounded-lg shadow-sm p-6"},J().createElement("div",{className:"mb-6"},J().createElement("h2",{className:"text-xl font-semibold text-gray-900 mb-2"},(0,de.__)("Setup Payment Gateway","nggallery"))),J().createElement("div",{className:"mb-8"},J().createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4"},(0,de.__)("Testing Gateway","nggallery")),J().createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},J().createElement("div",{className:"md:col-span-2"},J().createElement(Ml,{id:"ecommerce_test_gateway_enable",name:"ecommerce_test_gateway_enable",checked:Boolean(c.ecommerce_test_gateway_enable),onChange:function(e){return f("ecommerce_test_gateway_enable",e.target.checked)},label:(0,de.__)("Enable Testing Gateway","nggallery"),help:(0,de.__)("Enables a gateway that does not collect payments and sends users directly to their order confirmation","nggallery")})))),J().createElement("hr",{className:"my-6"}),J().createElement("div",{className:"mb-8"},J().createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4"},(0,de.__)("Checks","nggallery")),J().createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},J().createElement("div",{className:"md:col-span-2"},J().createElement(Ml,{id:"ecommerce_cheque_enable",name:"ecommerce_cheque_enable",checked:Boolean(c.ecommerce_cheque_enable),onChange:function(e){return f("ecommerce_cheque_enable",e.target.checked)},label:(0,de.__)("Enable Checks","nggallery")})),c.ecommerce_cheque_enable&&J().createElement("div",{className:"md:col-span-2"},J().createElement(Ol,{id:"ecommerce_cheque_instructions",name:"ecommerce_cheque_instructions",value:(m=c.ecommerce_cheque_instructions,d=document.createElement("textarea"),d.innerHTML=m,d.value),onChange:function(e){return f("ecommerce_cheque_instructions",e.target.value)},label:(0,de.__)("Instructions","nggallery"),help:(0,de.__)("Use this to inform users how to pay and where they should send their payment","nggallery"),rows:6}),y.ecommerce_cheque_instructions&&J().createElement("p",{className:"mt-1 text-xs text-red-600"},y.ecommerce_cheque_instructions)))),J().createElement("hr",{className:"my-6"}),J().createElement("div",{className:"mb-8"},J().createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4"},(0,de.__)("PayPal Express Checkout","nggallery")),J().createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},J().createElement("div",{className:"md:col-span-2"},J().createElement(Ml,{id:"ecommerce_paypal_enable",name:"ecommerce_paypal_enable",checked:Boolean(c.ecommerce_paypal_enable),onChange:function(e){return f("ecommerce_paypal_enable",e.target.checked)},label:(0,de.__)("Enable PayPal Express Checkout","nggallery"),help:(0,de.__)("Not all currencies are supported by all payment gateways. Please be sure to confirm your desired currency is supported by PayPal","nggallery")})),c.ecommerce_paypal_enable&&J().createElement(J().Fragment,null,J().createElement("div",null,J().createElement(Ml,{id:"ecommerce_paypal_sandbox",name:"ecommerce_paypal_sandbox",checked:Boolean(c.ecommerce_paypal_sandbox),onChange:function(e){return f("ecommerce_paypal_sandbox",e.target.checked)},label:(0,de.__)("Use sandbox?","nggallery"),help:(0,de.__)("If enabled transactions will use testing servers on which no currency is actually moved","nggallery")})),J().createElement("div",null,J().createElement(dl,{type:"text",id:"ecommerce_paypal_email",name:"ecommerce_paypal_email",value:c.ecommerce_paypal_email,onChange:function(e){return f("ecommerce_paypal_email",e.target.value)},label:(0,de.__)("Email","nggallery")}),y.ecommerce_paypal_email&&J().createElement("p",{className:"mt-1 text-xs text-red-600"},y.ecommerce_paypal_email)),J().createElement("div",null,J().createElement(dl,{type:"text",id:"ecommerce_paypal_username",name:"ecommerce_paypal_username",value:c.ecommerce_paypal_username,onChange:function(e){return f("ecommerce_paypal_username",e.target.value)},label:(0,de.__)("API Username","nggallery")}),y.ecommerce_paypal_username&&J().createElement("p",{className:"mt-1 text-xs text-red-600"},y.ecommerce_paypal_username)),J().createElement("div",null,J().createElement(dl,{type:"password",id:"ecommerce_paypal_password",name:"ecommerce_paypal_password",value:c.ecommerce_paypal_password,onChange:function(e){return f("ecommerce_paypal_password",e.target.value)},label:(0,de.__)("API Password","nggallery")}),y.ecommerce_paypal_password&&J().createElement("p",{className:"mt-1 text-xs text-red-600"},y.ecommerce_paypal_password)),J().createElement("div",null,J().createElement(dl,{type:"text",id:"ecommerce_paypal_signature",name:"ecommerce_paypal_signature",value:c.ecommerce_paypal_signature,onChange:function(e){return f("ecommerce_paypal_signature",e.target.value)},label:(0,de.__)("API Signature","nggallery")}),y.ecommerce_paypal_signature&&J().createElement("p",{className:"mt-1 text-xs text-red-600"},y.ecommerce_paypal_signature))))),J().createElement("hr",{className:"my-6"}),J().createElement("div",{className:"mb-8"},J().createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4"},(0,de.__)("PayPal Standard","nggallery")),J().createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},J().createElement("div",{className:"md:col-span-2"},J().createElement(Ml,{id:"ecommerce_paypal_std_enable",name:"ecommerce_paypal_std_enable",checked:Boolean(c.ecommerce_paypal_std_enable),onChange:function(e){return f("ecommerce_paypal_std_enable",e.target.checked)},label:(0,de.__)("Enable PayPal Standard","nggallery"),help:(0,de.__)("Not all currencies are supported by all payment gateways. Please be sure to confirm your desired currency is supported by PayPal","nggallery")})),c.ecommerce_paypal_std_enable&&J().createElement(J().Fragment,null,J().createElement("div",null,J().createElement(Ml,{id:"ecommerce_paypal_std_sandbox",name:"ecommerce_paypal_std_sandbox",checked:Boolean(c.ecommerce_paypal_std_sandbox),onChange:function(e){return f("ecommerce_paypal_std_sandbox",e.target.checked)},label:(0,de.__)("Use Sandbox?","nggallery")})),J().createElement("div",null,J().createElement(dl,{type:"text",id:"ecommerce_paypal_std_email",name:"ecommerce_paypal_std_email",value:c.ecommerce_paypal_std_email,onChange:function(e){return f("ecommerce_paypal_std_email",e.target.value)},label:(0,de.__)("Email","nggallery"),help:(0,de.__)("Only PayPal Premier and Business accounts are supported","nggallery")}),y.ecommerce_paypal_std_email&&J().createElement("p",{className:"mt-1 text-xs text-red-600"},y.ecommerce_paypal_std_email))))),J().createElement("hr",{className:"my-6"}),J().createElement("div",{className:"mb-8"},J().createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4"},(0,de.__)("Stripe","nggallery")),J().createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},J().createElement("div",{className:"md:col-span-2"},J().createElement(Ml,{id:"ecommerce_stripe_enable",name:"ecommerce_stripe_enable",checked:Boolean(c.ecommerce_stripe_enable),onChange:function(e){return f("ecommerce_stripe_enable",e.target.checked)},label:(0,de.__)("Enable Stripe","nggallery"),help:(0,de.__)("Not all currencies are supported by all payment gateways. Please be sure to confirm your desired currency is supported by Stripe","nggallery")})),c.ecommerce_stripe_enable&&J().createElement(J().Fragment,null,J().createElement("div",null,J().createElement(dl,{type:"text",id:"ecommerce_stripe_key_public",name:"ecommerce_stripe_key_public",value:c.ecommerce_stripe_key_public,onChange:function(e){return f("ecommerce_stripe_key_public",e.target.value)},label:(0,de.__)("Public key","nggallery")}),y.ecommerce_stripe_key_public&&J().createElement("p",{className:"mt-1 text-xs text-red-600"},y.ecommerce_stripe_key_public)),J().createElement("div",null,J().createElement(dl,{type:"password",id:"ecommerce_stripe_key_private",name:"ecommerce_stripe_key_private",value:c.ecommerce_stripe_key_private,onChange:function(e){return f("ecommerce_stripe_key_private",e.target.value)},label:(0,de.__)("Private key","nggallery")}),y.ecommerce_stripe_key_private&&J().createElement("p",{className:"mt-1 text-xs text-red-600"},y.ecommerce_stripe_key_private))))),J().createElement("hr",{className:"my-6"}),J().createElement("div",{className:"mb-8"},J().createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4"},(0,de.__)("PayPal Checkout","nggallery")),J().createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},J().createElement("div",{className:"md:col-span-2"},J().createElement(Ml,{id:"ecommerce_paypal_checkout_enable",name:"ecommerce_paypal_checkout_enable",checked:Boolean(c.ecommerce_paypal_checkout_enable),onChange:function(e){return f("ecommerce_paypal_checkout_enable",e.target.checked)},label:(0,de.__)("Enable PayPal Checkout","nggallery"),help:(0,de.__)("Not all currencies are supported by all payment gateways. Please be sure to confirm your desired currency is supported by PayPal Checkout","nggallery")})),c.ecommerce_paypal_checkout_enable&&J().createElement(J().Fragment,null,J().createElement("div",null,J().createElement(Ml,{id:"ecommerce_paypal_checkout_sandbox",name:"ecommerce_paypal_checkout_sandbox",checked:Boolean(c.ecommerce_paypal_checkout_sandbox),onChange:function(e){return f("ecommerce_paypal_checkout_sandbox",e.target.checked)},label:(0,de.__)("Use Sandbox","nggallery")})),J().createElement("div",null,J().createElement(dl,{type:"text",id:"ecommerce_paypal_checkout_client_id",name:"ecommerce_paypal_checkout_client_id",value:c.ecommerce_paypal_checkout_client_id,onChange:function(e){return f("ecommerce_paypal_checkout_client_id",e.target.value)},label:(0,de.__)("Client ID","nggallery")}),y.ecommerce_paypal_checkout_client_id&&J().createElement("p",{className:"mt-1 text-xs text-red-600"},y.ecommerce_paypal_checkout_client_id)),J().createElement("div",null,J().createElement(dl,{type:"password",id:"ecommerce_paypal_checkout_client_secret",name:"ecommerce_paypal_checkout_client_secret",value:c.ecommerce_paypal_checkout_client_secret,onChange:function(e){return f("ecommerce_paypal_checkout_client_secret",e.target.value)},label:(0,de.__)("Client secret","nggallery")}),y.ecommerce_paypal_checkout_client_secret&&J().createElement("p",{className:"mt-1 text-xs text-red-600"},y.ecommerce_paypal_checkout_client_secret)),J().createElement("div",{className:"md:col-span-2 text-sm text-gray-600"},J().createElement("a",{href:"https://www.imagely.com/docs/how-to-setup-paypal-checkout/?utm_source=imagely&utm_medium=ecommerce&utm_campaign=paypalcheckout",target:"_blank",rel:"noreferrer",className:"text-green-700 hover:underline"},(0,de.__)("See our documentation on setting up PayPal Checkout.","nggallery")))))),J().createElement("hr",{className:"my-6"}),J().createElement("div",null,J().createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-4"},(0,de.__)("Braintree","nggallery")),J().createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},J().createElement("div",{className:"md:col-span-2"},J().createElement(Ml,{id:"ecommerce_braintree_enable",name:"ecommerce_braintree_enable",checked:Boolean(c.ecommerce_braintree_enable),onChange:function(e){return f("ecommerce_braintree_enable",e.target.checked)},label:(0,de.__)("Enable Braintree","nggallery"),help:(0,de.__)("Not all currencies are supported by all payment gateways. Please be sure to confirm your desired currency is supported by Braintree","nggallery")})),c.ecommerce_braintree_enable&&J().createElement(J().Fragment,null,J().createElement("div",null,J().createElement(Ml,{id:"ecommerce_braintree_sandbox",name:"ecommerce_braintree_sandbox",checked:Boolean(c.ecommerce_braintree_sandbox),onChange:function(e){return f("ecommerce_braintree_sandbox",e.target.checked)},label:(0,de.__)("Use Sandbox","nggallery")})),J().createElement("div",null,J().createElement(dl,{type:"text",id:"ecommerce_braintree_merchant_id",name:"ecommerce_braintree_merchant_id",value:c.ecommerce_braintree_merchant_id,onChange:function(e){return f("ecommerce_braintree_merchant_id",e.target.value)},label:(0,de.__)("Merchant ID","nggallery")}),y.ecommerce_braintree_merchant_id&&J().createElement("p",{className:"mt-1 text-xs text-red-600"},y.ecommerce_braintree_merchant_id)),J().createElement("div",null,J().createElement(dl,{type:"text",id:"ecommerce_braintree_public_key",name:"ecommerce_braintree_public_key",value:c.ecommerce_braintree_public_key,onChange:function(e){return f("ecommerce_braintree_public_key",e.target.value)},label:(0,de.__)("Public key","nggallery")}),y.ecommerce_braintree_public_key&&J().createElement("p",{className:"mt-1 text-xs text-red-600"},y.ecommerce_braintree_public_key)),J().createElement("div",null,J().createElement(dl,{type:"password",id:"ecommerce_braintree_private_key",name:"ecommerce_braintree_private_key",value:c.ecommerce_braintree_private_key,onChange:function(e){return f("ecommerce_braintree_private_key",e.target.value)},label:(0,de.__)("Private key","nggallery")}),y.ecommerce_braintree_private_key&&J().createElement("p",{className:"mt-1 text-xs text-red-600"},y.ecommerce_braintree_private_key)),J().createElement("div",null,J().createElement(Ml,{id:"ecommerce_braintree_enable_paypal",name:"ecommerce_braintree_enable_paypal",checked:Boolean(c.ecommerce_braintree_enable_paypal),onChange:function(e){return f("ecommerce_braintree_enable_paypal",e.target.checked)},label:(0,de.__)("Enable PayPal payments","nggallery"),help:(0,de.__)("PayPal is not enabled by default and must be configured first in your Braintree account.","nggallery")})),J().createElement("div",null,J().createElement(Ml,{id:"ecommerce_braintree_pass_client_data",name:"ecommerce_braintree_pass_client_data",checked:Boolean(c.ecommerce_braintree_pass_client_data),onChange:function(e){return f("ecommerce_braintree_pass_client_data",e.target.checked)},label:(0,de.__)("Send browser data to Braintree","nggallery"),help:(0,de.__)("Braintree recommends that transactions include customer browser data for their fraud detection tools. Consult the Braintree Data Protection Addendum for more information regarding your own data protection compliance.","nggallery")})),J().createElement("div",{className:"md:col-span-2 text-sm text-gray-600"},J().createElement("a",{href:"https://www.imagely.com/docs/how-to-setup-braintree-checkout/?utm_source=imagely&utm_medium=ecommerce&utm_campaign=braintree",target:"_blank",rel:"noreferrer",className:"text-green-700 hover:underline"},(0,de.__)("See our documentation on setting up Braintree.","nggallery")))))))};var Gm=function(){return new Promise(function(e,t){if(window.Stripe)e();else{var n=document.createElement("script");n.src="https://js.stripe.com/v3/",n.async=!0,n.onload=function(){return e()},n.onerror=function(){return t(new Error("Failed to load Stripe.js"))},document.body.appendChild(n)}})};const Um=function(){var e,t=ea(),n=t.showSuccess,r=t.showError,a=te(),l=hr((0,Z.useState)(!0),2),i=l[0],o=l[1],s=hr((0,Z.useState)(!1),2),c=s[0],u=s[1],m=hr((0,Z.useState)(!1),2),d=m[0],g=m[1],p=hr((0,Z.useState)(!1),2),f=p[0],y=p[1],h=hr((0,Z.useState)((e=window.location.hostname).includes("localhost")||e.includes("host.docker.internal")),1)[0],_=hr((0,Z.useState)("https:"===window.location.protocol),1)[0],b=(0,Z.useRef)(null),v=(0,Z.useRef)(null);(0,Z.useEffect)(function(){var e=!0;return Er(Nr().mark(function t(){var n,r,a;return Nr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Fr()({path:"/nggpro/v1/commerce/admin/check_commerce_requirements",method:"GET",headers:{"X-WP-Nonce":null===(n=window.imagelyApp)||void 0===n?void 0:n.nonce}});case 3:if(a=t.sent,e){t.next=6;break}return t.abrupt("return");case 6:u(Boolean(null===(r=a.status)||void 0===r?void 0:r.card_on_file)),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:return t.prev=11,e&&o(!1),t.finish(11);case 14:case"end":return t.stop()}},t,null,[[0,9,11,14]])}))(),function(){e=!1}},[]);var x=(0,Z.useCallback)(Er(Nr().mark(function e(){var t,n,r;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gm();case 2:b.current||(t=h?"pk_test_MTNtYD9qsldURz7OzkYOOxKa":"pk_live_yRBibCwDB4gh97T758I4VRYy",b.current=window.Stripe(t)),v.current||(n=b.current.elements(),v.current=n.create("card",{hidePostalCode:!0}),(r=document.getElementById("ngg-stripe-card-element"))&&v.current.mount(r));case 4:case"end":return e.stop()}},e)})),[h]),w=function(){var e=Er(Nr().mark(function e(){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.prev=1,e.next=4,x();case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),console.error("handleConnectClick error",e.t0),r((0,de.__)("Failed to load Stripe","nggallery"));case 10:case"end":return e.stop()}},e,null,[[1,6]])}));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Er(Nr().mark(function e(){var t;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fr()({path:"/nggpro/v1/commerce/admin/delete_credit_card_info",method:"POST",headers:{"X-WP-Nonce":null===(t=window.imagelyApp)||void 0===t?void 0:t.nonce,"Content-Type":"application/json"}});case 3:u(!1),a.invalidateQueries({queryKey:["printlabRequirements"]}),n((0,de.__)("Card removed","nggallery")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),r((0,de.__)("Failed to remove card","nggallery"));case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Er(Nr().mark(function e(){var t,l,i,o,s,c,m,d,p,f,_;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(b.current&&v.current){e.next=2;break}return e.abrupt("return");case 2:return y(!0),e.prev=3,l=b.current,e.next=7,l.createPaymentMethod({type:"card",card:v.current});case 7:if(i=e.sent,o=i.paymentMethod,!(s=i.error)&&o){e.next=12;break}throw s||new Error("payment_method_error");case 12:return c={testing:h,site_url:window.location.origin,return_url:window.location.origin+"?stripe_intents_rtn=1",payment_method_id:o.id},e.next=15,fetch("https://4osfgn6rvj.execute-api.us-east-1.amazonaws.com/latest/getSetupIntentSecret",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then(function(e){return e.json()});case 15:if(m=e.sent,d="",p=o.id,"succeeded"!==m.status){e.next=22;break}d=m.id,e.next=32;break;case 22:if(!m.client_secret){e.next=31;break}return e.next=25,l.confirmCardSetup(m.client_secret,{payment_method:o.id});case 25:if(!(_=e.sent).error){e.next=28;break}throw _.error;case 28:d=(null===(f=_.setupIntent)||void 0===f?void 0:f.id)||"",e.next=32;break;case 31:throw new Error("invalid_setup_intent_response");case 32:return console.warn("setupIntentId",d),e.next=35,Fr()({path:"/nggpro/v1/commerce/admin/update_credit_card_info",method:"POST",headers:{"X-WP-Nonce":null===(t=window.imagelyApp)||void 0===t?void 0:t.nonce,"Content-Type":"application/json"},data:{testing:h,payment_method:p}});case 35:u(!0),g(!1),a.invalidateQueries({queryKey:["printlabRequirements"]}),n((0,de.__)("Card connected successfully","nggallery")),e.next=45;break;case 41:e.prev=41,e.t0=e.catch(3),console.error("handleSubmitCard error",e.t0),r((0,de.__)("Failed to connect card","nggallery"));case 45:return e.prev=45,y(!1),e.finish(45);case 48:case"end":return e.stop()}},e,null,[[3,41,45,48]])}));return function(){return e.apply(this,arguments)}}();return i?J().createElement(ar,{size:"md",text:(0,de.__)("Loading...","nggallery")}):J().createElement("div",{className:"bg-white rounded-lg shadow-sm p-6"},J().createElement("div",{className:"mb-6"},J().createElement("h2",{className:"text-xl font-semibold text-gray-900 mb-2"},(0,de.__)("PrintLab Integration","nggallery")),J().createElement("p",{className:"text-gray-600 text-sm"},(0,de.__)("Configure integration with PrintLab for professional print fulfillment.","nggallery"))),!_&&J().createElement("div",{className:"mb-4 p-3 rounded bg-yellow-50 text-yellow-800 text-sm"},(0,de.__)("IMPORTANT: Your site is not using SSL/HTTPS. Please add SSL/HTTPS and return to this tab to add your credit card.","nggallery")),J().createElement("div",{className:"mt-6"},c?J().createElement("div",{className:"flex items-center justify-between bg-green-50 border border-green-200 rounded p-4"},J().createElement("span",{className:"text-green-800 text-sm"},(0,de.__)("Done! You have a valid credit card on file.","nggallery")),J().createElement("button",{onClick:E,className:"px-3 py-1.5 text-sm rounded bg-red-600 text-white hover:bg-red-700"},(0,de.__)("Remove card","nggallery"))):J().createElement("div",null,d?J().createElement("div",{className:"mt-4 space-y-4"},J().createElement("div",{id:"ngg-stripe-card-element",className:"border rounded p-3"}),J().createElement("div",{id:"card-errors",className:"text-red-600 text-xs"}),J().createElement("div",{className:"flex gap-2"},J().createElement("button",{onClick:function(){return g(!1)},className:"px-4 py-2 text-sm rounded bg-gray-100 hover:bg-gray-200",disabled:f},(0,de.__)("Cancel","nggallery")),J().createElement("button",{onClick:C,className:"px-4 py-2 text-sm rounded bg-green-500 text-white hover:bg-green-600 disabled:opacity-60",disabled:f},f?(0,de.__)("Saving...","nggallery"):(0,de.__)("Save Card","nggallery")))):J().createElement("button",{onClick:w,className:"px-4 py-2 text-sm rounded bg-green-500 text-white hover:bg-green-600"},(0,de.__)("Update credit card","nggallery")))),J().createElement("div",{className:"mt-8"},J().createElement("h3",{className:"text-sm font-semibold text-gray-900 mb-3"},(0,de.__)("FAQs","nggallery")),J().createElement("div",{className:"space-y-3 text-sm text-gray-700"},J().createElement(ki,{title:(0,de.__)("Do I need this?","nggallery")},J().createElement("p",{className:"leading-6"},(0,de.__)("A credit card is needed only if you want to use automated print fulfillment.","nggallery"))),J().createElement(ki,{title:(0,de.__)("Will you charge me?","nggallery")},J().createElement("p",{className:"leading-6"},(0,de.__)("You will not be charged now. Your card will only be charged if someone submits a print lab order on your site. At that point, you will be billed for print and shipping costs from the print lab.","nggallery"))),J().createElement(ki,{title:(0,de.__)("Is this secure?","nggallery")},J().createElement("p",{className:"leading-6"},(0,de.__)("This form sends your card information directly to Stripe and is stored securely at Stripe, not by WordPress or NextGEN Gallery.","nggallery"))))))};function Wm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Vm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wm(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wm(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const Km=function(){var e,t,r=Da(),a=r.data,l=r.isLoading,o=Ia(),s=te(),c=function(){var e=hr((0,Z.useState)(null),2),t=e[0],n=e[1],r=hr((0,Z.useState)(null),2),a=r[0],l=r[1],o=hr((0,Z.useState)(!0),2),s=o[0],c=o[1];return(0,Z.useEffect)(function(){c(!0),l(null);try{return void i.e(957).then(i.t.bind(i,957,19)).then(function(e){var t=(null==e?void 0:e.default)||e;n(t)}).catch(function(e){l((null==e?void 0:e.message)||"Failed to load countries")}).finally(function(){return c(!1)})}catch(e){l((null==e?void 0:e.message)||"Failed to load countries")}c(!1)},[]),{countries:(0,Z.useMemo)(function(){return t?t.map(function(e){var t=hr(e,3);return{name:t[0],code:t[1],regions:(t[2]||[]).map(function(e){var t=hr(e,2);return{name:t[0],code:t[1]}})}}):[]},[t]),isLoading:s,error:a}}(),u=c.countries,m=c.isLoading,d=Ja(),g=d.data,p=d.isLoading,f=Ar({queryKey:Za.countries,queryFn:(t=Er(Nr().mark(function e(){var t,n,r;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===(t=window.imagelyApp)||void 0===t?void 0:t.nonce,e.next=3,Fr()({path:"/imagely/v1/countries",method:"GET",headers:{"X-WP-Nonce":n}});case 3:if((r=e.sent).success){e.next=6;break}throw new Error("Failed to fetch countries");case 6:return e.abrupt("return",r.data);case 7:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),staleTime:18e5,gcTime:36e5}),y=f.data,h=f.isLoading,_=(0,Z.useMemo)(function(){var e,t;return a?{ecommerce_studio_name:a.ecommerce_studio_name||"",ecommerce_studio_email:a.ecommerce_studio_email||"",ecommerce_studio_street_address:a.ecommerce_studio_street_address||"",ecommerce_studio_address_line:a.ecommerce_studio_address_line||"",ecommerce_studio_city:a.ecommerce_studio_city||"",ecommerce_home_country:null!==(e=a.ecommerce_home_country)&&void 0!==e?e:840,ecommerce_home_state:a.ecommerce_home_state||"",ecommerce_home_zip:a.ecommerce_home_zip||"",ecommerce_currency:null!==(t=a.ecommerce_currency)&&void 0!==t?t:840}:null},[a]),b=hr((0,Z.useState)(null),2),v=b[0],x=b[1];(0,Z.useEffect)(function(){_&&!v&&x(_)},[_,v]);var w=jm({settings:v,tabId:"ecommerce-studio-details",mutation:{mutate:function(e,t){var n=Vm({},e||{});o.mutate(n,Vm(Vm({},t),{},{onSuccess:function(){for(var e,n,r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];null==t||null===(e=(n=t).onSuccess)||void 0===e||e.call.apply(e,[n].concat(a)),s.invalidateQueries({queryKey:["printlabRequirements"]})}}))},isPending:o.isPending},getMutationParams:function(e){return e||{}},debounceDelay:1e3}),E=w.markUserInteraction;if(l||!v||m||p||h)return J().createElement(ar,{size:"md",text:(0,de.__)("Loading settings...","nggallery")});var C,N,k,S=function(e,t){x(function(r){if(!r)return r;var a=Vm(Vm({},r),{},n({},e,t));if("ecommerce_home_country"===e&&y){var l=y.find(function(e){return e.code===t});l&&(a.ecommerce_currency=l.currency_code),a.ecommerce_home_state=""}return a}),E()},O=function(){return"string"==typeof v.ecommerce_home_country?v.ecommerce_home_country:""};return J().createElement("div",{className:"bg-white rounded-lg shadow-sm p-6"},J().createElement("div",{className:"mb-6"},J().createElement("h2",{className:"text-xl font-semibold text-gray-900 mb-2"},(0,de.__)("Studio Details","nggallery")),J().createElement("p",{className:"text-gray-600 text-sm"},(0,de.__)("Configure your studio information and business details.","nggallery"))),J().createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},J().createElement("div",null,J().createElement(dl,{type:"text",id:"ecommerce_studio_name",name:"ecommerce_studio_name",value:v.ecommerce_studio_name,onChange:function(e){return S("ecommerce_studio_name",e.target.value)},label:(0,de.__)("Studio Name","nggallery")})),J().createElement("div",null,J().createElement(dl,{type:"text",id:"ecommerce_studio_email",name:"ecommerce_studio_email",value:v.ecommerce_studio_email,onChange:function(e){return S("ecommerce_studio_email",e.target.value)},label:(0,de.__)("Studio Email","nggallery")})),J().createElement("div",null,J().createElement(dl,{type:"text",id:"ecommerce_studio_street_address",name:"ecommerce_studio_street_address",value:v.ecommerce_studio_street_address,onChange:function(e){return S("ecommerce_studio_street_address",e.target.value)},label:(0,de.__)("Studio Street Address","nggallery")})),J().createElement("div",null,J().createElement(dl,{type:"text",id:"ecommerce_studio_address_line",name:"ecommerce_studio_address_line",value:v.ecommerce_studio_address_line,onChange:function(e){return S("ecommerce_studio_address_line",e.target.value)},label:(0,de.__)("Studio Address Line #2","nggallery")})),J().createElement("div",null,J().createElement(dl,{type:"text",id:"ecommerce_studio_city",name:"ecommerce_studio_city",value:v.ecommerce_studio_city,onChange:function(e){return S("ecommerce_studio_city",e.target.value)},label:(0,de.__)("Studio City","nggallery")})),J().createElement("div",null,J().createElement(ml,{id:"ecommerce_home_country",name:"ecommerce_home_country",value:O(),onChange:function(e){S("ecommerce_home_country",e.target.value)},label:(0,de.__)("Studio Country","nggallery")},J().createElement("option",{value:""},(0,de.__)("Select Country","nggallery")),u.map(function(e){return J().createElement("option",{key:e.code,value:e.code},e.name)}))),J().createElement("div",null,(C=O(),(k=(null==(N=u.find(function(e){return e.code===C}))?void 0:N.regions)||[]).length>0?J().createElement(ml,{id:"ecommerce_home_state",name:"ecommerce_home_state",value:v.ecommerce_home_state,onChange:function(e){return S("ecommerce_home_state",e.target.value)},label:(0,de.__)("Studio State","nggallery")},J().createElement("option",{value:""},(0,de.__)("Select Region","nggallery")),k.map(function(e){return J().createElement("option",{key:e.code,value:e.code},e.name)})):J().createElement(dl,{type:"text",id:"ecommerce_home_state",name:"ecommerce_home_state",value:v.ecommerce_home_state,onChange:function(e){return S("ecommerce_home_state",e.target.value)},label:(0,de.__)("Studio State","nggallery")}))),J().createElement("div",null,J().createElement(dl,{type:"text",id:"ecommerce_home_zip",name:"ecommerce_home_zip",value:v.ecommerce_home_zip,onChange:function(e){return S("ecommerce_home_zip",e.target.value)},label:(0,de.__)("Studio Postal Code","nggallery"),help:(0,de.__)("Required for taxes","nggallery")})),J().createElement("div",null,J().createElement(ml,{id:"ecommerce_currency",name:"ecommerce_currency",value:String(null!==(e=v.ecommerce_currency)&&void 0!==e?e:""),onChange:function(e){return S("ecommerce_currency",e.target.value)},label:(0,de.__)("Currency","nggallery")},J().createElement("option",{value:""},(0,de.__)("Select Currency","nggallery")),null==g?void 0:g.map(function(e){return J().createElement("option",{key:e.id,value:e.id},e.code," - ",e.name)})))))};function Qm(e){var t=null==e?void 0:e.cart,n=void 0;if(t)if("string"==typeof t)try{n=JSON.parse(t)}catch(e){n=t}else n=t;return{id:Number((null==e?void 0:e.id)||(null==e?void 0:e.ID)),customer_name:String((null==e?void 0:e.customer_name)||""),email:String((null==e?void 0:e.email)||""),phone:(null==e?void 0:e.phone)||void 0,status:(null==e?void 0:e.status)||"unpaid",payment_gateway:String((null==e?void 0:e.payment_gateway)||""),coupon_code:(null==e?void 0:e.coupon_code)||void 0,total_amount:Number((null==e?void 0:e.total_amount)||0),print_cost:null!=e&&e.print_cost?Number(e.print_cost):void 0,hash:String((null==e?void 0:e.hash)||""),date:String((null==e?void 0:e.date)||(null==e?void 0:e.post_date)||""),post_date:String((null==e?void 0:e.post_date)||""),gateway_admin_note:(null==e?void 0:e.gateway_admin_note)||void 0,shipping_street_address:(null==e?void 0:e.shipping_street_address)||void 0,shipping_address_line:(null==e?void 0:e.shipping_address_line)||void 0,shipping_city:(null==e?void 0:e.shipping_city)||void 0,shipping_state:(null==e?void 0:e.shipping_state)||void 0,shipping_zip:(null==e?void 0:e.shipping_zip)||void 0,shipping_country:(null==e?void 0:e.shipping_country)||void 0,shipping_phone:(null==e?void 0:e.shipping_phone)||void 0,aws_order_id:(null==e?void 0:e.aws_order_id)||void 0,has_sent_email_notification:null==e?void 0:e.has_sent_email_notification,has_sent_email_receipt:null==e?void 0:e.has_sent_email_receipt,cart:n}}var Xm=function(e){return["orders",e]},Ym=function(e){return["order",e]};function Zm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Jm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zm(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zm(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var $m=function(e,t){if(!e)return"$";if(null==t||""===t)return"$";var n=String(t).toUpperCase(),r=e.find(function(e){return String(e.id)===n||String(e.code).toUpperCase()===n});return null!=r&&r.symbol?el(r.symbol):(null==r?void 0:r.code)||"$"},ed=function(e){var t,n=(null===(t=window.imagelyApp)||void 0===t?void 0:t.home_url)||window.location.origin,r=n.endsWith("/")?n:"".concat(n,"/");return new URL("thanks/?order=".concat(encodeURIComponent(e)),r).toString()};function td(e){var t,n,r,a,l,i=e.orderId,o=e.onBack,s=Ar({queryKey:(a=i)?Ym(a):["order","none"],enabled:!!a,queryFn:(l=Er(Nr().mark(function e(){var t,n,r;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===(t=window.imagelyApp)||void 0===t?void 0:t.nonce,e.next=3,Fr()({path:"/imagely/v1/orders/".concat(a),method:"GET",headers:{"X-WP-Nonce":n}});case 3:return r=e.sent,e.abrupt("return",Qm(r));case 5:case"end":return e.stop()}},e)})),function(){return l.apply(this,arguments)}),staleTime:0,gcTime:6e5,retry:0,refetchOnMount:!0,refetchOnWindowFocus:!1}),c=s.data,u=s.isLoading,m=Ja().data,d=zl().navigateTo,g=function(e){var t=e.thumbUrl,n=e.fullWidth,r=e.fullHeight,a=e.cropOffset,l=e.width,i=e.height,o=e.alt,s=void 0===o?"thumb":o,c=null;if(a&&Number(n)>0&&Number(r)>0){var u=String(a).split(",").map(function(e){return parseInt(e.trim(),10)});if(u.length>=4&&u.every(function(e){return Number.isFinite(e)})){var m=hr(u,4),d=m[0],g=m[1],p=m[2],f=m[3],y=l/Number(n),h=i/Number(r),_=d*y,b=g*h,v=Math.ceil((p-d)*y),x=Math.ceil((f-g)*h);c={left:_,top:b+=2,width:v=Math.max(0,v-4),height:x=Math.max(0,x-4)}}}return J().createElement("div",{className:"relative",style:{width:l,height:i}},t?J().createElement("img",{src:t,alt:s,style:{width:"100%",height:"100%",objectFit:"cover"},className:"rounded"}):J().createElement("div",{className:"w-full h-full bg-gray-100 rounded"}),c&&J().createElement("div",{className:"absolute border-2 border-amber-500 rounded pointer-events-none",style:{left:c.left,top:c.top,width:c.width,height:c.height}}))},p=(null==c?void 0:c.cart)||{},f=null!=p&&p.images?Object.values(p.images):[],y=f.some(function(e){return Object.values((null==e?void 0:e.items)||{}).some(function(e){return"ngg_digital_downloads"===(null==e?void 0:e.source)})}),h=function(e){if("number"==typeof e)return e;if("string"==typeof e){var t=parseFloat(e);return isNaN(t)?0:t}return 0},_=$m(m,(null==p?void 0:p.currency)||(null==p||null===(t=p.tax_info)||void 0===t?void 0:t.currency_code)),b=function(e){return"".concat(_," ").concat(e.toFixed(2))},v=f.flatMap(function(e){var t,n,r,a,l,i=(null==e||null===(t=e.thumbnail)||void 0===t?void 0:t.filename)||(null==e?void 0:e.thumbnail_url)||"",o=Number(null==e||null===(n=e.crop_dimensions)||void 0===n?void 0:n.width)||void 0,s=Number(null==e||null===(r=e.crop_dimensions)||void 0===r?void 0:r.height)||void 0,c=Math.max(1,Number(null==e||null===(a=e.dimensions)||void 0===a?void 0:a.width)||120),u=Math.max(1,Number(null==e||null===(l=e.dimensions)||void 0===l?void 0:l.height)||120),m=Math.max(c,u),d=Math.min(1,120/m),g=Math.round(c*d),p=Math.round(u*d),f=Object.values((null==e?void 0:e.items)||{}),y=(null==e?void 0:e.filename)||"",_=(null==e?void 0:e.image_slug)||"",b=(null==e?void 0:e.galleryid)||(null==e?void 0:e.pid)||null;return f.map(function(t){return{key:"".concat((null==e?void 0:e.pid)||(null==e?void 0:e.id)||"img","-").concat((null==t?void 0:t.ID)||(null==t?void 0:t.id)||Math.random()),thumb:i,qty:h(null==t?void 0:t.quantity)||1,desc:(null==t?void 0:t.post_title)||(null==t?void 0:t.title)||(0,de.__)("Item","nggallery"),unit:h(null==t?void 0:t.price),total:h(null==t?void 0:t.price)*(h(null==t?void 0:t.quantity)||1),cropOffset:(null==t?void 0:t.crop_offset)||void 0,fullW:o,fullH:s,dispW:g,dispH:p,filename:y,imageSlug:_,galleryId:b}})}),x=h(null==p?void 0:p.subtotal),w=h(null==p?void 0:p.undiscounted_subtotal),E=x>0?x:v.reduce(function(e,t){return e+t.total},0),C=w>0?w:E,N=Math.max(0,C-E),k=h(null==p?void 0:p.shipping),S=h(null!==(n=null==p||null===(r=p.tax_info)||void 0===r?void 0:r.amount_to_collect)&&void 0!==n?n:null==p?void 0:p.tax),O=h(null==p?void 0:p.total)||E+k+S,P=(null==c?void 0:c.gateway_admin_note)||"";return J().createElement("div",{className:"bg-white rounded-lg border p-4"},J().createElement("div",{className:"flex items-center justify-between mb-4"},J().createElement("button",{className:"border rounded px-4 py-2 cursor-pointer bg-white hover:bg-gray-50",onClick:o},(0,de.__)("Back to Orders","nggallery")),J().createElement("div",{className:"text-sm text-gray-500"},(null==c?void 0:c.date)||"")),u||!c?J().createElement("div",{className:"py-6 text-center text-gray-500"},(0,de.__)("Loading...","nggallery")):J().createElement(J().Fragment,null,J().createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-2"},(0,de.__)("Order","nggallery")," #",c.id),J().createElement("div",{className:"mb-3"},function(e){switch(e){case"paid":return J().createElement("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-700"},(0,de.__)("Paid","nggallery"));case"unpaid":return J().createElement("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-amber-100 text-amber-800"},(0,de.__)("Unpaid","nggallery"));case"awaiting_payment":return J().createElement("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-amber-100 text-amber-800"},(0,de.__)("Awaiting Payment","nggallery"));case"failed":return J().createElement("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-700"},(0,de.__)("Failed","nggallery"));case"fraud":return J().createElement("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-700"},(0,de.__)("Fraud","nggallery"));default:return J().createElement("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700"},e)}}(c.status)),J().createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},J().createElement("div",{className:"p-4 border rounded-md"},J().createElement("h4",{className:"text-sm font-semibold text-gray-900 mb-2"},(0,de.__)("Customer","nggallery")),J().createElement("div",{className:"text-sm text-gray-700"},c.customer_name),J().createElement("div",{className:"text-xs text-gray-500"},c.email),c.phone&&J().createElement("div",{className:"text-xs text-gray-500"},c.phone)),J().createElement("div",{className:"p-4 border rounded-md"},J().createElement("h4",{className:"text-sm font-semibold text-gray-900 mb-2"},(0,de.__)("Shipping","nggallery")),J().createElement("div",{className:"text-sm text-gray-700 whitespace-pre-line"},[c.shipping_street_address,c.shipping_address_line,"".concat(c.shipping_city||""," ").concat(c.shipping_state||""," ").concat(c.shipping_zip||""),c.shipping_country].filter(Boolean).join("\n")),c.shipping_phone&&J().createElement("div",{className:"text-xs text-gray-500"},c.shipping_phone))),J().createElement("div",{className:"p-4 border rounded-md mt-4"},J().createElement("h4",{className:"text-sm font-semibold text-gray-900 mb-3"},(0,de.__)("Purchases","nggallery")),J().createElement("div",{className:"overflow-x-auto"},J().createElement("table",{className:"min-w-full text-sm table-fixed"},J().createElement("colgroup",null,J().createElement("col",{style:{width:"20%"}}),J().createElement("col",{style:{width:"20%"}}),J().createElement("col",{style:{width:"20%"}}),J().createElement("col",{style:{width:"20%"}}),J().createElement("col",{style:{width:"20%"}})),J().createElement("thead",null,J().createElement("tr",{className:"text-left text-gray-600"},J().createElement("th",{className:"px-2 py-1"},(0,de.__)("Image","nggallery")),J().createElement("th",{className:"px-2 py-1"},(0,de.__)("Quantity","nggallery")),J().createElement("th",{className:"px-2 py-1"},(0,de.__)("Description","nggallery")),J().createElement("th",{className:"px-2 py-1 text-right"},(0,de.__)("Price","nggallery")),J().createElement("th",{className:"px-2 py-1 text-right"},(0,de.__)("Total","nggallery")))),J().createElement("tbody",null,0===v.length&&J().createElement("tr",null,J().createElement("td",{colSpan:5,className:"px-2 py-4 text-center text-gray-500"},(0,de.__)("No items","nggallery"))),v.map(function(e){return J().createElement("tr",{key:e.key,className:"border-t"},J().createElement("td",{className:"px-2 py-2 align-top"},J().createElement("div",{className:"flex flex-col gap-1"},J().createElement(g,{thumbUrl:e.thumb,fullWidth:e.fullW,fullHeight:e.fullH,cropOffset:e.cropOffset,width:e.dispW,height:e.dispH}),e.filename&&J().createElement("div",{className:"text-xs text-gray-600"},J().createElement("span",{className:"font-medium"},(0,de.__)("File Name:","nggallery")," "),e.filename,J().createElement("br",null),J().createElement("span",{className:"text-gray-500"},e.imageSlug)),e.galleryId&&J().createElement("button",{type:"button",onClick:function(){return d("imagely-add-new","images",e.galleryId)},className:"text-xs text-green-600 hover:text-green-700 hover:underline text-left"},(0,de.__)("Manage gallery","nggallery")))),J().createElement("td",{className:"px-2 py-2 align-top"},e.qty),J().createElement("td",{className:"px-2 py-2 align-top text-gray-700"},e.desc),J().createElement("td",{className:"px-2 py-2 align-top text-right"},b(e.unit)),J().createElement("td",{className:"px-2 py-2 align-top text-right"},b(e.total)))}))))),J().createElement("div",{className:"p-4 border rounded-md mt-4"},J().createElement("h4",{className:"text-sm font-semibold text-gray-900 mb-3"},(0,de.__)("Order Details","nggallery")),J().createElement("div",{className:"space-y-1 text-sm text-gray-700"},J().createElement("div",null,(0,de.__)("Subtotal","nggallery"),": ",J().createElement("span",{className:"font-medium"},b(E))),N>0&&J().createElement("div",null,(0,de.__)("Discount","nggallery"),":"," ",J().createElement("span",{className:"font-medium"},b(N))),J().createElement("div",null,(0,de.__)("Shipping","nggallery"),": ",J().createElement("span",{className:"font-medium"},b(k))),S>0&&J().createElement("div",null,(0,de.__)("Tax","nggallery"),": ",J().createElement("span",{className:"font-medium"},b(S))),(null==c?void 0:c.print_cost)&&c.print_cost>0&&J().createElement("div",null,(0,de.__)("Print Cost","nggallery"),":"," ",J().createElement("span",{className:"font-medium"},b(c.print_cost))),J().createElement("div",null,(0,de.__)("Total","nggallery"),": ",J().createElement("span",{className:"font-semibold"},b(O))),P&&J().createElement("div",null,(0,de.__)("Printlab Status","nggallery"),":"," ",J().createElement("span",{className:"font-medium"},P)))),y&&J().createElement("div",{className:"p-4 border rounded-md mt-4"},J().createElement("h4",{className:"text-sm font-semibold text-gray-900 mb-3"},(0,de.__)("Digital Downloads","nggallery")),J().createElement("div",{className:"text-sm text-gray-700"},(0,de.__)("Download link for digital products:","nggallery")," ",J().createElement("a",{href:ed(c.hash),target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 hover:underline"},(0,de.__)("here.","nggallery"))))))}const nd=function(){(0,me.useDispatch)(tr);var e,t,r,a,l=Ja().data,i=hr((0,Z.useState)("all"),2),o=i[0],s=i[1],c=hr((0,Z.useState)({id:!0,date:!0,customer:!0,orderStatus:!0,paymentGateway:!0,coupon:!0,total:!0}),1)[0],u=hr((0,Z.useState)(new Set),2),m=u[0],d=u[1],g=hr((0,Z.useState)(""),2),p=g[0],f=g[1],y=Fu(p,300),h=hr((0,Z.useState)("date"),2),_=h[0],b=h[1],v=hr((0,Z.useState)("desc"),2),x=v[0],w=v[1],E=hr((0,Z.useState)(1),2),C=E[0],N=E[1],k=Da().data,S=(null==k?void 0:k.admin_table_per_page)||20,O=hr((0,Z.useState)(!1),2),P=O[0],T=O[1],D=hr((0,Z.useState)(!1),2),I=D[0],j=D[1],A=hr((0,Z.useState)("all"),2),L=A[0],M=A[1],R=hr((0,Z.useState)(!1),2),F=R[0],z=R[1],B=hr((0,Z.useState)("bulk"),2),q=B[0],H=B[1],G=hr((0,Z.useState)(!1),2),U=G[0],W=G[1],V=hr((0,Z.useState)([]),2),K=V[0],Q=V[1],X=hr((0,Z.useState)(!1),2),Y=X[0],$=X[1],ee=hr((0,Z.useState)(null),2),ne=ee[0],re=ee[1],ae=zl(),le=ae.currentId,ie=ae.setCurrentId,oe=_?{date:"date",id:"ID",customer:"customer_name",orderStatus:"status",paymentGateway:"payment_gateway",coupon:"coupon_code",total:"total_amount"}[_]||"date":void 0,se=hr((0,Z.useState)({}),2),ce=se[0],ue=se[1],ge=function(e){var t=e.orderHash,n=e.awsOrderId,r=e.resubmitted,a=e.onDone,l=hr((0,Z.useState)(!1),2),i=l[0],o=l[1],s=ea(),c=s.showSuccess,u=s.showError;return!n||r?null:J().createElement("button",{type:"button",className:"text-xs text-green-500 hover:underline disabled:opacity-50",disabled:i,onClick:Er(Nr().mark(function e(){var n,r,l,i,s,m,d;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(!0),i=(null===(n=window.wpApiSettings)||void 0===n?void 0:n.nonce)||(null===(r=window.imagelyApp)||void 0===r?void 0:r.nonce),s=(null===(l=window.photocrati_ajax)||void 0===l?void 0:l.rest_url)||"/wp-json/",e.next=6,window.fetch("".concat(s,"nggpro/v1/commerce/admin/resubmit_lab_order"),{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":i},body:JSON.stringify({order:t}),credentials:"same-origin"});case 6:return m=e.sent,e.next=9,m.json();case 9:null!=(d=e.sent)&&d.success?(c((0,de.__)("Order successfully resubmitted to lab","nggallery")),a&&a()):u((0,de.__)("Failed to resubmit order to lab. Please try again.","nggallery")),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.error("Error resubmitting lab order:",e.t0),u((0,de.__)("An error occurred while resubmitting the order. Please try again.","nggallery"));case 17:return e.prev=17,o(!1),e.finish(17);case 20:case"end":return e.stop()}},e,null,[[0,13,17,20]])}))},i?(0,de.__)("Resubmitting...","nggallery"):(0,de.__)("Resubmit to lab","nggallery"))},pe=(t={page:C,per_page:S,search:y,sort:x?oe:void 0,order:x||void 0,status:o,date_filter:L},a=new URLSearchParams,null!=t&&t.page&&a.append("page",String(t.page)),null!=t&&t.per_page&&a.append("per_page",String(t.per_page)),null!=t&&t.search&&t.search.trim()&&a.append("search",t.search.trim()),null!=t&&t.sort&&a.append("sort",t.sort),null!=t&&t.order&&a.append("order",t.order),null!=t&&t.status&&a.append("status",t.status),null!=t&&t.date_filter&&a.append("date_filter",t.date_filter),Ar({queryKey:Xm(t||{}),queryFn:(r=Er(Nr().mark(function e(){var t,n,r,l,i,o;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===(t=window.imagelyApp)||void 0===t?void 0:t.nonce,r="/imagely/v1/orders".concat(a.toString()?"?".concat(a.toString()):""),e.next=4,Fr()({path:r,method:"GET",headers:{"X-WP-Nonce":n}});case 4:return l=e.sent,i=((null==l?void 0:l.orders)||[]).map(Qm),o=(null==l?void 0:l.pagination)||{total:i.length,total_pages:1,per_page:i.length,current:1},e.abrupt("return",{orders:i,pagination:o});case 8:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)}),staleTime:3e4,gcTime:6e5,retry:0,throwOnError:!1,refetchOnWindowFocus:!0,refetchOnMount:!1,placeholderData:function(e){return e}})),fe=pe.data,ye=pe.isLoading,he=function(){var e,t=te(),n=ea(),r=n.showSuccess,a=n.showError,l=n.showWarning;return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var n,r,a,l,i;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.ids,a=t.status,l=null===(n=window.imagelyApp)||void 0===n?void 0:n.nonce,e.next=4,Fr()({path:"/imagely/v1/orders/bulk-update-status",method:"POST",headers:{"X-WP-Nonce":l},data:{ids:r,status:a}});case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),onSuccess:function(e){var n;if(t.invalidateQueries({queryKey:["orders"]}),(null==e?void 0:e.updated_count)>0){var a=1===e.updated_count?"Order status updated successfully":"".concat(e.updated_count," orders updated successfully");r(a)}if((null==e||null===(n=e.errors)||void 0===n?void 0:n.length)>0){var i="Some orders failed to update: ".concat(e.errors.length," error(s)");l(i,{duration:8e3}),console.error("Order update errors:",e.errors)}},onError:function(e){var t=(null==e?void 0:e.message)||"Bulk update failed. Please try again.";a(t),console.error("Bulk update failed:",e)}})}(),_e=ea(),be=_e.showSuccess,ve=_e.showError;(0,Z.useEffect)(function(){N(1)},[y,o,L,_,x]),(0,Z.useEffect)(function(){d(new Set),H("bulk"),z(!1)},[y,o,L,_,x]),(0,Z.useEffect)(function(){var e,t=(null==fe||null===(e=fe.pagination)||void 0===e?void 0:e.total_pages)||1;t>0&&C>t&&N(t)},[null==fe||null===(e=fe.pagination)||void 0===e?void 0:e.total_pages]);var xe=function(e){if(!e)return"";var t=new Date(e),n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),l=t.getHours(),i=String(t.getMinutes()).padStart(2,"0"),o=l>=12?"pm":"am";return 0==(l%=12)&&(l=12),"".concat(n,"-").concat(r,"-").concat(a,", ").concat(l,":").concat(i).concat(o)},we=function(e,t){var n=function(e){var t,n=null==e?void 0:e.cart;return $m(l,(null==n?void 0:n.currency)||(null==n||null===(t=n.tax_info)||void 0===t?void 0:t.currency_code))}(e),r="".concat(n," ").concat(Number(t||0).toFixed(2));if(null!=e&&e.aws_order_id){var a,i=Number(null!==(a=null==e?void 0:e.print_cost)&&void 0!==a?a:0);return"".concat(r," (").concat((0,de.__)("Print Cost","nggallery"),": ").concat(n," ").concat(i.toFixed(2),")")}return r},Ee=function(e){switch(e){case"paid":return"Paid";case"unpaid":return"Unpaid";case"awaiting_payment":return"Awaiting Payment";case"fraud":return"Fraud";case"failed":return"Failed";default:return e}},Ce=function(e){if(!e)return"";switch(e.toLowerCase()){case"free":return"Free";case"cheque":case"check":return"Check";case"paypal_standard":case"paypal_express_checkout":case"paypal_express":case"paypal_checkout":return"PayPal";case"stripe_checkout":return"Stripe";case"test_gateway":return"Test";default:return""}},Ne=(0,Z.useMemo)(function(){return((null==fe?void 0:fe.orders)||[]).map(function(e){return{id:e.id,date:xe(e.date),customer:"".concat(e.customer_name,"\n").concat(e.email),customerName:e.customer_name,email:e.email,orderStatus:Ee(e.status),paymentGateway:Ce(e.payment_gateway),coupon:e.coupon_code||"No coupon",total:we(e,e.total_amount),hash:e.hash,awsOrderId:e.aws_order_id}})},[fe]),ke=(0,Z.useMemo)(function(){return[{key:"id",label:(0,de.__)("ID","nggallery"),sortType:"backend",className:"w-16",render:function(e){return J().createElement("button",{type:"button",className:"text-gray-700 hover:text-gray-900 text-sm font-medium hover:underline",onClick:function(){ie(e.id)}},String(e.id).padStart(2,"0"))}},{key:"date",label:(0,de.__)("Date","nggallery"),sortType:"backend",className:"w-1/6",render:function(e){return J().createElement("span",{className:"text-sm text-gray-700"},e.date)}},{key:"customer",label:(0,de.__)("Customer","nggallery"),sortType:"backend",className:"w-1/6",render:function(e){return J().createElement("div",{className:"flex items-start gap-3"},J().createElement("div",null,J().createElement("a",{href:ed(e.hash),target:"_blank",rel:"noopener noreferrer",className:"text-gray-700 hover:text-gray-900 text-sm font-medium hover:underline"},e.customerName),J().createElement("div",{className:"text-gray-500 text-xs"},e.email)))}},{key:"orderStatus",label:(0,de.__)("Order Status","nggallery"),sortType:"backend",className:"w-1/6",render:function(e){return J().createElement("div",{className:"flex flex-col items-start gap-1"},J().createElement("span",{className:"inline-flex items-center justify-center px-3 py-1 rounded text-xs font-medium ".concat("Paid"===e.orderStatus?"bg-green-100 text-green-700":"Unpaid"===e.orderStatus||"Awaiting Payment"===e.orderStatus?"bg-amber-100 text-amber-800":"Failed"===e.orderStatus||"Fraud"===e.orderStatus?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700")},e.orderStatus),e.awsOrderId&&"Failed"===e.orderStatus&&J().createElement(ge,{orderHash:e.hash,awsOrderId:e.awsOrderId,resubmitted:!!ce[e.hash],onDone:function(){return t=e.hash,void ue(function(e){return Jm(Jm({},e),{},n({},t,!0))});var t}}))}},{key:"paymentGateway",label:(0,de.__)("Payment Gateway","nggallery"),sortType:"backend",className:"w-1/6",render:function(e){return J().createElement("span",{className:"text-sm text-gray-700"},e.paymentGateway)}},{key:"coupon",label:(0,de.__)("Coupon","nggallery"),sortType:"backend",className:"w-1/6",render:function(e){return J().createElement("span",{className:"text-sm ".concat("No coupon"===e.coupon?"text-gray-400":"text-gray-700 font-medium")},e.coupon)}},{key:"total",label:(0,de.__)("Total","nggallery"),sortType:"backend",className:"w-1/6",render:function(e){return J().createElement("span",{className:"text-sm font-medium text-gray-900"},e.total)}}]},[ce]);return J().createElement(J().Fragment,null,le?J().createElement(td,{orderId:le,onBack:function(){return ie(null)}}):J().createElement(J().Fragment,null,J().createElement("div",{className:"bg-white rounded-lg shadow-sm"},J().createElement("div",{className:"flex flex-col sm:flex-row gap-3 sm:items-center sm:justify-between mb-4"},J().createElement("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3"},J().createElement(su,{isOpen:I,onClose:function(){return j(!1)},onToggle:function(){return j(!I)},activeClasses:"relative w-full sm:min-w-[180px] border border-gray-300 bg-gray-50 text-gray-700 px-4 h-10 rounded-md text-sm font-medium flex items-center justify-between",trigger:J().createElement("button",{type:"button",className:"relative w-full sm:min-w-[180px] border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 px-4 h-10 rounded-md text-sm font-medium flex items-center justify-between"},J().createElement("span",{className:"flex items-center"},J().createElement(Gn,{className:"w-4 h-4 text-gray-400 mr-2"}),J().createElement("span",null,"all"===L&&(0,de.__)("All Dates","nggallery"),"this_month"===L&&(0,de.__)("This Month","nggallery"),"last_month"===L&&(0,de.__)("Last Month","nggallery"),"this_year"===L&&(0,de.__)("This Year","nggallery"))),J().createElement(Rt,{className:"w-4 h-4 text-gray-400"}))},J().createElement("div",{className:"w-56 py-1"},[{key:"all",label:(0,de.__)("All Dates","nggallery")},{key:"this_month",label:(0,de.__)("This Month","nggallery")},{key:"last_month",label:(0,de.__)("Last Month","nggallery")},{key:"this_year",label:(0,de.__)("This Year","nggallery")}].map(function(e){return J().createElement("button",{key:e.key,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 ".concat(L===e.key?"text-gray-900":"text-gray-700"),onClick:function(){M(e.key),j(!1),N(1)}},e.label)}))),J().createElement(su,{isOpen:P,onClose:function(){return T(!1)},onToggle:function(){return T(!P)},activeClasses:"relative w-full sm:min-w-[180px] border border-gray-300 bg-gray-50 text-gray-700 px-4 h-10 rounded-md text-sm font-medium flex items-center justify-between",trigger:J().createElement("button",{type:"button",className:"relative w-full sm:min-w-[180px] border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 px-4 h-10 rounded-md text-sm font-medium flex items-center justify-between"},J().createElement("span",null,"all"===o&&(0,de.__)("All Order Statuses","nggallery"),"paid"===o&&(0,de.__)("Paid","nggallery"),"unpaid"===o&&(0,de.__)("Unpaid","nggallery"),"awaiting_payment"===o&&(0,de.__)("Awaiting Payment","nggallery"),"fraud"===o&&(0,de.__)("Fraud","nggallery"),"failed"===o&&(0,de.__)("Failed","nggallery")),J().createElement(Rt,{className:"w-4 h-4 text-gray-400"}))},J().createElement("div",{className:"w-56 py-1"},[{key:"all",label:(0,de.__)("All Order Statuses","nggallery")},{key:"paid",label:(0,de.__)("Paid","nggallery")},{key:"unpaid",label:(0,de.__)("Unpaid","nggallery")},{key:"awaiting_payment",label:(0,de.__)("Awaiting Payment","nggallery")},{key:"fraud",label:(0,de.__)("Fraud","nggallery")},{key:"failed",label:(0,de.__)("Failed","nggallery")}].map(function(e){return J().createElement("button",{key:e.key,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 ".concat(o===e.key?"text-gray-900":"text-gray-700"),onClick:function(){s(e.key),T(!1),N(1)}},e.label)}))),m.size>0&&J().createElement(su,{isOpen:F,onClose:function(){return z(!1)},onToggle:function(){return z(!F)},activeClasses:"relative w-full sm:min-w-[190px] border border-gray-300 bg-gray-50 text-gray-700 px-4 py-2 h-10 rounded-md text-sm font-medium flex items-center justify-between",trigger:J().createElement("button",{type:"button",className:"relative w-full sm:min-w-[190px] border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 px-4 py-2 h-10 rounded-md text-sm font-medium flex items-center justify-between"},J().createElement("span",null,(0,de.__)("Bulk Actions","nggallery")),J().createElement(Rt,{className:"w-4 h-4 text-gray-400"}))},J().createElement("div",{className:"w-56 py-1"},[{key:"mark_as_paid",label:(0,de.__)("Mark as Paid","nggallery")},{key:"mark_as_unpaid",label:(0,de.__)("Mark as Unpaid","nggallery")},{key:"mark_as_awaiting_payment",label:(0,de.__)("Mark as Awaiting Payment","nggallery")}].map(function(e){return J().createElement("button",{key:e.key,className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 ".concat(q===e.key?"text-gray-900":"text-gray-700"),onClick:Er(Nr().mark(function t(){var n;return Nr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(H(e.key),z(!1),!(m.size>0)){t.next=31;break}if(n=Array.from(m),"mark_as_paid"!==e.key){t.next=9;break}return Q(n),W(!0),H("bulk"),t.abrupt("return");case 9:if("mark_as_unpaid"!==e.key&&"mark_as_awaiting_payment"!==e.key){t.next=15;break}return Q(n),re("mark_as_unpaid"===e.key?"unpaid":"awaiting_payment"),$(!0),H("bulk"),t.abrupt("return");case 15:t.next=31;break;case 20:d(new Set),be((0,de.__)("Order status updated successfully","nggallery")),t.next=28;break;case 24:t.prev=24,t.t0=t.catch(17),console.error("Failed to update order status:",t.t0),ve((0,de.__)("Failed to update order status","nggallery"));case 28:return t.prev=28,H("bulk"),t.finish(28);case 31:"bulk"===e.key&&H("bulk");case 32:case"end":return t.stop()}},t,null,[[17,24,28,31]])}))},e.label)})))),J().createElement("div",{className:"w-full sm:w-auto"},J().createElement("div",{className:"relative"},J().createElement("span",{className:"pointer-events-none absolute inset-y-0 left-3 flex items-center text-gray-400"},J().createElement($t,{className:"w-5 h-5"})),J().createElement("input",{type:"text",placeholder:(0,de.__)("Search Orders","nggallery"),className:"w-full sm:w-72 border border-gray-300 rounded-md pl-10 pr-3 py-2 text-sm text-gray-700 placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",value:p,onChange:function(e){return f(e.target.value)}})))),J().createElement(Em,{isLoading:ye,items:Ne,visibleColumns:c,selectedItems:m,onSelectAll:function(e){e?d(new Set(Ne.map(function(e){return e.id}))):(d(new Set),H("bulk"),z(!1))},onSelectItem:function(e){var t=new Set(m);t.has(e)?t.delete(e):t.add(e),d(t),0===t.size&&(H("bulk"),z(!1))},columns:ke,onSort:function(e,t){b(t?e:null),w(t),N(1)},sortColumn:_,sortDirection:x,notFoundContent:J().createElement("div",{className:"py-16"},J().createElement("div",{className:"flex flex-col items-center justify-center text-center text-gray-500"},J().createElement("div",{className:"mb-4"},J().createElement(Qn,{className:"w-16 h-16 opacity-60"})),J().createElement("p",{className:"text-sm mb-2"},(0,de.__)("Opps! You have no orders","nggallery"))))}),(null==fe?void 0:fe.pagination)&&fe.pagination.total_pages>1&&J().createElement("div",{className:"border-t"},J().createElement(Ru,{currentPage:C,totalPages:fe.pagination.total_pages,perPage:fe.pagination.per_page,total:fe.pagination.total,onPageChange:N,itemLabel:(0,de.__)("Orders","nggallery"),showItemCount:!0}))),J().createElement(xr,{isOpen:U,onClose:function(){W(!1),Q([]),H("bulk")},title:(0,de.__)("Confirm Mark as Paid","nggallery")},J().createElement("div",{className:"space-y-4"},J().createElement("p",{className:"text-sm text-gray-700"},(0,de.__)("A print lab order will be submitted for any orders that include any print lab items and you will be billed for the cost of goods. Once submitted, the print lab order cannot be cancelled. Continue to Mark as Paid?","nggallery")),J().createElement("div",{className:"flex justify-end gap-3"},J().createElement("button",{type:"button",onClick:function(){W(!1),Q([]),H("bulk")},disabled:he.isPending,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},(0,de.__)("Cancel","nggallery")),J().createElement("button",{type:"button",onClick:Er(Nr().mark(function e(){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,he.mutateAsync({ids:K,status:"paid"});case 3:d(new Set),Q([]),W(!1),H("bulk"),be((0,de.__)("Orders marked as paid successfully","nggallery")),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Failed to update order status:",e.t0),ve((0,de.__)("Failed to mark orders as paid","nggallery"));case 14:case"end":return e.stop()}},e,null,[[0,10]])})),disabled:he.isPending,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},he.isPending&&J().createElement(an,{className:"animate-spin h-4 w-4 text-white"}),he.isPending?(0,de.__)("Please wait...","nggallery"):(0,de.__)("Mark as Paid","nggallery"))))),J().createElement(xr,{isOpen:Y,onClose:function(){$(!1),Q([]),re(null),H("bulk")},title:(0,de.__)("Confirm Action","nggallery")},J().createElement("div",{className:"space-y-4"},J().createElement("p",{className:"text-sm text-gray-700"},(0,de.__)("Are you sure you want to proceed?","nggallery")),J().createElement("div",{className:"flex justify-end gap-3"},J().createElement("button",{type:"button",onClick:function(){$(!1),Q([]),re(null),H("bulk")},disabled:he.isPending,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},(0,de.__)("Cancel","nggallery")),J().createElement("button",{type:"button",onClick:Er(Nr().mark(function e(){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ne){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,he.mutateAsync({ids:K,status:ne});case 5:d(new Set),Q([]),$(!1),re(null),H("bulk"),be((0,de.__)("Orders updated successfully","nggallery")),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(2),console.error("Failed to update order status:",e.t0),ve((0,de.__)("Failed to update orders","nggallery"));case 17:case"end":return e.stop()}},e,null,[[2,13]])})),disabled:he.isPending,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},he.isPending&&J().createElement(an,{className:"animate-spin h-4 w-4 text-white"}),he.isPending?(0,de.__)("Please wait...","nggallery"):(0,de.__)("Proceed","nggallery")))))))};function rd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ad(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rd(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rd(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ld=function(e){return"disabled"===e?"disabled":"flat"===e||"flat_rate"===e?"flat_rate":"percent"===e||"percent_rate"===e?"percent_rate":"disabled"};const id=function(){var e=Da(),t=e.data,r=e.isLoading,a=Ia(),l=$a(),i=te(),o=ea().showError,s=(0,Z.useMemo)(function(){var e,n,r,a,l;if(!t)return null;var i,o=t;return{ecommerce_domestic_shipping:(i=o.ecommerce_domestic_shipping,"flat"===i||"flat_rate"===i?"flat_rate":"percent"===i||"percent_rate"===i?"percent_rate":"flat_rate"),ecommerce_domestic_shipping_rate:String(null!==(e=o.ecommerce_domestic_shipping_rate)&&void 0!==e?e:"5"),ecommerce_intl_shipping:ld(o.ecommerce_intl_shipping),ecommerce_intl_shipping_rate:String(null!==(n=o.ecommerce_intl_shipping_rate)&&void 0!==n?n:"40"),ecommerce_tax_enable:Ca(null!==(r=o.ecommerce_tax_enable)&&void 0!==r&&r),ecommerce_cookies_enable:Ca(null===(a=o.ecommerce_cookies_enable)||void 0===a||a),ecommerce_coupons_disabled:Ca(null!==(l=o.ecommerce_coupons_disabled)&&void 0!==l&&l),ecommerce_currency:o.ecommerce_currency}},[t]),c=hr((0,Z.useState)(null),2),u=c[0],m=c[1];(0,Z.useEffect)(function(){s&&!u&&m(s)},[s,u]);var d=jm({settings:u,tabId:"ecommerce-other-options",mutation:{mutate:function(e,t){a.mutate(e,ad(ad({},t),{},{onSuccess:function(){for(var e,n,r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];null==t||null===(e=(n=t).onSuccess)||void 0===e||e.call.apply(e,[n].concat(a)),i.invalidateQueries({queryKey:["printlabRequirements"]})},onError:function(e){var n,r;o((0,de.__)("Failed to save settings","nggallery")),null==t||null===(n=(r=t).onError)||void 0===n||n.call(r,e)}}))},isPending:a.isPending},getMutationParams:function(e){return e||{}},debounceDelay:1e3}),g=d.markUserInteraction,p=l;if(r||!u)return J().createElement(ar,{size:"md",text:(0,de.__)("Loading settings...","nggallery")});var f=function(e,t){m(function(r){return r?ad(ad({},r),{},n({},e,t)):r}),g()},y="disabled"===u.ecommerce_intl_shipping;return J().createElement("div",{className:"bg-white rounded-lg shadow-sm p-6"},J().createElement("div",{className:"mb-6"},J().createElement("h2",{className:"text-xl font-semibold text-gray-900 mb-2"},(0,de.__)("Other Options","nggallery"))),J().createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},J().createElement("div",null,J().createElement(ml,{id:"ecommerce_domestic_shipping",name:"ecommerce_domestic_shipping",value:u.ecommerce_domestic_shipping,onChange:function(e){return f("ecommerce_domestic_shipping",e.target.value)},label:(0,de.__)("Domestic shipping for manual-fulfilled items","nggallery")},J().createElement("option",{value:"flat_rate"},(0,de.__)("Flat Rate","nggallery")),J().createElement("option",{value:"percent_rate"},(0,de.__)("Percentage Rate","nggallery")))),J().createElement("div",null,J().createElement(dl,{type:"text",id:"ecommerce_domestic_shipping_rate",name:"ecommerce_domestic_shipping_rate",value:u.ecommerce_domestic_shipping_rate,onChange:function(e){return f("ecommerce_domestic_shipping_rate",e.target.value)},label:(0,de.__)("Domestic shipping rate","nggallery"),prefix:"flat_rate"===u.ecommerce_domestic_shipping?p:"%"})),J().createElement("div",null,J().createElement(ml,{id:"ecommerce_intl_shipping",name:"ecommerce_intl_shipping",value:u.ecommerce_intl_shipping,onChange:function(e){return f("ecommerce_intl_shipping",e.target.value)},label:(0,de.__)("Allow International shipping for manual-fulfilled items","nggallery")},J().createElement("option",{value:"disabled"},(0,de.__)("Disabled","nggallery")),J().createElement("option",{value:"flat_rate"},(0,de.__)("Flat Rate","nggallery")),J().createElement("option",{value:"percent_rate"},(0,de.__)("Percentage Rate","nggallery")))),!y&&J().createElement("div",null,J().createElement(dl,{type:"text",id:"ecommerce_intl_shipping_rate",name:"ecommerce_intl_shipping_rate",value:u.ecommerce_intl_shipping_rate,onChange:function(e){return f("ecommerce_intl_shipping_rate",e.target.value)},label:(0,de.__)("International shipping rate","nggallery"),prefix:"percent_rate"===u.ecommerce_intl_shipping?"%":p})),J().createElement("div",{className:"md:col-span-2 mt-2 border-t border-gray-200"}),J().createElement("div",{className:"md:col-span-2"},J().createElement(Ml,{id:"ecommerce_tax_enable",name:"ecommerce_tax_enable",checked:Boolean(u.ecommerce_tax_enable),onChange:function(e){return f("ecommerce_tax_enable",e.target.checked)},label:(0,de.__)("Enable sales tax","nggallery"),help:(0,de.__)("A valid NextGen Pro license is required to calculate sales tax.","nggallery")})),J().createElement("div",{className:"md:col-span-2"},J().createElement(Ml,{id:"ecommerce_cookies_enable",name:"ecommerce_cookies_enable",checked:Boolean(u.ecommerce_cookies_enable),onChange:function(e){return f("ecommerce_cookies_enable",e.target.checked)},label:(0,de.__)("Use cookies for cart storage","nggallery"),help:(0,de.__)("Cookies are adequate for most customers but can only hold a limited number (around 30) of products due to browser limitations. When disabled the browser localStorage API will be used which does not have this problem but cart contents will be different on example.com vs www.example.com as well as across HTTP/HTTPS","nggallery")})),J().createElement("div",{className:"md:col-span-2"},J().createElement(Ml,{id:"ecommerce_coupons_disabled",name:"ecommerce_coupons_disabled",checked:Boolean(u.ecommerce_coupons_disabled),onChange:function(e){return f("ecommerce_coupons_disabled",e.target.checked)},label:(0,de.__)("Hide coupons on checkout","nggallery")}))))};function od(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?od(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):od(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var cd=function(e){var t=ru({id:e.id}),n=t.attributes,r=t.listeners,a=t.setNodeRef,l=t.transform,i=t.transition,o=t.isDragging,s={transform:Bo.Transform.toString(l),transition:i},c=hr((0,Z.useState)(e.item.title||""),2),u=c[0],m=c[1],d=hr((0,Z.useState)(rl(e.item.price).toFixed(2)),2),g=d[0],p=d[1],f=hr((0,Z.useState)(void 0!==e.item.resolution&&null!==e.item.resolution?e.item.resolution.toString():"0"),2),y=f[0],h=f[1];(0,Z.useEffect)(function(){p(rl(e.item.price).toFixed(2))},[e.item.price]);var _=function(){u!==e.item.title&&e.onUpdate&&e.onUpdate(e.item.id,{title:u})},b=function(e){var t=parseFloat(e);(""===e||!isNaN(t)&&t>=0)&&p(e)},v=function(){var t=parseFloat(g);!isNaN(t)&&t>=0&&t!==e.item.price&&e.onUpdate?e.onUpdate(e.item.id,{price:t}):t<0&&p(rl(e.item.price).toFixed(2))},x=function(){var t=y?parseInt(y):0;!isNaN(t)&&t!==e.item.resolution&&e.onUpdate&&e.onUpdate(e.item.id,{resolution:t})},w=function(t,n){"Enter"===t.key?(t.preventDefault(),"title"===n?_():"price"===n?v():"resolution"===n&&x()):"Escape"===t.key&&("title"===n?m(e.item.title||""):"price"===n?p(rl(e.item.price).toFixed(2)):"resolution"===n&&h(void 0!==e.item.resolution&&null!==e.item.resolution?e.item.resolution.toString():"0"))};return J().createElement("tr",{ref:a,style:s,className:"border-b group transition-opacity duration-100 ".concat(e.isDeleting?"opacity-0":"opacity-100"," ").concat(e.isPending?"bg-blue-50 hover:bg-blue-100":o?"bg-blue-50 border-blue-200 opacity-50":e.isSelected?"bg-blue-50 hover:bg-blue-100":"hover:bg-gray-50")},J().createElement("td",{className:"w-10 px-3 py-3"},J().createElement("input",{type:"checkbox",checked:e.isSelected||!1,onChange:function(){return e.onSelect&&e.onSelect(e.item.id)},className:"rounded border-gray-300 text-blue-600 focus:outline-none","aria-label":(0,de.__)("Select ".concat(e.item.title||"product"),"nggallery")})),J().createElement("td",{className:"w-8 px-2 py-3"},J().createElement("div",ge({},n,r,{className:"cursor-move opacity-40 group-hover:opacity-70 relative"}),J().createElement("svg",{className:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},J().createElement("path",{d:"M7 2a2 2 0 1 1 .001 4.001A2 2 0 0 1 7 2zM7 8a2 2 0 1 1 .001 4.001A2 2 0 0 1 7 8zM7 14a2 2 0 1 1 .001 4.001A2 2 0 0 1 7 14zM13 2a2 2 0 1 1 .001 4.001A2 2 0 0 1 13 2zM13 8a2 2 0 1 1 .001 4.001A2 2 0 0 1 13 8zM13 14a2 2 0 1 1 .001 4.001A2 2 0 0 1 13 14z"})),e.isPending&&J().createElement("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-blue-500 rounded-full border border-white"}))),J().createElement("td",{className:"w-1/2 px-4 py-3"},J().createElement("div",{className:"flex items-center gap-2"},J().createElement("input",{type:"text",value:u,onChange:function(t){m(t.target.value),t.target.value!==e.item.title&&e.onUpdate&&e.onUpdate(e.item.id,{title:t.target.value})},onBlur:_,onKeyDown:function(e){return w(e,"title")},className:"flex-1 text-sm font-medium border border-gray-300 rounded px-2 py-1 focus:outline-none text-gray-900"}))),"digital-download"===e.activeTab?J().createElement(J().Fragment,null,J().createElement("td",{className:"w-1/4 px-4 py-3"},J().createElement("div",{className:"relative"},J().createElement("span",{className:"absolute ".concat(nl(e.siteCurrencySymbol)," top-1/2 transform -translate-y-1/2 text-gray-500 text-sm")},e.siteCurrencySymbol),J().createElement("input",{type:"number",step:"1",value:g,onChange:function(e){return b(e.target.value)},onBlur:v,onKeyDown:function(e){return w(e,"price")},className:"w-full text-sm font-medium text-gray-900 border border-gray-300 rounded ".concat(tl(e.siteCurrencySymbol).left," ").concat(tl(e.siteCurrencySymbol).right," py-1 focus:outline-none")}))),J().createElement("td",{className:"w-1/4 px-4 py-3"},J().createElement("div",{className:"relative"},J().createElement("input",{type:"number",min:"0",value:y,onChange:function(t){h(t.target.value);var n=t.target.value?parseInt(t.target.value):0;!isNaN(n)&&n!==e.item.resolution&&e.onUpdate&&e.onUpdate(e.item.id,{resolution:n})},onBlur:x,onKeyDown:function(e){return w(e,"resolution")},className:"w-full text-sm font-medium text-gray-900 border border-gray-300 rounded pl-3 pr-8 py-1 focus:outline-none",placeholder:"Enter 0 for maximum"}),J().createElement("span",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm"},"px")))):J().createElement(J().Fragment,null,J().createElement("td",{className:"w-1/5 px-4 py-3"},"ngg_whcc_pricelist"===e.item.source?J().createElement("div",{className:"relative"},J().createElement("span",{className:"absolute ".concat(nl(e.siteCurrencySymbol)," top-1/2 transform -translate-y-1/2 text-gray-500 text-sm")},e.siteCurrencySymbol),J().createElement("input",{type:"number",step:"1",value:rl(e.item.cost).toFixed(2),readOnly:!0,className:"w-full text-sm font-medium text-gray-700 bg-gray-50 border border-gray-300 rounded ".concat(tl(e.siteCurrencySymbol).left," ").concat(tl(e.siteCurrencySymbol).right," py-1 cursor-not-allowed")})):J().createElement("div",{className:"text-sm text-gray-500 font-medium"},"N/A")),J().createElement("td",{className:"w-1/5 px-4 py-3"},J().createElement("div",{className:"relative"},J().createElement("span",{className:"absolute ".concat(nl(e.siteCurrencySymbol)," top-1/2 transform -translate-y-1/2 text-gray-500 text-sm")},e.siteCurrencySymbol),J().createElement("input",{type:"number",step:"1",value:g,onChange:function(e){return b(e.target.value)},onBlur:v,onKeyDown:function(e){return w(e,"price")},className:"w-full text-sm font-medium text-gray-900 border border-gray-300 rounded ".concat(tl(e.siteCurrencySymbol).left," ").concat(tl(e.siteCurrencySymbol).right," py-1 focus:outline-none")})))),J().createElement("td",{className:"w-1/10 px-4 py-3"},J().createElement("button",{onClick:function(){return e.onDelete(e.item.id)},className:"text-red-600 hover:text-red-800","aria-label":(0,de.__)("Delete product","nggallery")},J().createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})))))};const ud=function(e){var t,r=e.pricelistId,a=zl(),l=a.setCurrentId,i=a.currentSubTab,o=a.setCurrentSubTab,s=ea(),c=s.showSuccess,u=s.showError,m=s.showInfo,d=(0,me.useDispatch)(tr),g=$a(),p=Uu(),f=p.data,y=void 0===f?[]:f,h=p.isLoading,_=y||[],b=Ba(r),v=b.data,x=b.isLoading,w=b.refetch,E=hr((0,Z.useState)(""),2),C=E[0],N=E[1],k=hr((0,Z.useState)(null),2),S=k[0],O=k[1];(0,Z.useEffect)(function(){null!=v&&v.settings&&O(v.settings)},[null==v?void 0:v.settings]);var P=hr((0,Z.useState)({showLicensingLink:!1,licensingPageId:"",allowFreeDownloads:!1}),2),T=P[0],D=P[1],I=i||"prints";(0,Z.useEffect)(function(){i||o("prints")},[i,o]);var j=function(e){return{prints:"ngg_category_prints",canvas:"ngg_category_canvas","mounted-prints":"ngg_category_mounted_prints","metal-prints":"metal_prints","acrylic-prints":"acrylic_prints","wood-prints":"wood_prints","bamboo-panels":"bamboo_panels","digital-download":"ngg_category_digital_downloads"}[e]||e},A=function(e){return Ar({queryKey:["all-pricelist-items",e],queryFn:function(){return ai(e)},enabled:!!e,select:function(e){var t={};return e.forEach(function(e){t[e.category]||(t[e.category]=[]),t[e.category].push(e)}),Object.keys(t).forEach(function(e){t[e].sort(function(e,t){return(e.sortorder||0)-(t.sortorder||0)})}),t}})}(r),L=A.data,M=void 0===L?{}:L,R=A.isLoading,F=A.refetch,z=hr((0,Z.useState)({}),2),B=z[0],q=z[1],H=hr((0,Z.useState)({}),2),G=H[0],U=H[1],W=hr((0,Z.useState)(!1),2),V=W[0],K=W[1],Q=hr((0,Z.useState)({}),2),X=Q[0],Y=Q[1];(0,Z.useEffect)(function(){M&&Object.keys(M).length>0&&U(M)},[M]),(0,Z.useEffect)(function(){V&&M&&Object.keys(M).length>0&&JSON.stringify(M)!==JSON.stringify(X)&&(K(!1),Y(M))},[V,M,X]);var $=hr((0,Z.useState)(new Set),2),ee=$[0],ne=$[1],re="pricelist_deleted_items_".concat(r),ae=hr((0,Z.useState)(!1),2),le=ae[0],ie=ae[1],oe=hr((0,Z.useState)(!1),2),se=oe[0],ce=oe[1],ue=(0,Z.useRef)(null),ge=(0,Z.useCallback)(function(){v&&ie(!0)},[v]),pe=(0,Z.useRef)(null),fe=(0,Z.useCallback)(function(){v&&(pe.current&&clearTimeout(pe.current),pe.current=window.setTimeout(function(){ie(!0)},1e3))},[v]),ye=hr((0,Z.useState)(new Set),2),he=ye[0],_e=ye[1],be=hr((0,Z.useState)(!1),2),ve=be[0],xe=be[1],we=hr((0,Z.useState)(null),2),Ee=we[0],Ce=we[1],Ne=$o(Jo(Ks,{activationConstraint:{distance:8,delay:100,tolerance:10}}),Jo(Hs,{coordinateGetter:iu})),ke=hr((0,Z.useState)(function(){try{var e=sessionStorage.getItem(re);return e?JSON.parse(e):[]}catch(e){return console.error("Failed to load deleted items from sessionStorage:",e),[]}}),2),Se=ke[0],Oe=ke[1],Pe=function(e,t){var r=Object.keys(G).find(function(t){var n;return null===(n=G[t])||void 0===n?void 0:n.some(function(t){return t.id===e})});if(r)U(function(a){return sd(sd({},a),{},n({},r,a[r].map(function(n){return n.id===e?sd(sd({},n),t):n})))});else{var a=Object.keys(B).find(function(t){var n;return null===(n=B[t])||void 0===n?void 0:n.some(function(t){return t.id===e})});a&&q(function(r){return sd(sd({},r),{},n({},a,r[a].map(function(n){return n.id===e?sd(sd({},n),t):n})))})}fe()},Te=j(I),De=sd({},M);Object.keys(G).forEach(function(e){De[e]=G[e]});var Ie=De[Te]||[],je=B[Te]||[],Ae=[].concat(zr(Ie),zr(je)).sort(function(e,t){return e.sortorder-t.sortorder}),Le=(0,Z.useCallback)(function(e){var t=e.active,r=e.over;if(Ce(null),r&&t.id!==r.id){var a=Ae.findIndex(function(e){return e.id===t.id}),l=Ae.findIndex(function(e){return e.id===r.id});if(-1!==a&&-1!==l){var i=Hc(Ae,a,l).map(function(e,t){return sd(sd({},e),{},{sortorder:t+1})}),o=j(I);U(function(e){return sd(sd({},e),{},n({},o,i))}),ge(),window.navigator.vibrate&&window.navigator.vibrate([50,50,50])}}},[Ae,I,j,ge]),Me=sd({},G);Object.keys(B).forEach(function(e){B[e].length>0&&(Me[e]=[].concat(zr(Me[e]||[]),zr(B[e])))});var Re=function(){var e=te();return Mr({mutationFn:ii,onSuccess:function(t,n){e.invalidateQueries({queryKey:["all-pricelist-items"]}),e.invalidateQueries({queryKey:["pricelist-items"]}),e.invalidateQueries({queryKey:["pricelist",n.id]})}})}(),Fe=function(e,t,n){var r=e*(1+t/100);switch(n){case"zero":r=Math.ceil(r);break;case"cent":r=Math.floor(r)+.99}return parseFloat(r.toFixed(2))},ze=function(e,t){if("manual"===t)return e;var n=S||(null==v?void 0:v.settings);if(!n)return e;var r=parseFloat(n.bulk_markup_amount)||300,a=n.bulk_markup_rounding||"zero";return Fe(e,r,a)},Be=(0,Z.useCallback)(function(){if(!v)return{hasChanges:!1,savePayload:null};var e={},t=1;Object.values(B).forEach(function(n){n.forEach(function(n){var r="new-".concat(t++);e[r]={title:n.title,cost:n.cost,price:n.price,source:n.source,category:n.category,resolution:void 0!==n.resolution&&null!==n.resolution?n.resolution:0,sortorder:n.sortorder,source_data:n.source_data}})}),Object.entries(M).forEach(function(t){var n=hr(t,2),r=n[0];n[1].forEach(function(t){if(!Se.includes(t.id)){var n=(G[r]||[]).find(function(e){return e.id===t.id});e[t.id]=n?{title:n.title,cost:n.cost,price:n.price,source:n.source,category:n.category,resolution:void 0!==n.resolution&&null!==n.resolution?n.resolution:0,sortorder:n.sortorder,source_data:n.source_data}:{title:t.title,cost:t.cost,price:t.price,source:t.source,category:t.category,resolution:void 0!==t.resolution&&null!==t.resolution?t.resolution:0,sortorder:t.sortorder,source_data:t.source_data}}})});var n=Object.keys(e).length,a=C.trim()!==(v.title||""),l=JSON.stringify(S)!==JSON.stringify(null==v?void 0:v.settings),i=(null==v?void 0:v.digital_download_settings)||{},o={show_licensing_link:T.showLicensingLink?1:0,licensing_page_id:T.licensingPageId||"",skip_checkout:T.allowFreeDownloads?1:0},s=JSON.stringify(i)!==JSON.stringify(o),c=Se.length>0,u=n>0||a||l||s||c;return{hasChanges:u,savePayload:u?{id:r,pricelist:{title:C.trim(),settings:S,digital_download_settings:o},pricelist_item:e,deleted_items:Se}:null}},[v,B,M,Se,G,C,S,T,r]);function qe(e){_e(function(t){var n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})}(0,Z.useEffect)(function(){return ue.current&&(clearTimeout(ue.current),ue.current=null),le&&v&&!Re.isPending&&!se?(ce(!0),ue.current=window.setTimeout(Er(Nr().mark(function e(){var t,n,r;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Be(),n=t.hasChanges,r=t.savePayload,!n||!r){e.next=17;break}return m((0,de.__)("Saving changes...","nggallery"),{duration:2e3}),e.prev=3,e.next=6,Re.mutateAsync(r);case 6:q({}),Oe([]),ie(!1);try{sessionStorage.removeItem(re)}catch(e){console.error("Failed to clear sessionStorage:",e)}c((0,de.__)("Pricelist changes saved!","nggallery"),{duration:2e3}),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(3),console.error("Auto-save failed:",e.t0),u((0,de.__)("Failed to save changes","nggallery"));case 17:ce(!1);case 18:case"end":return e.stop()}},e,null,[[3,13]])})),1e3)):ce(!1),function(){ue.current&&(clearTimeout(ue.current),ue.current=null),pe.current&&(clearTimeout(pe.current),pe.current=null)}},[le,v,Re.isPending]),(0,Z.useEffect)(function(){if(v){if(N(v.title||""),O(v.settings||{}),v.digital_download_settings){var e=v.digital_download_settings;D({showLicensingLink:Boolean(e.show_licensing_link),licensingPageId:String(e.licensing_page_id||""),allowFreeDownloads:Boolean(e.skip_checkout)})}ie(!1)}},[v]),(0,Z.useEffect)(function(){w(),F()},[r,w,F]),(0,Z.useEffect)(function(){_.length>0&&T.showLicensingLink&&!T.licensingPageId&&D(function(e){return sd(sd({},e),{},{licensingPageId:String(_[0].id)})})},[_,T.showLicensingLink,T.licensingPageId]),(0,Z.useEffect)(function(){M&&Object.keys(M).length>0&&U(M)},[M]),(0,Z.useEffect)(function(){_e(new Set),xe(!1)},[I]),(0,Z.useEffect)(function(){U({}),q({}),Oe([]),ne(new Set),_e(new Set),xe(!1),ie(!1),ce(!1),ue.current&&(clearTimeout(ue.current),ue.current=null),pe.current&&(clearTimeout(pe.current),pe.current=null)},[r]),(0,Z.useEffect)(function(){var e=Ae.map(function(e){return e.id}),t=e.filter(function(e){return he.has(e)});0===t.length?xe(!1):t.length===e.length&&e.length>0?xe(!0):xe(!1)},[he,Ae]);var He,Ge=[{id:"prints",label:(0,de.__)("Prints","nggallery")},{id:"canvas",label:(0,de.__)("Canvas","nggallery")},{id:"mounted-prints",label:(0,de.__)("Mounted Prints","nggallery")},{id:"metal-prints",label:(0,de.__)("Metal Prints","nggallery")},{id:"acrylic-prints",label:(0,de.__)("Acrylic Prints","nggallery")},{id:"wood-prints",label:(0,de.__)("Wood Prints","nggallery")},{id:"bamboo-panels",label:(0,de.__)("Bamboo Panels","nggallery")},{id:"digital-download",label:(0,de.__)("Digital Download","nggallery")}];return x?J().createElement("div",{className:"flex flex-col items-center justify-center py-8"},J().createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mb-4"}),J().createElement("p",{className:"text-gray-600 text-sm font-medium"},(0,de.__)("Loading Pricelist...","nggallery"))):v?J().createElement("div",{className:"bg-white rounded-lg"},J().createElement("div",{className:"flex items-center justify-between mb-6"},J().createElement("button",{type:"button",onClick:function(){l(null),o(null)},className:"flex items-center text-gray-600 hover:text-gray-900"},J().createElement(Vn,{className:"w-5 h-5 mr-2"}),(0,de.__)("Pricelist","nggallery"))),J().createElement("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6"},J().createElement("div",{className:"relative w-full sm:w-auto"},J().createElement("input",{type:"text",id:"pricelist-name",name:"pricelist-name",value:C,onChange:function(e){N(e.target.value),fe()},className:"w-full sm:w-80 px-3 py-2 text-lg font-semibold border border-gray-300 rounded-md focus:outline-none bg-white",placeholder:(0,de.__)("Pricelist Name","nggallery")})),J().createElement("div",{className:"flex-shrink-0 flex flex-col sm:flex-row items-stretch sm:items-center gap-3"},he.size>0&&J().createElement("button",{type:"button",onClick:function(){if(0!==he.size){var e=Array.from(he),t=e.map(function(e){var t;return(null===(t=Ae.find(function(t){return t.id===e}))||void 0===t?void 0:t.title)||(0,de.__)("Untitled Product","nggallery")}).slice(0,3),n=1===he.size?t[0]:he.size<=3?t.join(", "):"".concat(t.slice(0,2).join(", ")," and ").concat(he.size-2," more");d.setActiveModal("deletePricelistItem",{itemTitle:n,isBulkDelete:!0,bulkCount:he.size,onConfirm:function(){ne(function(t){return new Set([].concat(zr(t),e))}),setTimeout(function(){var t=e.filter(function(e){return e<0}),n=e.filter(function(e){return e>=0});t.length>0&&q(function(e){var n=sd({},e);return Object.keys(n).forEach(function(e){var r=n[e]||[];if(r.length>0){var a=r.filter(function(e){return!t.includes(e.id)});n[e]=a.map(function(e,t){return sd(sd({},e),{},{sortorder:t+1})})}}),n}),n.length>0&&(U(function(e){var t=sd({},e);return Object.keys(De).forEach(function(e){var r=De[e]||[];if(n.filter(function(e){return r.some(function(t){return t.id===e})}).length>0){var a=r.filter(function(e){return!n.includes(e.id)});t[e]=a.map(function(e,t){return sd(sd({},e),{},{sortorder:t+1})})}}),t}),Oe(function(e){return[].concat(zr(e),zr(n))})),ge(),_e(new Set),xe(!1),ne(function(t){var n=new Set(t);return e.forEach(function(e){return n.delete(e)}),n})},100)}})}},className:"inline-flex items-center gap-2 rounded-md bg-red-600 text-white px-4 py-2 text-sm font-medium hover:bg-red-700 focus:outline-none"},J().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4"},J().createElement("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"})),(0,de.__)("Delete ".concat(he.size," item").concat(1===he.size?"":"s"),"nggallery")),J().createElement("button",{type:"button",className:"inline-flex items-center gap-2 rounded-md bg-white border border-gray-300 text-gray-700 px-4 py-2 text-sm font-medium hover:bg-gray-50 focus:outline-none shadow-sm",onClick:function(){d.setActiveModal("bulkMarkup",{pricelistId:r,currentSettings:S,onSuccess:function(e){e&&(O(function(t){return sd(sd({},t),{},{bulk_markup_amount:e.markupPercent,bulk_markup_rounding:e.rounding})}),ge(),U(function(t){var n=sd({},t);return Object.keys(n).forEach(function(t){n[t]=n[t].map(function(t){return"ngg_whcc_pricelist"===t.source?sd(sd({},t),{},{price:Fe(t.cost,e.markupPercent,e.rounding)}):t})}),n}),Object.keys(B).length>0&&q(function(t){var n=sd({},t);return Object.keys(n).forEach(function(t){n[t]=n[t].map(function(t){return"ngg_whcc_pricelist"===t.source?sd(sd({},t),{},{price:Fe(t.cost,e.markupPercent,e.rounding)}):t})}),n}))}})}},(0,de.__)("Bulk Markup","nggallery")),J().createElement("button",{type:"button",className:"inline-flex items-center gap-2 rounded-md bg-green-500 text-white px-4 py-2 text-sm font-medium hover:bg-green-600 focus:outline-none",onClick:function(){d.setActiveModal("addProduct",{pricelistId:r,existingItems:G,onSuccess:function(e){if(e&&Array.isArray(e)&&0!==e.length){var t=sd({},B),n={added:0,skipped:0};e.forEach(function(e){t[e.category]||(t[e.category]=[]);var r="number"==typeof e.cost?e.cost:parseFloat(String(e.cost))||0,a=t[e.category].findIndex(function(t){var n,r;return"ngg_whcc_pricelist"===t.source&&(null===(n=t.source_data)||void 0===n?void 0:n.product_id)===(null===(r=e.source_data)||void 0===r?void 0:r.product_id)}),l=(G[e.category]||[]).find(function(t){var n,r;return"ngg_whcc_pricelist"===t.source&&(null===(n=t.source_data)||void 0===n?void 0:n.product_id)===(null===(r=e.source_data)||void 0===r?void 0:r.product_id)});if(a>=0||l)n.skipped++;else{var i=[].concat(zr(G[e.category]||[]),zr(t[e.category]||[])),o=(i.length>0?Math.max.apply(Math,zr(i.map(function(e){return e.sortorder||0}))):0)+1,s=sd(sd({},e),{},{id:-1e6*Math.random(),cost:r,price:"manual"===e.source||"ngg_digital_downloads"===e.source?e.price:ze(r,e.source),sortorder:o});t[e.category].push(s),n.added++}}),q(t),ge(),n.added>0&&n.skipped>0?c((0,de.__)("Added ".concat(n.added," new products, skipped ").concat(n.skipped," existing products"),"nggallery")):n.added>0?c((0,de.__)("Added ".concat(n.added," new products to pricelist"),"nggallery")):n.skipped>0?c((0,de.__)("All ".concat(n.skipped," products already exist in pricelist"),"nggallery")):c((0,de.__)("No new products to add","nggallery"))}else u((0,de.__)("No items were added. Please try again.","nggallery"))}})}},(0,de.__)("Add New Product","nggallery"),J().createElement("span",{className:"inline-flex items-center justify-center w-5 h-5 rounded-full border border-white"},J().createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4"},J().createElement("path",{d:"M12 4.5a.75.75 0 01.75.75V11h5.75a.75.75 0 010 1.5H12.75v5.75a.75.75 0 01-1.5 0V12.5H5.5a.75.75 0 010-1.5h5.75V5.25A.75.75 0 0112 4.5z"})))))),J().createElement("div",{className:"border-b border-gray-200 mb-6"},J().createElement("nav",{className:"-mb-px flex overflow-x-auto"},Ge.map(function(e){return J().createElement("button",{key:e.id,onClick:function(){return o(e.id)},className:"py-3 px-4 border-b-2 font-medium text-sm text-center whitespace-nowrap flex-shrink-0 ".concat(I===e.id?"border-green-500 text-green-600 bg-green-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50")},e.label)}))),J().createElement("div",{className:"min-h-[400px]"},"digital-download"===I&&J().createElement("div",{className:"mb-6 space-y-4"},J().createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4"},J().createElement("div",{className:"flex items-start sm:items-center"},J().createElement("input",{type:"checkbox",id:"display-license-terms",name:"display-license-terms",checked:T.showLicensingLink,onChange:function(e){D(function(t){return sd(sd({},t),{},{showLicensingLink:e.target.checked,licensingPageId:e.target.checked?t.licensingPageId||(_.length>0?String(_[0].id):""):""})}),fe()},className:"rounded border-gray-300 text-blue-600 focus:outline-none w-5 h-5 sm:w-4 sm:h-4 mt-0.5 sm:mt-0 flex-shrink-0"}),J().createElement("label",{htmlFor:"display-license-terms",className:"ml-2 text-sm text-gray-900 leading-relaxed"},(0,de.__)("Display link to license terms?","nggallery"))),T.showLicensingLink&&J().createElement("div",{className:"flex items-center space-x-2 w-full sm:w-auto"},J().createElement("select",{id:"licensing-page",value:T.licensingPageId,onChange:function(e){D(function(t){return sd(sd({},t),{},{licensingPageId:e.target.value})}),fe()},className:"px-3 py-1 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-full sm:min-w-[300px] sm:max-w-md",disabled:h},_.map(function(e){return J().createElement("option",{key:e.id,value:e.id},e.title.rendered)})),h&&J().createElement(ar,{size:"sm",color:"blue",className:"ml-2"}))),J().createElement("div",{className:"flex items-start sm:items-center"},J().createElement("input",{type:"checkbox",id:"allow-free-downloads",name:"allow-free-downloads",checked:T.allowFreeDownloads,onChange:function(e){D(function(t){return sd(sd({},t),{},{allowFreeDownloads:e.target.checked})}),fe()},className:"rounded border-gray-300 text-blue-600 focus:outline-none w-5 h-5 sm:w-4 sm:h-4 mt-0.5 sm:mt-0 flex-shrink-0"}),J().createElement("label",{htmlFor:"allow-free-downloads",className:"ml-2 text-sm text-gray-900 leading-relaxed"},(0,de.__)("Allow free downloads to download directly from the cart sidebar","nggallery")))),J().createElement("div",{className:"bg-white rounded-b-lg shadow-sm"},J().createElement("div",{className:"overflow-x-auto"},J().createElement(kc,{sensors:Ne,collisionDetection:ss,onDragStart:function(e){Ce(e.active.id),window.navigator.vibrate&&window.navigator.vibrate(50)},onDragEnd:Le,measuring:{droppable:{strategy:ec.Always}}},J().createElement("table",{className:"w-full border-collapse min-w-[600px]"},J().createElement("thead",null,J().createElement("tr",{className:"border-b bg-gray-50"},J().createElement("th",{className:"w-10 px-3 py-3 text-left"},Ae.length>0&&J().createElement("input",{type:"checkbox",checked:ve,onChange:function(){if(ve)_e(new Set),xe(!1);else{var e=new Set(Ae.map(function(e){return e.id}));_e(e),xe(!0)}},className:"rounded border-gray-300 text-blue-600 focus:outline-none","aria-label":(0,de.__)("Select all items","nggallery")})),J().createElement("th",{className:"w-8 px-2 py-3 text-left"}),J().createElement("th",{className:"w-1/2 px-4 py-3 text-left font-medium text-gray-600 text-sm"},(0,de.__)("Product Name","nggallery")),"digital-download"===I?J().createElement(J().Fragment,null,J().createElement("th",{className:"w-1/5 px-4 py-3 text-left font-medium text-gray-600 text-sm whitespace-nowrap"},(0,de.__)("Price","nggallery")),J().createElement("th",{className:"w-1/5 px-4 py-3 text-left font-medium text-gray-600 text-sm whitespace-nowrap"},(0,de.__)("Longest Image Dimension","nggallery"))):J().createElement(J().Fragment,null,J().createElement("th",{className:"w-1/5 px-4 py-3 text-left font-medium text-gray-600 text-sm whitespace-nowrap"},(0,de.__)("Cost","nggallery")),J().createElement("th",{className:"w-1/5 px-4 py-3 text-left font-medium text-gray-600 text-sm whitespace-nowrap"},(0,de.__)("Price","nggallery"))),J().createElement("th",{className:"w-1/10 px-4 py-3 text-left font-medium text-gray-600 text-sm"}))),J().createElement("tbody",null,(R||V)&&J().createElement("tr",null,J().createElement("td",{colSpan:7,className:"py-16 text-center"},J().createElement("div",{className:"flex flex-col items-center justify-center"},J().createElement("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-gray-900 mb-3"}),J().createElement("p",{className:"text-gray-600 text-sm font-medium"},V?(0,de.__)("Refreshing Products...","nggallery"):(0,de.__)("Loading Products...","nggallery"))))),!R&&!V&&0===Ae.length&&J().createElement("tr",null,J().createElement("td",{colSpan:7,className:"py-16"},J().createElement("div",{className:"flex flex-col items-center justify-center text-center text-gray-500"},J().createElement("div",{className:"mb-4"},J().createElement(Qn,{className:"w-16 h-16 opacity-60"})),J().createElement("p",{className:"text-sm mb-2"},(0,de.__)("No","nggallery")," ",null===(t=Ge.find(function(e){return e.id===I}))||void 0===t?void 0:t.label," ",(0,de.__)("so far!","nggallery"))))),!R&&!V&&Ae.length>0&&J().createElement(Yc,{items:Ae.map(function(e){return e.id}),strategy:Kc},Ae.map(function(e){return J().createElement(cd,{key:e.id,id:e.id,item:e,activeTab:I,siteCurrencySymbol:g,isDeleting:ee.has(e.id),isPending:e.id<0,isSelected:he.has(e.id),onSelect:qe,onUpdate:Pe,onDelete:function(e){var t=Ae.find(function(t){return t.id===e});t&&d.setActiveModal("deletePricelistItem",{itemTitle:t.title||(0,de.__)("Untitled Product","nggallery"),onConfirm:function(){ne(function(t){return new Set(t).add(e)}),setTimeout(function(){if(e<0){var t=sd({},B);Object.keys(t).forEach(function(n){var r=t[n]||[];if(r.length>0){var a=r.filter(function(t){return t.id!==e});t[n]=a.map(function(e,t){return sd(sd({},e),{},{sortorder:t+1})})}}),q(t)}else U(function(t){var n=sd({},t),r="",a=[];if(Object.keys(De).forEach(function(t){var n=De[t]||[];n.some(function(t){return t.id===e})&&(r=t,a=zr(n))}),r){var l=a.filter(function(t){return t.id!==e});n[r]=l.map(function(e,t){return sd(sd({},e),{},{sortorder:t+1})})}return n}),Oe(function(t){return[].concat(zr(t),[e])}),ge();ne(function(t){var n=new Set(t);return n.delete(e),n})},150)}})}})})))),J().createElement(qc,null,Ee&&((He=Ae.find(function(e){return e.id===Ee}))?J().createElement("table",{className:"w-full border-collapse"},J().createElement("tbody",null,J().createElement("tr",{className:"border-b bg-blue-50 opacity-90 transform scale-105"},J().createElement("td",{className:"w-10 px-3 py-3"},J().createElement("input",{type:"checkbox",checked:!1,disabled:!0,className:"rounded border-gray-300 text-blue-600 opacity-50"})),J().createElement("td",{className:"w-8 px-2 py-3"},J().createElement("div",{className:"cursor-move opacity-40 group-hover:opacity-70 relative"},J().createElement("svg",{className:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},J().createElement("path",{d:"M7 2a2 2 0 1 1 .001 4.001A2 2 0 0 1 7 2zM7 8a2 2 0 1 1 .001 4.001A2 2 0 0 1 7 8zM7 14a2 2 0 1 1 .001 4.001A2 2 0 0 1 7 14zM13 2a2 2 0 1 1 .001 4.001A2 2 0 0 1 13 2zM13 8a2 2 0 1 1 .001 4.001A2 2 0 0 1 13 8zM13 14a2 2 0 1 1 .001 4.001A2 2 0 0 1 13 14z"})))),J().createElement("td",{className:"w-1/2 px-4 py-3"},J().createElement("div",{className:"flex items-center gap-2"},J().createElement("input",{type:"text",value:He.title||"",readOnly:!0,className:"flex-1 text-sm font-medium border border-gray-300 rounded px-2 py-1 bg-white text-gray-900"}))),"digital-download"===I?J().createElement(J().Fragment,null,J().createElement("td",{className:"w-1/4 px-4 py-3"},J().createElement("div",{className:"relative"},J().createElement("span",{className:"absolute ".concat(nl(g)," top-1/2 transform -translate-y-1/2 text-gray-500 text-sm")},g),J().createElement("input",{type:"number",step:"1",value:rl(He.price).toFixed(2),readOnly:!0,className:"w-full text-sm font-medium text-gray-900 border border-gray-300 rounded ".concat(tl(g).left," ").concat(tl(g).right," py-1 bg-white")}))),J().createElement("td",{className:"w-1/4 px-4 py-3"},J().createElement("div",{className:"relative"},J().createElement("input",{type:"number",min:"0",value:void 0!==He.resolution&&null!==He.resolution?He.resolution.toString():"0",readOnly:!0,className:"w-full text-sm font-medium text-gray-900 border border-gray-300 rounded pl-3 pr-8 py-1 bg-white"}),J().createElement("span",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm"},"px")))):J().createElement(J().Fragment,null,J().createElement("td",{className:"w-1/5 px-4 py-3"},"ngg_whcc_pricelist"===He.source?J().createElement("div",{className:"relative"},J().createElement("span",{className:"absolute ".concat(nl(g)," top-1/2 transform -translate-y-1/2 text-gray-500 text-sm")},g),J().createElement("input",{type:"number",step:"1",value:rl(He.cost).toFixed(2),readOnly:!0,className:"w-full text-sm font-medium text-gray-700 bg-gray-50 border border-gray-300 rounded ".concat(tl(g).left," ").concat(tl(g).right," py-1")})):J().createElement("div",{className:"text-sm text-gray-500 font-medium"},"N/A")),J().createElement("td",{className:"w-1/5 px-4 py-3"},J().createElement("div",{className:"relative"},J().createElement("span",{className:"absolute ".concat(nl(g)," top-1/2 transform -translate-y-1/2 text-gray-500 text-sm")},g),J().createElement("input",{type:"number",step:"1",value:rl(He.price).toFixed(2),readOnly:!0,className:"w-full text-sm font-medium text-gray-900 border border-gray-300 rounded ".concat(tl(g).left," ").concat(tl(g).right," py-1 bg-white")})))),J().createElement("td",{className:"w-1/10 px-4 py-3"},J().createElement("button",{className:"text-red-600 hover:text-red-800","aria-label":(0,de.__)("Delete product","nggallery")},J().createElement("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}))))))):null))))))):J().createElement("div",{className:"text-center py-8 text-gray-500"},(0,de.__)("Pricelist not found","nggallery"))},md=function(){var e,t=(0,me.useDispatch)(tr),n=zl(),r=n.setCurrentId,a=n.currentTab,l=hr((0,Z.useState)({customer:!0,date:!0}),1)[0],i=hr((0,Z.useState)(new Set),2),o=i[0],s=i[1],c=hr((0,Z.useState)(""),2),u=c[0],m=c[1],d=Fu(u,300),g=hr((0,Z.useState)("date"),2),p=g[0],f=g[1],y=hr((0,Z.useState)("desc"),2),h=y[0],_=y[1],b=hr((0,Z.useState)(1),2),v=b[0],x=b[1],w=Da().data,E=(null==w?void 0:w.admin_table_per_page)||20,C=hr((0,Z.useState)(!1),2),N=C[0],k=C[1],S=hr((0,Z.useState)("bulk"),2),O=S[0],P=S[1],T=hr((0,Z.useState)(!1),2),D=T[0],I=T[1],j=hr((0,Z.useState)("select"),2),A=j[0],L=j[1],M=qa({page:v,per_page:E,search:d,sort:h&&p?{customer:"title",date:"date"}[p]||"date":void 0,order:h||void 0,period:A}),R=M.data,F=M.isLoading,z=M.refetch;(0,Z.useEffect)(function(){"pricelists"===a&&z()},[a,z]),(0,Z.useEffect)(function(){x(1)},[d]),(0,Z.useEffect)(function(){var e,t=(null==R||null===(e=R.pagination)||void 0===e?void 0:e.total_pages)||1;t>0&&v>t&&x(t)},[null==R||null===(e=R.pagination)||void 0===e?void 0:e.total_pages]);var B=function(e){if(!e)return"";var t=new Date(e),n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),l=t.getHours(),i=String(t.getMinutes()).padStart(2,"0"),o=l>=12?"pm":"am";return 0==(l%=12)&&(l=12),"".concat(n,"-").concat(r,"-").concat(a,", ").concat(l,":").concat(i).concat(o)},q=(0,Z.useMemo)(function(){return((null==R?void 0:R.pricelists)||[]).map(function(e){return{id:e.id,customer:e.title||(0,de.__)("No Title","nggallery"),date:B(e.date)}})},[R]);(0,Z.useEffect)(function(){s(new Set),P("bulk"),k(!1)},[d,A,p,h]);var H=(0,Z.useMemo)(function(){return[{key:"customer",label:(0,de.__)("Pricelist Name","nggallery"),sortType:"backend",render:function(e){return J().createElement("div",{className:"flex items-start gap-3"},J().createElement("div",null,J().createElement("button",{type:"button",className:"text-gray-900 text-sm font-medium hover:underline",onClick:function(){return r(e.id)}},e.customer)))}},{key:"date",label:(0,de.__)("Date","nggallery"),sortType:"backend",render:function(e){return J().createElement("span",{className:"text-sm text-gray-700"},e.date)}}]},[]);return J().createElement("div",{className:"bg-white rounded-lg shadow-sm"},J().createElement("div",{className:"flex flex-col sm:flex-row gap-3 sm:items-center mb-4"},J().createElement("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3"},o.size>0&&J().createElement(su,{isOpen:N,onClose:function(){return k(!1)},onToggle:function(){return k(!N)},activeClasses:"relative w-full sm:min-w-[140px] border border-gray-300 bg-gray-50 text-gray-700 px-4 py-2 h-10 rounded-md text-sm font-medium flex items-center justify-between",trigger:J().createElement("button",{type:"button",className:"relative w-full sm:min-w-[140px] border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 px-4 py-2 h-10 rounded-md text-sm font-medium flex items-center justify-between"},J().createElement("span",null,(0,de.__)("Bulk Actions","nggallery")),J().createElement(Rt,{className:"w-4 h-4 text-gray-400"}))},J().createElement("div",{className:"w-44 py-1 space-y-0"},[{key:"delete",label:(0,de.__)("Delete Selected","nggallery")}].map(function(e){return J().createElement("button",{key:e.key,className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 block border-0 focus:outline-none focus:bg-gray-100 ".concat(O===e.key?"text-gray-900":"text-gray-700"),onClick:Er(Nr().mark(function n(){var r,a;return Nr().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:P(e.key),k(!1),"delete"===e.key&&o.size>0&&(r=Array.from(o),a=r.map(function(e){var t=q.find(function(t){return t.id===e});return{id:e,title:(null==t?void 0:t.customer)||""}}),t.setActiveModal("deletePricelists",{pricelistIds:r,items:a,title:(0,de.__)("Delete Pricelists","nggallery"),onConfirm:function(){var e=Er(Nr().mark(function e(){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s(new Set);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}));case 3:case"end":return n.stop()}},n)}))},e.label)}))),J().createElement(su,{isOpen:D,onClose:function(){return I(!1)},onToggle:function(){return I(!D)},activeClasses:"relative w-full sm:min-w-[140px] border border-gray-300 bg-gray-50 text-gray-700 px-4 h-10 rounded-md text-sm font-medium flex items-center justify-between",trigger:J().createElement("button",{type:"button",className:"relative w-full sm:min-w-[140px] border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 px-4 h-10 rounded-md text-sm font-medium flex items-center justify-between"},J().createElement("span",{className:"flex items-center"},J().createElement(Gn,{className:"w-4 h-4 text-gray-400 mr-2"}),J().createElement("span",null,"select"===A&&(0,de.__)("All Dates","nggallery"),"this_month"===A&&(0,de.__)("This Month","nggallery"),"last_month"===A&&(0,de.__)("Last Month","nggallery"),"this_year"===A&&(0,de.__)("This Year","nggallery"))),J().createElement(Rt,{className:"w-4 h-4 text-gray-400"}))},J().createElement("div",{className:"w-44 py-1 space-y-0"},[{key:"select",label:(0,de.__)("All Dates","nggallery")},{key:"this_month",label:(0,de.__)("This Month","nggallery")},{key:"last_month",label:(0,de.__)("Last Month","nggallery")},{key:"this_year",label:(0,de.__)("This Year","nggallery")}].map(function(e){return J().createElement("button",{key:e.key,className:"w-full text-left px-3 py-2 text-sm hover:bg-gray-100 block border-0 focus:outline-none focus:bg-gray-100 ".concat(A===e.key?"text-gray-900":"text-gray-700"),onClick:function(){L(e.key),I(!1),x(1)}},e.label)}))),J().createElement("div",{className:"relative w-full sm:w-60"},J().createElement("span",{className:"pointer-events-none absolute inset-y-0 left-3 flex items-center text-gray-400"},J().createElement($t,{className:"w-5 h-5"})),J().createElement("input",{type:"text",placeholder:(0,de.__)("Search Pricelists","nggallery"),className:"w-full border border-gray-300 rounded-md pl-10 pr-3 py-2 text-sm text-gray-700 placeholder:text-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",value:u,onChange:function(e){return m(e.target.value)}}))),J().createElement("div",{className:"flex-1"}),J().createElement("button",{type:"button",className:"inline-flex items-center gap-2 rounded-md bg-green-500 text-white px-4 py-2 text-sm font-medium hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500 flex-shrink-0",onClick:function(){return t.setActiveModal("pricelistForm",{onSuccess:function(){}})}},(0,de.__)("Add New Pricelist","nggallery"),J().createElement("span",{className:"inline-flex items-center justify-center w-5 h-5 rounded-full border border-white"},J().createElement(Bt,{className:"w-4 h-4"})))),J().createElement(Em,{isLoading:F,items:q,visibleColumns:l,selectedItems:o,onSelectAll:function(e){e?s(new Set(q.map(function(e){return e.id}))):(s(new Set),P("bulk"),k(!1))},onSelectItem:function(e){var t=new Set(o);t.has(e)?t.delete(e):t.add(e),s(t),0===t.size&&(P("bulk"),k(!1))},columns:H,onSort:function(e,t){f(t?e:null),_(t),x(1)},sortColumn:p,sortDirection:h,actionsHeaderLabel:(0,de.__)("Action","nggallery"),actionCellRenderer:function(e){return J().createElement("div",{className:"flex flex-col items-center text-gray-500"},J().createElement("button",{type:"button",className:"flex flex-col items-center text-red-600 hover:text-red-700",onClick:function(){var n;t.setActiveModal("deletePricelists",{pricelistIds:[e.id],items:[{id:e.id,title:e.customer}],title:(0,de.__)("Delete Pricelist","nggallery"),onConfirm:(n=Er(Nr().mark(function e(){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s(new Set);case 1:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)})})}},J().createElement(Un,{className:"w-4 h-4 mb-1"}),J().createElement("span",{className:"text-xs"},(0,de.__)("Delete","nggallery"))))},notFoundContent:J().createElement("div",{className:"py-16"},J().createElement("div",{className:"flex flex-col items-center justify-center text-center text-gray-500"},J().createElement("div",{className:"mb-4"},J().createElement(Qn,{className:"w-16 h-16 opacity-60"})),J().createElement("p",{className:"text-sm mb-2"},(0,de.__)("No Pricelists so far!","nggallery")),J().createElement("button",{type:"button",className:"inline-flex items-center gap-1 text-green-500 hover:text-green-600 text-sm font-medium",onClick:function(){return t.setActiveModal("pricelistForm",{onSuccess:function(){}})}},(0,de.__)("Add New Pricelist","nggallery"),J().createElement(Bt,{className:"w-4 h-4"}))))}),(null==R?void 0:R.pagination)&&R.pagination.total_pages>1&&J().createElement("div",{className:"border-t"},J().createElement(Ru,{currentPage:v,totalPages:R.pagination.total_pages,perPage:R.pagination.per_page,total:R.pagination.total,onPageChange:x,itemLabel:(0,de.__)("Pricelists","nggallery"),showItemCount:!0})))};var dd=function(e){return["proofings",e]},gd=function(){var e=Er(Nr().mark(function e(t){var n,r;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=null===(n=window.imagelyApp)||void 0===n?void 0:n.nonce,e.next=3,Fr()({path:"/imagely/v1/proofings/".concat(t),method:"DELETE",headers:{"X-WP-Nonce":r}});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();const pd=function(e){var t=e.isOpen,n=e.onClose,r=void 0===n?function(){}:n,a=e.items,l=e.onConfirm,i=void 0===l?function(){}:l,o=function(){var e=Er(Nr().mark(function e(){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all(a.map(function(e){return gd(e.id)}));case 4:i(),r();case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return J().createElement(xr,{isOpen:t,onClose:r},J().createElement("div",{className:"space-y-4"},J().createElement("div",{className:"flex items-center gap-2 justify-center"},J().createElement(An,null)),J().createElement("h2",{className:"text-xl font-bold text-center text-gray-900 mt-2"},(0,de.__)("Delete Proofings","nggallery")),J().createElement("p",{className:"text-sm text-gray-500 text-center"},1===a.length?(0,de.__)("Are you sure you want to delete this proofing?","nggallery"):(0,de.__)("Are you sure you want to delete ".concat(a.length," items?"),"nggallery")),1===a.length&&J().createElement("div",{className:"text-sm text-gray-600 text-center"},J().createElement("div",null,J().createElement("strong",null,(0,de.__)("Title","nggallery"),":")," ",a[0].title||""),J().createElement("div",null,J().createElement("strong",null,(0,de.__)("Email","nggallery"),":")," ",a[0].email||"")),J().createElement("p",{className:"text-sm text-red-500 text-center"},(0,de.__)("This action cannot be undone.","nggallery")),J().createElement("div",{className:"flex justify-center space-x-3 !mb-4"},J().createElement("button",{type:"button",onClick:r,className:"px-8 py-2 font-medium text-gray-700 bg-white border border-gray-300 rounded-lg shadow hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},(0,de.__)("Cancel","nggallery")),J().createElement("button",{type:"button",onClick:o,className:"px-8 py-2 font-bold text-white bg-green-500 border border-transparent rounded-lg shadow hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},(0,de.__)("Delete","nggallery")))))},fd=function(){var e,t,n,r,a=hr((0,Z.useState)(1),2),l=a[0],i=a[1],o=Da().data,s=(null==o?void 0:o.admin_table_per_page)||20,c=hr((0,Z.useState)(""),2),u=c[0],m=c[1],d=hr((0,Z.useState)(""),2),g=d[0],p=d[1],f=hr((0,Z.useState)(""),2),y=f[0],h=f[1],_=hr((0,Z.useState)(new Set),2),b=_[0],v=_[1],x=hr((0,Z.useState)(!1),2),w=x[0],E=x[1],C=hr((0,Z.useState)(null),2),N=C[0],k=C[1],S=hr((0,Z.useState)(""),2),O=S[0],P=S[1],T=(null==N?void 0:N.gallery_id)||(null==N||null===(e=N.proofed_gallery)||void 0===e?void 0:e.gallery_id)||null,D=_a(T),I=(t={page:l,per_page:s,search:u,date_from:g,date_to:y},r=new URLSearchParams,null!=t&&t.page&&r.append("page",String(t.page)),null!=t&&t.per_page&&r.append("per_page",String(t.per_page)),null!=t&&t.search&&r.append("search",t.search),null!=t&&t.orderby&&r.append("orderby",t.orderby),null!=t&&t.order&&r.append("order",t.order),null!=t&&t.date_from&&r.append("date_from",t.date_from),null!=t&&t.date_to&&r.append("date_to",t.date_to),Ar({queryKey:dd(t||{}),queryFn:(n=Er(Nr().mark(function e(){var n,a,l,i,o;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=null===(n=window.imagelyApp)||void 0===n?void 0:n.nonce,l="/imagely/v1/proofings".concat(r.toString()?"?".concat(r.toString()):""),e.next=4,Fr()({path:l,method:"GET",headers:{"X-WP-Nonce":a}});case 4:return i=e.sent,o=Array.isArray(null==i?void 0:i.proofings)?i.proofings.map(function(e){return{id:e.ID,title:e.title,email:e.email,customer_name:e.customer_name,hash:e.hash,referer:e.referer,proofed_gallery:e.proofed_gallery,date_created:e.date_created,date_modified:e.date_modified}}):[],e.abrupt("return",{proofings:o,total:Number(null==i?void 0:i.total)||0,total_pages:Number(null==i?void 0:i.total_pages)||1,page:Number(null==i?void 0:i.page)||(null==t?void 0:t.page)||1,per_page:Number(null==i?void 0:i.per_page)||(null==t?void 0:t.per_page)||20});case 7:case"end":return e.stop()}},e)})),function(){return n.apply(this,arguments)}),staleTime:3e4,gcTime:6e5,retry:0,throwOnError:!1,refetchOnWindowFocus:!0,refetchOnMount:!1,placeholderData:function(e){return e}})),j=I.data,A=I.isLoading,L=I.refetch;(0,Z.useEffect)(function(){L()},[u,g,y,l]),(0,Z.useEffect)(function(){var e,t,n,r;if(N){var a=(null==N?void 0:N.proofed_gallery)||{},l=(null==a||null===(e=a.gallery)||void 0===e?void 0:e.title)||(null==a||null===(t=a.gallery)||void 0===t?void 0:t.name)||(null==a?void 0:a.gallery_title)||(null==a?void 0:a.gallery_name)||(null==a?void 0:a.title)||(null==a?void 0:a.name)||"";P(l||"");var i=(null==a||null===(n=a.gallery)||void 0===n?void 0:n.gid)||(null==a||null===(r=a.gallery)||void 0===r?void 0:r.id)||(null==a?void 0:a.gallery_id)||(null==a?void 0:a.gid)||null;if(!l&&i){var o,s=null===(o=window.imagelyApp)||void 0===o?void 0:o.nonce;Fr()({path:"/imagely/v1/galleries/".concat(i),method:"GET",headers:{"X-WP-Nonce":s}}).then(function(e){null!=e&&e.title&&P(e.title)}).catch(function(){})}}else P("")},[N]);var M=((null==j?void 0:j.proofings)||[]).filter(function(e){return!b.has(e.id)}),R=(null==j?void 0:j.total)||0,F=(null==j?void 0:j.total_pages)||1,z=hr((0,Z.useState)(new Set),2),B=z[0],q=z[1],H=(0,Z.useMemo)(function(){return{title:!0,date_created:!0,customer_name:!0,email:!0}},[]),G=(0,Z.useMemo)(function(){return[{key:"title",label:"Title",sortType:"frontend"},{key:"date_created",label:"Date",sortType:"frontend",render:function(e){return e.date_created||e.date_modified||""}},{key:"customer_name",label:"Name",sortType:"frontend"},{key:"email",label:"Email",sortType:"frontend"}]},[]),U=hr((0,Z.useState)(!1),2),W=U[0],V=U[1],K=hr((0,Z.useState)([]),2),Q=K[0],X=K[1],Y=te(),$=function(){var e=Er(Nr().mark(function e(){var t;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Q.map(function(e){return e.id}),v(function(e){return new Set([].concat(zr(Array.from(e)),zr(t)))}),e.next=4,Promise.all(Q.map(function(e){return gd(e.id)}));case 4:return V(!1),X([]),q(new Set),e.next=9,Y.invalidateQueries({queryKey:["proofings"]});case 9:return i(1),e.next=12,L();case 12:v(new Set);case 13:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return J().createElement(J().Fragment,null,!N&&J().createElement("div",{className:"mb-4 flex flex-col sm:grid sm:grid-cols-2 gap-3"},J().createElement("input",{type:"text",className:"border rounded px-3 py-2",placeholder:(0,de.__)("Search by name or email","nggallery"),value:u,onChange:function(e){m(e.target.value),i(1)}}),J().createElement("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2 sm:justify-end"},J().createElement("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:g,onChange:function(e){var t=e.target.value;p(t),y&&t&&y<t&&h(t),i(1)}}),J().createElement("input",{type:"date",className:"border rounded px-3 py-2 w-full",value:y,min:g||void 0,onChange:function(e){var t=e.target.value;h(g&&t&&t<g?g:t),i(1)}}),B.size>0&&J().createElement(su,{isOpen:w,onClose:function(){return E(!1)},onToggle:function(){return E(!w)},trigger:J().createElement("button",{type:"button",className:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 px-4 sm:px-4 py-2 h-10 rounded-md text-sm font-medium whitespace-nowrap w-full sm:w-auto flex items-center justify-between"},(0,de.__)("Bulk Actions","nggallery"),J().createElement(Rt,{className:"w-4 h-4 text-gray-400"}))},J().createElement("div",{className:"py-1"},J().createElement("button",{className:"block w-full text-left px-4 py-2 text-sm text-red-700 hover:bg-red-100",onClick:function(){var e=M.filter(function(e){return B.has(e.id)});0!==e.length&&(X(e),V(!0))}},(0,de.__)("Delete Selected","nggallery")))))),N?function(){var e;if(!N)return null;var t=Array.isArray(null==N||null===(e=N.proofed_gallery)||void 0===e?void 0:e.image_list)?N.proofed_gallery.image_list:[],n=D.data||[],r={};n.forEach(function(e){r[Number(e.pid)]=e});var a=t.map(function(e){var t,n=r[Number(e)];return{id:Number(e),thumb:(null==n?void 0:n.thumb_url)||"",title:(null==n?void 0:n.alttext)||(null==n||null===(t=n.meta_data)||void 0===t?void 0:t.title)||"",filename:(null==n?void 0:n.filename)||""}}),l=[{key:"thumb",label:"Image",sortType:"frontend",render:function(e){return e.thumb?J().createElement("img",{src:e.thumb,alt:e.title||String(e.id),className:"w-12 h-12 object-cover rounded"}):J().createElement("span",{className:"text-xs text-gray-500"},(0,de.__)("N/A","nggallery"))}},{key:"title",label:"Title",sortType:"frontend"},{key:"filename",label:"Filename",sortType:"frontend"}];return J().createElement("div",{className:"bg-white rounded-lg border p-4"},J().createElement("div",{className:"flex items-center justify-between mb-4"},J().createElement("button",{className:"border rounded px-4 py-2 cursor-pointer bg-white hover:bg-gray-50",onClick:function(){return k(null)}},(0,de.__)("Back to List","nggallery")),J().createElement("div",{className:"text-sm text-gray-500"},N.date_created||N.date_modified)),J().createElement("h3",{className:"text-lg font-semibold text-gray-900 mb-2"},N.title),J().createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},J().createElement("div",{className:"space-y-2"},J().createElement("div",null,J().createElement("span",{className:"font-medium"},(0,de.__)("Customer Name","nggallery"),":")," ",N.customer_name||"-"),J().createElement("div",null,J().createElement("span",{className:"font-medium"},(0,de.__)("Email","nggallery"),":")," ",N.email||"-"),J().createElement("div",null,J().createElement("span",{className:"font-medium"},(0,de.__)("Gallery Source URL","nggallery"),":")," ",N.referer?J().createElement("a",{href:N.referer,target:"_blank",rel:"noreferrer",className:"text-blue-600 hover:underline"},N.referer):"-"),J().createElement("div",null,J().createElement("span",{className:"font-medium"},(0,de.__)("Gallery","nggallery"),":")," ",O||(0,de.__)("Unknown","nggallery")),J().createElement("div",null,J().createElement("span",{className:"font-medium"},(0,de.__)("Images Selected","nggallery"),":")," ",t.length)),J().createElement("div",{className:"space-y-2"})),J().createElement("div",{className:"mt-6"},J().createElement(Em,{isLoading:D.isLoading,items:a,visibleColumns:{thumb:!0,title:!0,filename:!0},selectedItems:new Set,onSelectAll:function(){},onSelectItem:function(){},columns:l,onSort:function(){},sortColumn:null,sortDirection:null,actionsHeaderLabel:"",showSelection:!1})))}():J().createElement(J().Fragment,null,J().createElement(Em,{isLoading:!!A,items:M,visibleColumns:H,selectedItems:B,onSelectAll:function(e){q(e?new Set(M.map(function(e){return e.id})):new Set)},onSelectItem:function(e){var t=new Set(B);t.has(e)?t.delete(e):t.add(e),q(t)},columns:G,onSort:function(){},sortColumn:null,sortDirection:null,actionsHeaderLabel:(0,de.__)("Actions","nggallery"),actionCellRenderer:function(e){return J().createElement("button",{className:"text-green-600 hover:text-green-700 cursor-pointer rounded border px-2 py-1 bg-white hover:bg-green-50",onClick:function(){return k(e)}},(0,de.__)("View Request","nggallery"))}}),F>1&&J().createElement("div",{className:"border-t"},J().createElement(Ru,{currentPage:l,totalPages:F,perPage:s,total:R,onPageChange:i,itemLabel:(0,de.__)("Proofing Requests","nggallery"),showItemCount:!0}))),J().createElement(pd,{isOpen:W,onClose:function(){V(!1),X([])},items:Q,onConfirm:$}))},yd=function(e){var t=e.activeTab,n=e.activeSubTab,r=e.currentId,a=e.onSubTabChange;return"general"===t?J().createElement("div",null,J().createElement(Dm,{activeTab:t,activeSubTab:n,onSubTabChange:a}),function(){switch(n){case"studio-details":default:return J().createElement(Km,null);case"email-setup":return J().createElement(Mm,null);case"payment-setup":return J().createElement(Hm,null);case"page-setup":return J().createElement(zm,null);case"printlab-integration":return J().createElement(Um,null)}}()):J().createElement("div",null,"general"!==t&&!("pricelists"===t&&r)&&J().createElement("div",{className:"mb-6"},J().createElement("h1",{className:"text-2xl font-semibold text-gray-900 mb-2"},t.charAt(0).toUpperCase()+t.slice(1))),function(){switch(t){case"orders":return J().createElement(nd,null);case"proofing":return J().createElement(fd,null);case"pricelists":return r?J().createElement(ud,{pricelistId:r}):J().createElement(md,null);case"coupons":return J().createElement(Im,null);case"other-options":return J().createElement(id,null);default:return J().createElement("div",null,J().createElement(Dm,{activeTab:"general",activeSubTab:"studio-details",onSubTabChange:a}),J().createElement(Km,null))}}())},hd=function(){var e,t,n=Pm(),r=n.subTabStatus,a=n.requirements,l=zl(),i=l.setCurrentTab,o=l.setCurrentSubTab,s=hr(J().useState(!1),2),c=s[0],u=s[1],m=(0,Z.useMemo)(function(){var e=["studio-details","email-setup","payment-setup","page-setup"],t=["printlab-integration"],n=function(e){return e.filter(function(e){return"complete"===r[e]}).length},l=e.length,i=n(e),o=t.length,s=n(t),c=["ecommerce_pages","studio_address","payment_gateway","pro_lightbox","pricelist_created","pricelist_associated","has_ssl","image_settings","image_resizing","active_license","has_printlab_items","card_on_file"],u=0;if(a){var m=c.length,d=c.reduce(function(e,t){return e+(a[t]?1:0)},0);u=Math.round(d/Math.max(m,1)*100)}else{var g=l+o,p=i+s;u=Math.round(p/Math.max(g,1)*100)}return{ecommerceTotal:l,ecommerceDone:i,printlabTotal:o,printlabDone:s,overallPct:u}},[r,a]),d=function(e,t){return e>=t?"bg-green-500":0===e?"bg-red-500":"bg-yellow-400"};return J().createElement("div",{className:"space-y-6"},J().createElement("div",{className:"bg-white rounded-lg shadow-sm p-4"},J().createElement("div",{className:"flex items-center justify-between mb-3"},J().createElement("h3",{className:"text-sm font-medium text-gray-900"},(0,de.__)("Ecommerce Setup","nggallery")),J().createElement("span",{className:"text-xs text-gray-500"},"".concat(m.ecommerceDone,"/").concat(m.ecommerceTotal," ").concat((0,de.__)("steps completed","nggallery")))),J().createElement("div",{className:"flex items-center justify-between"},J().createElement("div",{className:"w-2 h-2 rounded-full ".concat(d(m.ecommerceDone,m.ecommerceTotal))}),m.ecommerceDone<m.ecommerceTotal&&J().createElement("button",{className:"text-xs text-green-700 hover:text-green-800 font-medium",onClick:function(){i("general"),o("studio-details")}},(0,de.__)("Complete Now","nggallery")))),J().createElement("div",{className:"bg-white rounded-lg shadow-sm p-4"},J().createElement("div",{className:"flex items-center justify-between mb-3"},J().createElement("h3",{className:"text-sm font-medium text-gray-900"},(0,de.__)("Automated Print Fulfillment","nggallery")),J().createElement("span",{className:"text-xs text-gray-500"},"".concat(m.printlabDone,"/").concat(m.printlabTotal," ").concat((0,de.__)("steps completed","nggallery")))),J().createElement("div",{className:"flex items-center justify-between"},J().createElement("div",{className:"w-2 h-2 rounded-full ".concat(d(m.printlabDone,m.printlabTotal))}),m.printlabDone<m.printlabTotal&&J().createElement("button",{className:"text-xs text-green-700 hover:text-green-800 font-medium",onClick:function(){i("general"),o("printlab-integration")}},(0,de.__)("Complete Now","nggallery")))),J().createElement("div",{className:"bg-white rounded-lg shadow-sm p-4"},J().createElement("div",{className:"flex items-start space-x-3"},J().createElement("div",{className:"w-12 h-12"},(t=(e=2*Math.PI*21)*(1-m.overallPct/100),J().createElement("svg",{width:48,height:48,className:"block"},J().createElement("circle",{cx:24,cy:24,r:21,stroke:"#E5E7EB",strokeWidth:6,fill:"none"}),J().createElement("circle",{cx:24,cy:24,r:21,stroke:"#10B981",strokeWidth:6,fill:"none",strokeDasharray:"".concat(e," ").concat(e),strokeDashoffset:t,strokeLinecap:"round",transform:"rotate(-90 ".concat(24," ").concat(24,")")}),J().createElement("text",{x:"50%",y:"50%",dominantBaseline:"middle",textAnchor:"middle",fontSize:"10",fill:"#065F46"},m.overallPct,"%")))),J().createElement("div",{className:"flex-1"},J().createElement("h4",{className:"text-sm font-medium text-gray-900 mb-1"},(0,de.__)("Complete your Ecommerce Setup","nggallery")),J().createElement("button",{className:"text-xs text-green-700 hover:text-green-800 font-medium",onClick:function(){return u(!0)}},(0,de.__)("View Pending","nggallery"))))),J().createElement(xr,{isOpen:c,onClose:function(){return u(!1)},title:(0,de.__)("Pending Tasks","nggallery")},J().createElement("div",{className:"space-y-4 text-sm"},a?J().createElement("div",{className:"space-y-2"},Object.entries({ecommerce_pages:(0,de.__)("Checkout/Thank-you/Cancel/Digital Download pages set","nggallery"),studio_address:(0,de.__)("Studio details completed","nggallery"),payment_gateway:(0,de.__)("At least one payment gateway configured","nggallery"),pro_lightbox:(0,de.__)("Pro Lightbox enabled","nggallery"),pricelist_created:(0,de.__)("Pricelist created","nggallery"),pricelist_associated:(0,de.__)("A gallery associated to a pricelist","nggallery"),has_ssl:(0,de.__)("SSL/HTTPS enabled","nggallery"),image_settings:(0,de.__)("Image backups enabled","nggallery"),image_resizing:(0,de.__)("Image resizing on upload enabled","nggallery"),active_license:(0,de.__)("Active license","nggallery"),has_printlab_items:(0,de.__)("Pricelist has print lab items","nggallery"),card_on_file:(0,de.__)("Credit card on file (PrintLab)","nggallery")}).filter(function(e){var t=hr(e,1)[0];return a&&!a[t]}).map(function(e){var t=hr(e,2),n=t[0],r=t[1];return J().createElement("div",{key:n,className:"flex items-center justify-between"},J().createElement("span",{className:"text-gray-800"},r),J().createElement("span",{className:"w-2 h-2 rounded-full ".concat("card_on_file"===n?"bg-yellow-400":"bg-red-500")}))})):[{id:"studio-details",label:(0,de.__)("Studio Details","nggallery")},{id:"email-setup",label:(0,de.__)("Email Setup","nggallery")},{id:"payment-setup",label:(0,de.__)("Payment Setup","nggallery")},{id:"page-setup",label:(0,de.__)("Page Setup","nggallery")},{id:"printlab-integration",label:(0,de.__)("PrintLab Integration","nggallery")}].filter(function(e){return"complete"!==r[e.id]}).map(function(e){return J().createElement("div",{key:e.id,className:"flex items-center justify-between"},J().createElement("span",{className:"text-gray-800"},e.label),J().createElement("span",{className:"w-2 h-2 rounded-full ".concat("warning"===r[e.id]?"bg-yellow-400":"bg-red-500")}))}),J().createElement("div",{className:"pt-2 flex gap-2 justify-end"},J().createElement("button",{className:"px-3 py-1.5 text-xs rounded bg-gray-100 hover:bg-gray-200",onClick:function(){return u(!1)}},(0,de.__)("Close","nggallery"))))))},_d=function(e){var t=e.activeTab,n=e.onTabChange;return J().createElement("div",{className:"bg-white rounded-lg shadow-sm p-4"},J().createElement("nav",{className:"space-y-2"},Tm.map(function(e){return J().createElement("button",{key:e.id,onClick:function(){return n(e.id)},className:"w-full flex items-center space-x-3 p-3 text-left rounded-lg transition-colors ".concat(t===e.id?"bg-green-50 text-green-700 font-medium border border-green-200":"text-gray-600 hover:bg-gray-50 hover:text-gray-900")},J().createElement("div",{className:"flex-shrink-0 ".concat(t===e.id?"text-green-600":"text-gray-400")},e.icon),J().createElement("span",{className:"text-sm"},e.label))})))},bd=function(){var e=zl(),t=e.currentTab,n=e.currentSubTab,r=e.currentId,a=e.setCurrentTab,l=e.setCurrentSubTab,i=e.setCurrentId;return(0,Z.useEffect)(function(){Tm.map(function(e){return e.id}).includes(t)||a("general")},[t,a]),(0,Z.useEffect)(function(){"general"!==t||n||l("studio-details")},[t,n,l]),J().createElement("div",{className:"flex-1 flex flex-col lg:flex-row overflow-hidden border rounded-lg border-gray-50 p-4 bg-white"},J().createElement("div",{className:"flex-shrink-0 w-full lg:w-64 border rounded-lg border-gray-50 p-4 space-y-4 mb-4 lg:mb-0"},J().createElement(_d,{activeTab:t,onTabChange:function(e){"pricelists"!==t&&"orders"!==t||!r||e===t||i(null),a(e);var n=Tm.find(function(t){return t.id===e});null!=n&&n.subTabs&&n.subTabs.length>0?l(n.subTabs[0].id):l(null)}}),J().createElement(hd,null)),J().createElement("div",{className:"flex-1 p-6 overflow-auto border rounded-lg border-gray-50 lg:ml-4"},J().createElement(yd,{activeTab:t,activeSubTab:n,currentId:r,onSubTabChange:function(e){l(e)}})))};var vd=[{key:"gid",label:"ID",filterable:!0,visibleByDefault:!0,sortType:"backend",locked:!0},{key:"title",label:"Gallery Title",filterable:!0,visibleByDefault:!0,sortType:"backend",locked:!0},{key:"thumbnail",label:"Thumbnail",filterable:!1,visibleByDefault:!0,sortType:!1,locked:!0},{key:"shortcode",label:"Shortcode",filterable:!1,visibleByDefault:!0,sortType:!1,locked:!0},{key:"is_private",label:"Privacy",filterable:!0,visibleByDefault:!1,sortType:"backend",locked:!0},{key:"is_ecommerce_enabled",label:"eCommerce",filterable:!0,visibleByDefault:!1,sortType:"backend"},{key:"no_of_images",label:"Images",filterable:!0,visibleByDefault:!1,sortType:!1},{key:"date_created",label:"Created Date",filterable:!0,visibleByDefault:!1,sortType:"backend"},{key:"date_modified",label:"Modified Date",filterable:!0,visibleByDefault:!1,sortType:"backend"}],xd=Object.fromEntries(vd.map(function(e){return[e.key,e.visibleByDefault]}));const wd=function(){var e=(0,me.useDispatch)(tr),t=window.imagelyApp.assetsURL+"/images/HeaderImage.png",n=window.imagelyApp.assetsURL+"/images/HeaderArrow.png";return React.createElement("div",{className:"mb-8 bg-white rounded-lg shadow-sm p-4 sm:p-6 lg:p-8 flex flex-col lg:flex-row lg:justify-between lg:items-center relative overflow-hidden"},React.createElement("div",{className:"w-full lg:max-w-[50%] relative z-10 mb-6 lg:mb-0"},React.createElement("h1",{className:"text-2xl sm:text-3xl font-semibold mb-2 text-gray-900"},(0,de.__)("Welcome to Imagely")),React.createElement("p",{className:"text-sm sm:text-base text-gray-600 mb-4 sm:mb-6"},(0,de.__)("Let's get started by adding images to create your gallery")),React.createElement("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4"},React.createElement("button",{className:"bg-green-500 text-white hover:bg-green-600 px-4 sm:px-6 py-2.5 h-auto rounded-md text-sm font-medium w-full sm:w-auto transition-colors",onClick:function(){Ei()?e.setActiveModal("imageUploader"):e.setActiveModal("licenseRequired",{action:"create new galleries"})}},(0,de.__)("Add a New Gallery")),React.createElement("div",{className:"hidden sm:block w-12 h-12 relative -top-5"},React.createElement("img",{src:n,alt:"Decorative arrow",className:"w-full h-full object-contain"})))),React.createElement("div",{className:"w-full lg:absolute lg:inset-y-0 lg:right-0 lg:w-1/2 lg:h-full flex items-center justify-center"},React.createElement("img",{src:t,alt:"Gallery illustration",className:"w-full h-48 sm:h-64 lg:h-full object-contain lg:relative lg:left-20"})))};function Ed(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Cd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ed(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ed(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Nd=function(e){var t=e.src,n=e.alt,r=hr((0,Z.useState)(!1),2),a=r[0],l=r[1],i=Bl({width:48,height:48,text:"NO IMAGE",fontSize:8}),o=!t||""===t.trim()||a?i:t;return J().createElement("img",{src:o,alt:n,className:"w-12 h-12 object-cover rounded-md border border-gray-200",onError:function(){return l(!0)}})};const kd=function(e){var t=e.galleries,n=e.visibleColumns,r=e.selectedGalleries,a=e.onSelectAll,l=e.onSelectGallery,i=e.onSort,o=e.sortColumn,s=e.sortDirection,c=e.onDelete,u=e.isLoading,m=e.hasActiveSearch,d=void 0!==m&&m,g=(0,me.useDispatch)(tr),p=function(){var e=Er(Nr().mark(function e(t){var n;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(t);case 3:g.showNotice("success",(0,de.__)("Shortcode copied to clipboard!","nggallery")),e.next=14;break;case 6:e.prev=6,e.t0=e.catch(0),(n=document.createElement("textarea")).value=t,document.body.appendChild(n),n.select();try{document.execCommand("copy"),g.showNotice("success",(0,de.__)("Shortcode copied to clipboard!","nggallery"))}catch(e){g.showNotice("error",(0,de.__)("Failed to copy shortcode to clipboard","nggallery"))}document.body.removeChild(n);case 14:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),f=d?J().createElement("div",{className:"py-16"},J().createElement("div",{className:"flex flex-col items-center justify-center text-center text-gray-500"},J().createElement("p",{className:"text-sm mb-2"},(0,de.__)("No results found for your search.","nggallery")))):J().createElement("div",{className:"py-16"},J().createElement("div",{className:"flex flex-col items-center justify-center text-center text-gray-500"},J().createElement("div",{className:"mb-4"},J().createElement(Qn,{className:"w-16 h-16 opacity-60"})),J().createElement("p",{className:"text-sm mb-2"},(0,de.__)("No Galleries so far!","nggallery")),J().createElement("button",{type:"button",className:"inline-flex items-center gap-1 text-green-500 hover:text-green-600 text-sm font-medium",onClick:function(){Ei()?g.setActiveModal("imageUploader"):g.setActiveModal("licenseRequired",{action:"create new galleries"})}},(0,de.__)("Add New Gallery","nggallery"),J().createElement(Bt,{className:"w-4 h-4"}))));return J().createElement(Em,{isLoading:u,items:t,visibleColumns:n,selectedItems:r,onSelectAll:a,onSelectItem:l,columns:vd.map(function(e){return Cd(Cd({},e),{},{render:function(t){return function(e,t){switch(t){case"gid":return J().createElement("span",{className:"text-gray-600 text-sm"},e.id);case"title":return J().createElement("button",{onClick:function(){return function(e){e.canManage?(g.setCurrentId(e.id),g.navigateTo("imagely-add-new","images",e.id)):g.showNotice("warning",(0,de.__)("You do not have permission to edit this gallery","nggallery"))}(e)},className:"font-medium text-sm ".concat(!1===e.canManage?"text-gray-400 cursor-not-allowed":"text-gray-900 hover:underline"),disabled:!1===e.canManage,title:!1===e.canManage?(0,de.__)("You do not have permission to edit this gallery","nggallery"):void 0},e.galleryTitle);case"thumbnail":return J().createElement(Nd,{src:e.thumbnail,alt:e.galleryTitle});case"shortcode":return J().createElement("button",{onClick:function(){return p(e.shortcode)},className:"bg-gray-100 px-3 py-1 rounded text-sm font-mono text-gray-600 hover:bg-gray-200 transition-colors cursor-pointer border-none",title:(0,de.__)("Click to copy shortcode","nggallery")},e.shortcode);case"no_of_images":return J().createElement("span",{className:"text-gray-600 text-sm"},e.count);case"is_ecommerce_enabled":return J().createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.eCommerce?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800")},e.eCommerce?(0,de.__)("Yes"):(0,de.__)("No"));case"is_private":return J().createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.is_private?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800")},e.is_private?(0,de.__)("Private","nggallery"):(0,de.__)("Public","nggallery"));case"date_created":return J().createElement("span",{className:"text-gray-600 text-sm"},e.created);case"date_modified":return J().createElement("span",{className:"text-gray-600 text-sm"},e.modified);default:return null}}(t,e.key)}})}),onSort:i,sortColumn:o,sortDirection:s,notFoundContent:f,actionsHeaderLabel:(0,de.__)("Actions","nggallery"),actionCellRenderer:function(e){return J().createElement("div",{className:"flex flex-col items-center text-gray-500"},J().createElement("button",{type:"button",className:"flex flex-col items-center text-red-600 hover:text-red-700",onClick:function(){return function(e){e.canManage?c([e]):g.showNotice("warning",(0,de.__)("You do not have permission to delete this gallery","nggallery"))}(e)}},J().createElement(Un,{className:"w-4 h-4 mb-1"}),J().createElement("span",{className:"text-xs"},(0,de.__)("Delete","nggallery"))))}})},Sd=function(){var e=hr((0,Z.useState)(""),2),t=e[0],n=e[1],r=Fu(t,300),a=hr((0,Z.useState)(xd),2),l=a[0],i=a[1],o=hr((0,Z.useState)(new Set),2),s=o[0],c=o[1],u=hr((0,Z.useState)("date_modified"),2),m=u[0],d=u[1],g=hr((0,Z.useState)("desc"),2),p=g[0],f=g[1],y=hr((0,Z.useState)(1),2),h=y[0],_=y[1],b=hr((0,Z.useState)(!1),2),v=b[0],x=b[1],w=Da().data,E=(null==w?void 0:w.admin_table_per_page)||20,C=J().useMemo(function(){return{page:h,per_page:E,search:r||void 0,sort:m||void 0,order:p||void 0}},[h,E,r,m,p]),N=ya(C),k=N.data,S=N.isLoading,O=N.error,P=J().useMemo(function(){return(null==k?void 0:k.galleries)||[]},[null==k?void 0:k.galleries]),T=J().useMemo(function(){return(null==k?void 0:k.pagination)||{total:0,total_pages:1,per_page:E,current_page:1}},[null==k?void 0:k.pagination,E]),D=ba(),I=function(){var e,t=te(),n=oa("set-watermark");return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var r,a,l,i,o,s,c;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.galleryIds,a=t.onProgress,e.next=3,xa(r);case 3:l=e.sent,i=l.length,o=0,s=0,c=0;case 8:if(!(c<l.length)){e.next=23;break}return e.prev=9,e.next=12,n(l[c]);case 12:o++,e.next=19;break;case 15:e.prev=15,e.t0=e.catch(9),console.error("Failed to set watermark on image ".concat(l[c],":"),e.t0),s++;case 19:a&&a(c+1,i);case 20:c++,e.next=8;break;case 23:return e.abrupt("return",{successCount:o,failureCount:s,total:i});case 24:case"end":return e.stop()}},e,null,[[9,15]])})),function(t){return e.apply(this,arguments)}),onSuccess:function(){t.invalidateQueries({queryKey:["gallery"]})}})}(),j=function(){var e,t=te(),n=oa("import-metadata");return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var r,a,l,i,o,s,c;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.galleryIds,a=t.onProgress,e.next=3,xa(r);case 3:l=e.sent,i=l.length,o=0,s=0,c=0;case 8:if(!(c<l.length)){e.next=23;break}return e.prev=9,e.next=12,n(l[c]);case 12:o++,e.next=19;break;case 15:e.prev=15,e.t0=e.catch(9),console.error("Failed to import metadata for image ".concat(l[c],":"),e.t0),s++;case 19:a&&a(c+1,i);case 20:c++,e.next=8;break;case 23:return e.abrupt("return",{successCount:o,failureCount:s,total:i});case 24:case"end":return e.stop()}},e,null,[[9,15]])})),function(t){return e.apply(this,arguments)}),onSuccess:function(){t.invalidateQueries({queryKey:["gallery"]})}})}(),A=function(){var e,t=te(),n=oa("recover");return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var r,a,l,i,o,s,c;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.galleryIds,a=t.onProgress,e.next=3,xa(r);case 3:l=e.sent,i=l.length,o=0,s=0,c=0;case 8:if(!(c<l.length)){e.next=23;break}return e.prev=9,e.next=12,n(l[c]);case 12:o++,e.next=19;break;case 15:e.prev=15,e.t0=e.catch(9),console.error("Failed to recover image ".concat(l[c],":"),e.t0),s++;case 19:a&&a(c+1,i);case 20:c++,e.next=8;break;case 23:return e.abrupt("return",{successCount:o,failureCount:s,total:i});case 24:case"end":return e.stop()}},e,null,[[9,15]])})),function(t){return e.apply(this,arguments)}),onSuccess:function(){t.invalidateQueries({queryKey:["gallery"]})}})}(),L=(0,me.useDispatch)(tr),M=ea(),R=M.showSuccess,F=M.showError,z=M.showWarning,B=function(e,t,n){e.failureCount>0?z("".concat(n," ").concat(e.successCount," ").concat((0,de.__)("of","nggallery")," ").concat(e.total," ").concat((0,de.__)("images","nggallery"))):R("".concat(t," ").concat(e.total," ").concat((0,de.__)("images","nggallery")))},q=function(e,t,n,r,a,l){return function(i){var o;L.setActiveModal("bulkOperationConfirmation",{galleries:i,operationType:e,onClose:function(){return L.setActiveModal(null)},onConfirm:(o=Er(Nr().mark(function o(s){var u,m;return Nr().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,u={galleryIds:i.map(function(e){return e.id})},l&&s&&(u.onProgress=s),o.next=5,t.mutateAsync(u);case 5:m=o.sent,c(new Set),B(m,n,r),o.next=14;break;case 10:o.prev=10,o.t0=o.catch(0),console.error("".concat(e," error:"),o.t0),F(a);case 14:case"end":return o.stop()}},o,null,[[0,10]])})),function(e){return o.apply(this,arguments)})})}};(0,Z.useEffect)(function(){_(1)},[r]),(0,Z.useEffect)(function(){c(new Set)},[h,E,r,m,p]),(0,Z.useEffect)(function(){T.total_pages>0&&h>T.total_pages&&_(T.total_pages)},[T.total_pages,h]),(0,Z.useEffect)(function(){var e=function(){var e=new URLSearchParams(window.location.search);if("1"===e.get("create_gallery")){Ei()?L.setActiveModal("imageUploader"):L.setActiveModal("licenseRequired",{action:"create new galleries"}),e.delete("create_gallery");var t="".concat(window.location.pathname,"?").concat(e.toString());window.history.replaceState({},"",t)}};e();var t=function(){e()};return window.addEventListener("imagely-navigation",t),function(){window.removeEventListener("imagely-navigation",t)}},[L]);var H=J().useCallback(function(e){_(e),window.scrollTo({top:0,behavior:"smooth"})},[]),G=function(e){var t;L.setActiveModal("deleteGalleries",{galleries:e,onClose:function(){return L.setActiveModal(null)},onConfirm:(t=Er(Nr().mark(function t(){var n,r;return Nr().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!v&&!D.isPending){t.next=2;break}return t.abrupt("return");case 2:return x(!0),t.prev=3,t.next=6,Promise.allSettled(e.map(function(e){return D.mutateAsync(e.id)}));case 6:n=t.sent,r=n.some(function(e){var t,n;return"rejected"===e.status&&!(404===(null===(t=e.reason)||void 0===t?void 0:t.status)||404===(null===(n=e.reason)||void 0===n||null===(n=n.response)||void 0===n?void 0:n.status))}),c(new Set),L.setActiveModal(null),r?L.showNotice("error",(0,de.__)("Some galleries could not be deleted","nggallery")):L.showNotice("success",(0,de.__)("Galleries deleted successfully","nggallery")),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(3),console.error("Delete error:",t.t0),L.showNotice("error",(0,de.__)("Failed to delete galleries","nggallery"));case 17:return t.prev=17,x(!1),t.finish(17);case 20:case"end":return t.stop()}},t,null,[[3,13,17,20]])})),function(){return t.apply(this,arguments)})})},U=q("watermark",I,(0,de.__)("Successfully applied watermark to","nggallery"),(0,de.__)("Watermark applied to","nggallery"),(0,de.__)("Failed to set watermark on galleries","nggallery"),!0),W=q("metadata",j,(0,de.__)("Successfully imported metadata for","nggallery"),(0,de.__)("Metadata imported for","nggallery"),(0,de.__)("Failed to import metadata for galleries","nggallery"),!0),V=q("recovery",A,(0,de.__)("Successfully recovered","nggallery")+" "+(0,de.__)("images from backup","nggallery"),(0,de.__)("Recovered","nggallery"),(0,de.__)("Failed to recover images from backup","nggallery"),!0);return O?J().createElement("div",{className:"p-6 min-h-screen"},J().createElement(wd,null),J().createElement("div",{className:"bg-red-50 border border-red-200 rounded-md p-4"},J().createElement("div",{className:"flex"},J().createElement("div",{className:"flex-shrink-0"},J().createElement(Qt,{className:"h-5 w-5 text-red-400"})),J().createElement("div",{className:"ml-3"},J().createElement("h3",{className:"text-sm font-medium text-red-800"},(0,de.__)("Error loading galleries","nggallery")),J().createElement("div",{className:"mt-2 text-sm text-red-700"},O instanceof Error?O.message:(0,de.__)("An unexpected error occurred","nggallery")))))):J().createElement("div",{className:"p-6 min-h-screen"},J().createElement(wd,null),J().createElement(Mu,{title:(0,de.__)("Manage Galleries","nggallery"),searchTerm:t,setSearchTerm:n,onSearch:function(){},visibleColumns:l,setVisibleColumns:i,selectedItems:s,items:P,columns:zr(vd),itemType:"gallery",searchPlaceholder:(0,de.__)("Search Galleries","nggallery"),onDelete:G,onSetWatermark:U,onCreateThumbnails:function(e){L.setActiveModal("bulkCreateThumbnailsGalleries",{galleryIds:e.map(function(e){return e.id}),onClose:function(){return L.setActiveModal(null)},onConfirm:function(){c(new Set)}})},onResizeImages:function(e){L.setActiveModal("bulkResizeImagesGalleries",{galleryIds:e.map(function(e){return e.id}),onClose:function(){return L.setActiveModal(null)},onConfirm:function(){c(new Set)}})},onImportMetadata:W,onRecoverFromBackup:V}),J().createElement(kd,{isLoading:S,galleries:P,visibleColumns:l,selectedGalleries:s,onSelectAll:function(e){c(e?new Set(P.map(function(e){return e.id})):new Set)},onSelectGallery:function(e){var t=new Set(s);t.has(e)?t.delete(e):t.add(e),c(t)},onSort:function(e,t){d(t?e:null),f(t),_(1)},sortColumn:m,sortDirection:p,onDelete:G,hasActiveSearch:!!r}),!S&&(T.total>0||r)&&J().createElement(Ru,{currentPage:h,totalPages:T.total_pages,perPage:T.per_page,total:T.total,onPageChange:H,itemLabel:r?(0,de.__)("Results","nggallery"):(0,de.__)("Items","nggallery"),showItemCount:!0}))},Od=function(e){var t=e.currentTab,n=e.onTabChange,r=e.children,a=e.sidebarComponent,l=e.title,i=e.containerClassName,o=void 0===i?"":i,s=e.contentClassName,c=void 0===s?"md:col-span-3":s,u=e.sidebarClassName,m=void 0===u?"":u,d=e.isLoading,g=void 0!==d&&d,p=e.error,f=void 0===p?null:p;return J().createElement("div",{className:o},J().createElement("div",{className:"max-w-7xl mx-auto"},l&&J().createElement("div",{className:"mb-6"},J().createElement("h1",{className:"text-2xl font-bold text-gray-900"},l)),J().createElement("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6"},J().createElement("div",{className:m},J().createElement(a,{activeTab:t,onTabChange:n})),J().createElement("div",{className:c},J().createElement(vi,{currentTab:t,onTabChange:n,isLoading:g,error:f,containerClassName:"",contentClassName:"",headerComponent:function(){return null}},r)))))},Pd=function(){var e=hr((0,Z.useState)(!0),2),t=e[0],r=e[1],a=hr((0,Z.useState)({}),2),l=a[0],i=a[1],o=(0,me.useDispatch)(tr);(0,Z.useEffect)(function(){var e=function(){var e=Er(Nr().mark(function e(){var t,n;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r(!0);try{n=(null===(t=window.imagelyApp)||void 0===t?void 0:t.systemInfo)||{},i({php_version:n.php_version||"Unknown",wordpress_version:n.wordpress_version||"Unknown",gd_version:n.gd_version||"Not available",imagick_version:n.imagick_version||"Not available",memory_limit:n.memory_limit||"Unknown",max_upload_size:n.max_upload_size||"Unknown",server_software:n.server_software||"Unknown",plugin_version:n.plugin_version||"Unknown"})}catch(e){console.error("Failed to load system info:",e)}finally{r(!1)}case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();e()},[]);var s=function(){var e=Er(Nr().mark(function e(){var t;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.writeText(JSON.stringify(l,null,2));case 3:o.showNotice("success",(0,de.__)("System information copied to clipboard!","nggallery")),e.next=14;break;case 6:e.prev=6,e.t0=e.catch(0),(t=document.createElement("textarea")).value=JSON.stringify(l,null,2),document.body.appendChild(t),t.select();try{document.execCommand("copy"),o.showNotice("success",(0,de.__)("System information copied to clipboard!","nggallery"))}catch(e){o.showNotice("error",(0,de.__)("Failed to copy system information to clipboard","nggallery"))}document.body.removeChild(t);case 14:case"end":return e.stop()}},e,null,[[0,6]])}));return function(){return e.apply(this,arguments)}}();return J().createElement("div",{className:"space-y-4"},J().createElement(ki,{title:(0,de.__)("System Information","nggallery"),defaultExpanded:!0},J().createElement("div",{className:"space-y-4"},J().createElement("div",{className:"flex justify-between items-center"},J().createElement("p",{className:"text-sm text-gray-600"},(0,de.__)("System information for debugging and support","nggallery")),J().createElement("button",{onClick:s,className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200"},(0,de.__)("Copy to Clipboard","nggallery"))),t?J().createElement("div",{className:"text-center py-8"},J().createElement("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"}),J().createElement("p",{className:"mt-2 text-gray-600"},(0,de.__)("Loading system information...","nggallery"))):J().createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6"},Object.entries(n(n(n(n(n(n(n(n({},(0,de.__)("Plugin Version","nggallery"),l.plugin_version),(0,de.__)("WordPress Version","nggallery"),l.wordpress_version),(0,de.__)("PHP Version","nggallery"),l.php_version),(0,de.__)("GD Version","nggallery"),l.gd_version),(0,de.__)("ImageMagick Version","nggallery"),l.imagick_version),(0,de.__)("Memory Limit","nggallery"),l.memory_limit),(0,de.__)("Max Upload Size","nggallery"),l.max_upload_size),(0,de.__)("Server Software","nggallery"),l.server_software)).map(function(e){var t=hr(e,2),n=t[0],r=t[1];return J().createElement("div",{key:n,className:"bg-gray-50 p-3 rounded-md"},J().createElement("dt",{className:"text-sm font-medium text-gray-700"},n),J().createElement("dd",{className:"text-sm text-gray-900 mt-1"},r))})))))},Td=function(e){var t,n,r,a,l,i=e.settings,o=e.onSettingsChange,s=function(e,t){o&&o(e,t)};return J().createElement("div",{className:"space-y-4"},J().createElement(ki,{title:(0,de.__)("Hidden Settings","nggallery"),defaultExpanded:!1},J().createElement("div",{className:"space-y-4"},J().createElement("p",{className:"text-sm text-gray-600"},(0,de.__)("This is a hidden settings tab. Settings here are not visible in the main menu and can only be accessed via direct URL.","nggallery")),J().createElement("p",{className:"text-sm text-gray-600"},(0,de.__)("Access this tab via: ","nggallery"),J().createElement("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs"},"admin.php?page=imagely-nextgen-gallery#settings&tab=hidden")))),J().createElement(ki,{title:(0,de.__)("Legacy Options","nggallery"),defaultExpanded:!0},J().createElement("div",{className:"space-y-4"},J().createElement("div",null,J().createElement(Ml,{id:"ngg_show_old_settings",name:"ngg_show_old_settings",checked:Ca(null==i?void 0:i.ngg_show_old_settings)||!1,onChange:function(e){return s("ngg_show_old_settings",e.target.checked)},label:(0,de.__)("Show legacy admin pages","nggallery"),help:(0,de.__)("Enable access to the old NextGEN Gallery admin interface alongside the new one","nggallery")})),J().createElement("div",null,J().createElement(Ml,{id:"ngg_installation_type",name:"ngg_installation_type",checked:"existing"===((null==i?void 0:i.ngg_installation_type)||"fresh"),onChange:function(e){return s("ngg_installation_type",e.target.checked?"existing":"fresh")},label:(0,de.__)("Activate legacy block","nggallery"),help:(0,de.__)("Show the old NextGEN Gallery Gutenberg block alongside the new one. Useful for existing installations with legacy galleries.","nggallery")})))),J().createElement(ki,{title:(0,de.__)("Related Images","nggallery"),defaultExpanded:!0},J().createElement("div",{className:"space-y-4"},J().createElement("div",null,J().createElement(Ml,{id:"activateTags",name:"activateTags",checked:Ca(null==i?void 0:i.activateTags),onChange:function(e){return s("activateTags",e.target.checked)},label:(0,de.__)("Show Related Images on Posts?","nggallery"),help:(0,de.__)("When enabled, related images will be appended to each post by matching the posts tags/categories to image tags","nggallery")})),Ca(null==i?void 0:i.activateTags)&&J().createElement("div",{className:"ml-6 space-y-4"},J().createElement("div",{className:"w-full max-w-sm"},J().createElement(ml,{id:"appendType",name:"appendType",value:(null==i?void 0:i.appendType)||"category",onChange:function(e){return s("appendType",e.target.value)},label:(0,de.__)("How should related images be matched?","nggallery")},J().createElement("option",{value:"category"},(0,de.__)("Category","nggallery")),J().createElement("option",{value:"tags"},(0,de.__)("Tags","nggallery")))),J().createElement("div",{className:"w-full max-w-sm"},J().createElement(dl,{type:"number",id:"maxImages",name:"maxImages",value:(null==i||null===(t=i.maxImages)||void 0===t?void 0:t.toString())||"0",onChange:function(e){return s("maxImages",parseInt(e.target.value)||0)},label:(0,de.__)("Max number of related images","nggallery"),help:(0,de.__)("0 = unlimited","nggallery"),min:0})),J().createElement("div",null,J().createElement(ul,null,(0,de.__)("Related images heading","nggallery")),J().createElement("input",{type:"text",value:(null==i?void 0:i.relatedHeading)||"",onChange:function(e){return s("relatedHeading",e.target.value)},className:"bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full max-w-lg p-2.5 hover:border-gray-400 transition-colors"}))))),J().createElement(ki,{title:(0,de.__)("Image Deletion","nggallery"),defaultExpanded:!0},J().createElement("div",{className:"space-y-4"},J().createElement("div",null,J().createElement(Ml,{id:"deleteImg",name:"deleteImg",checked:(null==i?void 0:i.deleteImg)||!1,onChange:function(e){return s("deleteImg",e.target.checked)},label:(0,de.__)("Delete image files","nggallery"),help:(0,de.__)("Delete files when removing images from galleries","nggallery")})))),J().createElement(ki,{title:(0,de.__)("Image Backup","nggallery"),defaultExpanded:!0},J().createElement("div",{className:"space-y-4"},J().createElement("div",null,J().createElement(Ml,{id:"imgBackup",name:"imgBackup",checked:(null==i?void 0:i.imgBackup)||!1,onChange:function(e){return s("imgBackup",e.target.checked)},label:(0,de.__)("Create backup of original images","nggallery"),help:(0,de.__)("Backup original images before resizing or applying watermarks","nggallery")})))),J().createElement(ki,{title:(0,de.__)("Auto Resize Images","nggallery"),defaultExpanded:!0},J().createElement("div",{className:"space-y-4"},J().createElement("div",null,J().createElement(Ml,{id:"imgAutoResize",name:"imgAutoResize",checked:(null==i?void 0:i.imgAutoResize)||!1,onChange:function(e){return s("imgAutoResize",e.target.checked)},label:(0,de.__)("Automatically resize images after upload","nggallery"),help:(0,de.__)("It is recommended that your images be resized to be web friendly","nggallery")})),(null==i?void 0:i.imgAutoResize)&&J().createElement("div",{className:"ml-6 grid grid-cols-1 md:grid-cols-3 gap-4"},J().createElement("div",null,J().createElement(dl,{type:"number",id:"imgWidth",name:"imgWidth",value:(null==i||null===(n=i.imgWidth)||void 0===n?void 0:n.toString())||"800",onChange:function(e){return s("imgWidth",parseInt(e.target.value)||0)},label:(0,de.__)("Max width (pixels)","nggallery"),min:1})),J().createElement("div",null,J().createElement(dl,{type:"number",id:"imgHeight",name:"imgHeight",value:(null==i||null===(r=i.imgHeight)||void 0===r?void 0:r.toString())||"600",onChange:function(e){return s("imgHeight",parseInt(e.target.value)||0)},label:(0,de.__)("Max height (pixels)","nggallery"),min:1})),J().createElement("div",null,J().createElement(ml,{id:"imgQuality",name:"imgQuality",value:(null==i||null===(a=i.imgQuality)||void 0===a?void 0:a.toString())||"85",onChange:function(e){return s("imgQuality",parseInt(e.target.value))},label:(0,de.__)("Image quality","nggallery")},Array.from({length:50},function(e,t){return 100-t}).map(function(e){return J().createElement("option",{key:e,value:e},e,"%")})))))),J().createElement(ki,{title:(0,de.__)("Thumbnail Fixed Dimension","nggallery"),defaultExpanded:!0},J().createElement("div",{className:"space-y-4"},J().createElement("div",null,J().createElement(Ml,{id:"thumbfix",name:"thumbfix",checked:(null==i?void 0:i.thumbfix)||!1,onChange:function(e){return s("thumbfix",e.target.checked)},label:(0,de.__)("Set fixed dimension?","nggallery"),help:(0,de.__)("Ignore the aspect ratio, no portrait thumbnails?","nggallery")})))),J().createElement(ki,{title:(0,de.__)("FontAwesome","nggallery"),defaultExpanded:!0},J().createElement("div",{className:"space-y-4"},J().createElement("div",null,J().createElement(Ml,{id:"disable_fontawesome",name:"disable_fontawesome",checked:(null==i?void 0:i.disable_fontawesome)||!1,onChange:function(e){return s("disable_fontawesome",e.target.checked)},label:(0,de.__)("Do not enqueue FontAwesome","nggallery"),help:(0,de.__)("Warning: your theme or another plugin must provide FontAwesome or your gallery displays may appear incorrectly","nggallery")})))),J().createElement(ki,{title:(0,de.__)("Developer Options","nggallery"),defaultExpanded:!0},J().createElement("div",{className:"space-y-4"},J().createElement("div",null,J().createElement(Ml,{id:"ngg_debug_mode",name:"ngg_debug_mode",checked:Ca(null==i?void 0:i.ngg_debug_mode)||!1,onChange:function(e){return s("ngg_debug_mode",e.target.checked)},label:(0,de.__)("Enable debug mode","nggallery"),help:(0,de.__)("Load unminified JavaScript and CSS files for debugging purposes. This will slow down your site.","nggallery")})))),J().createElement(ki,{title:(0,de.__)("Admin Table Pagination","nggallery"),defaultExpanded:!0},J().createElement("div",{className:"space-y-4"},J().createElement("div",{className:"w-full max-w-sm"},J().createElement(dl,{type:"number",id:"admin_table_per_page",name:"admin_table_per_page",value:(null==i||null===(l=i.admin_table_per_page)||void 0===l?void 0:l.toString())||"20",onChange:function(e){return s("admin_table_per_page",parseInt(e.target.value)||20)},label:(0,de.__)("Items per page","nggallery"),help:(0,de.__)("Number of items to display per page in admin tables (galleries, albums, tags, orders, etc.)","nggallery"),min:1,max:200})))))},Dd=function(e){var t=e.settings,n=e.onSettingsChange,r=(0,me.useDispatch)(tr),a="plus"===nr||"pro"===nr,l=function(){r.setActiveModal("upgrade",{feature:"image animations"})},i=function(e,t){a?n&&n(e,t):l()},o=function(e){return function(t){if(!a)return t.preventDefault(),void l();i(e,t.target.checked)}},s=function(e){return function(t){a?i(e,t.target.value):l()}},c=function(e){return function(t){a?i(e,parseInt(t.target.value)||0):l()}};return t?J().createElement("div",{className:"space-y-4"},J().createElement(ki,{title:(0,de.__)("Animation Settings","nggallery"),defaultExpanded:!0},J().createElement("div",{className:"space-y-6"},J().createElement("div",{className:"space-y-4"},J().createElement("h3",{className:"text-base font-medium text-gray-900"},(0,de.__)("Image Animations","nggallery")),a?J().createElement(Ml,{id:"animate_images_enable",name:"animate_images_enable",checked:t.animate_images_enable||!1,onChange:o("animate_images_enable"),label:(0,de.__)("Animate images","nggallery"),help:(0,de.__)("Add animations to images when they first load","nggallery")}):J().createElement("div",{className:"relative"},J().createElement("div",{className:"opacity-50 pointer-events-none"},J().createElement(Ml,{id:"animate_images_enable",name:"animate_images_enable",checked:t.animate_images_enable||!1,onChange:function(){},label:(0,de.__)("Animate images","nggallery"),help:(0,de.__)("Add animations to images when they first load","nggallery")})),J().createElement("div",{className:"absolute inset-0 cursor-pointer",onClick:l,title:(0,de.__)("Requires NextGEN Gallery Plus or Pro","nggallery")})),a&&t.animate_images_enable&&J().createElement("div",{className:"space-y-4 ml-6"},J().createElement(ml,{id:"animate_images_style",name:"animate_images_style",value:t.animate_images_style||"flipInX",onChange:s("animate_images_style"),label:(0,de.__)("Animation style","nggallery")},Ui.map(function(e){return J().createElement("option",{key:e.value,value:e.value},e.label)})),J().createElement(dl,{type:"number",id:"animate_images_duration",name:"animate_images_duration",value:String(t.animate_images_duration||1500),onChange:c("animate_images_duration"),label:(0,de.__)("Animation duration (ms)","nggallery"),help:(0,de.__)("Measured in milliseconds","nggallery"),min:0,max:1e4}),J().createElement(dl,{type:"number",id:"animate_images_delay",name:"animate_images_delay",value:String(t.animate_images_delay||250),onChange:c("animate_images_delay"),label:(0,de.__)("Animation delay (ms)","nggallery"),help:(0,de.__)("Measured in milliseconds","nggallery"),min:0,max:1e4}))),J().createElement("div",{className:"border-t border-gray-200"}),J().createElement("div",{className:"space-y-4"},J().createElement("h3",{className:"text-base font-medium text-gray-900"},(0,de.__)("Pagination Animations","nggallery")),a?J().createElement(Ml,{id:"animate_pagination_enable",name:"animate_pagination_enable",checked:t.animate_pagination_enable||!1,onChange:o("animate_pagination_enable"),label:(0,de.__)("Animate paginations","nggallery"),help:(0,de.__)("Add animations when users navigate through paginated galleries","nggallery")}):J().createElement("div",{className:"relative"},J().createElement("div",{className:"opacity-50 pointer-events-none"},J().createElement(Ml,{id:"animate_pagination_enable",name:"animate_pagination_enable",checked:t.animate_pagination_enable||!1,onChange:function(){},label:(0,de.__)("Animate paginations","nggallery"),help:(0,de.__)("Add animations when users navigate through paginated galleries","nggallery")})),J().createElement("div",{className:"absolute inset-0 cursor-pointer",onClick:l,title:(0,de.__)("Requires NextGEN Gallery Pro","nggallery")})),a&&t.animate_pagination_enable&&J().createElement("div",{className:"space-y-4 ml-6"},J().createElement(ml,{id:"animate_pagination_style",name:"animate_pagination_style",value:t.animate_pagination_style||"flipInX",onChange:s("animate_pagination_style"),label:(0,de.__)("Animation style","nggallery")},Ui.map(function(e){return J().createElement("option",{key:e.value,value:e.value},e.label)})),J().createElement(dl,{type:"number",id:"animate_pagination_duration",name:"animate_pagination_duration",value:String(t.animate_pagination_duration||1500),onChange:c("animate_pagination_duration"),label:(0,de.__)("Animation duration (ms)","nggallery"),help:(0,de.__)("Measured in milliseconds","nggallery"),min:0,max:1e4}),J().createElement(dl,{type:"number",id:"animate_pagination_delay",name:"animate_pagination_delay",value:String(t.animate_pagination_delay||250),onChange:c("animate_pagination_delay"),label:(0,de.__)("Animation delay (ms)","nggallery"),help:(0,de.__)("Measured in milliseconds","nggallery"),min:0,max:1e4})))))):null},Id=function(e){var t=e.settings,n=e.onSettingsChange,r=(0,me.useDispatch)(tr),a="plus"===nr||"pro"===nr,l=function(){r.setActiveModal("upgrade",{feature:"image protection"})},i=function(e){return function(t){if(!a)return t.preventDefault(),void l();if(n){var r=t.target.checked;"protect_images"!==e||r||n("protect_images_globally",!1),n(e,r)}}};return t?J().createElement("div",{className:"space-y-4"},J().createElement(ki,{title:(0,de.__)("Protection Settings","nggallery"),defaultExpanded:!0},J().createElement("div",{className:"space-y-4"},J().createElement("div",{className:"bg-info-bg border border-info-border rounded-md p-4"},J().createElement("div",{className:"flex items-start"},J().createElement("div",{className:"flex-shrink-0"},J().createElement(Fn,{className:"h-5 w-5 text-gray-400"})),J().createElement("div",{className:"ml-3"},J().createElement("h3",{className:"text-sm font-medium text-gray-800"},(0,de.__)("Image Protection Settings","nggallery")),J().createElement("div",{className:"mt-2 text-sm text-gray-700"},J().createElement("p",null,(0,de.__)("Image protection disables the ability for visitors to right-click or drag to download your images in both the gallery display and Pro Lightbox views. It gives you complete freedom to display your work without worry.","nggallery")))))),J().createElement("div",null,a?J().createElement(Ml,{id:"protect_images",name:"protect_images",checked:t.protect_images||!1,onChange:i("protect_images"),label:(0,de.__)("Protect images","nggallery"),help:(0,de.__)("Protect images from being downloaded both by right click or drag & drop","nggallery")}):J().createElement("div",{className:"relative"},J().createElement("div",{className:"opacity-50 pointer-events-none"},J().createElement(Ml,{id:"protect_images",name:"protect_images",checked:t.protect_images||!1,onChange:function(){},label:(0,de.__)("Protect images","nggallery"),help:(0,de.__)("Protect images from being downloaded both by right click or drag & drop","nggallery")})),J().createElement("div",{className:"absolute inset-0 cursor-pointer",onClick:l,title:(0,de.__)("Requires NextGEN Gallery Pro","nggallery")}))),a&&t.protect_images&&J().createElement("div",null,J().createElement(Ml,{id:"protect_images_globally",name:"protect_images_globally",checked:t.protect_images_globally||!1,onChange:i("protect_images_globally"),label:(0,de.__)("Disable right click menu completely","nggallery"),help:(0,de.__)("By default the right click menu is only disabled for NextGEN images. Enable this to disable the right click menu on the whole page.","nggallery")}))))):null},jd=function(e){var t,n,r=e.settings,a=e.onSettingsChange,l=function(e,t){a&&a(e,t)},i=[{value:"sortorder",label:(0,de.__)("Custom order","nggallery")},{value:"pid",label:(0,de.__)("Image ID","nggallery")},{value:"filename",label:(0,de.__)("Filename","nggallery")},{value:"alttext",label:(0,de.__)("Alt/Title text","nggallery")},{value:"imagedate",label:(0,de.__)("Date/Time","nggallery")}];return r?J().createElement("div",{className:"space-y-4"},J().createElement(ki,{title:(0,de.__)("General","nggallery"),defaultExpanded:!0},J().createElement("div",{className:"space-y-4"},J().createElement("div",null,J().createElement(ul,{help:(0,de.__)("This is the default path for new galleries","nggallery")},(0,de.__)("Path to galleries","nggallery")),J().createElement("input",{type:"text",value:r.gallerypath||"",onChange:function(e){return l("gallerypath",e.target.value)},className:"bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full max-w-lg p-2.5 hover:border-gray-400 transition-colors"})))),J().createElement(ki,{title:(0,de.__)("Gallery Sorting","nggallery"),defaultExpanded:!0},J().createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},J().createElement("div",null,J().createElement(ml,{id:"galSort",name:"galSort",value:r.galSort||"sortorder",onChange:function(e){return l("galSort",e.target.value)},label:(0,de.__)("Sort galleries by","nggallery")},i.map(function(e){return J().createElement("option",{key:e.value,value:e.value},e.label)}))),J().createElement("div",null,J().createElement(ml,{id:"galSortDir",name:"galSortDir",value:r.galSortDir||"ASC",onChange:function(e){return l("galSortDir",e.target.value)},label:(0,de.__)("Sort direction","nggallery")},J().createElement("option",{value:"ASC"},(0,de.__)("Ascending","nggallery")),J().createElement("option",{value:"DESC"},(0,de.__)("Descending","nggallery")))))),J().createElement(ki,{title:(0,de.__)("Thumbnail Settings","nggallery"),defaultExpanded:!0},J().createElement("div",{className:"space-y-6"},J().createElement("div",null,J().createElement(ul,{help:(0,de.__)("When generating thumbnails, what image dimensions do you desire?","nggallery"),className:"mb-4"},(0,de.__)("Default Thumbnail Dimensions","nggallery")),J().createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},J().createElement("div",null,J().createElement(dl,{type:"number",id:"thumbwidth",name:"thumbwidth",value:(null===(t=r.thumbwidth)||void 0===t?void 0:t.toString())||"240",onChange:function(e){return l("thumbwidth",parseInt(e.target.value)||0)},label:(0,de.__)("Width (pixels)","nggallery"),min:1})),J().createElement("div",null,J().createElement(dl,{type:"number",id:"thumbheight",name:"thumbheight",value:(null===(n=r.thumbheight)||void 0===n?void 0:n.toString())||"180",onChange:function(e){return l("thumbheight",parseInt(e.target.value)||0)},label:(0,de.__)("Height (pixels)","nggallery"),min:1})))),J().createElement("div",null,J().createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},(0,de.__)("Size List","nggallery")),J().createElement("p",{className:"text-sm text-gray-600 mb-4"},(0,de.__)("List of default sizes used for thumbnails and images","nggallery")),J().createElement("div",{className:"space-y-2"},r.thumbnail_dimensions&&r.thumbnail_dimensions.length>0?r.thumbnail_dimensions.map(function(e,t){return J().createElement("div",{key:t,className:"flex items-center justify-between bg-gray-50 p-3 rounded-md"},J().createElement("span",{className:"text-gray-700"},e),J().createElement("button",{onClick:function(){var e=zr(r.thumbnail_dimensions||[]);e.splice(t,1),l("thumbnail_dimensions",e)},className:"text-red-600 hover:text-red-800"},(0,de.__)("Remove","nggallery")))}):J().createElement("p",{className:"text-gray-500 italic"},(0,de.__)("No default sizes present.","nggallery"))))))):null},Ad=function(){var e=hr((0,Z.useState)(function(){var e,t=null===(e=window.imagelyApp)||void 0===e?void 0:e.licenseData;return t&&(t.license_key||t.is_valid)?t:null}),2),t=e[0],n=e[1],r=hr((0,Z.useState)(function(){var e;return(null===(e=window.imagelyApp)||void 0===e||null===(e=e.licenseData)||void 0===e?void 0:e.license_key)||""}),2),a=r[0],l=r[1],i=hr((0,Z.useState)(!1),2),o=i[0],s=i[1],c=hr((0,Z.useState)(!1),2),u=c[0],m=c[1],d=(0,me.useDispatch)(tr).showNotice;(0,Z.useEffect)(function(){p()},[]),(0,Z.useEffect)(function(){t&&!t.is_valid&&m(!0)},[t]);var g,p=function(){var e=Er(Nr().mark(function e(){var t,r,a,i,o;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("lite"!==((null===(t=window.imagelyApp)||void 0===t?void 0:t.proTypeInstalled)||"lite")){e.next=5;break}return n({license_key:"",status:"free",level:"free",last_check:Date.now()/1e3,plugin_level:"free",is_valid:!1,expiration:null,expires_soon:!1}),l(""),e.abrupt("return");case 5:return e.prev=5,a=null===(r=window.imagelyApp)||void 0===r?void 0:r.nonce,e.next=9,Fr()({path:"/nggpro/v1/license-actions/current",method:"GET",headers:{"X-WP-Nonce":a}});case 9:(i=e.sent)&&"success"===i.status&&i.data&&(o=i.data,l(o.license_key||""),n({license_key:o.license_key||"",status:o.status||"free",level:o.level||"free",last_check:o.last_check||0,plugin_level:o.plugin_level||"free",is_valid:o.is_valid||!1,expiration:o.expiration||null,expires_soon:o.expires_soon||!1})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),d("error",(0,de.__)("Failed to fetch license status","nggallery"));case 16:case"end":return e.stop()}},e,null,[[5,13]])}));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Er(Nr().mark(function e(){var t,n,r,l,i;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("lite"!==((null===(t=window.imagelyApp)||void 0===t?void 0:t.proTypeInstalled)||"lite")){e.next=4;break}return d("error",(0,de.__)("License activation is only available in NextGEN Gallery Pro, Plus, or Starter. Please upgrade to activate your license.","nggallery")),e.abrupt("return");case 4:if(a.trim()){e.next=7;break}return d("error",(0,de.__)("Please enter a license key","nggallery")),e.abrupt("return");case 7:return e.prev=7,s(!0),r=null===(n=window.imagelyApp)||void 0===n?void 0:n.nonce,e.next=12,Fr()({path:"/nggpro/v1/license-actions/manage-license",method:"POST",headers:{"X-WP-Nonce":r,"Content-Type":"application/json"},data:{license_key:a,action_perform:"verify"}});case 12:"success"===(l=e.sent).status?(d("success",l.message),setTimeout(function(){p(),m(!1)},1e3)):h(l),e.next=32;break;case 16:if(e.prev=16,e.t0=e.catch(7),!(e.t0 instanceof Response)){e.next=31;break}return e.prev=19,e.next=22,e.t0.json();case 22:i=e.sent,h(i),e.next=29;break;case 26:e.prev=26,e.t1=e.catch(19),d("error",(0,de.__)("Failed to activate license. Please check your connection and try again.","nggallery"));case 29:e.next=32;break;case 31:h(e.t0);case 32:return e.prev=32,s(!1),e.finish(32);case 35:case"end":return e.stop()}},e,null,[[7,16,32,35],[19,26]])}));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Er(Nr().mark(function e(){var t,r,i,o,c;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("lite"!==((null===(t=window.imagelyApp)||void 0===t?void 0:t.proTypeInstalled)||"lite")){e.next=4;break}return d("error",(0,de.__)("License deactivation is only available in NextGEN Gallery Pro, Plus, or Starter. Please upgrade to manage your license.","nggallery")),e.abrupt("return");case 4:return e.prev=4,s(!0),i=null===(r=window.imagelyApp)||void 0===r?void 0:r.nonce,e.next=9,Fr()({path:"/nggpro/v1/license-actions/manage-license",method:"POST",headers:{"X-WP-Nonce":i,"Content-Type":"application/json"},data:{license_key:a,action_perform:"deactivate"}});case 9:"success"===(o=e.sent).status?(d("success",o.message),n(null),l(""),m(!0)):h(o),e.next=29;break;case 13:if(e.prev=13,e.t0=e.catch(4),!(e.t0 instanceof Response)){e.next=28;break}return e.prev=16,e.next=19,e.t0.json();case 19:c=e.sent,h(c),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(16),d("error",(0,de.__)("Failed to deactivate license. Please check your connection and try again.","nggallery"));case 26:e.next=29;break;case 28:h(e.t0);case 29:return e.prev=29,s(!1),e.finish(29);case 32:case"end":return e.stop()}},e,null,[[4,13,29,32],[16,23]])}));return function(){return e.apply(this,arguments)}}(),h=function(e){var t=(null==e?void 0:e.message)||(0,de.__)("An unknown error occurred","nggallery");null!=e&&e.error_code&&(t+=" (".concat((0,de.__)("Error Code","nggallery"),": ").concat(e.error_code,")")),null!=e&&e.details&&(t+=" - ".concat(e.details)),null!=e&&e.api_error&&(t+=" ".concat((0,de.__)("API Error","nggallery"),": ").concat(e.api_error)),d("error",t,{duration:0})},_=function(e){return e?"lifetime"===e?(0,de.__)("Lifetime","nggallery"):"number"==typeof e?new Date(1e3*e).toLocaleDateString():(0,de.__)("Unknown","nggallery"):(0,de.__)("Unknown","nggallery")},b=function(e,t){return e?"lifetime"===e?{text:(0,de.__)("Never expires","nggallery"),className:"text-green-600"}:"number"==typeof e?e<Math.floor(Date.now()/1e3)?{text:(0,de.__)("Expired","nggallery"),className:"text-red-600"}:t?{text:(0,de.__)("Expires soon","nggallery"),className:"text-orange-600"}:{text:_(e),className:"text-green-600"}:{text:(0,de.__)("Unknown","nggallery"),className:"text-gray-600"}:{text:(0,de.__)("Unknown","nggallery"),className:"text-gray-600"}},v=function(){var e=Er(Nr().mark(function e(t){var n,r;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a.trim()){e.next=4;break}return d("error",(0,de.__)("Please enter a license key","nggallery")),e.abrupt("return");case 4:return s(!0),e.prev=5,e.next=8,Fr()({path:"/imagely/v1/license/activate",method:"POST",data:{license_key:a}});case 8:(n=e.sent).success?(d("success",n.message||(0,de.__)("License activated successfully! The page will reload to apply changes.","nggallery"),{duration:0}),setTimeout(function(){window.location.reload()},2e3)):d("error",n.message||(0,de.__)("Failed to activate license. Please check your license key and try again.","nggallery"),{duration:0}),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(5),console.error("License activation error:",e.t0),r=e.t0.message||(0,de.__)("An error occurred while activating the license. Please try again.","nggallery"),d("error",r,{duration:0});case 17:return e.prev=17,s(!1),e.finish(17);case 20:case"end":return e.stop()}},e,null,[[5,12,17,20]])}));return function(t){return e.apply(this,arguments)}}();return"lite"===nr?J().createElement("div",{className:"space-y-6"},J().createElement("div",null,J().createElement("h2",{className:"text-2xl font-semibold text-gray-900 mb-2"},(0,de.__)("License","nggallery")),J().createElement("p",{className:"text-gray-600 mb-4"},(0,de.__)("Your license key provides access to updates and add-ons.","nggallery"))),J().createElement("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm"},J().createElement("p",{className:"text-gray-900 mb-2"},(0,de.__)("You're using Imagely Lite - no license needed. Enjoy! ","nggallery")),J().createElement("p",{className:"text-gray-900 mb-2"},(0,de.__)("To unlock more features consider","nggallery")," ",J().createElement("a",{href:ri("settingslicense"),target:"_blank",rel:"noopener noreferrer",className:"text-green-500 font-bold hover:text-green-600"},(0,de.__)("Upgrading to PRO","nggallery")),"."),J().createElement("p",{className:"text-gray-900 mb-4"},(0,de.__)("As a valued Imagely Lite user you receive","nggallery")," ",J().createElement("span",{className:"font-bold"},"50%")," ",(0,de.__)("off, automatically applied at checkout","nggallery")),J().createElement("form",{onSubmit:v,className:"space-y-4"},J().createElement("div",null,J().createElement("label",{htmlFor:"license-key-input",className:"block text-sm font-medium text-gray-700 mb-2"},(0,de.__)("Already purchased? Simply enter your license key below to enable Imagely PRO!","nggallery")),J().createElement("input",{id:"license-key-input",type:"text",value:a,onChange:function(e){return l(e.target.value)},placeholder:(0,de.__)("Enter your license key...","nggallery"),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:o,required:!0})),J().createElement("div",null,J().createElement("button",{type:"submit",disabled:o||!a.trim(),className:"flex items-center justify-center px-6 py-3 rounded-md text-white font-medium transition-colors ".concat(o||!a.trim()?"bg-green-200 cursor-not-allowed":"bg-green-500 hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2")},o?J().createElement(J().Fragment,null,J().createElement(an,{className:"w-5 h-5 mr-2 animate-spin"}),(0,de.__)("Activating and Installing...","nggallery")):(0,de.__)("Activate License & Install Pro","nggallery")))))):J().createElement("div",{className:"space-y-6"},J().createElement("div",null,J().createElement("h2",{className:"text-2xl font-semibold text-gray-900 mb-2"},(0,de.__)("License Management","nggallery")),J().createElement("p",{className:"text-gray-600"},(0,de.__)("Manage your NextGEN Gallery Pro license key to unlock premium features.","nggallery"))),t&&t.license_key&&J().createElement("div",{className:"bg-white p-6 rounded-lg border border-gray-200 shadow-sm"},J().createElement("div",{className:"flex items-center justify-between mb-4"},J().createElement("h3",{className:"text-lg font-medium text-gray-900"},(0,de.__)("Current License Status","nggallery")),t.is_valid&&J().createElement("div",{className:"flex items-center space-x-2"},J().createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},J().createElement(Nn,{className:"w-4 h-4 mr-1"}),(0,de.__)("Active","nggallery")))),J().createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},J().createElement("div",{className:"bg-white p-4 rounded-md border border-gray-200"},J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},(0,de.__)("License Key","nggallery")),J().createElement("p",{className:"text-sm text-gray-900 font-mono"},t.license_key?"****-****-****-"+t.license_key.slice(-4):(0,de.__)("Not set","nggallery"))),J().createElement("div",{className:"bg-white p-4 rounded-md border border-gray-200"},J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},(0,de.__)("Status","nggallery")),J().createElement("p",{className:"text-sm font-medium ".concat(t.is_valid?"text-green-600":"text-red-600")},function(e){switch(e){case"active":case"valid":return(0,de.__)("Active","nggallery");case"expired":return(0,de.__)("Expired","nggallery");case"invalid":return(0,de.__)("Invalid","nggallery");case"disabled":return(0,de.__)("Disabled","nggallery");case"revoked":return(0,de.__)("Revoked","nggallery");default:return(0,de.__)("Unknown","nggallery")}}(t.status))),J().createElement("div",{className:"bg-white p-4 rounded-md border border-gray-200"},J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},(0,de.__)("License Level","nggallery")),J().createElement("p",{className:"text-sm text-gray-900 capitalize"},t.level||(0,de.__)("Free","nggallery"))),J().createElement("div",{className:"bg-white p-4 rounded-md border border-gray-200"},J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},(0,de.__)("Expiration","nggallery")),J().createElement("p",{className:"text-sm font-medium ".concat(b(t.expiration,t.expires_soon).className)},b(t.expiration,t.expires_soon).text)),J().createElement("div",{className:"bg-white p-4 rounded-md border border-gray-200"},J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},(0,de.__)("Last Check","nggallery")),J().createElement("p",{className:"text-sm text-gray-900"},(g=t.last_check)?new Date(1e3*g).toLocaleDateString():(0,de.__)("Never","nggallery")))),t.is_valid&&J().createElement("div",{className:"mt-6 flex justify-end"},J().createElement("button",{onClick:function(){m(!u)},className:"inline-flex items-center px-4 py-2 bg-green-500 text-white text-sm font-medium rounded-md hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors"},J().createElement("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})),u?(0,de.__)("Hide Edit","nggallery"):(0,de.__)("Edit License","nggallery")))),(!(null!=t&&t.is_valid)||u)&&J().createElement("div",{className:"bg-white p-6 border border-gray-200 rounded-lg shadow-sm"},J().createElement("div",{className:"flex items-center justify-between mb-4"},J().createElement("h3",{className:"text-lg font-medium text-gray-900"},null!=t&&t.is_valid?(0,de.__)("Update License Key","nggallery"):(0,de.__)("Activate License","nggallery")),(null==t?void 0:t.is_valid)&&u&&J().createElement("button",{onClick:function(){m(!1),l((null==t?void 0:t.license_key)||"")},className:"text-sm text-gray-500 hover:text-gray-700 focus:outline-none"},(0,de.__)("Cancel","nggallery"))),J().createElement("div",{className:"space-y-4"},J().createElement("div",null,J().createElement("label",{htmlFor:"license-key",className:"block text-sm font-medium text-gray-700 mb-2"},(0,de.__)("License Key","nggallery")),J().createElement("input",{type:"text",id:"license-key",value:a,onChange:function(e){return l(e.target.value)},placeholder:(0,de.__)("Enter your license key","nggallery"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 transition-colors",disabled:o}),J().createElement("p",{className:"mt-1 text-sm text-gray-500"},(0,de.__)("You can find your license key in your account dashboard.","nggallery"))),J().createElement("div",{className:"flex space-x-3"},J().createElement("button",{onClick:f,disabled:o||!a.trim(),className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},o?J().createElement("span",{className:"flex items-center"},J().createElement(an,{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white"}),(0,de.__)("Processing...","nggallery")):(0,de.__)("Activate License","nggallery")),(null==t?void 0:t.is_valid)&&J().createElement("button",{onClick:y,disabled:o,className:"px-4 py-2 bg-white text-gray-700 border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},(0,de.__)("Deactivate License","nggallery"))))))};function Ld(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Md(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ld(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ld(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const Rd=function(e){var t,r,a,l,i=e.settings,o=e.onSettingsChange,s=function(e,t){o&&o(e,t)};if(!i)return null;var c=[].concat(zr("pro"===nr||"plus"===nr?[{value:"photocrati-nextgen_pro_lightbox",label:(0,de.__)("Pro Lightbox","nggallery")}]:[]),[{value:"simplelightbox",label:(0,de.__)("Simplelightbox","nggallery")},{value:"fancybox",label:(0,de.__)("Fancybox","nggallery")},{value:"thickbox",label:(0,de.__)("Thickbox","nggallery")},{value:"shutter",label:(0,de.__)("Shutter","nggallery")},{value:"shutter2",label:(0,de.__)("Shutter Reloaded","nggallery")},{value:"custom_lightbox",label:(0,de.__)("Custom Lightbox","nggallery")},{value:"none",label:(0,de.__)("None","nggallery")}]),u=[{value:"nextgen_images",label:(0,de.__)("Only apply to Imagely images","nggallery")},{value:"nextgen_and_wp_images",label:(0,de.__)("Only apply to Imagely and WordPress images","nggallery")},{value:"all_images",label:(0,de.__)("Try to apply to all images","nggallery")},{value:"all_images_direct",label:(0,de.__)("Try to apply to all images that link to image files","nggallery")}],m=i.ngg_pro_lightbox||{},d=function(e,t){o&&o("ngg_pro_lightbox",Md(Md({},m),{},n({},e,t)))};return J().createElement("div",{className:"space-y-4"},J().createElement(ki,{title:(0,de.__)("Lightbox Configuration","nggallery"),defaultExpanded:!0},J().createElement("div",{className:"space-y-6"},J().createElement("div",{className:"bg-info-bg border border-info-border rounded-md p-4"},J().createElement("div",{className:"flex items-start"},J().createElement("div",{className:"flex-shrink-0"},J().createElement(Fn,{className:"h-5 w-5 text-gray-400"})),J().createElement("div",{className:"ml-3"},J().createElement("h3",{className:"text-sm font-medium text-gray-800"},(0,de.__)("About Lightbox Effects","nggallery")),J().createElement("div",{className:"mt-2 text-sm text-gray-700"},J().createElement("p",null,(0,de.__)("Lightbox effects allow images to be displayed in an overlay when clicked. The context setting determines which images on your site will be affected by the lightbox.","nggallery")))))),J().createElement("div",null,J().createElement(ml,{id:"thumbEffect",name:"thumbEffect",value:i.thumbEffect||"",onChange:function(e){return s("thumbEffect",e.target.value)},label:(0,de.__)("Lightbox Library","nggallery"),help:(0,de.__)("What lightbox would you like to use?","nggallery")},c.map(function(e){return J().createElement("option",{key:e.value,value:e.value},e.label)}))),"custom_lightbox"===i.thumbEffect&&J().createElement("div",{className:"space-y-6 ml-4"},J().createElement("div",null,J().createElement(Ol,{id:"thumbEffectCode",name:"thumbEffectCode",value:i.thumbEffectCode||"",onChange:function(e){return s("thumbEffectCode",e.target.value)},label:(0,de.__)("Custom JavaScript Code","nggallery"),help:(0,de.__)("Enter any custom JavaScript code for your lightbox","nggallery"),placeholder:"// Your custom JavaScript code here",rows:6})),J().createElement("div",null,J().createElement(Ol,{id:"thumbEffectScripts",name:"thumbEffectScripts",value:(i.thumbEffectScripts||[]).join("\n"),onChange:function(e){return s("thumbEffectScripts",e.target.value.split("\n").filter(function(e){return e.trim()}))},label:(0,de.__)("JavaScript URLs","nggallery"),help:(0,de.__)("Enter URLs for JavaScript files (one per line)","nggallery"),placeholder:"https://example.com/script1.js\nhttps://example.com/script2.js",rows:4})),J().createElement("div",null,J().createElement(Ol,{id:"thumbEffectStyles",name:"thumbEffectStyles",value:(i.thumbEffectStyles||[]).join("\n"),onChange:function(e){return s("thumbEffectStyles",e.target.value.split("\n").filter(function(e){return e.trim()}))},label:(0,de.__)("Stylesheet URLs","nggallery"),help:(0,de.__)("Enter URLs for CSS files (one per line)","nggallery"),placeholder:"https://example.com/style1.css\nhttps://example.com/style2.css",rows:4}))),J().createElement("div",null,J().createElement(ml,{id:"thumbEffectContext",name:"thumbEffectContext",value:i.thumbEffectContext||"nextgen_images",onChange:function(e){return s("thumbEffectContext",e.target.value)},label:(0,de.__)("Lightbox Context","nggallery"),help:(0,de.__)("What must the lightbox be applied to?","nggallery")},u.map(function(e){return J().createElement("option",{key:e.value,value:e.value},e.label)}))),"photocrati-nextgen_pro_lightbox"===i.thumbEffect&&J().createElement("div",{className:"space-y-6 ml-4"},J().createElement(ki,{title:(0,de.__)("Color options","nextgen-gallery-pro"),defaultExpanded:!0},J().createElement("div",{className:"space-y-4"},J().createElement(ml,{id:"npl-style",name:"ngg_pro_lightbox.style",value:m.style||"white",onChange:function(e){return d("style",e.target.value)},label:(0,de.__)("Color theme","nextgen-gallery-pro")},J().createElement("option",{value:"dark"},(0,de.__)("Default: a dark theme","nextgen-gallery-pro")),J().createElement("option",{value:"black"},(0,de.__)("All black: Removes borders from the comments panel","nextgen-gallery-pro")),J().createElement("option",{value:"white"},(0,de.__)("All white: A white based theme","nextgen-gallery-pro"))),J().createElement("div",null,J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},(0,de.__)("Background color","nextgen-gallery-pro")),J().createElement($i,{color:m.background_color||"#ffffff",onChange:function(e){return d("background_color",e)}})),J().createElement("div",null,J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},(0,de.__)("Sidebar background color","nextgen-gallery-pro")),J().createElement($i,{color:m.sidebar_background_color||"",onChange:function(e){return d("sidebar_background_color",e)}})),J().createElement("div",null,J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},(0,de.__)("Sidebar button text color","nextgen-gallery-pro")),J().createElement($i,{color:m.sidebar_button_color||"",onChange:function(e){return d("sidebar_button_color",e)}})),J().createElement("div",null,J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},(0,de.__)("Sidebar button background","nextgen-gallery-pro")),J().createElement($i,{color:m.sidebar_button_background||"",onChange:function(e){return d("sidebar_button_background",e)}})),J().createElement("div",null,J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},(0,de.__)("Carousel background color","nextgen-gallery-pro")),J().createElement($i,{color:m.carousel_background_color||"",onChange:function(e){return d("carousel_background_color",e)}})),J().createElement("div",null,J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},(0,de.__)("Carousel text color","nextgen-gallery-pro")),J().createElement($i,{color:m.carousel_text_color||"#7a7a7a",onChange:function(e){return d("carousel_text_color",e)}})),J().createElement("div",null,J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},(0,de.__)("Floating elements color","nextgen-gallery-pro")),J().createElement($i,{color:m.overlay_icon_color||"",onChange:function(e){return d("overlay_icon_color",e)}})),J().createElement("div",null,J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},(0,de.__)("Icon color","nextgen-gallery-pro")),J().createElement($i,{color:m.icon_color||"#ffffff",onChange:function(e){return d("icon_color",e)}})),J().createElement(Ml,{id:"npl-icon-bg-enabled",name:"ngg_pro_lightbox.icon_background_enabled",checked:!!m.icon_background_enabled,onChange:function(e){return d("icon_background_enabled",e.target.checked)},label:(0,de.__)("Display background on carousel icons","nextgen-gallery-pro")}),J().createElement(Ml,{id:"npl-icon-bg-rounded",name:"ngg_pro_lightbox.icon_background_rounded",checked:!!m.icon_background_rounded,onChange:function(e){return d("icon_background_rounded",e.target.checked)},label:(0,de.__)("Display rounded background on carousel icons","nextgen-gallery-pro")}),J().createElement("div",null,J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},(0,de.__)("Icon background","nextgen-gallery-pro")),J().createElement($i,{color:m.icon_background||"#444444",onChange:function(e){return d("icon_background",e)}})))),J().createElement(ki,{title:(0,de.__)("Lightbox and image sizing","nextgen-gallery-pro"),defaultExpanded:!0},J().createElement("div",{className:"space-y-4"},J().createElement("div",{className:"grid grid-cols-2 gap-4"},J().createElement(dl,{name:"ngg_pro_lightbox.padding",value:String(null!==(t=m.padding)&&void 0!==t?t:0),onChange:function(e){return d("padding",e.target.value)},label:(0,de.__)("Lightbox padding","nextgen-gallery-pro"),type:"number"}),J().createElement(ml,{id:"npl-padding-unit",name:"ngg_pro_lightbox.padding_unit",value:m.padding_unit||"px",onChange:function(e){return d("padding_unit",e.target.value)},label:(0,de.__)("Padding unit","nextgen-gallery-pro")},J().createElement("option",{value:"px"},"px"),J().createElement("option",{value:"%"},"%"))),J().createElement(ml,{id:"npl-image-crop",name:"ngg_pro_lightbox.image_crop",value:m.image_crop||"false",onChange:function(e){return d("image_crop",e.target.value)},label:(0,de.__)("Crop image display","nextgen-gallery-pro")},J().createElement("option",{value:"true"},(0,de.__)("Images will be scaled to fill the display, centered and cropped","nextgen-gallery-pro")),J().createElement("option",{value:"false"},(0,de.__)("Images will be scaled down until the entire image fits","nextgen-gallery-pro")),J().createElement("option",{value:"height"},(0,de.__)("Images will scale to fill the height of the display","nextgen-gallery-pro")),J().createElement("option",{value:"width"},(0,de.__)("Images will scale to fill the width of the display","nextgen-gallery-pro")),J().createElement("option",{value:"landscape"},(0,de.__)("Landscape images will fill the display, but scale portraits to fit","nextgen-gallery-pro")),J().createElement("option",{value:"portrait"},(0,de.__)("Portrait images will fill the display, but scale landscapes to fit","nextgen-gallery-pro"))),J().createElement(Ml,{id:"npl-image-pan",name:"ngg_pro_lightbox.image_pan",checked:!!m.image_pan,onChange:function(e){return d("image_pan",e.target.checked)},label:(0,de.__)("Pan cropped images","nextgen-gallery-pro")}))),J().createElement(ki,{title:(0,de.__)("Social","nextgen-gallery-pro"),defaultExpanded:!0},J().createElement("div",{className:"space-y-4"},J().createElement(Ml,{id:"npl-enable-comments",name:"ngg_pro_lightbox.enable_comments",checked:!!m.enable_comments,onChange:function(e){return d("enable_comments",e.target.checked)},label:(0,de.__)("Enable comments","nextgen-gallery-pro")}),J().createElement(Ml,{id:"npl-display-comments",name:"ngg_pro_lightbox.display_comments",checked:!!m.display_comments,onChange:function(e){return d("display_comments",e.target.checked)},label:(0,de.__)("Display comments initially","nextgen-gallery-pro")}),J().createElement(Ml,{id:"npl-enable-sharing",name:"ngg_pro_lightbox.enable_sharing",checked:!!m.enable_sharing,onChange:function(e){return d("enable_sharing",e.target.checked)},label:(0,de.__)("Enable sharing","nextgen-gallery-pro")}),J().createElement(Ol,{id:"npl-facebook-app-id",name:"ngg_pro_lightbox.facebook_app_id",value:m.facebook_app_id||"",onChange:function(e){return d("facebook_app_id",e.target.value)},label:(0,de.__)("Facebook App ID","nextgen-gallery-pro"),rows:1}),J().createElement(Ml,{id:"npl-enable-twitter-cards",name:"ngg_pro_lightbox.enable_twitter_cards",checked:!!m.enable_twitter_cards,onChange:function(e){return d("enable_twitter_cards",e.target.checked)},label:(0,de.__)("Enable Twitter Cards","nextgen-gallery-pro")}),J().createElement(Ol,{id:"npl-twitter-username",name:"ngg_pro_lightbox.twitter_username",value:m.twitter_username||"",onChange:function(e){return d("twitter_username",e.target.value)},label:(0,de.__)("Twitter username","nextgen-gallery-pro"),rows:1}))),J().createElement(ki,{title:(0,de.__)("Thumbnail carousel","nextgen-gallery-pro"),defaultExpanded:!0},J().createElement("div",{className:"space-y-4"},J().createElement(ml,{id:"npl-enable-carousel",name:"ngg_pro_lightbox.enable_carousel",value:m.enable_carousel||"always",onChange:function(e){return d("enable_carousel",e.target.value)},label:(0,de.__)("Display carousel thumbnails","nextgen-gallery-pro")},J().createElement("option",{value:"always"},(0,de.__)("Always display thumbnails","nextgen-gallery-pro")),J().createElement("option",{value:"never"},(0,de.__)("Never display thumbnails","nextgen-gallery-pro")),J().createElement("option",{value:"nomobile"},(0,de.__)("Only on desktop browsers","nextgen-gallery-pro"))),J().createElement(Ml,{id:"npl-display-carousel",name:"ngg_pro_lightbox.display_carousel",checked:!!m.display_carousel,onChange:function(e){return d("display_carousel",e.target.checked)},label:(0,de.__)("Display carousel initially","nextgen-gallery-pro")}),J().createElement(Ml,{id:"npl-display-captions",name:"ngg_pro_lightbox.display_captions",checked:!!m.display_captions,onChange:function(e){return d("display_captions",e.target.checked)},label:(0,de.__)("Display captions initially","nextgen-gallery-pro")}))),J().createElement(ki,{title:(0,de.__)("ECommerce","nextgen-gallery-pro"),defaultExpanded:!0},J().createElement("div",{className:"space-y-4"},J().createElement(Ml,{id:"npl-display-cart",name:"ngg_pro_lightbox.display_cart",checked:!!m.display_cart,onChange:function(e){return d("display_cart",e.target.checked)},label:(0,de.__)("Display cart initially","nextgen-gallery-pro")}))),J().createElement(ki,{title:(0,de.__)("Transition effects","nextgen-gallery-pro"),defaultExpanded:!0},J().createElement("div",{className:"space-y-4"},J().createElement(ml,{id:"npl-transition-effect",name:"ngg_pro_lightbox.transition_effect",value:m.transition_effect||"slide",onChange:function(e){return d("transition_effect",e.target.value)},label:(0,de.__)("Transition effect","nextgen-gallery-pro")},J().createElement("option",{value:"fade"},(0,de.__)("Crossfade betweens images","nextgen-gallery-pro")),J().createElement("option",{value:"flash"},(0,de.__)("Fades into background color between images","nextgen-gallery-pro")),J().createElement("option",{value:"pulse"},(0,de.__)("Quickly removes the image into background color, then fades the next image","nextgen-gallery-pro")),J().createElement("option",{value:"slide"},(0,de.__)("Slides the images depending on image position","nextgen-gallery-pro")),J().createElement("option",{value:"fadeslide"},(0,de.__)("Fade between images and slide slightly at the same time","nextgen-gallery-pro"))),J().createElement(dl,{name:"ngg_pro_lightbox.transition_speed",value:String(null!==(r=m.transition_speed)&&void 0!==r?r:.4),onChange:function(e){return d("transition_speed",parseFloat(e.target.value))},label:(0,de.__)("Transition speed","nextgen-gallery-pro"),min:0,type:"number"}),J().createElement(dl,{type:"number",name:"ngg_pro_lightbox.slideshow_speed",value:String(null!==(a=m.slideshow_speed)&&void 0!==a?a:5),onChange:function(e){return d("slideshow_speed",parseInt(e.target.value,10)||0)},label:(0,de.__)("Slideshow speed","nextgen-gallery-pro"),help:(0,de.__)("Measured in seconds","nextgen-gallery-pro"),min:0}),J().createElement(Ml,{id:"npl-interaction-pause",name:"ngg_pro_lightbox.interaction_pause",checked:!!m.interaction_pause,onChange:function(e){return d("interaction_pause",e.target.checked)},label:(0,de.__)("Pause on interaction","nextgen-gallery-pro")}))),J().createElement(ki,{title:(0,de.__)("Other settings","nextgen-gallery-pro"),defaultExpanded:!0},J().createElement("div",{className:"space-y-4"},J().createElement(Ml,{id:"npl-enable-routing",name:"ngg_pro_lightbox.enable_routing",checked:!!m.enable_routing,onChange:function(e){return d("enable_routing",e.target.checked)},label:(0,de.__)("Enable browser routing","nextgen-gallery-pro")}),J().createElement(Ol,{id:"npl-router-slug",name:"ngg_pro_lightbox.router_slug",value:m.router_slug||"gallery",onChange:function(e){return d("router_slug",e.target.value)},label:(0,de.__)("Router slug","nextgen-gallery-pro"),rows:1}),J().createElement(dl,{name:"ngg_pro_lightbox.localize_limit",value:String(null!==(l=m.localize_limit)&&void 0!==l?l:100),onChange:function(e){return d("localize_limit",parseInt(e.target.value,10)||0)},label:(0,de.__)("Localize limit","nextgen-gallery-pro"),min:0,type:"number"})))))))},Fd=function(e){var t,n,r=e.settings,a=e.onSettingsChange,l=function(e,t){a&&a(e,t)},i=function(e){return function(t){l(e,t.target.checked)}};return r?J().createElement("div",{className:"space-y-4"},J().createElement(ki,{title:(0,de.__)("Media RSS","nggallery"),defaultExpanded:!0},J().createElement("div",{className:"space-y-4"},J().createElement("div",null,J().createElement(Ml,{id:"useMediaRSS",name:"useMediaRSS",checked:r.useMediaRSS||!1,onChange:i("useMediaRSS"),label:(0,de.__)("Add MediaRSS link?","nggallery"),help:(0,de.__)("When enabled, adds a MediaRSS link to your header. Third-party web services can use this to publish your galleries","nggallery")})),J().createElement("div",null,J().createElement(Ml,{id:"galleries_in_feeds",name:"galleries_in_feeds",checked:r.galleries_in_feeds||!1,onChange:i("galleries_in_feeds"),label:(0,de.__)("Display galleries in feeds","nggallery"),help:(0,de.__)("NextGEN hides its gallery displays in feeds other than MediaRSS. This enables image galleries in feeds.","nggallery")})))),J().createElement(ki,{title:(0,de.__)("Other Settings","nggallery"),defaultExpanded:!0},J().createElement("div",{className:"space-y-4"},J().createElement("div",null,J().createElement(dl,{type:"text",id:"router_param_slug",name:"router_param_slug",value:r.router_param_slug||"",onChange:function(e){return l("router_param_slug",e.target.value)},label:(0,de.__)("Permalink slug","nggallery")})),J().createElement("div",null,J().createElement(dl,{type:"number",id:"maximum_entity_count",name:"maximum_entity_count",value:(null===(t=r.maximum_entity_count)||void 0===t?void 0:t.toString())||"500",onChange:function(e){return l("maximum_entity_count",parseInt(e.target.value)||500)},label:(0,de.__)("Maximum image count","nggallery"),help:(0,de.__)("This is the maximum limit of images that NextGEN will restrict itself to querying. Note: This limit will not apply to slideshow widgets or random galleries if/when those galleries specify their own image limits","nggallery"),min:1})),J().createElement("div",null,J().createElement(dl,{type:"number",id:"random_widget_cache_ttl",name:"random_widget_cache_ttl",value:(null===(n=r.random_widget_cache_ttl)||void 0===n?void 0:n.toString())||"0",onChange:function(e){return l("random_widget_cache_ttl",parseInt(e.target.value)||0)},label:(0,de.__)("Random widget cache duration","nggallery"),help:(0,de.__)('The duration of time (in minutes) that "random" widget galleries should be cached. A setting of zero will disable caching.',"nggallery"),min:0})),J().createElement("div",null,J().createElement(Ml,{id:"use_alternate_random_method",name:"use_alternate_random_method",checked:r.use_alternate_random_method||!1,onChange:i("use_alternate_random_method"),label:(0,de.__)("Use alternative method of retrieving random image galleries","nggallery"),help:(0,de.__)("Some web hosts' database servers disable or disrupt queries using 'ORDER BY RAND()' which can cause galleries to lose their randomness. NextGen provides an alternative (but not completely random) method to determine what images are fed into 'random' galleries.","nggallery")})),J().createElement("div",null,J().createElement(Ml,{id:"disable_ngg_tags_page",name:"disable_ngg_tags_page",checked:r.disable_ngg_tags_page||!1,onChange:i("disable_ngg_tags_page"),label:(0,de.__)("Disable the /ngg_tag/ page","nggallery"),help:(0,de.__)("Normally an SEO feature; some users may wish to disable this to prevent NextGEN from revealing image tags to site visitors","nggallery")})),J().createElement("div",null,J().createElement(Ml,{id:"dynamic_image_filename_separator_use_dash",name:"dynamic_image_filename_separator_use_dash",checked:r.dynamic_image_filename_separator_use_dash||!1,onChange:i("dynamic_image_filename_separator_use_dash"),label:(0,de.__)("Use dashes instead of underscores when generating new image files","nggallery"),help:(0,de.__)("Google does not treat underscores as word separators when it indexes images and so treats 'portrait-of-a-man_800x600' as 'portrait-of-a-man800x600' which is not good for SEO. Until NextGEN 3.19 the default character was an underscore; enabling this option changes it to the SEO friendly dash character. This will cause new dynamic images to be generated, and using the above 'Clear image cache' button is recommended after changing.","nggallery")}))))):null},zd=function(){var e=hr((0,Z.useState)(!1),2),t=e[0],n=e[1],r=hr((0,Z.useState)("all"),2),a=r[0],l=r[1],i=hr((0,Z.useState)(!1),2),o=i[0],s=i[1],c=ea(),u=c.showSuccess,m=c.showError,d=function(){var e,t=te();return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var n,r;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=null===(n=window.imagelyApp)||void 0===n?void 0:n.nonce,e.next=3,Fr()({path:"/imagely/v1/settings/reset",method:"POST",headers:{"X-WP-Nonce":r,"Content-Type":"application/json"},data:t});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),onSuccess:function(){t.invalidateQueries({queryKey:["settings"]})}})}(),g=function(){var e,t=te();return Mr({mutationFn:(e=Er(Nr().mark(function e(){var t,n;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===(t=window.imagelyApp)||void 0===t?void 0:t.nonce,e.next=3,Fr()({path:"/imagely/v1/cache/clear",method:"POST",headers:{"X-WP-Nonce":n,"Content-Type":"application/json"}});case 3:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)}),onSuccess:function(){t.invalidateQueries({queryKey:["settings"]})}})}(),p="pro"===nr,f=function(e){switch(e){case"all":return{title:(0,de.__)("Reset All Settings","nggallery"),description:(0,de.__)("Reset all NextGEN Gallery settings to their default values. This includes all gallery settings, display options, and ecommerce configurations (if Pro is installed).","nggallery"),warning:(0,de.__)("Resets all NextGEN and NextGEN Pro settings to default values, including ecommerce.","nggallery"),buttonText:(0,de.__)("Reset All Settings","nggallery"),confirmText:(0,de.__)("Reset all settings to default values?\n\nThis will reset ALL settings including galleries, display types, and ecommerce configurations.\n\nChoose [Cancel] to Stop, [Reset Settings] to proceed.","nggallery"),settingsType:"all",iconColor:"text-red-600",bgColor:"bg-[#FBEEEE]"};case"non_ecommerce":return{title:(0,de.__)("Reset Non-Ecommerce Settings","nggallery"),description:(0,de.__)("Reset all NextGEN Gallery settings except ecommerce configurations. This preserves your pricelist settings, payment configurations, and ecommerce-related options while resetting all other gallery settings.","nggallery"),warning:(0,de.__)("Resets all settings except ecommerce to default values.","nggallery"),buttonText:(0,de.__)("Reset Non-Ecommerce Settings","nggallery"),confirmText:(0,de.__)("Reset all non ecommerce options to default settings?\n\nThis will preserve your ecommerce configurations.\n\nChoose [Cancel] to Stop, [Reset Settings] to proceed.","nggallery"),settingsType:"non_ecommerce",iconColor:"text-orange-600",bgColor:"bg-[#EFF7EE]"};case"ecommerce":return{title:(0,de.__)("Reset Only Ecommerce Settings","nggallery"),description:(0,de.__)("Reset only ecommerce-related settings to their default values. This includes pricelist settings, payment configurations, and other ecommerce options while preserving all other gallery settings.","nggallery"),warning:(0,de.__)("Resets only ecommerce settings to default values.","nggallery"),buttonText:(0,de.__)("Reset Ecommerce Settings","nggallery"),confirmText:(0,de.__)("Reset all ecommerce options to default settings?\n\nThis will preserve all other gallery settings.\n\nChoose [Cancel] to Stop, [Reset Settings] to proceed.","nggallery"),settingsType:"ecommerce",iconColor:"text-blue-600",bgColor:"bg-[#EEF1FD]"}}},y=function(){var e=Er(Nr().mark(function e(){var t,r,l;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n(!1),t=f(a),e.prev=2,e.next=5,d.mutateAsync({confirm:!0,settings_type:t.settingsType});case 5:(r=e.sent).success?(u(r.message||(0,de.__)("Settings reset successfully!","nggallery")),setTimeout(function(){window.location.reload()},2e3)):m((0,de.__)("Failed to reset settings. Please try again.","nggallery")),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("Failed to reset settings:",e.t0),l=(0,de.__)("Failed to reset settings. Please try again.","nggallery"),null!==e.t0&&void 0!==e.t0&&e.t0.message&&(l=e.t0.message),m(l);case 15:case"end":return e.stop()}},e,null,[[2,9]])}));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Er(Nr().mark(function e(){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s(!1),e.prev=1,e.next=4,g.mutateAsync();case 4:u((0,de.__)("Cache cleared successfully!","nggallery")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("Failed to clear cache:",e.t0),m((0,de.__)("Error clearing cache. Please try again.","nggallery"));case 11:case"end":return e.stop()}},e,null,[[1,7]])}));return function(){return e.apply(this,arguments)}}(),_=f(a),b=function(e){var t=f(e);return J().createElement("div",{key:e,className:"bg-white rounded-lg shadow-sm p-6"},J().createElement("div",{className:"flex items-start space-x-4"},J().createElement("div",{className:"flex-shrink-0"},J().createElement("div",{className:"w-10 h-10 ".concat(t.bgColor," rounded-lg flex items-center justify-center")},J().createElement("svg",{className:"w-5 h-5 ".concat(t.iconColor),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})))),J().createElement("div",{className:"flex-1"},J().createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},t.title),J().createElement("p",{className:"text-gray-600 mb-4"},t.description),J().createElement("div",{className:"bg-[#EEF0F2] rounded-md p-2 mb-4"},J().createElement("p",{className:"text-sm text-gray-500"},J().createElement("strong",null,(0,de.__)("Warning:","nggallery"))," ",t.warning)),J().createElement("button",{onClick:function(){return function(e){l(e),n(!0)}(e)},disabled:d.isPending,className:"bg-white text-black border border-black hover:bg-black hover:text-white focus:ring-black px-4 py-2 rounded-md font-medium text-sm transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"},d.isPending?(0,de.__)("Resetting...","nggallery"):t.buttonText))))};return J().createElement("div",{className:"space-y-6"},o&&J().createElement("div",{className:"fixed inset-0 z-50 overflow-y-auto"},J().createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity duration-300 ease-in-out"}),J().createElement("div",{className:"flex min-h-screen items-center justify-center p-4 text-center sm:p-0"},J().createElement("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all duration-300 ease-in-out sm:my-8 sm:w-full sm:max-w-lg"},J().createElement("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},J().createElement("div",{className:"sm:flex sm:items-start"},J().createElement("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 sm:mx-0 sm:h-10 sm:w-10"},J().createElement("svg",{className:"h-6 w-6 text-yellow-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"}))),J().createElement("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},J().createElement("h3",{className:"text-lg leading-6 font-medium text-gray-900"},(0,de.__)("Clear Image Cache","nggallery")),J().createElement("div",{className:"mt-2"},J().createElement("p",{className:"text-sm text-gray-500"},(0,de.__)("Completely clear the NextGEN cache of all image modifications? This action will remove all cached and resized images. They will be regenerated when needed.","nggallery")))))),J().createElement("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},J().createElement("button",{type:"button",onClick:h,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-yellow-600 text-base font-medium text-white hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 sm:ml-3 sm:w-auto sm:text-sm"},(0,de.__)("Clear Cache","nggallery")),J().createElement("button",{type:"button",onClick:function(){s(!1)},className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},(0,de.__)("Cancel","nggallery")))))),t&&J().createElement("div",{className:"fixed inset-0 z-50 overflow-y-auto"},J().createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity duration-300 ease-in-out"}),J().createElement("div",{className:"flex min-h-screen items-center justify-center p-4 text-center sm:p-0"},J().createElement("div",{className:"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all duration-300 ease-in-out sm:my-8 sm:w-full sm:max-w-lg"},J().createElement("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},J().createElement("div",{className:"sm:flex sm:items-start"},J().createElement("div",{className:"mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full ".concat(_.bgColor," sm:mx-0 sm:h-10 sm:w-10")},J().createElement("svg",{className:"h-6 w-6 ".concat(_.iconColor),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"}))),J().createElement("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},J().createElement("h3",{className:"text-lg font-medium leading-6 text-gray-900"},_.title),J().createElement("div",{className:"mt-2"},J().createElement("p",{className:"text-sm text-gray-500 whitespace-pre-line"},_.confirmText))))),J().createElement("div",{className:"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6"},J().createElement("button",{type:"button",onClick:y,disabled:d.isPending,className:"inline-flex w-full justify-center rounded-md border border-transparent ".concat("all"===a?"bg-red-600 hover:bg-red-700 focus:ring-red-500":"non_ecommerce"===a?"bg-orange-600 hover:bg-orange-700 focus:ring-orange-500":"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"," px-4 py-2 text-base font-medium text-white shadow-sm focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 sm:ml-3 sm:w-auto sm:text-sm")},d.isPending?(0,de.__)("Resetting...","nggallery"):(0,de.__)("Reset Settings","nggallery")),J().createElement("button",{type:"button",onClick:function(){n(!1),l("all")},disabled:d.isPending,className:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},(0,de.__)("Cancel","nggallery")))))),J().createElement("div",{className:"bg-white rounded-lg shadow-sm p-4"},J().createElement("div",{className:"flex"},J().createElement("div",{className:"flex-shrink-0"},J().createElement(On,{className:"h-5 w-5 text-red-400"})),J().createElement("div",{className:"ml-3"},J().createElement("h3",{className:"text-sm font-medium text-[#DB1F21]"},(0,de.__)("Warning: Irreversible Action","nggallery")),J().createElement("div",{className:"mt-2 text-sm text-gray-600"},J().createElement("p",null,(0,de.__)("Resetting settings will permanently restore default values and cannot be undone. Please ensure you have a backup of your current settings if needed.","nggallery")))))),J().createElement("div",{className:"bg-white rounded-lg shadow-sm p-6"},J().createElement("div",{className:"flex items-start space-x-4"},J().createElement("div",{className:"flex-shrink-0"},J().createElement("div",{className:"w-10 h-10 bg-[#FEF7E7] rounded-lg flex items-center justify-center"},J().createElement(Pn,{className:"h-5 w-5 text-gray-400"}))),J().createElement("div",{className:"flex-1"},J().createElement("h3",{className:"text-lg font-medium text-gray-900 mb-2"},(0,de.__)("Clear image cache","nggallery")),J().createElement("p",{className:"text-gray-600 mb-4"},(0,de.__)("This will remove all cached and resized images. They will be regenerated when needed.","nggallery")),J().createElement("button",{onClick:function(){s(!0)},disabled:g.isPending,className:"bg-white text-black border border-black hover:bg-black hover:text-white focus:ring-black px-4 py-2 rounded-md font-medium text-sm transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"},g.isPending?(0,de.__)("Clearing Cache...","nggallery"):(0,de.__)("Clear Image Cache","nggallery"))))),b("all"),p&&J().createElement(J().Fragment,null,b("non_ecommerce"),b("ecommerce")))};function Bd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function qd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bd(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bd(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const Hd=function(){var e,t=Ar({queryKey:Ta.rolesCapabilities,queryFn:(e=Er(Nr().mark(function e(){var t,n;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=null===(t=window.imagelyApp)||void 0===t?void 0:t.nonce,e.next=3,Fr()({path:"/imagely/v1/roles-capabilities",method:"GET",headers:{"X-WP-Nonce":n}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)}),staleTime:3e5,gcTime:6e5}),r=t.data,a=t.isLoading,l=function(){var e,t=te();return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var n,r;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=null===(n=window.imagelyApp)||void 0===n?void 0:n.nonce,e.next=3,Fr()({path:"/imagely/v1/roles-capabilities",method:"POST",headers:{"X-WP-Nonce":r,"Content-Type":"application/json"},data:t});case 3:return e.next=5,Fr()({path:"/imagely/v1/roles-capabilities",method:"GET",headers:{"X-WP-Nonce":r}});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),onSuccess:function(e){t.setQueryData(Ta.rolesCapabilities,e)},onSettled:function(){t.invalidateQueries({queryKey:Ta.rolesCapabilities})}})}(),i=ea(),o=i.showSuccess,s=i.showError,c=hr((0,Z.useState)(null),2),u=c[0],m=c[1],d=(0,Z.useRef)(null);(0,Z.useEffect)(function(){if(r&&!u){var e,t,n,a,l,i,o,s,c,d,g={general:(null===(e=r.capabilities.general)||void 0===e?void 0:e.current_role)||"administrator",tinymce:(null===(t=r.capabilities.tinymce)||void 0===t?void 0:t.current_role)||"administrator",add_gallery:(null===(n=r.capabilities.add_gallery)||void 0===n?void 0:n.current_role)||"administrator",manage_gallery:(null===(a=r.capabilities.manage_gallery)||void 0===a?void 0:a.current_role)||"administrator",manage_others:(null===(l=r.capabilities.manage_others)||void 0===l?void 0:l.current_role)||"administrator",manage_tags:(null===(i=r.capabilities.manage_tags)||void 0===i?void 0:i.current_role)||"administrator",edit_album:(null===(o=r.capabilities.edit_album)||void 0===o?void 0:o.current_role)||"administrator",change_style:(null===(s=r.capabilities.change_style)||void 0===s?void 0:s.current_role)||"administrator",change_options:(null===(c=r.capabilities.change_options)||void 0===c?void 0:c.current_role)||"administrator",attach_interface:(null===(d=r.capabilities.attach_interface)||void 0===d?void 0:d.current_role)||"administrator"};m(g)}},[r,u]),(0,Z.useEffect)(function(){return function(){d.current&&clearTimeout(d.current)}},[]);var g=(0,Z.useCallback)(function(){var e=Er(Nr().mark(function e(t){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.mutateAsync(t);case 3:o((0,de.__)("Roles and capabilities updated successfully!","nggallery")),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),s((0,de.__)("Failed to update roles and capabilities. Please try again.","nggallery")),console.error("Error updating roles and capabilities:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),[l,o,s]),p=(0,Z.useCallback)(function(e,t){if(u){var r=qd(qd({},u),{},n({},e,t));m(r),d.current&&clearTimeout(d.current),d.current=setTimeout(function(){g(r)},500)}},[u,g]);return a||!u?J().createElement(ar,{size:"md",text:(0,de.__)("Loading roles and capabilities...","nggallery")}):r?J().createElement("div",{className:"space-y-4"},J().createElement(ki,{title:(0,de.__)("Capability Settings","nggallery"),defaultExpanded:!0},J().createElement("div",{className:"space-y-6"},J().createElement("div",{className:"bg-info-bg border border-info-border rounded-md p-4"},J().createElement("div",{className:"flex items-start"},J().createElement("div",{className:"flex-shrink-0"},J().createElement(Fn,{className:"h-5 w-5 text-gray-400"})),J().createElement("div",{className:"ml-3"},J().createElement("h3",{className:"text-sm font-medium text-gray-800"},(0,de.__)("How Roles & Capabilities Work","nggallery")),J().createElement("div",{className:"mt-2 text-sm text-gray-700"},J().createElement("p",null,(0,de.__)("Select the lowest role which should be able to access the following capabilities. NextGEN Gallery supports the standard roles from WordPress.","nggallery")),J().createElement("p",{className:"mt-2"},(0,de.__)("When you assign a capability to a role, all higher-level roles will automatically receive that capability as well.","nggallery")))))),r&&Object.entries(r.capabilities).map(function(e){var t=hr(e,2),n=t[0],a=t[1];return J().createElement("div",{key:n,className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-center"},J().createElement("div",null,J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-1"},a.name),J().createElement("p",{className:"text-xs italic text-gray-500"},(0,de.__)("Capability:","nggallery")," ",a.capability)),J().createElement("div",null,J().createElement(ml,{id:n,name:n,value:u[n]||"administrator",onChange:function(e){return p(n,e.target.value)},label:""},r&&Object.entries(r.roles).map(function(e){var t=hr(e,2),n=t[0],r=t[1];return J().createElement("option",{key:n,value:n},r)}))))})))):J().createElement("div",{className:"space-y-4"},J().createElement("div",{className:"bg-red-50 border border-red-200 rounded-lg p-8 text-center"},J().createElement("p",{className:"text-red-600"},(0,de.__)("Failed to load roles and capabilities data.","nggallery"))))},Gd=function(e){var t=e.value,n=e.onChange,r=e.label,a=function(e){return{topLeft:(0,de.__)("Top Left","nggallery"),topCenter:(0,de.__)("Top Center","nggallery"),topRight:(0,de.__)("Top Right","nggallery"),midLeft:(0,de.__)("Middle Left","nggallery"),midCenter:(0,de.__)("Middle Center","nggallery"),midRight:(0,de.__)("Middle Right","nggallery"),botLeft:(0,de.__)("Bottom Left","nggallery"),botCenter:(0,de.__)("Bottom Center","nggallery"),botRight:(0,de.__)("Bottom Right","nggallery")}[e]||e};return J().createElement("div",{className:"w-full"},J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},r),J().createElement("div",{className:"flex justify-center"},J().createElement("div",{className:"inline-grid grid-cols-3 gap-0 border border-gray-300 rounded-lg overflow-hidden bg-white"},[["topLeft","topCenter","topRight"],["midLeft","midCenter","midRight"],["botLeft","botCenter","botRight"]].map(function(e,r){return e.map(function(e,l){return J().createElement("label",{key:e,className:"\n\t\t\t\t\t\t\t\t\trelative flex items-center justify-center w-14 h-14 cursor-pointer transition-all\n\t\t\t\t\t\t\t\t\t".concat(l<2?"border-r border-gray-300":"","\n\t\t\t\t\t\t\t\t\t").concat(r<2?"border-b border-gray-300":"","\n\t\t\t\t\t\t\t\t\t").concat(t===e?"bg-gray-50":"bg-white hover:bg-gray-50","\n\t\t\t\t\t\t\t\t"),title:a(e)},J().createElement("input",{type:"radio",name:"wmPos",value:e,checked:t===e,onChange:function(e){return n(e.target.value)},className:"sr-only"}),J().createElement("div",{className:"\n\t\t\t\t\t\t\t\t\tw-4 h-4 rounded-full transition-all\n\t\t\t\t\t\t\t\t\t".concat(t===e?"bg-green-500":"bg-gray-400","\n\t\t\t\t\t\t\t\t")}))})}))))};function Ud(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Wd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ud(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ud(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const Vd=function(e){e.settings,e.onSettingsChange;var t,r,a,l,i,o,s=Da(),c=s.data,u=s.isLoading,m=Ia(),d=Mr({mutationFn:(o=Er(Nr().mark(function e(t){var n,r;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=null===(n=window.imagelyApp)||void 0===n?void 0:n.nonce,e.next=3,Fr()({path:"/imagely/v1/settings/watermark-preview",method:"POST",headers:{"X-WP-Nonce":r,"Content-Type":"application/json"},data:{watermark_options:t}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)})}),g=hr((0,Z.useState)(""),2),p=g[0],f=g[1],y=hr((0,Z.useState)(""),2),h=y[0],_=y[1],b=hr((0,Z.useState)(null),2),v=b[0],x=b[1],w=(0,Z.useRef)(null),E=ea(),C=E.showSuccess,N=E.showError,k=E.showError,S=Fu(v,1e3);(0,Z.useEffect)(function(){if(c&&!v){var e=c.wmColor?c.wmColor.replace("#",""):"ffffff";e.length>6&&(e=e.substring(0,6));var t={watermark_automatically_at_upload:Ca(c.watermark_automatically_at_upload),wmPos:c.wmPos||"midCenter",wmXpos:c.wmXpos||15,wmYpos:c.wmYpos||5,wmType:c.wmType||"text",wmPath:c.wmPath||"",wmFont:c.wmFont||"arial.ttf",wmSize:c.wmSize||30,wmText:c.wmText||"",wmColor:"#".concat(e),wmOpaque:c.wmOpaque||33};x(t),("text"===t.wmType&&t.wmText||"image"===t.wmType&&t.wmPath)&&O(t)}},[c,v]),(0,Z.useEffect)(function(){return function(){w.current&&clearTimeout(w.current)}},[]),(0,Z.useEffect)(function(){if(null!=S&&S.wmType){var e="text"===S.wmType&&S.wmText&&S.wmText.trim().length>0,t="image"===S.wmType&&S.wmPath&&S.wmPath.trim().length>0;e||t?O(S):(f(""),"text"===S.wmType?_((0,de.__)("Enter watermark text to see preview","nggallery")):"image"===S.wmType?_((0,de.__)("Enter watermark image path to see preview","nggallery")):_(""))}},[S]);var O=function(){var e=Er(Nr().mark(function e(t){var n,r,a,l,i,o,s,c,u,m,g;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _(""),e.prev=1,(r=(null===(n=t.wmColor)||void 0===n?void 0:n.replace("#",""))||"ffffff").length>6&&(r=r.substring(0,6)),a=Wd(Wd({},t),{},{wmColor:r}),e.next=7,d.mutateAsync(a);case 7:(l=e.sent).success&&l.thumbnail_url?(f(l.thumbnail_url),_("")):(f(""),_((0,de.__)("Failed to generate preview","nggallery"))),e.next=33;break;case 11:if(e.prev=11,e.t0=e.catch(1),console.error("Failed to load watermark preview:",e.t0),f(""),!(e.t0 instanceof Response)){e.next=30;break}return e.prev=16,e.next=19,e.t0.json();case 19:"no_images_found"===(null==(i=e.sent)?void 0:i.code)?(o=(0,de.__)("No images found in NextGen Gallery. Please add images to a gallery first.","nggallery"),_(o)):"no_usable_images"===(null==i?void 0:i.code)?(s=(0,de.__)("No usable images found for preview generation.","nggallery"),_(s)):"missing_watermark_options"===(null==i?void 0:i.code)?(c=(0,de.__)("Watermark options are required.","nggallery"),_(c),k(c)):(u=(0,de.__)("Failed to load watermark preview: ","nggallery")+((null==i?void 0:i.message)||(0,de.__)("Unknown error","nggallery")),_(u),k(u)),e.next=28;break;case 23:e.prev=23,e.t1=e.catch(16),m=(0,de.__)("Failed to load watermark preview: Unknown error","nggallery"),_(m),k(m);case 28:e.next=33;break;case 30:g=(0,de.__)("Failed to load watermark preview: ","nggallery")+((null===e.t0||void 0===e.t0?void 0:e.t0.message)||(0,de.__)("Unknown error","nggallery")),_(g),k(g);case 33:case"end":return e.stop()}},e,null,[[1,11],[16,23]])}));return function(t){return e.apply(this,arguments)}}(),P=(0,Z.useCallback)(function(){var e=Er(Nr().mark(function e(t){var n,r,a;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(r=(null===(n=t.wmColor)||void 0===n?void 0:n.replace("#",""))||"ffffff").length>6&&(r=r.substring(0,6)),a=Wd(Wd({},t),{},{wmColor:r}),e.next=6,m.mutateAsync(a);case 6:C((0,de.__)("Watermark settings updated successfully!","nggallery")),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),N((0,de.__)("Failed to update watermark settings. Please try again.","nggallery")),console.error("Error updating watermark settings:",e.t0);case 13:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t){return e.apply(this,arguments)}}(),[m,C,N]),T=(0,Z.useCallback)(function(e,t){if(v){var r=Wd(Wd({},v),{},n({},e,t));x(r),w.current&&clearTimeout(w.current),w.current=setTimeout(function(){P(r)},1e3)}},[v,P]);if(u||!v)return J().createElement(ar,{size:"md",text:(0,de.__)("Loading watermark settings...","nggallery")});var D=[{value:"arial.ttf",label:(0,de.__)("Arial","nggallery")},{value:"times.ttf",label:(0,de.__)("Times New Roman","nggallery")},{value:"courier.ttf",label:(0,de.__)("Courier New","nggallery")},{value:"verdana.ttf",label:(0,de.__)("Verdana","nggallery")},{value:"georgia.ttf",label:(0,de.__)("Georgia","nggallery")},{value:"YanoneKaffeesatz-Bold.ttf",label:(0,de.__)("Yanone Kaffeesatz Bold","nggallery")}];return J().createElement("div",{className:"space-y-4"},J().createElement(ki,{title:(0,de.__)("Watermark Settings","nggallery"),defaultExpanded:!0},J().createElement("div",{className:"space-y-6"},J().createElement("div",{className:"bg-info-bg border border-info-border rounded-md p-4"},J().createElement("div",{className:"flex items-start"},J().createElement("div",{className:"flex-shrink-0"},J().createElement(Fn,{className:"h-5 w-5 text-gray-400"})),J().createElement("div",{className:"ml-3"},J().createElement("h3",{className:"text-sm font-medium text-gray-800"},(0,de.__)("About Watermarks","nggallery")),J().createElement("div",{className:"mt-2 text-sm text-gray-700"},J().createElement("p",null,(0,de.__)("Configure watermark options that will be applied to your images. You can choose between text or image watermarks.","nggallery")))))),J().createElement("div",null,J().createElement(Ml,{id:"watermark_automatically_at_upload",name:"watermark_automatically_at_upload",checked:v.watermark_automatically_at_upload||!1,onChange:function(e){T("watermark_automatically_at_upload",e.target.checked)},label:(0,de.__)("Apply watermark automatically during upload","nggallery"),help:(0,de.__)("When enabled, watermarks will be applied to images automatically when they are uploaded.","nggallery")})),J().createElement("div",{className:"w-full max-w-sm"},J().createElement(ml,{id:"wmType",name:"wmType",value:v.wmType||"text",onChange:function(e){return T("wmType",e.target.value)},label:(0,de.__)("Watermark Type","nggallery")},J().createElement("option",{value:"text"},(0,de.__)("Text watermark","nggallery")),J().createElement("option",{value:"image"},(0,de.__)("Image watermark","nggallery")))),"text"===v.wmType&&J().createElement("div",{className:"bg-gray-100 p-4 rounded-md"},J().createElement("h4",{className:"text-md font-medium text-gray-900 mb-4"},(0,de.__)("Text Settings","nggallery")),J().createElement("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4"},J().createElement("div",null,J().createElement(ul,null,(0,de.__)("Watermark Text","nggallery")),J().createElement("input",{type:"text",value:v.wmText,onChange:function(e){return T("wmText",e.target.value)},className:"bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5 hover:border-gray-400 transition-colors",placeholder:(0,de.__)("Enter watermark text","nggallery")})),J().createElement("div",null,J().createElement(ml,{id:"wmFont",name:"wmFont",value:v.wmFont||"arial.ttf",onChange:function(e){return T("wmFont",e.target.value)},label:(0,de.__)("Font","nggallery")},D.map(function(e){return J().createElement("option",{key:e.value,value:e.value},e.label)}))),J().createElement("div",null,J().createElement(dl,{type:"number",id:"wmSize",name:"wmSize",value:(null===(t=v.wmSize)||void 0===t?void 0:t.toString())||"30",onChange:function(e){return T("wmSize",parseInt(e.target.value)||30)},label:(0,de.__)("Font Size","nggallery"),min:8,max:72})),J().createElement("div",null,J().createElement("label",{className:"block text-sm font-medium text-gray-700 mb-2"},(0,de.__)("Color (hex)","nggallery")),J().createElement("div",{className:"flex items-center space-x-2"},J().createElement("span",{className:"text-gray-500"},"#"),J().createElement($i,{color:v.wmColor||"#ffffff",onChange:function(e){T("wmColor",e)},enableAlpha:!1}))),J().createElement("div",null,J().createElement(dl,{type:"number",id:"wmOpaque",name:"wmOpaque",value:(null===(r=v.wmOpaque)||void 0===r?void 0:r.toString())||"33",onChange:function(e){var t=parseInt(e.target.value)||0,n=Math.min(100,Math.max(0,t));T("wmOpaque",n)},label:(0,de.__)("Opacity (%)","nggallery"),min:0,max:100})))),"image"===v.wmType&&J().createElement("div",{className:"bg-gray-100 p-4 rounded-md"},J().createElement("h4",{className:"text-md font-medium text-gray-900 mb-4"},(0,de.__)("Image Settings","nggallery")),J().createElement("div",null,J().createElement(ul,{help:(0,de.__)("Absolute path to the watermark image","nggallery")},(0,de.__)("Watermark Image Path","nggallery")),J().createElement("input",{type:"text",value:v.wmPath,onChange:function(e){return T("wmPath",e.target.value)},className:"bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-green-500 focus:border-green-500 block w-full p-2.5 hover:border-gray-400 transition-colors",placeholder:(0,de.__)("Enter path to watermark image","nggallery")}),J().createElement("div",{className:"mt-3"},J().createElement("p",{className:"text-sm font-medium text-gray-700 mb-2"},(0,de.__)("Example path (click to use):","nggallery")),J().createElement("div",{className:"space-y-1"},J().createElement("button",{type:"button",onClick:function(){var e;return T("wmPath",(null===(e=window.imagelyApp)||void 0===e?void 0:e.pluginPath)+"assets/images/logo-icon.png")},className:"block text-sm text-blue-600 hover:text-blue-800 underline"},(null===(a=window.imagelyApp)||void 0===a?void 0:a.pluginPath)+"assets/images/logo-icon.png"))))),J().createElement("div",null,J().createElement("h3",{className:"text-lg font-medium text-gray-900 mb-4"},(0,de.__)("Position","nggallery")),J().createElement("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4"},J().createElement("div",null,J().createElement(Gd,{value:v.wmPos||"midCenter",onChange:function(e){return T("wmPos",e)},label:(0,de.__)("Position","nggallery")})),J().createElement("div",null,J().createElement(dl,{type:"number",id:"wmXpos",name:"wmXpos",value:(null===(l=v.wmXpos)||void 0===l?void 0:l.toString())||"15",onChange:function(e){return T("wmXpos",parseInt(e.target.value)||15)},label:(0,de.__)("X Offset (pixels)","nggallery"),min:0})),J().createElement("div",null,J().createElement(dl,{type:"number",id:"wmYpos",name:"wmYpos",value:(null===(i=v.wmYpos)||void 0===i?void 0:i.toString())||"5",onChange:function(e){return T("wmYpos",parseInt(e.target.value)||5)},label:(0,de.__)("Y Offset (pixels)","nggallery"),min:0})))))),J().createElement(ki,{title:(0,de.__)("Preview","nggallery"),defaultExpanded:!0},J().createElement("div",{className:"space-y-4"},J().createElement("div",{className:"flex justify-end"},J().createElement("button",{onClick:function(){v&&O(v)},disabled:d.isPending,className:"px-3 py-1 text-sm text-green-600 border border-green-500 hover:bg-green-500 hover:text-white rounded-md disabled:opacity-50"},d.isPending?(0,de.__)("Loading...","nggallery"):(0,de.__)("Refresh Preview","nggallery"))),J().createElement("div",{className:"bg-white border-2 border-gray-300 rounded-md p-4 relative min-h-48 overflow-hidden"},d.isPending&&J().createElement("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-10"},J().createElement("div",{className:"flex items-center space-x-2"},J().createElement("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),J().createElement("span",{className:"text-sm text-gray-600"},(0,de.__)("Generating preview...","nggallery")))),h&&!d.isPending&&J().createElement("div",{className:"absolute inset-0 flex items-center justify-center"},J().createElement("div",{className:"text-center text-gray-500"},h.includes("No images found")||h.includes("No usable images")?J().createElement(J().Fragment,null,J().createElement("div",{className:"flex flex-col items-center"},J().createElement("img",{src:Bl({width:100,height:60,text:"No Images",backgroundColor:"#f1f3f4",textColor:"#5f6368",fontSize:11}),alt:(0,de.__)("No images placeholder","nggallery"),className:"mb-2 rounded border border-gray-200 opacity-75"}),J().createElement("p",{className:"text-sm font-medium text-blue-600 mb-1"},(0,de.__)("No images available for preview","nggallery")),J().createElement("p",{className:"text-xs text-gray-500"},(0,de.__)("Add your first image to a gallery to see the watermark preview","nggallery")))):J().createElement(J().Fragment,null,J().createElement("svg",{className:"mx-auto h-8 w-8 mb-2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},J().createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})),J().createElement("p",{className:"text-sm"},h)))),p&&!d.isPending&&!h&&J().createElement("div",{className:"flex flex-col items-center"},J().createElement("img",{src:p,alt:(0,de.__)("Watermark preview","nggallery"),className:"max-w-full h-auto rounded-md shadow-sm",onError:function(){_((0,de.__)("Failed to load preview image","nggallery")),f("")}})),!p&&!d.isPending&&!h&&J().createElement("div",{className:"absolute inset-0 flex items-center justify-center"},J().createElement("div",{className:"text-center text-gray-400"},J().createElement("div",{className:"flex flex-col items-center"},J().createElement("img",{src:Bl({width:100,height:60,text:"Configure Settings",backgroundColor:"#f1f3f4",textColor:"#5f6368",fontSize:11}),alt:(0,de.__)("Configure settings placeholder","nggallery"),className:"mb-2 rounded border border-gray-200 opacity-75"}),J().createElement("p",{className:"text-sm"},(0,de.__)("Configure watermark settings to see preview","nggallery")))))))))},Kd=function(e){var t,n,r=e.tabId,a={settings:e.settings,onSettingsChange:e.onSettingsChange},l=null===(t=window.imagelyApp)||void 0===t?void 0:t.canAccessRolesSettings,i=null===(n=window.imagelyApp)||void 0===n?void 0:n.canAccessLicenseSettings;switch(r){case"license":default:return i?J().createElement(Ad,null):J().createElement(jd,a);case"image":return J().createElement(jd,a);case"watermarking":return J().createElement(Vd,a);case"imageanimations":return J().createElement(Dd,a);case"imageprotection":return J().createElement(Id,a);case"lightbox":return J().createElement(Rd,a);case"miscellaneous":return J().createElement(Fd,a);case"roles":return l?J().createElement(Hd,null):J().createElement(jd,a);case"reset":return J().createElement(zd,null);case"advanced":return J().createElement(Pd,null);case"hidden":return J().createElement(Td,a)}};var Qd=[{id:"license",label:(0,de.__)("License","nggallery"),icon:J().createElement(on,{className:"h-5 w-5"})},{id:"image",label:(0,de.__)("Image Options","nggallery"),icon:J().createElement(sn,{className:"h-5 w-5"})},{id:"lightbox",label:(0,de.__)("Lightbox Effects","nggallery"),icon:J().createElement(cn,{className:"h-5 w-5"})},{id:"imageanimations",label:(0,de.__)("Image Animations","nggallery"),icon:J().createElement(un,{className:"h-5 w-5"})},{id:"watermarking",label:(0,de.__)("Watermarking","nggallery"),icon:J().createElement(mn,{className:"h-5 w-5"})},{id:"roles",label:(0,de.__)("Roles & Capabilities","nggallery"),icon:J().createElement(dn,{className:"h-5 w-5"})},{id:"miscellaneous",label:(0,de.__)("Miscellaneous","nggallery"),icon:J().createElement(pn,{className:"h-5 w-5"})},{id:"reset",label:(0,de.__)("Reset Options","nggallery"),icon:J().createElement(fn,{className:"h-5 w-5"})},{id:"imageprotection",label:(0,de.__)("Image Protection","nggallery"),icon:J().createElement(yn,{className:"h-5 w-5"})},{id:"layoutsettings",label:(0,de.__)("Layout Settings","nggallery"),icon:J().createElement(gn,{className:"h-5 w-5"})},{id:"advanced",label:(0,de.__)("Advanced","nggallery"),icon:J().createElement(pn,{className:"h-5 w-5"})},{id:"setupwizard",label:(0,de.__)("Setup Wizard","nggallery"),icon:J().createElement(hn,{className:"h-5 w-5"})},{id:"hidden",label:(0,de.__)("Hidden Settings","nggallery"),icon:J().createElement(pn,{className:"h-5 w-5"})}],Xd=function(){var e,t,n=Qd;return n=n.filter(function(e){return"hidden"!==e.id}),(null===(e=window.imagelyApp)||void 0===e?void 0:e.canAccessRolesSettings)||(n=n.filter(function(e){return"roles"!==e.id})),(null===(t=window.imagelyApp)||void 0===t?void 0:t.canAccessLicenseSettings)||(n=n.filter(function(e){return"license"!==e.id})),n};const Yd=function(e){var t=e.activeTab,n=e.onTabChange,r=Xd(),a=zl().navigateTo;return J().createElement("div",{className:"bg-white rounded-lg shadow-sm p-4"},J().createElement("nav",{className:"space-y-2"},r.map(function(e){return J().createElement("button",{key:e.id,onClick:function(){return function(e){if("imagelycdn"===e.id){var t=window.imagelyApp,r=null==t?void 0:t.enviraCdnConfig;if(r&&r.enabled&&r.license_valid){var l=(null==t?void 0:t.adminUrl)||"/wp-admin/";return void(window.location.href="".concat(l,"admin.php?page=eg-cdn-config"))}}if("setupwizard"!==e.id)"layoutsettings"!==e.id?n(e.id):a("imagely-layout-settings","photocrati-nextgen_basic_thumbnails");else{var i=window.imagelyApp,o=(null==i?void 0:i.adminUrl)||"/wp-admin/";window.location.href="".concat(o,"index.php?page=nextgen-gallery-setup-wizard")}}(e)},className:"w-full flex items-center space-x-3 p-3 text-left rounded-lg transition-colors ".concat(t===e.id?"bg-green-50 text-green-700 font-medium border border-green-200":"text-gray-600 hover:bg-gray-50 hover:text-gray-900")},J().createElement("div",{className:"flex-shrink-0 ".concat(t===e.id?"text-green-600":"text-gray-400")},e.icon),J().createElement("span",{className:"text-sm"},e.label))})))};function Zd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Jd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zd(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zd(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const $d=function(){var e=zl(),t=e.currentTab,r=e.setCurrentTab,a=Da(),l=a.data,i=a.isLoading,o=Ia(),s=ea(),c=s.showSuccess,u=s.showError,m=hr((0,Z.useState)(null),2),d=m[0],g=m[1],p=Xd(),f=(0,Z.useRef)(null);(0,Z.useEffect)(function(){l&&!d&&g(function(e){return Jd(Jd({},e),{},{protect_images:Ca(e.protect_images),protect_images_globally:Ca(e.protect_images_globally),animate_images_enable:Ca(e.animate_images_enable),animate_pagination_enable:Ca(e.animate_pagination_enable),watermark_automatically_at_upload:Ca(e.watermark_automatically_at_upload),useMediaRSS:Ca(e.useMediaRSS),galleries_in_feeds:Ca(e.galleries_in_feeds),use_alternate_random_method:Ca(e.use_alternate_random_method),disable_fontawesome:Ca(e.disable_fontawesome),disable_ngg_tags_page:Ca(e.disable_ngg_tags_page),dynamic_image_filename_separator_use_dash:Ca(e.dynamic_image_filename_separator_use_dash),ngg_debug_mode:Ca(e.ngg_debug_mode),thumbEffect:e.thumbEffect||"simplelightbox",thumbEffectContext:e.thumbEffectContext||"nextgen_images",thumbEffectCode:e.thumbEffectCode||"",thumbEffectScripts:e.thumbEffectScripts||[],thumbEffectStyles:e.thumbEffectStyles||[],router_param_slug:e.router_param_slug||"nggallery",maximum_entity_count:e.maximum_entity_count||500,random_widget_cache_ttl:e.random_widget_cache_ttl||0,wmPos:e.wmPos||"midCenter",wmXpos:e.wmXpos||15,wmYpos:e.wmYpos||5,wmType:e.wmType||"text",wmPath:e.wmPath||"",wmFont:e.wmFont||"arial.ttf",wmSize:e.wmSize||30,wmText:e.wmText||"",wmOpaque:e.wmOpaque||33,wmColor:e.wmColor?"#".concat(e.wmColor.replace("#","")):"#ffffff",animate_images_style:e.animate_images_style||"flipInX",animate_images_duration:e.animate_images_duration||1500,animate_images_delay:e.animate_images_delay||250,animate_pagination_style:e.animate_pagination_style||"flipInX",animate_pagination_duration:e.animate_pagination_duration||1500,animate_pagination_delay:e.animate_pagination_delay||250})}(l))},[l,d]),(0,Z.useEffect)(function(){if(!p.map(function(e){return e.id}).includes(t)&&"hidden"!==t){var e,n=(null===(e=p[0])||void 0===e?void 0:e.id)||"image";r(n)}},[t,r,p]),(0,Z.useEffect)(function(){return function(){f.current&&clearTimeout(f.current)}},[]);var y=(0,Z.useCallback)(function(){var e=Er(Nr().mark(function e(t){var n,r;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=Jd(Jd({},t),{},{wmColor:(null===(n=t.wmColor)||void 0===n?void 0:n.replace("#",""))||"ffffff"}),e.next=4,o.mutateAsync(r);case 4:c((0,de.__)("Settings updated successfully!","nggallery")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),u((0,de.__)("Failed to update settings. Please try again.","nggallery")),console.error("Error updating plugin settings:",e.t0);case 11:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),[o,c,u]),h=(0,Z.useCallback)(function(e,t){if(d){var r=Jd(Jd({},d),{},n({},e,t));g(r),f.current&&clearTimeout(f.current),f.current=setTimeout(function(){y(r)},333)}},[d,y]);return i||!d?J().createElement(ar,{size:"md",text:(0,de.__)("Loading settings...","nggallery")}):J().createElement(Od,{currentTab:t,onTabChange:r,sidebarComponent:Yd,title:""},J().createElement(Kd,{tabId:t,settings:d,onSettingsChange:h}))};var eg=[{key:"name",label:"Name",filterable:!0,visibleByDefault:!0,sortType:"frontend",locked:!0},{key:"slug",label:"Slug",filterable:!0,visibleByDefault:!0,sortType:"frontend",locked:!0},{key:"description",label:"Description",filterable:!0,visibleByDefault:!0,sortType:"frontend"},{key:"count",label:"Count",filterable:!0,visibleByDefault:!0,sortType:"frontend"}],tg=Object.fromEntries(eg.map(function(e){return[e.key,e.visibleByDefault]}));const ng=function(e){var t=e.onTagCreated,n=(0,me.useDispatch)(tr);return React.createElement("div",{className:"flex justify-between items-center mb-6"},React.createElement("h1",{className:"text-3xl font-bold"},(0,de.__)("Tags","nggallery")),React.createElement("button",{onClick:function(){n.setActiveModal("tagForm",{onSuccess:t})},className:"bg-green-500 text-white hover:bg-green-600 px-4 py-2 h-auto rounded-md text-sm font-medium w-full sm:w-auto transition-colors"},(0,de.__)("Add New Tag","nggallery")))};function rg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ag(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rg(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rg(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const lg=function(e){var t=e.tags,n=e.visibleColumns,r=e.selectedTags,a=e.onSelectAll,l=e.onSelectTag,i=e.onSort,o=e.sortColumn,s=e.sortDirection,c=e.onDelete,u=e.onEdit,m=e.isLoading,d=e.hasActiveSearch,g=void 0!==d&&d,p=(0,me.useDispatch)(tr),f=g?J().createElement("div",{className:"py-16"},J().createElement("div",{className:"flex flex-col items-center justify-center text-center text-gray-500"},J().createElement("p",{className:"text-sm mb-2"},(0,de.__)("No results found for your search.","nggallery")))):J().createElement("div",{className:"py-16"},J().createElement("div",{className:"flex flex-col items-center justify-center text-center text-gray-500"},J().createElement("div",{className:"mb-4"},J().createElement(Qn,{className:"w-16 h-16 opacity-60"})),J().createElement("p",{className:"text-sm mb-2"},(0,de.__)("No Tags so far!","nggallery")),J().createElement("button",{type:"button",className:"inline-flex items-center gap-1 text-green-500 hover:text-green-600 text-sm font-medium",onClick:function(){p.setActiveModal("tagForm",{tag:null,onSuccess:function(){}})}},(0,de.__)("Add New Tag","nggallery"),J().createElement(Bt,{className:"w-4 h-4"}))));return J().createElement(Em,{isLoading:m,items:t,visibleColumns:n,selectedItems:r,onSelectAll:a,onSelectItem:l,columns:eg.map(function(e){return ag(ag({},e),{},{render:function(t){return function(e,t){switch(t){case"name":return J().createElement("button",{onClick:function(){return function(e){u(e)}(e)},className:"font-medium text-gray-900 text-sm hover:underline"},e.name);case"slug":return J().createElement("span",{className:"text-gray-600 text-sm"},e.slug);case"description":return J().createElement("div",{className:"text-sm text-gray-500 max-w-xs truncate",title:e.description},e.description||(0,de.__)("No description","nggallery"));case"count":return J().createElement("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},e.count);default:return null}}(t,e.key)}})}),onSort:i,sortColumn:o,sortDirection:s,notFoundContent:f,actionsHeaderLabel:(0,de.__)("Actions","nggallery"),actionCellRenderer:function(e){return J().createElement("div",{className:"flex flex-col items-center text-gray-500"},J().createElement("button",{type:"button",className:"flex flex-col items-center text-red-600 hover:text-red-700",onClick:function(){return function(e){c([e])}(e)}},J().createElement(Un,{className:"w-4 h-4 mb-1"}),J().createElement("span",{className:"text-xs"},(0,de.__)("Delete","nggallery"))))}})};function ig(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function og(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ig(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ig(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function sg(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return cg(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cg(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){o=!0,l=e},f:function(){try{i||null==n.return||n.return()}finally{if(o)throw l}}}}function cg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const ug=function(){var e=hr((0,Z.useState)([]),2),t=e[0],n=e[1],r=hr((0,Z.useState)(!0),2),a=r[0],l=r[1],i=hr((0,Z.useState)(""),2),o=i[0],s=i[1],c=Fu(o,300),u=hr((0,Z.useState)(tg),2),m=u[0],d=u[1],g=hr((0,Z.useState)(new Set),2),p=g[0],f=g[1],y=hr((0,Z.useState)(null),2),h=y[0],_=y[1],b=hr((0,Z.useState)(null),2),v=b[0],x=b[1],w=hr((0,Z.useState)(1),2),E=w[0],C=w[1],N=Da().data,k=(null==N?void 0:N.admin_table_per_page)||20,S=(0,me.useDispatch)(tr),O=function(e){return{term_id:e.term_id,name:e.name,slug:e.slug,description:e.description,count:e.count}},P=function(e,t){var n,r=(null==e?void 0:e.message)||t;null!=e&&e.code&&(r+=" (".concat((0,de.__)("Error Code","nggallery"),": ").concat(e.code,")")),null!=e&&null!==(n=e.data)&&void 0!==n&&n.details&&(r+=" - ".concat(e.data.details)),S.showNotice("error",r)},T=function(){var e=Er(Nr().mark(function e(){var t,r,a,i;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.prev=1,r=null===(t=window.imagelyApp)||void 0===t?void 0:t.nonce,e.next=5,Fr()({path:"/imagely/v1/tags",method:"GET",headers:{"X-WP-Nonce":r,"Content-Type":"application/json"}});case 5:a=e.sent,n(a),e.next=26;break;case 9:if(e.prev=9,e.t0=e.catch(1),console.error("Error fetching tags:",e.t0),!(e.t0 instanceof Response)){e.next=25;break}return e.prev=13,e.next=16,e.t0.json();case 16:i=e.sent,P(i,(0,de.__)("Failed to load tags","nggallery")),e.next=23;break;case 20:e.prev=20,e.t1=e.catch(13),S.showNotice("error",(0,de.__)("Failed to load tags","nggallery"));case 23:e.next=26;break;case 25:P(e.t0,(0,de.__)("Failed to load tags","nggallery"));case 26:return e.prev=26,l(!1),e.finish(26);case 29:case"end":return e.stop()}},e,null,[[1,9,26,29],[13,20]])}));return function(){return e.apply(this,arguments)}}();(0,Z.useEffect)(function(){T()},[]),(0,Z.useEffect)(function(){C(1)},[c]),(0,Z.useEffect)(function(){f(new Set)},[E]);var D=J().useCallback(function(e){C(e),window.scrollTo({top:0,behavior:"smooth"})},[]),I=function(e){var t,n=e.map(O);S.setActiveModal("deleteTags",{tags:n,onClose:function(){return S.setActiveModal(null)},onConfirm:(t=Er(Nr().mark(function e(){var t,r,a,l;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t=sg(n),e.prev=2,t.s();case 4:if((r=t.n()).done){e.next=10;break}return a=r.value,e.next=8,S.deleteItem("tags",a.term_id);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),t.e(e.t0);case 15:return e.prev=15,t.f(),e.finish(15);case 18:return S.showNotice("success",(0,de.__)("Tags deleted successfully","nggallery")),e.next=21,T();case 21:f(new Set),e.next=41;break;case 24:if(e.prev=24,e.t1=e.catch(0),console.error("Error deleting tags:",e.t1),!(e.t1 instanceof Response)){e.next=40;break}return e.prev=28,e.next=31,e.t1.json();case 31:l=e.sent,P(l,(0,de.__)("Failed to delete tags","nggallery")),e.next=38;break;case 35:e.prev=35,e.t2=e.catch(28),S.showNotice("error",(0,de.__)("Failed to delete tags","nggallery"));case 38:e.next=41;break;case 40:P(e.t1,(0,de.__)("Failed to delete tags","nggallery"));case 41:S.setActiveModal(null);case 42:case"end":return e.stop()}},e,null,[[0,24],[2,12,15,18],[28,35]])})),function(){return t.apply(this,arguments)})})},j=(0,Z.useMemo)(function(){var e=t.filter(function(e){return e.name.toLowerCase().includes(c.toLowerCase())||e.description.toLowerCase().includes(c.toLowerCase())||e.slug.toLowerCase().includes(c.toLowerCase())});h&&v&&(e=zr(e).sort(function(e,t){var n,r;switch(h){case"galleryTitle":n=e.name.toLowerCase(),r=t.name.toLowerCase();break;case"slug":n=e.slug.toLowerCase(),r=t.slug.toLowerCase();break;case"count":n=e.count,r=t.count;break;default:return 0}return n<r?"asc"===v?-1:1:n>r?"asc"===v?1:-1:0}));var n=e.length,r=Math.ceil(n/k),a=(E-1)*k,l=a+k;return{paginatedTagsForTable:e.slice(a,l).map(function(e){return og(og({},e),{},{id:e.term_id,galleryTitle:e.name})}),pagination:{total:n,total_pages:r,per_page:k,current_page:E}}},[t,c,h,v,E,k]),A=j.paginatedTagsForTable,L=j.pagination;(0,Z.useEffect)(function(){L.total_pages>0&&E>L.total_pages&&C(L.total_pages)},[L.total_pages]);var M=A;return J().createElement("div",{className:"p-6 min-h-screen"},J().createElement(ng,{onTagCreated:T}),J().createElement(Mu,{title:(0,de.__)("Manage Tags","nggallery"),searchTerm:o,setSearchTerm:s,onSearch:function(){},visibleColumns:m,setVisibleColumns:d,selectedItems:p,items:M,columns:zr(eg),itemType:"tag",searchPlaceholder:(0,de.__)("Search Tags","nggallery"),onDelete:I}),J().createElement(lg,{isLoading:a,tags:M,visibleColumns:m,selectedTags:p,onSelectAll:function(e){f(e?new Set(M.map(function(e){return e.id})):new Set)},onSelectTag:function(e){var t=new Set(p);t.has(e)?t.delete(e):t.add(e),f(t)},onSort:function(e,t){_(t?e:null),x(t),C(1)},sortColumn:h,sortDirection:v,onDelete:I,onEdit:function(e){var t=O(e);S.setActiveModal("tagForm",{tag:t,onSuccess:T})},hasActiveSearch:!!c}),!a&&(L.total>0||c)&&J().createElement(Ru,{currentPage:E,totalPages:L.total_pages,perPage:L.per_page,total:L.total,onPageChange:D,itemLabel:c?(0,de.__)("Results","nggallery"):(0,de.__)("Tags","nggallery"),showItemCount:!0}))};var mg=[{id:"photocrati-nextgen_basic_thumbnails",label:(0,de.__)("Basic Thumbnails","nggallery"),description:(0,de.__)("Configure default settings for Basic Thumbnails display type","nggallery")},{id:"photocrati-nextgen_basic_slideshow",label:(0,de.__)("Basic Slideshow","nggallery"),description:(0,de.__)("Configure default settings for Basic Slideshow display type","nggallery")},{id:"photocrati-nextgen_basic_imagebrowser",label:(0,de.__)("Basic ImageBrowser","nggallery"),description:(0,de.__)("Configure default settings for Basic ImageBrowser display type","nggallery")},{id:"photocrati-nextgen_basic_tagcloud",label:(0,de.__)("Basic TagCloud","nggallery"),description:(0,de.__)("Configure default settings for Basic TagCloud display type","nggallery")},{id:"photocrati-nextgen_pro_film",label:(0,de.__)("Pro Film","nggallery"),description:(0,de.__)("Configure default settings for Pro Film display type","nggallery")},{id:"photocrati-nextgen_pro_mosaic",label:(0,de.__)("Pro Mosaic","nggallery"),description:(0,de.__)("Configure default settings for Pro Mosaic display type","nggallery")},{id:"photocrati-nextgen_pro_thumbnail_grid",label:(0,de.__)("Pro Thumbnail Grid","nggallery"),description:(0,de.__)("Configure default settings for Pro Thumbnail Grid display type","nggallery")},{id:"photocrati-nextgen_pro_blog_gallery",label:(0,de.__)("Pro Blog Style","nggallery"),description:(0,de.__)("Configure default settings for Pro Blog Style display type","nggallery")},{id:"photocrati-nextgen_pro_imagebrowser",label:(0,de.__)("Pro ImageBrowser","nggallery"),description:(0,de.__)("Configure default settings for Pro ImageBrowser display type","nggallery")},{id:"photocrati-nextgen_pro_sidescroll",label:(0,de.__)("Pro Sidescroll","nggallery"),description:(0,de.__)("Configure default settings for Pro Sidescroll display type","nggallery")},{id:"photocrati-nextgen_pro_tile",label:(0,de.__)("Pro Tile","nggallery"),description:(0,de.__)("Configure default settings for Pro Tile display type","nggallery")},{id:"photocrati-nextgen_pro_masonry",label:(0,de.__)("Pro Masonry","nggallery"),description:(0,de.__)("Configure default settings for Pro Masonry display type","nggallery")},{id:"imagely-pro-search",label:(0,de.__)("Pro Search","nggallery"),description:(0,de.__)("Configure default settings for Pro Search display type","nggallery")},{id:"photocrati-nextgen_pro_horizontal_filmstrip",label:(0,de.__)("Pro Horizontal Filmstrip","nggallery"),description:(0,de.__)("Configure default settings for Pro Horizontal Filmstrip display type","nggallery")},{id:"photocrati-nextgen_pro_slideshow",label:(0,de.__)("Pro Slideshow","nggallery"),description:(0,de.__)("Configure default settings for Pro Slideshow display type","nggallery")}];const dg=function(e){var t=e.tabId,n=e.currentDisplayType,r=e.onInputChange,a=e.onReset,l=e.isResetting,i=mg.find(function(e){return e.id===t}),o="pro"===nr;return n?J().createElement("div",{className:"display-type-settings relative"},J().createElement(ki,{title:(null==i?void 0:i.label)||"",defaultExpanded:!0},J().createElement("div",{className:"space-y-4"},function(){var e={formState:n.settings,handleInputChange:r},a=J().createElement("div",{className:"text-center text-gray-500 py-8"},(0,de.__)("This layout requires NextGen Gallery Pro.","nggallery"));switch(t){case"photocrati-nextgen_basic_thumbnails":return J().createElement(Zi,e);case"photocrati-nextgen_basic_slideshow":return J().createElement(Vi,e);case"photocrati-nextgen_basic_imagebrowser":return J().createElement(no,e);case"photocrati-nextgen_basic_tagcloud":return J().createElement(ao,e);case"photocrati-nextgen_pro_thumbnail_grid":return o?J().createElement(to,e):a;case"photocrati-nextgen_pro_blog_gallery":return o?J().createElement(lo,e):a;case"photocrati-nextgen_pro_imagebrowser":return o?J().createElement(io,e):a;case"photocrati-nextgen_pro_sidescroll":return o?J().createElement(oo,e):a;case"photocrati-nextgen_pro_film":return o?J().createElement(so,e):a;case"photocrati-nextgen_pro_tile":return o?J().createElement(co,e):a;case"photocrati-nextgen_pro_mosaic":return o?J().createElement(uo,e):a;case"photocrati-nextgen_pro_masonry":return o?J().createElement(mo,e):a;case"imagely-pro-search":return o?J().createElement(go,e):a;case"photocrati-nextgen_pro_horizontal_filmstrip":return o?J().createElement(po,e):a;case"photocrati-nextgen_pro_slideshow":return o?J().createElement(fo,e):a;default:return J().createElement("div",{className:"text-center text-gray-500 py-8"},(0,de.__)("No settings available for this display type.","nggallery"))}}())),J().createElement("button",{type:"button",onClick:a,disabled:l,className:"text-sm text-gray-500 hover:text-gray-700 disabled:opacity-50 underline absolute top-4 right-11 z-10"},l?(0,de.__)("Resetting...","nggallery"):(0,de.__)("Reset to defaults","nggallery"))):null},gg=function(e){var t=e.activeTab,n=e.onTabChange,r=e.availableLayouts,a=void 0===r?[]:r,l=mg.filter(function(e){return 0===a.length||a.includes(e.id)});return J().createElement("div",{className:"bg-white rounded-lg shadow-sm p-4"},J().createElement("nav",{className:"space-y-2"},l.map(function(e){var r=t===e.id;return J().createElement("button",{key:e.id,onClick:function(){return n(e.id)},className:"w-full flex items-center justify-between p-3 text-left rounded-lg transition-colors ".concat(r?"bg-green-50 text-green-700 font-medium border border-green-200":"text-gray-600 hover:bg-gray-50 hover:text-gray-900")},J().createElement("span",{className:"text-sm"},e.label))})))};function pg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function fg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pg(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pg(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}const yg=function(){var e,t=zl(),r=t.currentTab,a=t.setCurrentTab,l=gm(),i=l.data,o=void 0===i?{}:i,s=l.isLoading,c=l.error,u=ea(),m=u.showSuccess,d=u.showError,g=function(){var e,t,r=te();return Mr({mutationFn:(t=Er(Nr().mark(function e(t){var n,r,a,l,i,o;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.name,a=t.settings,l=null===(n=window.imagelyApp)||void 0===n?void 0:n.nonce,i=ka(a),e.next=5,Fr()({path:"/imagely/v1/display-types/".concat(r),method:"PUT",headers:{"X-WP-Nonce":l},data:{settings:i}});case 5:return o=e.sent,e.abrupt("return",o.display_type);case 7:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),onMutate:(e=Er(Nr().mark(function e(t){var a,l,i;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,l=t.settings,e.next=3,r.cancelQueries({queryKey:["display-types"]});case 3:return(i=r.getQueryData(["display-types"]))&&i[a]&&r.setQueryData(["display-types"],dm(dm({},i),{},n({},a,dm(dm({},i[a]),{},{settings:dm(dm({},i[a].settings),l)})))),e.abrupt("return",{previous:i});case 6:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),onError:function(e,t,n){null!=n&&n.previous&&r.setQueryData(["display-types"],n.previous)},onSettled:function(){r.invalidateQueries({queryKey:["display-types"]})}})}(),p=function(){var e,t=te();return Mr({mutationFn:(e=Er(Nr().mark(function e(t){var n,r,a;return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=null===(n=window.imagelyApp)||void 0===n?void 0:n.nonce,e.next=3,Fr()({path:"/imagely/v1/display-types/".concat(t,"/reset"),method:"POST",headers:{"X-WP-Nonce":r}});case 3:return a=e.sent,e.abrupt("return",a.display_type);case 5:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)}),onSuccess:function(e,r){t.setQueryData(["display-types"],function(t){return t?dm(dm({},t),{},n({},r,e)):t})},onSettled:function(){t.invalidateQueries({queryKey:["display-types"]})}})}(),f=function(){var e=te();return(0,Z.useCallback)(function(t,r,a){e.setQueryData(["display-types"],function(e){return e&&e[t]?dm(dm({},e),{},n({},t,dm(dm({},e[t]),{},{settings:dm(dm({},e[t].settings),{},n({},r,a))}))):e})},[e])}(),y=(0,me.useDispatch)(tr),h=hr((0,Z.useState)(!1),2),_=h[0],b=h[1],v=function(e){var t=["photocrati-nextgen_basic_slideshow","photocrati-nextgen_basic_thumbnails","photocrati-nextgen_basic_imagebrowser","photocrati-nextgen_basic_tagcloud"],n=[].concat(t,["photocrati-nextgen_pro_film","photocrati-nextgen_pro_mosaic"]),r=[].concat(zr(n),["photocrati-nextgen_pro_thumbnail_grid","photocrati-nextgen_pro_blog_gallery","photocrati-nextgen_pro_imagebrowser","photocrati-nextgen_pro_sidescroll","photocrati-nextgen_pro_tile","photocrati-nextgen_pro_masonry","imagely-pro-search","photocrati-nextgen_pro_horizontal_filmstrip","photocrati-nextgen_pro_slideshow"]);switch(e){case"pro":case"plus":return r;case"starter":return n;default:return t}}((null===(e=window.imagelyApp)||void 0===e?void 0:e.proTypeInstalled)||"lite"),x=mg.filter(function(e){return v.includes(e.id)}),w=(0,Z.useRef)(null),E=o[r];(0,Z.useEffect)(function(){if(!x.map(function(e){return e.id}).includes(r)){var e,t=(null===(e=x[0])||void 0===e?void 0:e.id)||"photocrati-nextgen_basic_thumbnails";a(t)}},[r,a,x]),(0,Z.useEffect)(function(){return function(){w.current&&clearTimeout(w.current)}},[]),(0,Z.useEffect)(function(){w.current&&(clearTimeout(w.current),w.current=null)},[r]);var C=(0,Z.useCallback)(function(){var e=Er(Nr().mark(function e(t,n){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.mutateAsync({name:t,settings:n});case 3:m((0,de.__)("Display type settings updated successfully!","nggallery")),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),d((0,de.__)("Failed to update display type settings. Please try again.","nggallery")),console.error("Error updating display type settings:",e.t0);case 10:case"end":return e.stop()}},e,null,[[0,6]])}));return function(t,n){return e.apply(this,arguments)}}(),[g,m,d]),N=(0,Z.useCallback)(function(e){var t=e.target,a=t.name,l=t.value,i=l;if("type"in e.target){var o=e.target;"checkbox"===o.type?i=o.checked:"number"===o.type&&(i=parseInt(l)||0)}f(r,a,i),w.current&&clearTimeout(w.current);var s=r,c=null==E?void 0:E.settings;w.current=setTimeout(function(){var e=fg(fg({},c),{},n({},a,i));C(s,e)},1e3)},[r,f,null==E?void 0:E.settings,C]),k=(0,Z.useCallback)(Er(Nr().mark(function e(){return Nr().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(E){e.next=2;break}return e.abrupt("return");case 2:return b(!0),e.prev=3,e.next=6,p.mutateAsync(r);case 6:m((0,de.__)("Display type reset to defaults","nggallery")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),d((0,de.__)("Failed to reset display type","nggallery"));case 12:return e.prev=12,b(!1),e.finish(12);case 15:case"end":return e.stop()}},e,null,[[3,9,12,15]])})),[E,r,p,m,d]);return s?J().createElement(ar,{size:"md",text:(0,de.__)("Loading display type settings...","nggallery")}):c?J().createElement("div",{className:"text-red-500"},"Error loading display types: ",c.message):J().createElement("div",null,J().createElement("div",{className:"mb-4"},J().createElement("button",{onClick:function(){y.navigateTo("imagely-settings","license")},className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors"},J().createElement(qn,{className:"h-5 w-5"}),J().createElement("span",{className:"text-sm font-medium"},(0,de.__)("Back to Settings","nggallery")))),J().createElement(Od,{currentTab:r,onTabChange:function(e){var t=e;v.includes(t)?a(t):y.setActiveModal("upgrade",{feature:"layout settings"})},sidebarComponent:function(e){return J().createElement(gg,ge({},e,{availableLayouts:v}))}},J().createElement(dg,{tabId:r,currentDisplayType:E,onInputChange:N,onReset:k,isResetting:_})))};function hg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hg(Object(r),!0).forEach(function(t){n(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hg(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function bg(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return vg(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vg(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){o=!0,l=e},f:function(){try{i||null==n.return||n.return()}finally{if(o)throw l}}}}function vg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const xg=function(){var e,t,n=(0,me.useSelect)(function(e){return{currentPage:e(tr).getCurrentPage()}},[]).currentPage,r=(0,me.useDispatch)(tr);(0,Z.useEffect)(function(){var e=function(){se(!0);try{var e=new URLSearchParams(window.location.search),t=e.get("page")||"imagely",n=e.get("tab")||"general",a=e.get("subtab")||null,l=e.get("id")?Number(e.get("id")):null;r.setRouterState(t,n,a,l)}finally{setTimeout(function(){se(!1)},0)}};return window.addEventListener("popstate",e),function(){window.removeEventListener("popstate",e)}},[r.setRouterState]),(0,Z.useEffect)(function(){var e,t,a,l,i=function(e){var t,n,a,l,i=e.target,o=i.getAttribute("href");if(!(null!=o&&o.includes("imagely.com/lite")||i.closest("li.imagely-sidebar-upgrade-pro"))){e.preventDefault(),e.stopPropagation(),null===(t=document.querySelector("#toplevel_page_imagely a.current"))||void 0===t||t.classList.remove("current"),null===(n=document.querySelector("#toplevel_page_imagely li.current"))||void 0===n||n.classList.remove("current");var s=new URLSearchParams(null==o?void 0:o.split("?")[1]),c=null!==(a=s.get("page"))&&void 0!==a?a:"imagely";i.classList.add("current"),null===(l=i.parentElement)||void 0===l||l.classList.add("current"),i.blur(),r.setCurrentPage(c),r.setCurrentTab("general"),r.setCurrentId(null),setTimeout(function(){var e=new URLSearchParams(window.location.search);s.forEach(function(t,n){"page"!==n&&"tab"!==n&&"id"!==n&&e.set(n,t)});var t="".concat(window.location.pathname,"?").concat(e.toString());t!==window.location.href&&(window.history.replaceState({},"",t),window.dispatchEvent(new Event("imagely-navigation")))},10)}},o=document.querySelectorAll("#toplevel_page_imagely a"),s=bg(o);try{for(s.s();!(l=s.n()).done;)l.value.addEventListener("click",i)}catch(e){s.e(e)}finally{s.f()}null===(e=document.querySelector("#toplevel_page_imagely a.current"))||void 0===e||e.classList.remove("current"),null===(t=document.querySelector("#toplevel_page_imagely li.current"))||void 0===t||t.classList.remove("current");var c=document.querySelector('#toplevel_page_imagely ul.wp-submenu-wrap li a[href*="page='.concat(n,'"]'));return null==c||c.classList.add("current"),null==c||null===(a=c.parentElement)||void 0===a||a.classList.add("current"),function(){var e,t=bg(o);try{for(t.s();!(e=t.n()).done;)e.value.removeEventListener("click",i)}catch(e){t.e(e)}finally{t.f()}}},[n,r.setCurrentPage,r.setCurrentTab,r.setCurrentId]);var a="pro"===(null===(e=window.imagelyApp)||void 0===e?void 0:e.proTypeInstalled),l=_g(_g({imagely:{title:(0,de.__)("Galleries","nextgen-gallery"),component:React.createElement(Sd,null)},"imagely-add-new":{title:(0,de.__)("Add New Gallery","nextgen-gallery"),component:React.createElement(Iu,null)},"imagely-albums":{title:(0,de.__)("Albums","nextgen-gallery"),component:React.createElement(Om,null)},"imagely-tags":{title:(0,de.__)("Tags","nextgen-gallery"),component:React.createElement(ug,null)}},a&&{"imagely-ecommerce":{title:(0,de.__)("eCommerce","nextgen-gallery"),component:React.createElement(bd,null)}}),{},{"imagely-settings":{title:(0,de.__)("Settings","nextgen-gallery"),component:React.createElement($d,null)},"imagely-layout-settings":{title:(0,de.__)("Layout Settings","nextgen-gallery"),component:React.createElement(yg,null)},"imagely-about-us":{title:(0,de.__)("About Us","nextgen-gallery"),component:React.createElement(yi,null)}});(0,Z.useEffect)(function(){"imagely-ecommerce"!==n||a||(r.setCurrentPage("imagely"),r.setCurrentTab("general"))},[n,a,r.setCurrentPage,r.setCurrentTab]);var i=(null===(t=l[n])||void 0===t?void 0:t.component)||React.createElement(Sd,null);return React.createElement(ae,null,React.createElement(br,null),React.createElement(pr,null),React.createElement("div",{className:"p-4 md:p-6 lg:p-8"},i),React.createElement(dr,null),React.createElement(gi,null),React.createElement(rr,null),React.createElement(fi,null),React.createElement(lr,null))};var wg=document.getElementById("imagely-admin-app");if(!wg)throw console.error("Root element not found"),new Error("Root element not found");(0,e.H)(wg).render(React.createElement(xg,null))})()})();